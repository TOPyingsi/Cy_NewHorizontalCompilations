System.register("chunks:///_virtual/40_LBL_Bundle",["./LBL_AudioManager.ts","./LBL_ColliderType.ts","./LBL_ComicController.ts","./LBL_Const.ts","./LBL_CoordinateDisplay.ts","./LBL_DataManager.ts","./LBL_GameManager.ts","./LBL_GameUI.ts","./LBL_ILevelData.ts","./LBL_PHY_GROUP.ts","./LBL_PlayerController.ts","./LBL_PointData.ts","./LBL_Powerpoint.ts","./LBL_SaveData.ts","./LBL_AStar.ts","./LBL_AStarNode.ts","./LBL_BinaryHeap.ts","./LBL_Door.ts","./LBL_MonsterController.ts","./LBL_PathManager.ts","./LBL_Waypoint.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/LBL_AStar.ts",["cc","./LBL_BinaryHeap.ts"],(function(t){var n,o,e;return{setters:[function(t){n=t.cclegacy,o=t.Vec3},function(t){e=t.LBL_BinaryHeap}],execute:function(){n._RF.push({},"ef0b2I9s9xAhJOrUBUdoCc4","LBL_AStar",void 0);class s{constructor(t){this.waypoint=void 0,this.parent=null,this.gCost=0,this.hCost=0,this.waypoint=t}get fCost(){return this.gCost+this.hCost}}t("LBL_AStarNode",s);t("LBL_AStar",class{static createNode(t){return new s(t)}findPath(t,n){const a=new e,r=new Set,i=new Map,c=new s(t),p=new s(n);for(i.set(t,c),a.push(c);a.count>0;){const t=a.pop();if(!t)break;if(r.add(t.waypoint),t.waypoint===p.waypoint)return this.retracePath(c,t);t.waypoint.connectedWaypoints.forEach((n=>{if(!n||r.has(n))return;const e=t.gCost+o.distance(t.waypoint.node.worldPosition,n.node.worldPosition);let c=i.get(n);c||(c=new s(n),i.set(n,c)),(e<c.gCost||!a.contains(c))&&(c.gCost=e,c.hCost=this.calculateHCost(n,p.waypoint),c.parent=t,a.contains(c)?a.updateNode(c):a.push(c))}))}return null}calculateHCost(t,n){return o.distance(t.node.worldPosition,n.node.worldPosition)}retracePath(t,n){const o=[];let e=n;for(;e!==t&&e;)o.push(e.waypoint),e=e.parent;return o.push(t.waypoint),o.reverse(),o}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_AStarNode.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"7c959rrttVLkpCYHKNUaRku","LBL_AStarNode",void 0);t("LBL_AStarNode",class{constructor(t){this.waypoint=void 0,this.parent=null,this.gCost=0,this.hCost=0,this.waypoint=t}get fCost(){return this.gCost+this.hCost}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_AudioManager.ts",["cc","./BundleManager.ts"],(function(u){var o,i,l,e;return{setters:[function(u){o=u.cclegacy,i=u._decorator,l=u.AudioClip},function(u){e=u.BundleManager}],execute:function(){var a,c;o._RF.push({},"28669SveD5MU6G4Qz3NXoGc","LBL_AudioManager",void 0);const{ccclass:t,property:d}=i;u("LBL_AudioManager",t("LBL_AudioManager")(((c=class u{static globalAudioPlay(o,i=1){u.AudioMap.get(o)&&(u.SoundAudioSource.volume=i,u.SoundAudioSource.playOneShot(u.AudioMap.get(o)))}static setDefaultClip(o){u.DefaultClip=o}static playDefaultClip(){let o=u.MusicAudioSource;if(o.clip){var i;if((null==(i=o.clip)?void 0:i.name)==u.DefaultClip.name&&o.playing)return;o.stop(),o.clip=u.DefaultClip,o.loop=!0,o.play()}else o.clip=u.DefaultClip,o.loop=!0,o.play()}static playLoopAudio(o,i=!1){let l=u.MusicAudioSource;l.clip.name==o&&l.playing||(l.stop(),l.clip=u.AudioMap.get(o),l.loop=!0,l.play())}static StopLoopAudio(o){u.MusicAudioSource.clip.name==o&&u.MusicAudioSource.stop()}static Init(){this.MusicAudioSource&&(u.MusicAudioSource.volume=.7),this.SoundAudioSource&&(u.SoundAudioSource.volume=1),u.AudioMap=new Map,u.AudioClipName.forEach((o=>{e.GetBundle("40_LBL_Bundle").load("Audio/"+o,l,((i,l)=>{i||u.AudioMap.has(o)||u.AudioMap.set(o,l)}))}))}static clear(){u.MusicAudioSource=null,u.SoundAudioSource=null,u.AudioMap=null}}).MusicAudioSource=null,c.SoundAudioSource=null,c.AudioMap=void 0,c.DefaultClip=null,c.AudioClipName=[],a=c))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_BinaryHeap.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"8a948rOFMNB7Zs8WHUvIR2e","LBL_BinaryHeap",void 0);e("LBL_BinaryHeap",class{constructor(){this.elements=[]}get count(){return this.elements.length}push(e){this.elements.push(e);let t=this.elements.length-1;for(;t>0;){const e=Math.floor((t-1)/2);if(this.elements[t].fCost>=this.elements[e].fCost)break;this.swap(t,e),t=e}}pop(){if(0===this.elements.length)return;const e=this.elements[0],t=this.elements.length-1;this.elements[0]=this.elements[t],this.elements.pop();let s=0;for(;;){const e=2*s+1,t=2*s+2;let n=s;if(e<this.elements.length&&this.elements[e].fCost<this.elements[n].fCost&&(n=e),t<this.elements.length&&this.elements[t].fCost<this.elements[n].fCost&&(n=t),n===s)break;this.swap(s,n),s=n}return e}swap(e,t){const s=this.elements[e];this.elements[e]=this.elements[t],this.elements[t]=s}contains(e){return this.elements.includes(e)}updateNode(e){const t=this.elements.indexOf(e);if(-1===t)return;let s=t;for(;s>0;){const e=Math.floor((s-1)/2);if(this.elements[s].fCost>=this.elements[e].fCost)break;this.swap(s,e),s=e}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_ColliderType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"74c29Ctbt9J0ZG7yQDxeaFh","LBL_ColliderType",void 0);class o{}e("LBL_ColliderType",o),o.Monster="monster",o.Point="point",o.Door="door",t._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_ComicController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts"],(function(i){var t,e,a,n,o,r,s,l,c,h,u,m,d;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){a=i.cclegacy,n=i.Node,o=i.SpriteFrame,r=i.JsonAsset,s=i._decorator,l=i.Component,c=i.Sprite,h=i.Label,u=i.UIOpacity,m=i.tween},function(i){d=i.BundleManager}],execute:function(){var p,g,b,y,f,v,T,k,F,C,A,D,N,S,L,x,I,R,P,_,w,O,E;a._RF.push({},"ddbfbSUYn1Fxapz/xITJ81K","LBL_ComicController",void 0);const{ccclass:B,property:$}=s;var z=function(i){return i.START="start",i.END="end",i.DEATH="death",i}(z||{});i("LBL_ComicController",(p=B("LBL_ComicController"),g=$({type:n}),b=$({type:n,tooltip:"带有Sprite组件的幻灯片节点"}),y=$({type:n,tooltip:"黑色全屏背景节点"}),f=$({type:n,tooltip:"对话框节点"}),v=$({type:n,tooltip:"对话头像子节点"}),T=$({type:n,tooltip:"对话内容子节点"}),k=$({type:o,tooltip:"头像SpriteFrame数组"}),F=$(n),C=$({type:n}),A=$(r),p((S=t((N=class extends l{constructor(...i){super(...i),e(this,"comicPanel",S,this),e(this,"comicNode",L,this),e(this,"backgroundNode",x,this),e(this,"dialogNode",I,this),e(this,"avatarNode",R,this),e(this,"contentNode",P,this),e(this,"avatarSprites",_,this),e(this,"darkMask",w,this),e(this,"skipButton",O,this),e(this,"comicData",E,this),this.currentType=null,this.currentLevel=0,this.levelConfig=null,this.currentAnimationType=null,this.currentFrameIndex=0,this.currentDialogIndex=0,this.isPlaying=!1,this.loadRequests=[],this.frameSprites={},this.animationCallback=null,this.dialogTimer=0,this.frameTimer=0,this.comicSprite=null,this.avatarSprite=null,this.contentLabel=null,this.comicOpacity=null,this.backgroundOpacity=null,this.boundDialogTimer=null,this.boundFrameTimer=null,this.isAbortLoadCallback=!1,this.levelConfigs=[]}onLoad(){this.comicSprite=this.comicNode.getComponent(c),this.avatarSprite=this.avatarNode.getComponent(c),this.contentLabel=this.contentNode.getComponent(h),this.comicOpacity=this.comicNode.getComponent(u),this.backgroundOpacity=this.backgroundNode.getComponent(u),this.comicNode.active=!1,this.backgroundNode.active=!1,this.dialogNode.active=!1,this.loadRequests=[];let i=[];this.comicData.forEach((t=>{i.push(t.json)})),this.initData(i)}initData(i){this.levelConfigs=i;for(const t of i){const i=t.level;console.log("漫画配置:",t),this.levelConfig=t;(async()=>{try{await Promise.all([this.loadFrame(i,z.START,1,!0),this.loadFrame(i,z.END,1,!0),this.loadFrame(i,z.DEATH,1,!0)]),console.log(`关卡${i}漫画控制器初始化完成`)}catch(i){console.error("预加载第一帧失败:",i)}})()}}init(i,t){this.currentLevel=i;d.GetBundle("40_LBL_Bundle").load(`Data/comic_config_level_${i}`,((e,a)=>{if(e)return console.error(`加载关卡${i}漫画配置失败:`,e),void(null==t||t());console.log("漫画配置:",a.json),this.levelConfig=a.json;(async()=>{try{await Promise.all([this.loadFrame(1,z.START,1,!0),this.loadFrame(i,z.END,1,!0),this.loadFrame(i,z.DEATH,1,!0)]),console.log(`关卡${i}漫画控制器初始化完成`),null==t||t()}catch(i){console.error("预加载第一帧失败:",i),null==t||t()}})()}))}playStartAnimation(i,t){this.initPanel(),this.darkMask.active=!0,this.playAnimation(i,z.START,t)}playEndAnimation(i,t){this.initPanel(),this.playAnimation(i,z.END,t,!0)}playDeathAnimation(i,t){this.initPanel(),this.playAnimation(i,z.DEATH,t,!0)}initPanel(){this.comicPanel.active=!0,this.comicNode.active=!0,this.comicOpacity.opacity=0,this.backgroundNode.active=!0,this.backgroundOpacity.opacity=0,this.dialogNode.active=!1}skipAnimation(){var i;this.isPlaying&&(this.unscheduleAllCallbacks(),this.isAbortLoadCallback=!0,this.loadRequests=[],this.isPlaying=!1,this.currentAnimationType==z.DEATH||this.currentAnimationType==z.END?(this.comicNode.active=!1,this.backgroundNode.active=!1,this.dialogNode.active=!1,this.comicPanel.active=!1,null==(i=this.animationCallback)||i.call(this),this.darkMask.active=!1,this.animationCallback=null,this.isAbortLoadCallback=!1,this.releaseAnimationResources()):(m(this.comicOpacity).to(.3,{opacity:0}).call((()=>{this.comicNode.active=!1})).start(),m(this.backgroundOpacity).to(.3,{opacity:0}).call((()=>{var i;this.backgroundNode.active=!1,this.dialogNode.active=!1,this.comicPanel.active=!1,null==(i=this.animationCallback)||i.call(this),this.darkMask.active=!1,this.animationCallback=null,this.isAbortLoadCallback=!1,this.releaseAnimationResources()})).start()))}async playAnimation(i,t,e,a=!1){this.skipButton.on(n.EventType.TOUCH_END,this.skipAnimation,this),this.isPlaying&&this.skipAnimation(),t!=z.DEATH&&t!=z.START||(i=1),this.levelConfig=this.levelConfigs.find((t=>t.level===i)),this.isAbortLoadCallback=!1,this.isPlaying=!0,this.currentAnimationType=t,this.currentFrameIndex=1,this.currentDialogIndex=0,this.animationCallback=e,this.loadRequests=[];const o=this.levelConfig?this.levelConfig[t]:null;if(!o)return console.error(`未找到关卡${i}的${t}动画配置`),void this.finishAnimation();if(i!==this.currentLevel||!this.frameSprites[this.getFrameKey(i,t,1)])try{await this.loadFrame(i,t,1,!0)}catch(i){return console.error("加载第一帧失败:",i),void this.finishAnimation()}const r=this.getFrameKey(i,t,1);this.comicSprite.spriteFrame=this.frameSprites[r],a?(m(this.backgroundOpacity).to(.5,{opacity:255}).start(),m(this.comicOpacity).to(.5,{opacity:255}).call((()=>{this.processCurrentFrame(i,o)})).start()):(this.backgroundOpacity.opacity=255,this.comicOpacity.opacity=255,this.processCurrentFrame(i,o))}processCurrentFrame(i,t){const e=t.frames[this.currentFrameIndex-1];if(!e)return console.error(`未找到第${this.currentFrameIndex}帧的数据`),void this.nextFrame(i,t);e.dialogs.length>0?(this.dialogNode.active=!0,this.showCurrentDialog(e.dialogs),this.boundDialogTimer&&(this.unschedule(this.boundDialogTimer),this.boundDialogTimer=null),this.boundDialogTimer=this.onDialogTimer.bind(this,i,t),this.schedule(this.boundDialogTimer,.8,e.dialogs.length-1,0)):(this.dialogNode.active=!1,this.boundFrameTimer&&(this.unschedule(this.boundFrameTimer),this.boundFrameTimer=null),this.boundFrameTimer=this.onFrameTimer.bind(this,i,t),this.scheduleOnce(this.boundFrameTimer,.8)),this.currentFrameIndex<t.frameCount&&this.loadFrame(i,this.currentAnimationType,this.currentFrameIndex+1).catch((i=>console.warn(`预加载第${this.currentFrameIndex+1}帧失败:`,i)))}showCurrentDialog(i){if(this.currentDialogIndex>=i.length)return;const t=i[this.currentDialogIndex];0!==t.iconID?(this.avatarSprite.spriteFrame=this.avatarSprites[t.iconID-1]||this.avatarSprites[0],this.avatarSprite.node.active=!0):this.avatarSprite.node.active=!1,this.contentLabel.string=t.content}onDialogTimer(i,t){this.currentDialogIndex++;const e=t.frames[this.currentFrameIndex-1];this.currentDialogIndex<e.dialogs.length?this.showCurrentDialog(e.dialogs):this.nextFrame(i,t)}onFrameTimer(i,t){this.nextFrame(i,t)}nextFrame(i,t){if(this.boundDialogTimer&&(this.unschedule(this.boundDialogTimer),this.boundDialogTimer=null),this.boundFrameTimer&&(this.unschedule(this.boundFrameTimer),this.boundFrameTimer=null),this.currentDialogIndex=0,this.currentFrameIndex++,this.currentFrameIndex>t.frameCount)return void this.finishAnimation();const e=this.getFrameKey(i,this.currentAnimationType,this.currentFrameIndex),a=this.frameSprites[e];a?(this.comicSprite.spriteFrame=a,this.processCurrentFrame(i,t)):(console.error(`第${this.currentFrameIndex}帧资源未加载`),this.finishAnimation())}finishAnimation(){var i;this.skipButton.off(n.EventType.TOUCH_END,this.skipAnimation,this),this.darkMask.active=!1,this.unscheduleAllCallbacks(),this.boundDialogTimer=null,this.boundFrameTimer=null,this.comicOpacity.opacity=0,this.comicNode.active=!1,this.backgroundOpacity.opacity=0,this.backgroundNode.active=!1,this.dialogNode.active=!1,this.comicPanel.active=!1,this.isPlaying=!1,null==(i=this.animationCallback)||i.call(this),this.animationCallback=null,this.releaseAnimationResources(!0)}loadFrame(i,t,e,a=!1){return new Promise(((a,n)=>{const r=this.getFrameKey(i,t,e),s="Sprites/"+`comics/level_${i}/${t}/${e}/spriteFrame`;if(this.frameSprites[r])return void a();this.loadRequests.find((i=>i.path===s))?a():(d.GetBundle("40_LBL_Bundle").load(s,o,((i,t)=>{if(i)return console.error(i);this.isAbortLoadCallback?this.loadRequests=this.loadRequests.filter((i=>i.path!==s)):(this.loadRequests=this.loadRequests.filter((i=>i.path!==s)),this.frameSprites[r]=t,a())})),this.loadRequests.push({path:s}))}))}getFrameKey(i,t,e){return`${i}_${t}_${e}`}releaseAnimationResources(i=!1){this.currentAnimationType&&this.currentLevel&&Object.keys(this.frameSprites).forEach((t=>{const e=t.split("_");if(e.length>=3&&parseInt(e[0])===this.currentLevel&&e[1]===this.currentAnimationType){const a=parseInt(e[2]);if(i&&1===a)return;delete this.frameSprites[t]}}))}onDestroy(){this.isAbortLoadCallback=!0,this.loadRequests=[],this.frameSprites={},this.unscheduleAllCallbacks()}}).prototype,"comicPanel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(N.prototype,"comicNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(N.prototype,"backgroundNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(N.prototype,"dialogNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(N.prototype,"avatarNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(N.prototype,"contentNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"avatarSprites",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(N.prototype,"darkMask",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(N.prototype,"skipButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(N.prototype,"comicData",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=N))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_Const.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"be54d1WTzZI7pySEr/MCn6t","LBL_Const",void 0);class a{}e("LBL_Const",a),a.EventName={StartGame:"LBL_StartGame",PassGame:"LBL_PassGame",GameOver:"LBL_GameOver",BackToSelete:"LBL_BackToSelete",ShowPointTip:"LBL_ShowPointTip"},t._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_CoordinateDisplay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LBL_DataManager.ts"],(function(t){var e,i,a,r,o,n,s,l,d,c,u,h,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,r=t.Camera,o=t.Node,n=t.Prefab,s=t._decorator,l=t.Component,d=t.Vec3,c=t.Vec2,u=t.instantiate,h=t.UITransform},function(t){p=t.LBL_DataManager}],execute:function(){var g,P,m,f,y,w,C,N,b;a._RF.push({},"9074dNOvDFApaU90bVlVtwN","LBL_CoordinateDisplay",void 0);const{ccclass:I,property:v}=s;t("LBL_CoordinateDisplay",(g=I("LBL_CoordinateDisplay"),P=v(r),m=v(o),f=v(n),g((C=e((w=class extends l{constructor(...t){super(...t),i(this,"playerCamera",C,this),i(this,"canvasNode",N,this),i(this,"targetPrefab",b,this),this.targetPoints=new Map,this.targetUIElements=new Map,this.frameCount=0}start(){this.playerCamera||(this.playerCamera=this.node.getComponent(r))}updateTargetNodes(t){const e=t.map((t=>t.uuid));this.targetPoints.forEach(((t,i)=>{e.includes(i)||this.removeTargetPoint(i)})),t.forEach((t=>{this.addOrUpdateTargetNode(t)}))}addOrUpdateTargetNode(t){const e=t.uuid;if(this.targetPoints.has(e)){this.targetPoints.get(e).targetNode=t}else{this.targetPoints.set(e,{id:e,targetNode:t,worldPosition:new d,isVisible:!1,uiPosition:new c});const i=u(this.targetPrefab);i.parent=this.canvasNode,i.active=!1,this.targetUIElements.set(e,i)}this.updateTargetNodePosition(e)}removeTargetPoint(t){if(this.targetPoints.delete(t),this.targetUIElements.has(t)){this.targetUIElements.get(t).destroy(),this.targetUIElements.delete(t)}}updateTargetNodePosition(t){const e=this.targetPoints.get(t);e&&e.targetNode&&(e.worldPosition=e.targetNode.worldPosition)}update(t){p.Instance.isGameStart&&(this.updateTargetNodes(p.Instance.currentPointNodes),this.frameCount++,this.frameCount%1==0&&(this.frameCount=0,this.targetPoints.forEach(((t,e)=>{const i=this.worldToScreenPoint(t.worldPosition),a=this.isPointInViewport(i);t.isVisible=a,t.uiPosition=i;const r=this.targetUIElements.get(e);r&&(r.active=a,a&&this.updateUIElementPosition(r,i))}))))}worldToScreenPoint(t){if(!this.isPointInFrontOfCamera(t))return new c(-9999,-9999);let e=new d;return this.playerCamera.convertToUINode(t,this.canvasNode,e),new c(e.x,e.y)}isPointInFrontOfCamera(t){const e=this.playerCamera.node.forward.clone(),i=this.playerCamera.node.worldPosition,a=new d(t.x-i.x,t.y-i.y,t.z-i.z);return d.dot(e,a)>0}isPointInViewport(t){return!0}updateUIElementPosition(t,e){t.getComponent(h)&&t.setPosition(e.x,e.y)}}).prototype,"playerCamera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(w.prototype,"canvasNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(w.prototype,"targetPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=w))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_DataManager.ts",["cc","./EventManager.ts","./LBL_Const.ts"],(function(t){var e,s,i,n,r;return{setters:[function(t){e=t.cclegacy,s=t._decorator,i=t.RigidBody},function(t){n=t.EventManager},function(t){r=t.LBL_Const}],execute:function(){var a,l;e._RF.push({},"9f26bX8heNI4KS1ArYyE45c","LBL_DataManager",void 0);const{ccclass:o,property:h}=s;t("LBL_DataManager",o("LBL_DataManager")(((l=class t{constructor(){this.STORAGE_KEY="LBL_Data",this.isGameStart=!1,this.isGuidanding=!1,this.isStartToLightDownCount=!1,this.currentStepIndex=0,this.isMove=!1,this.delta=null,this.isScream=!1,this.isFlashlight=!0,this.isLightCanOpen=!0,this.isScaning=!1,this.currentTargetPos=null,this.currentPlayerPos=null,this.itemFloorNumber=1,this.isPlayerDead=!1,this.currentPointNodes=[],this.isGetIcon=!1,this.currentLevelParentNode=null,this.levelData={},this.currentPoints={level:1,round:1},this.passLevels=[]}static get Instance(){return t.instance||(t.instance=new t),t.instance}clearData(){this.passLevels=[],this.currentPoints.level=1,this.currentPoints.round=1}initData(t){this.levelData=t;for(let t in this.levelData)for(let e in this.levelData[t].round)for(let s in this.levelData[t].round[e])this.levelData[t].round[e][s].isGot=!1}initcurrentLevel(){this.initData(this.levelData),this.currentPoints.round=1}initlevelData(t){this.initData(t);const e=localStorage.getItem(this.STORAGE_KEY);let s;e?(s=JSON.parse(e),this.passLevels=s.passLevels,this.passLevels.length>4?this.currentPoints.level=4:this.currentPoints.level=this.passLevels.length+1,this.currentPoints.round=1):(this.passLevels=[],this.currentPoints.level=1,this.currentPoints.round=1,this.saveData())}getCurrentIconIds(){let t=[],e=this.currentPoints.level;for(let s in this.levelData[e].round)for(let i in this.levelData[e].round[s])this.levelData[e].round[s][i].iconId&&this.levelData[e].round[s][i].isGot&&t.push(this.levelData[e].round[s][i].iconId);return t}saveData(){let t={passLevels:this.passLevels};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}checkPassRound(){let t=this.currentPoints.level,e=this.currentPoints.round;for(let s in this.levelData[t].round[e])if(!this.levelData[t].round[e][s].isGot)return!1;return!0}checkPassLevel(){let t=this.currentPoints.level;for(let e in this.levelData[t].round)for(let s in this.levelData[t].round[e])if(!this.levelData[t].round[e][s].isGot)return!1;return!0}goNextRound(){let t=this.currentPoints.level;this.currentPoints.round<this.levelData[t].roundCount&&this.currentPoints.round++}passLevel(){this.passLevels.push(this.currentPoints.level),this.passLevels.length>4?this.currentPoints.level=4:this.currentPoints.level=this.passLevels.length+1,this.currentPoints.round=1,this.saveData()}initLevelParentNode(t){this.currentLevelParentNode=t,this.traverseAndDeactivateRigidBodies(t)}traverseAndDeactivateRigidBodies(t){t.getComponent(i)&&(t.active=!1),t.children.forEach((t=>{this.traverseAndDeactivateRigidBodies(t)}))}setCurrentRoundNodes(){let t=this.currentPoints.level,e=this.currentPoints.round,s=this.currentLevelParentNode.getChildByName("level_"+t).getChildByName("round_"+e),i=[];for(let n in this.levelData[t].round[e])if(!this.levelData[t].round[e][n].isGot){let r=`point_${t}_${e}_${n}`,a=s.getChildByName(r);a.children.forEach((t=>{t.active=!0})),i.push(a)}return this.currentPointNodes=i,this.currentPointNodes}clearlevelData(){this.initlevelData(this.levelData)}gotPoint(t){let e=this.currentPoints.level,s=this.currentPoints.round;this.levelData[e].round[s][t].isGot=!0,this.checkPassLevel()?n.Scene.emit(r.EventName.PassGame):(this.checkPassRound()&&this.goNextRound(),this.setCurrentRoundNodes())}getCurrentEndingIconId(){let t=this.currentPoints.level;return this.levelData[t].endingIconId}resetData(){this.isGameStart=!1,this.isGuidanding=!1,this.isStartToLightDownCount=!1,this.currentStepIndex=0,this.isMove=!1,this.delta=null,this.isScream=!1,this.isFlashlight=!0,this.isLightCanOpen=!0,this.currentTargetPos=null,this.currentPlayerPos=null,this.itemFloorNumber=1,this.isPlayerDead=!1}destroyInstance(){t.instance&&(t.instance.resetData(),t.instance=null)}}).instance=void 0,a=l))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_Door.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,o,n,s,r,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){o=i.cclegacy,n=i._decorator,s=i.Component,r=i.Quat,p=i.tween}],execute:function(){var l,h,a,c,u;o._RF.push({},"36b12JCpLVJmoMWz+5i2oiV","LBL_Door",void 0);const{ccclass:g,property:d}=n;i("LBL_Door",g("LBL_Door")((a=t((h=class extends s{constructor(...i){super(...i),e(this,"openAngle",a,this),e(this,"openSpeed",c,this),e(this,"isOpen",u,this),this.closedRotation=r.IDENTITY.clone(),this.openRotation=r.IDENTITY.clone(),this.isOpening=!1,this.isClosing=!1}get IsOpen(){return this.isOpen}start(){this.closedRotation=this.node.rotation.clone();const i=this.node.eulerAngles.clone();i.y+=this.openAngle,r.fromEuler(this.openRotation,i.x,i.y,i.z),this.isOpen&&(this.node.rotation=this.openRotation.clone())}openDoor(){this.isOpen||this.isOpening||(this.isOpening=!0,this.isClosing=!1,p(this.node).to(1/this.openSpeed,{rotation:this.openRotation}).call((()=>{this.isOpen=!0,this.isOpening=!1})).start())}closeDoor(){this.isOpen&&!this.isClosing&&(this.isClosing=!0,this.isOpening=!1,p(this.node).to(1/this.openSpeed,{rotation:this.closedRotation}).call((()=>{this.isOpen=!1,this.isClosing=!1})).start())}toggleDoor(){this.isOpen?this.closeDoor():this.openDoor()}}).prototype,"openAngle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),c=t(h.prototype,"openSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),u=t(h.prototype,"isOpen",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=h))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LBL_AudioManager.ts","./LBL_ComicController.ts","./LBL_DataManager.ts","./LBL_GameUI.ts","./LBL_PlayerController.ts","./LBL_MonsterController.ts","./EventManager.ts","./LBL_Const.ts","./ProjectEventManager.ts"],(function(e){var t,n,a,r,i,s,o,l,c,m,u,h,L,v,f,g,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,r=e.Node,i=e.JsonAsset,s=e._decorator,o=e.Component,l=e.director},function(e){c=e.LBL_AudioManager},function(e){m=e.LBL_ComicController},function(e){u=e.LBL_DataManager},function(e){h=e.LBL_GameUI},function(e){L=e.LBL_PlayerController},function(e){v=e.LBL_MonsterController},function(e){f=e.EventManager},function(e){g=e.LBL_Const},function(e){p=e.ProjectEventManager,d=e.ProjectEvent}],execute:function(){var C,I,G,y,M,b,B,N,_,P,S,E,U,D,w,z;a._RF.push({},"f0f10k+3/1MfaGAe3T7Ejz7","LBL_GameManager",void 0);const{ccclass:A,property:k}=s;e("LBL_GameManager",(C=A("LBL_GameManager"),I=k(m),G=k(r),y=k(i),M=k(h),b=k(L),B=k(r),C(((z=class e extends o{constructor(...e){super(...e),this.currentMode=void 0,this.currentLevel=void 0,this.gameState=void 0,this.gameScene=void 0,n(this,"comicController",P,this),n(this,"pointParentNode",S,this),n(this,"levelData",E,this),n(this,"gameUI",U,this),n(this,"playerCtrl",D,this),n(this,"monsterNode",w,this),this.monsterCtrl=null}static getInstance(){if(!e.instance){const t=l.getScene().getChildByName("GameManager");if(t)e.instance=t.getComponent(e);else{const t=new r("GameManager");l.getScene().addChild(t),e.instance=t.addComponent(e)}}return e.instance}onLoad(){e.instance=this,this.monsterCtrl=this.monsterNode.getComponent(v),u.Instance.initlevelData(this.levelData.json),u.Instance.initLevelParentNode(this.pointParentNode),this.onListenEvent(),p.emit(d.游戏开始,"狼伴侣")}startGame(){1!==u.Instance.currentPoints.level?(this.playerCtrl.resetPlayer(),this.monsterCtrl.resetMonster(),u.Instance.setCurrentRoundNodes(),u.Instance.isGameStart=!0):this.comicController.playStartAnimation(u.Instance.currentPoints.level,(()=>{this.playerCtrl.resetPlayer(),this.monsterCtrl.resetMonster(),u.Instance.setCurrentRoundNodes(),u.Instance.isGameStart=!0}))}passGame(){u.Instance.isGameStart=!1,this.comicController.playEndAnimation(u.Instance.currentPoints.level,(()=>{this.monsterCtrl.clearMonster(),this.gameUI.clearUI(),u.Instance.passLevel(),u.Instance.setCurrentRoundNodes(),this.gameUI.showLevelSelectPanel()}))}gameOver(){u.Instance.isGameStart=!1,this.comicController.playDeathAnimation(1,(()=>{this.monsterCtrl.clearMonster(),this.gameUI.clearUI(),u.Instance.initcurrentLevel(),u.Instance.setCurrentRoundNodes(),this.gameUI.showDeadAnim()}))}backToSelete(){u.Instance.isGameStart=!1,this.gameUI.clearUI(),u.Instance.initcurrentLevel(),u.Instance.setCurrentRoundNodes(),this.gameUI.showLevelSelectPanel()}onDestroy(){this.offListenEvent(),c.clear(),e.instance=null}onListenEvent(){f.on(g.EventName.PassGame,this.passGame,this),f.on(g.EventName.GameOver,this.gameOver,this),f.on(g.EventName.BackToSelete,this.backToSelete,this),f.on(g.EventName.StartGame,this.startGame,this)}offListenEvent(){f.off(g.EventName.PassGame,this.passGame,this),f.off(g.EventName.GameOver,this.gameOver,this),f.off(g.EventName.BackToSelete,this.backToSelete,this),f.off(g.EventName.StartGame,this.startGame,this)}}).instance=void 0,P=t((_=z).prototype,"comicController",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(_.prototype,"pointParentNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(_.prototype,"levelData",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(_.prototype,"gameUI",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(_.prototype,"playerCtrl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(_.prototype,"monsterNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=_))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./GameManager.ts","./ProjectEventManager.ts","./EventManager.ts","./LBL_DataManager.ts","./LBL_PlayerController.ts","./LBL_Const.ts","./BundleManager.ts"],(function(e){var t,i,n,a,l,o,s,c,r,h,p,d,u,g,m,P,y,b,v,C,B,T,f,k,S,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,l=e._decorator,o=e.Component,s=e.v3,c=e.clamp,r=e.UITransform,h=e.Vec3,p=e.Sprite,d=e.Color,u=e.Label,g=e.SpriteFrame,m=e.UIOpacity,P=e.tween},function(e){y=e.UIManager,b=e.Panel},function(e){v=e.GameManager},function(e){C=e.ProjectEventManager,B=e.ProjectEvent},function(e){T=e.EventManager},function(e){f=e.LBL_DataManager},function(e){k=e.LBL_PlayerController},function(e){S=e.LBL_Const},function(e){I=e.BundleManager}],execute:function(){var L,w,N,E,_,M,F,R,z,U,O,G,j,H,x,D,A,J,W,V,Y,q,K,X,Z,Q,$,ee,te,ie,ne,ae,le,oe,se,ce,re,he,pe,de,ue,ge,me,Pe;n._RF.push({},"330acf66YFCS5qdrqTW6S1X","LBL_GameUI",void 0);const{ccclass:ye,property:be}=l;e("LBL_GameUI",(L=ye("LBL_GameUI"),w=be(a),N=be(a),E=be(a),_=be(a),M=be(a),F=be(a),R=be(a),z=be(a),U=be(a),O=be(a),G=be(a),j=be(a),H=be(a),x=be(a),D=be(a),A=be(a),J=be(a),W=be(a),V=be(a),Y=be(k),L(((Pe=class e extends o{constructor(...e){super(...e),i(this,"btnReturn2",X,this),i(this,"touchPanel",Z,this),i(this,"joyBase",Q,this),i(this,"playerNode",$,this),i(this,"btnInteract",ee,this),i(this,"pointTip",te,this),i(this,"comicPanel",ie,this),i(this,"homePanel",ne,this),i(this,"levelSelectPanel",ae,this),i(this,"levelSelectPanelCloseBtn",le,this),i(this,"operatePanel",oe,this),i(this,"lockedTip",se,this),i(this,"bagPanel",ce,this),i(this,"darkMask",re,this),i(this,"beginningTipPanel",he,this),i(this,"btnBeginningTipClose",pe,this),i(this,"deadPanel",de,this),i(this,"winPanel",ue,this),i(this,"btnReturn",ge,this),i(this,"playerCtrl",me,this),this.beginningTipShowTime=1,this.lightTime=60,this.lightPassTime=0,this.scanTime=10,this.scanPassTime=0,this.pastPos=null}static get Instance(){return this.instance}onLoad(){e.instance=this}start(){this.hideAllTip(),f.Instance.isGameStart=!1,this.showHomePanel(),this.touchPanel.on(a.EventType.TOUCH_START,this.CameraTouchStart,this),this.touchPanel.on(a.EventType.TOUCH_MOVE,this.CameraTouchMove,this),this.joyBase.on(a.EventType.TOUCH_START,this.PlayerTouchStart,this),this.joyBase.on(a.EventType.TOUCH_MOVE,this.PlayerTouchMove,this),this.joyBase.on(a.EventType.TOUCH_END,this.PlayerTouchEnd,this),this.joyBase.on(a.EventType.TOUCH_CANCEL,this.PlayerTouchEnd,this),this.btnInteract.on("click",this.onInteractClicked,this),this.winPanel.getChildByName("btnBack").on("click",this.onBtnBackClick,this),this.winPanel.getChildByName("btnReset").on("click",this.onBtnResetClick,this),this.deadPanel.getChildByName("btnBack").on("click",this.onBtnBackClick,this),this.deadPanel.getChildByName("btnReset").on("click",this.onBtnResetClick,this),this.btnReturn.on("click",this.onBtnReturnClick,this),this.btnReturn2.on("click",this.onBtnReturn2Click,this),this.onListenEvent()}update(e){f.Instance.isPlayerDead}CameraTouchStart(e){this.pastPos=e.getUILocation()}CameraTouchMove(e){if(!f.Instance.isPlayerDead){var t=e.getUILocation().subtract(this.pastPos).multiplyScalar(.1),i=s(this.playerNode.children[0].eulerAngles);i.add3f(t.y,-t.x,0),i.x=c(i.x,-50,30),this.playerNode.children[0].setRotationFromEuler(i),this.pastPos=e.getUILocation()}}PlayerTouchStart(){f.Instance.isMove=!0,f.Instance.isGuidanding&&(0==f.Instance.currentStepIndex?T.Scene.emit("JJTW_JOYSTICK_Start"):2==f.Instance.currentStepIndex&&T.Scene.emit("JJTW_Scream_Start"))}PlayerTouchMove(e){var t=this.joyBase.children[0],i=e.getUILocation(),n=this.joyBase.getWorldPosition(),a=s(i.x-n.x,i.y-n.y,0),l=this.joyBase.getComponent(r).width/2;a.length()>l?(a=a.normalize().multiplyScalar(l),t.setPosition(a)):t.setWorldPosition(s(i.x,i.y)),f.Instance.delta=a}PlayerTouchEnd(){this.joyBase.children[0].setPosition(h.ZERO),f.Instance.isMove=!1,f.Instance.isGuidanding&&0==f.Instance.currentStepIndex&&T.Scene.emit("JJTW_JOYSTICK_End")}onInteractClicked(){this.playerCtrl.interact()}showHomePanel(){this.homePanel.active=!0,this.homePanel.getChildByName("btnStart").on("click",this.hideHomePanel,this)}hideHomePanel(){this.homePanel.getChildByName("btnStart").off("click",this.hideHomePanel,this),this.homePanel.active=!1,this.showLevelSelectPanel()}showLevelSelectPanel(){let e=this.levelSelectPanel.getChildByName("levelContain"),t=f.Instance.passLevels,i=f.Instance.levelData;this.levelSelectPanelCloseBtn.on("click",this.backToMain,this),e.children.forEach(((n,a)=>{n.getChildByName("bg").getComponent(p).color=new d("FFFFFF"),-1!==t.indexOf(a+1)?(n.getChildByName("ending").active=!0,n.getChildByName("title").getComponent(u).string=i[a+1].endingTitle,n.getChildByName("title").active=!0):n.getChildByName("ending").active=!1;let l=()=>{if(e.children.forEach(((e,t)=>{e.getChildByName("bg").getComponent(p).color=new d("FFFFFF")})),n.getChildByName("bg").getComponent(p).color=new d("FFEB07"),a>=4)this.showLockedTip("请先通过前4关");else{let e=()=>{n.off("click",l,this),f.Instance.currentPoints.level=a+1,console.log("当前关卡"+(a+1)),f.Instance.currentPoints.round=1,this.showOperatePanel(),T.Scene.emit(S.EventName.StartGame),this.hideLevelSelectPanel()};0==a||f.Instance.passLevels.includes(a)?e():this.showLockedTip("请先通过前一关")}};n.on("click",l,this)})),this.levelSelectPanel.active=!0}backToMain(){this.hideLevelSelectPanel(),this.showHomePanel()}showLockedTip(e){this.lockedTip.active=!0,this.lockedTip.getChildByName("contant").getComponent(u).string=e,this.lockedTip.getChildByName("mask").on("click",this.hideLockedTip,this)}hideLockedTip(){this.lockedTip.getChildByName("mask").off("click",this.hideLockedTip,this),this.lockedTip.active=!1}hideLevelSelectPanel(){this.levelSelectPanelCloseBtn.off("click",this.hideLevelSelectPanel,this),this.levelSelectPanel.active=!1}showOperatePanel(){this.operatePanel.active=!0}hideOperatePanel(){this.operatePanel.active=!1}showPointTip(e){let t=this.pointTip.getChildByName("bg");t.getChildByName("icon").active=!1;let i=()=>{t.getChildByName("title").getComponent(u).string=e.title,t.getChildByName("tip").getComponent(u).string=e.tipcontent,t.setScale(0,0),this.pointTip.active=!0,P(t).to(.3,{scale:h.ONE},{easing:"backOut"}).start(),this.pointTip.getChildByName("mask").on("click",this.hidePointTip,this)};if(e.iconId){f.Instance.isGetIcon=!0;const n="Sprites/item/"+e.iconId+"/spriteFrame";I.GetBundle("40_LBL_Bundle").load(n,g,((e,n)=>{if(e)return console.error(e);t.getChildByName("icon").getComponent(p).spriteFrame=n,t.getChildByName("icon").active=!0,i()}))}else i()}hidePointTip(){this.updateBag(),this.pointTip.getChildByName("mask").off("click",this.hidePointTip,this),this.pointTip.active=!1}clearUI(){this.pointTip.active=!1,this.clearBag()}clearBag(){this.bagPanel.getChildByName("Layout").children.forEach((e=>{e.getChildByName("icon").active=!1}))}updateBag(){if(!f.Instance.isGetIcon)return;f.Instance.isGetIcon=!1,f.Instance.getCurrentIconIds().forEach(((e,t)=>{let i=this.bagPanel.getChildByName("Layout").children[t];const n="Sprites/item/"+e+"/spriteFrame";I.GetBundle("40_LBL_Bundle").load(n,g,((e,t)=>{if(e)return console.error(e);i.children[0].getComponent(p).spriteFrame=t,i.children[0].active=!0}))}))}onBeginningTipCloseClicked(){this.beginningTipPanel.active=!1,this.btnBeginningTipClose.off("click",this.onBeginningTipCloseClicked,this)}showWinAnim(){let e=this.winPanel.getComponent(m);e.opacity=0,this.winPanel.active=!0,this.deadPanel.active=!1,P(e).to(1,{opacity:255}).call((()=>{})).start()}showDeadAnim(){this.deadPanel.getComponent(m).opacity=355,this.deadPanel.active=!0,this.winPanel.active=!1,C.emit(B.游戏结束,"狼伴侣")}onBtnBackClick(){this.clearUI(),f.Instance.initcurrentLevel(),f.Instance.setCurrentRoundNodes(),this.showLevelSelectPanel(),this.deadPanel.active=!1}onBtnResetClick(){this.clearUI(),f.Instance.initcurrentLevel(),f.Instance.setCurrentRoundNodes(),T.Scene.emit(S.EventName.StartGame),this.deadPanel.active=!1}onBtnReturnClick(){C.emit(B.返回主页按钮事件,(()=>{y.ShowPanel(b.LoadingPanel,v.StartScene,(()=>{C.emit(B.返回主页,"狼伴侣")}))}))}onBtnReturn2Click(){T.Scene.emit(S.EventName.BackToSelete)}hideAllTip(){this.clearBag(),this.pointTip.active=!1,this.beginningTipPanel.active=!1,this.comicPanel.active=!1,this.darkMask.active=!1,this.homePanel.active=!1,this.levelSelectPanel.active=!1,this.hideLockedTip(),this.deadPanel.active=!1,this.winPanel.active=!1}onDestroy(){this.offListenEvent()}onListenEvent(){T.on(S.EventName.ShowPointTip,this.showPointTip,this)}offListenEvent(){T.off(S.EventName.ShowPointTip,this.showPointTip,this)}}).instance=void 0,X=t((K=Pe).prototype,"btnReturn2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(K.prototype,"touchPanel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(K.prototype,"joyBase",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(K.prototype,"playerNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(K.prototype,"btnInteract",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(K.prototype,"pointTip",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(K.prototype,"comicPanel",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(K.prototype,"homePanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(K.prototype,"levelSelectPanel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(K.prototype,"levelSelectPanelCloseBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(K.prototype,"operatePanel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(K.prototype,"lockedTip",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(K.prototype,"bagPanel",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(K.prototype,"darkMask",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(K.prototype,"beginningTipPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(K.prototype,"btnBeginningTipClose",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(K.prototype,"deadPanel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(K.prototype,"winPanel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(K.prototype,"btnReturn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(K.prototype,"playerCtrl",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=K))||q));n._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_ILevelData.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"772cb0PjkRFGIBcUBDLbUvf","LBL_ILevelData",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_MonsterController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LBL_Waypoint.ts","./LBL_PathManager.ts","./LBL_Door.ts","./LBL_DataManager.ts"],(function(t){var i,e,n,o,r,s,a,l,h,c,u,d,p,y,P,g,f,m,C;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,r=t._decorator,s=t.Component,a=t.RigidBody,l=t.SkeletalAnimation,h=t.Collider,c=t.find,u=t.director,d=t.Vec3,p=t.geometry,y=t.PhysicsSystem,P=t.v3},function(t){g=t.LBL_Waypoint},function(t){f=t.LBL_PathManager},function(t){m=t.LBL_Door},function(t){C=t.LBL_DataManager}],execute:function(){var W,b,w,L,R,B,I,M,D,E,F,z,x,_,v,S,A,N,U,V;n._RF.push({},"260b07jJCNEtL85hJoEMMnE","LBL_MonsterController",void 0);const{ccclass:k,property:T}=r;t("LBL_MonsterController",(W=k("LBL_MonsterController "),b=T(o),w=T(o),L=T(o),R=T({visible:!1}),B=T(g),W((D=i((M=class extends s{constructor(...t){super(...t),e(this,"player",D,this),e(this,"core",E,this),e(this,"detectionRange",F,this),e(this,"chaseSpeed",z,this),e(this,"normalSpeed",x,this),e(this,"waypointReachDistance",_,this),e(this,"floorHeight",v,this),e(this,"allWaypointsParent",S,this),e(this,"currentFloor",A,this),e(this,"currentWaypoint",N,this),this.targetWaypoint=null,e(this,"drawGizmos",U,this),e(this,"pathColor",V,this),this.allWaypoints=[],this.currentPath=[],this.currentPosPath=[],this.currentPathIndex=0,this.isChasing=!1,this.isProcessingPath=!1,this.currentDoor=null,this.rigidBody=null,this.pathUpdateInterval=3,this.lastPathUpdateTime=0,this.lastPoint=void 0,this.spine=null,this.collider=null,this.initWorldPos=null,this.initRotationFromEuler=null,this.isContactPlayer=!1}onLoad(){if(this.rigidBody=this.getComponent(a),this.rigidBody||(this.rigidBody=this.addComponent(a),this.rigidBody.type=a.Type.DYNAMIC,this.rigidBody.useGravity=!0),this.spine||(this.spine=this.getComponent(l)),this.collider||(this.collider=this.getComponent(h)),this.initWorldPos||(this.initWorldPos=this.node.worldPosition.clone()),this.initRotationFromEuler||(this.initRotationFromEuler=this.node.eulerAngles.clone()),!c("PathManager")){var t;const i=new o("PathManager");i.addComponent(f),null==(t=u.getScene())||t.addChild(i)}this.allWaypoints=[],this.collectWaypointsRecursively(this.allWaypointsParent,this.allWaypoints)}openCollider(){this.collider.on("onCollisionEnter",this.onColliderContact,this)}closeCollider(){this.collider.off("onCollisionEnter",this.onColliderContact,this)}resetMonster(){f.instance.reset(),this.node.setWorldPosition(this.initWorldPos),this.node.setRotationFromEuler(this.initRotationFromEuler),this.currentPath=[],this.currentPosPath=[],this.currentPathIndex=0,this.targetWaypoint=null,this.currentWaypoint=this.node.getComponent(g),this.rigidBody&&(this.rigidBody.setLinearVelocity(d.ZERO),this.rigidBody.setAngularVelocity(d.ZERO)),this.isChasing=!1,this.isContactPlayer=!1,this.currentDoor=null,this.lastPathUpdateTime=0,this.openCollider(),this.spine&&this.spine.crossFade("walk",.2)}clearMonster(){this.closeCollider(),this.isContactPlayer=!1}collectWaypointsRecursively(t,i){const e=t.getComponent(g);e&&i.push(e);for(const e of t.children)this.collectWaypointsRecursively(e,i)}start(){}onColliderContact(t){if("Player"==t.otherCollider.node.name){const i=t.otherCollider.node.worldPosition.clone().subtract(this.node.worldPosition).normalize(),e=180*Math.atan2(i.x,i.z)/Math.PI;this.node.setRotationFromEuler(0,e,0),C.Instance.isGameStart=!1,this.isContactPlayer=!0;const n=this.spine.getState("pu");null!=n&&n.isPlaying||this.spine.crossFade("pu",.2)}}update(t){this.player&&C.Instance.isGameStart&&(this.isContactPlayer||(this.updateCurrentFloor(),this.checkPlayerInRange(t),this.isChasing&&this.currentPath.length>0&&!this.currentDoor&&this.moveAlongPath(t),this.handleDoorInteraction()))}updateCurrentFloor(){this.currentFloor=Math.floor(this.core.worldPosition.y/this.floorHeight)+1}checkPlayerInRange(t){if(!this.player)return;if(d.distance(this.core.worldPosition,this.player.worldPosition)<=this.detectionRange){const i=this.spine.getState("run");null!=i&&i.isPlaying||this.spine.crossFade("run",.2),this.isChasing?(this.lastPathUpdateTime+=t,this.lastPathUpdateTime>=this.pathUpdateInterval&&!this.isProcessingPath&&(this.updateChasePath(),this.lastPathUpdateTime=0)):(this.isChasing=!0,this.updateChasePath(),this.lastPathUpdateTime=0)}else{const t=this.spine.getState("walk");null!=t&&t.isPlaying||this.spine.crossFade("walk",.2),this.isChasing=!1,this.currentPath=[],this.targetWaypoint=null}}updateChasePath(){if(!this.player||!this.currentWaypoint||this.isProcessingPath)return;this.isProcessingPath=!0,this.currentWaypoint.connectedWaypoints=[];const t=this.findNearestWaypointToPosition(this.player.worldPosition),i=this.player.getComponent(g);let e=new p.Ray;if(p.Ray.fromPoints(e,this.core.getWorldPosition(),this.player.getChildByName("Node").getWorldPosition()),y.instance.raycastClosest(e)){if(y.instance.raycastClosestResult.collider.node==this.player&&t)return void(i?this.onPathFound([i],!0):this.onPathFound([t],!0))}this.allWaypoints.sort(((t,i)=>d.distance(t.node.getWorldPosition(),this.core.getWorldPosition())-d.distance(i.node.getWorldPosition(),this.core.getWorldPosition())));let n=0;for(let t=0;t<this.allWaypoints.length;t++){const i=this.allWaypoints[t];if(this.lastPoint==i)continue;if(d.distance(i.node.getWorldPosition(),this.core.getWorldPosition())<this.waypointReachDistance)continue;let e=Math.abs(i.node.getWorldPosition().y-this.core.getWorldPosition().y);if("Cube-006"==i.node.name&&console.log(`Cube${e}`),e>1.5)continue;let o=new p.Ray;if(p.Ray.fromPoints(o,this.core.getWorldPosition(),i.node.getWorldPosition()),y.instance.raycastClosest(o)){if(y.instance.raycastClosestResult.collider.node==i.node&&(this.currentWaypoint.connectedWaypoints.push(i.getComponent(g)),n++,n>=2))break}}t?f.instance.requestPath(this.currentWaypoint,t,((t,i)=>this.onPathFound(t,i))):this.onPathFound(null,!1)}onPathFound(t,i){if(this.isProcessingPath=!1,i&&t&&t.length>0){const i=this.player.getComponent(g);i&&!t.includes(i)&&(t=[...t,i]);const e=this.core.worldPosition.clone();let n=0,o=Number.MAX_VALUE;if(t.forEach(((t,i)=>{const r=d.distance(e,t.node.worldPosition);r<o&&i>=this.currentPathIndex&&(o=r,n=i)})),this.currentPath.length>0&&this.currentPathIndex>0){const i=this.currentPath[this.currentPathIndex],e=t.findIndex((t=>t===i));-1!==e&&e>=n&&(n=e)}if(this.currentPath=[...t],this.currentPosPath=this.currentPath.map((t=>t.node.worldPosition.clone())),this.currentPathIndex=0,this.currentPath.length>0?this.targetWaypoint=this.currentPath[0]:this.targetWaypoint=null,n>0&&this.currentPath.length>0){d.distance(e,this.currentPosPath[0])<this.waypointReachDistance&&(this.currentPathIndex=1,this.targetWaypoint=this.currentPath.length>1?this.currentPath[1]:null)}}}moveAlongPath(t){if(!this.rigidBody)return;let i=P();this.rigidBody.getLinearVelocity(i);let e=i.y;if(this.currentPathIndex>=this.currentPath.length)return this.currentPath=[],this.currentPosPath=[],this.targetWaypoint=null,void this.rigidBody.setLinearVelocity(P(0,e));const n=this.currentPath[this.currentPathIndex],o=this.currentPosPath[this.currentPathIndex],r=o.clone().subtract(this.core.worldPosition).normalize(),s=this.isChasing?this.chaseSpeed:this.normalSpeed;let a=r.multiplyScalar(s);a.y=e,this.rigidBody.setLinearVelocity(a);const l=180*Math.atan2(r.x,r.z)/Math.PI;this.node.setRotationFromEuler(0,l,0);d.distance(this.core.worldPosition,o)<=this.waypointReachDistance&&(this.currentPathIndex++,this.lastPoint=n,this.targetWaypoint=this.currentPathIndex<this.currentPath.length?this.currentPath[this.currentPathIndex]:null)}handleDoorInteraction(){if(this.currentDoor)return void(this.currentDoor.IsOpen&&(this.currentDoor=null));let t=this.core.worldPosition.clone();t.y+=1;let i=this.node.forward.clone();const e=p.Ray.create(t.x,t.y,t.z,i.x,i.y,i.z);if(y.instance.raycast(e)){const t=y.instance.raycastResults;for(const i of t){const t=i.collider.getComponent(m);if(t&&!t.IsOpen){this.currentDoor=t,this.rigidBody&&this.rigidBody.setLinearVelocity(d.ZERO),t.openDoor();break}}}}findNearestWaypoint(){if(0===this.allWaypoints.length)return;let t=null,i=Number.MAX_VALUE;this.allWaypoints.forEach((e=>{const n=d.distance(this.core.worldPosition,e.node.worldPosition);n<i&&(t=e,i=n)})),this.currentWaypoint=t}findNearestWaypointToPosition(t){if(0===this.allWaypoints.length)return null;let i=null,e=Number.MAX_VALUE;return this.allWaypoints.forEach((n=>{const o=d.distance(t,n.node.worldPosition);o<e&&(i=n,e=o)})),i}findNearestStairway(t){const i=this.allWaypoints.filter((i=>i.isStair&&i.floor===t));if(0===i.length)return null;let e=null,n=Number.MAX_VALUE;return i.forEach((t=>{const i=d.distance(this.core.worldPosition,t.node.worldPosition);i<n&&(e=t,n=i)})),e}}).prototype,"player",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(M.prototype,"core",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(M.prototype,"detectionRange",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),z=i(M.prototype,"chaseSpeed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=i(M.prototype,"normalSpeed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),_=i(M.prototype,"waypointReachDistance",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),v=i(M.prototype,"floorHeight",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),S=i(M.prototype,"allWaypointsParent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(M.prototype,"currentFloor",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=i(M.prototype,"currentWaypoint",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(M.prototype,"drawGizmos",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=i(M.prototype,"pathColor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1,0,0)}}),I=M))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_PathManager.ts",["cc","./LBL_AStar.ts","./LBL_BinaryHeap.ts"],(function(t){var e,s,n,a,r,i,h;return{setters:[function(t){e=t.cclegacy,s=t._decorator,n=t.Component,a=t.Vec3},function(t){r=t.LBL_AStar,i=t.LBL_AStarNode},function(t){h=t.LBL_BinaryHeap}],execute:function(){var o,c;e._RF.push({},"75d4eKX8u9MrqaxTZHczZIL","LBL_PathManager",void 0);const{ccclass:u,property:p}=s;t("LBL_PathManager",u("LBL_PathManager")(((c=class t extends n{constructor(...t){super(...t),this.aStar=new r,this.pathRequests=[],this.currentPathRequest=null,this.isProcessingPath=!1,this.maxStepsPerFrame=5,this.currentStep=0,this.currentAStarState=null}onLoad(){t.instance?this.destroy():t.instance=this}reset(){this.pathRequests=[],this.currentPathRequest=null,this.currentAStarState=null,this.isProcessingPath=!1,this.unschedule(this.processPathStep),this.unschedule(this.aa)}requestPath(t,e,s){this.pathRequests=this.pathRequests.filter((s=>!(s.start===t&&s.end===e)));const n=this.pathRequests.length-1;if(n>=0){const s=this.pathRequests[n];if(s.start===t&&s.end===e)return}const a={start:t,end:e,callback:s};this.pathRequests.push(a),this.tryProcessNext()}tryProcessNext(){!this.isProcessingPath&&this.pathRequests.length>0&&(this.currentPathRequest=this.pathRequests.shift(),this.isProcessingPath=!0,this.currentStep=0,this.scheduleOnce(this.processPathStep,0))}processPathStep(){if(this.unschedule(this.aa),!this.currentPathRequest)return this.isProcessingPath=!1,void(this.currentAStarState=null);if(!this.currentAStarState){const t=new h,e=new Set,s=new Map,n=new i(this.currentPathRequest.start),a=new i(this.currentPathRequest.end);s.set(this.currentPathRequest.start,n),t.push(n),this.currentAStarState={openSet:t,closedSet:e,nodeMap:s,startNode:n,endNode:a}}const{openSet:t,closedSet:e,nodeMap:s,startNode:n,endNode:r}=this.currentAStarState;let o=0,c=null,u=!1;for(;t.count>0&&o<this.maxStepsPerFrame;){const h=t.pop();if(!h)break;if(e.add(h.waypoint),h.waypoint===r.waypoint){c=this.retracePath(n,h),u=!0;break}h.waypoint.connectedWaypoints.forEach((n=>{if(!n||e.has(n))return;const o=h.gCost+a.distance(h.waypoint.node.worldPosition,n.node.worldPosition);let c=s.get(n);c||(c=new i(n),s.set(n,c)),(o<c.gCost||!t.contains(c))&&(c.gCost=o,c.hCost=a.distance(n.node.worldPosition,r.waypoint.node.worldPosition),c.parent=h,t.contains(c)?t.updateNode(c):t.push(c))})),o++}u||0===t.count&&!u?(u&&c.shift(),this.currentPathRequest.callback(c,u),this.currentPathRequest=null,this.currentAStarState=null,this.isProcessingPath=!1,this.tryProcessNext()):(console.log("未完成：下一帧继续处理"),this.scheduleOnce(this.aa,0))}aa(){this.processPathStep()}retracePath(t,e){const s=[];let n=e;for(;n!==t&&n;)s.push(n.waypoint),n=n.parent;return s.push(t.waypoint),s.reverse(),s}}).instance=void 0,o=c))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_PHY_GROUP.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"83bcddlIxdPy6ZFyHURWo7g","LBL_PHY_GROUP",void 0);t("LBL_PHY_GROUP",function(t){return t[t.DEFAULT=1]="DEFAULT",t[t.Item=2]="Item",t[t.Wall=4]="Wall",t[t.ITEM=8]="ITEM",t[t.OBSTACLE=16]="OBSTACLE",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LBL_DataManager.ts","./EventManager.ts","./LBL_Const.ts","./LBL_ColliderType.ts","./LBL_PHY_GROUP.ts"],(function(e){var t,n,i,s,a,o,l,r,c,h,d,g,y,p,m,I,u,C,P,E,_,v,f,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.Node,a=e.Camera,o=e._decorator,l=e.Component,r=e.v3,c=e.Collider,h=e.Vec3,d=e.input,g=e.Input,y=e.tween,p=e.geometry,m=e.RigidBody,I=e.SpotLight,u=e.CapsuleCollider,C=e.KeyCode,P=e.PhysicsSystem},function(e){E=e.LBL_DataManager},function(e){_=e.EventManager},function(e){v=e.LBL_Const},function(e){f=e.LBL_ColliderType},function(e){L=e.LBL_PHY_GROUP}],execute:function(){var D,T,R,b,K,W,S,M,w;i._RF.push({},"53c37vJ5CpJ4aGZR2n+fk0I","LBL_PlayerController",void 0);const{ccclass:B,property:Y}=o;e("LBL_PlayerController",(D=B("LBL_PlayerController"),T=Y(s),R=Y(s),b=Y(a),D((S=t((W=class extends l{constructor(...e){super(...e),n(this,"point",S,this),n(this,"core",M,this),n(this,"UICamera",w,this),this.normalSpeed=5,this.speed=0,this.rig=void 0,this.light=void 0,this.camera=void 0,this.lightTime=10,this.lightRemainTime=10,this.cameraRay=null,this.isDead=!1,this.isWin=!1,this.lastHouse=null,this.lastCameraPos=null,this.lastCameraWorldPos=null,this.collider=null,this.initWorldPos=null,this.initCameraRoation=null}onLoad(){this.initCameraRoation||(this.initCameraRoation=r(this.node.children[0].eulerAngles.clone())),this.collider||(this.collider=this.getComponent(c)),this.initWorldPos||(this.initWorldPos=this.node.worldPosition.clone())}openCollider(){this.collider.on("onCollisionEnter",this.onColliderContact,this)}closeCollider(){this.collider.off("onCollisionEnter",this.onColliderContact,this)}resetPlayer(){E.Instance.isPlayerDead=!1,this.isDead=!1,this.isWin=!1,this.node.setWorldPosition(this.initWorldPos),this.node.children[0].setRotationFromEuler(this.initCameraRoation),this.rig&&(this.rig.setLinearVelocity(h.ZERO),this.rig.setAngularVelocity(h.ZERO),this.rig.enabled=!0),this.openCollider(),E.Instance.isMove=!1,E.Instance.isScream=!1}clearPlayer(){this.setPlayerDead()}onColliderContact(e){"monster"==e.otherCollider.node.name&&(E.Instance.isGameStart=!1,this.clearPlayer())}setPlayerDead(){E.Instance.isMove=!1,E.Instance.isScream=!1,E.Instance.isPlayerDead=!0,this.isDead=!0,this.rig.enabled=!1,this.collider.off("onTriggerEnter",this.onTriggerEnter,this),this.collider.off("onTriggerExit",this.onTriggerExit,this),d.off(g.EventType.KEY_DOWN,this.onKeyDown,this),d.off(g.EventType.KEY_UP,this.onKeyUp,this),y(this.node).delay(.2).call((()=>{this.closeCollider(),_.Scene.emit(v.EventName.GameOver)})).start()}start(){this.cameraRay=new p.Ray,this.rig=this.node.getComponent(m),this.light=this.node.getComponentInChildren(I),this.camera=this.node.getComponentInChildren(a),this.rig.useCCD=!0,this.lastCameraPos=this.camera.node.position,this.lastCameraWorldPos=this.camera.node.getWorldPosition();let e=this.node.getComponent(u);e.on("onTriggerEnter",this.onTriggerEnter,this),e.on("onTriggerExit",this.onTriggerExit,this),d.on(g.EventType.KEY_DOWN,this.onKeyDown,this),d.on(g.EventType.KEY_UP,this.onKeyUp,this)}onKeyDown(e){switch(E.Instance.delta=r(0,0,0),e.keyCode){case C.KEY_A:E.Instance.isMove=!0,E.Instance.delta=r(-10,E.Instance.delta.y,E.Instance.delta.z);break;case C.KEY_W:E.Instance.isMove=!0,E.Instance.delta=r(E.Instance.delta.x,10,E.Instance.delta.z);break;case C.KEY_S:E.Instance.isMove=!0,E.Instance.delta=r(E.Instance.delta.x,-10,E.Instance.delta.z);break;case C.KEY_D:E.Instance.isMove=!0,E.Instance.delta=r(10,E.Instance.delta.y,E.Instance.delta.z)}}onKeyUp(e){switch(e.keyCode){case C.KEY_A:E.Instance.isMove=!1,E.Instance.delta=r(0,E.Instance.delta.y,E.Instance.delta.z);break;case C.KEY_W:case C.KEY_S:E.Instance.isMove=!1,E.Instance.delta=r(E.Instance.delta.x,0,E.Instance.delta.z);break;case C.KEY_D:E.Instance.isMove=!1,E.Instance.delta=r(0,E.Instance.delta.y,E.Instance.delta.z)}}update(e){var t;if(!this.isDead&&!this.isWin){if(E.Instance.isFlashlight?this.openFlashlight():this.closeFlashlight(),E.Instance.isScream?this.speed=3*this.normalSpeed:this.speed=this.normalSpeed,E.Instance.isMove&&(null==(t=E.Instance.delta)?void 0:t.length())>1){let e=r();e=h.normalize(e,E.Instance.delta).multiplyScalar(this.speed);let t=r();this.rig.getLinearVelocity(t),e.x=e.x,e.z=-e.y,e.y=t.y;const n=this.node.children[0].getWorldRotation();h.transformQuat(e,e,n),e.y=0,this.rig.setLinearVelocity(e)}E.Instance.isMove&&(this.rig.useGravity=!0),E.Instance.currentTargetPos&&(E.Instance.currentPlayerPos=this.node.getWorldPosition())}}interact(){const e=this.camera;if(!e)return;let t=new p.Ray,n=r();this.UICamera.worldToScreen(this.point.getWorldPosition(),n),e.screenPointToRay(n.x,n.y,t);const i=L.Item,s=[f.Point,f.Door];if(P.instance.raycastClosest(t,i,10,!0)){const e=P.instance.raycastClosestResult,t=e.collider.node.name.split("_")[0];t&&s.includes(t)&&this.handleInteract(e)}}handleInteract(e){switch(e.collider.node.name.split("_")[0]){case f.Point:e.collider.node.active=!1,this.handlePoint(e.collider.node.name)}}handlePoint(e){let t=e.split("_")[1],n=e.split("_")[2],i=e.split("_")[3];E.Instance.gotPoint(i);let s=E.Instance.levelData[t].round[n][i];s&&_.Scene.emit(v.EventName.ShowPointTip,s)}openFlashlight(){this.light.enabled=!0}closeFlashlight(){this.light.enabled=!1}onTriggerEnter(e){}onTriggerExit(e){}}).prototype,"point",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(W.prototype,"core",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(W.prototype,"UICamera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=W))||K));i._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_PointData.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"7d24aIGCuBFT5ZtWBmJVlXb","LBL_PointData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_Powerpoint.ts",["cc"],(function(t){var e,o,r;return{setters:[function(t){e=t.cclegacy,o=t.Component,r=t._decorator}],execute:function(){var c;e._RF.push({},"04e6f3LNCpEgJsUU+qm801p","LBL_Powerpoint",void 0);const{ccclass:n,property:s}=r;t("LBL_Powerpoint",n("LBL_Powerpoint")(c=class extends o{start(){}update(t){}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_SaveData.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"469bbE7HFpPLpPGLZkR7qXB","LBL_SaveData",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LBL_Waypoint.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,i,r,s,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,r=t._decorator,s=t.Component,c=t.Color}],execute:function(){var a,p,l,u,h,d,y,f,b,m;o._RF.push({},"49797x2G8tLG6YRucXDf7g8","LBL_Waypoint",void 0);const{ccclass:g,property:C}=r;t("LBL_Waypoint",(a=g("LBL_Waypoint"),p=C(i),a((h=n((u=class t extends s{constructor(...t){super(...t),e(this,"floor",h,this),e(this,"isStair",d,this),e(this,"connectedWaypointsNode",y,this),e(this,"stairConnectionNodes",f,this),e(this,"gizmoColor",b,this),e(this,"gizmoSize",m,this),this.connectedWaypoints=[],this.stairConnections=[]}start(){this.connectedWaypointsNode.forEach((n=>{const e=n.getComponent(t);this.connectedWaypoints.push(e)})),this.stairConnectionNodes.forEach((n=>{const e=n.getComponent(t);this.stairConnections.push(e)})),this.connectedWaypoints.forEach((n=>{n&&!n.getComponent(t).connectedWaypoints.includes(this)&&n.getComponent(t).connectedWaypoints.push(this)}))}addConnection(t){t&&!this.connectedWaypoints.includes(t)&&(this.connectedWaypoints.push(t),t.addConnection(this))}removeConnection(t){const n=this.connectedWaypoints.indexOf(t);n>-1&&(this.connectedWaypoints.splice(n,1),t.removeConnection(this))}onDrawGizmosSelected(){}}).prototype,"floor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=n(u.prototype,"isStair",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=n(u.prototype,"connectedWaypointsNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=n(u.prototype,"stairConnectionNodes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=n(u.prototype,"gizmoColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(1,1,0,1)}}),m=n(u.prototype,"gizmoSize",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),l=u))||l));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/40_LBL_Bundle', 'chunks:///_virtual/40_LBL_Bundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});