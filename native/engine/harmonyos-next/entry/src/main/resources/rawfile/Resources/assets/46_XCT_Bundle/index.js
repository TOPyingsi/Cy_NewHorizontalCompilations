System.register("chunks:///_virtual/46_XCT_Bundle",["./XCT_BasePanel.ts","./XCT_DishNodeDrag.ts","./XCT_Events.ts","./XCT_Timer.ts","./XCT_UILayer.ts","./XCT_UIPanel.ts","./XCT_HJM_Bowl.ts","./XCT_HJM_CancelMask.ts","./XCT_HJM_Completed.ts","./XCT_HJM_Ingredient.ts","./XCT_HJM_Ingredient_Single.ts","./XCT_HJM_Salt.ts","./XCT_HJM_Sauce.ts","./XCT_HJM_Spoon.ts","./XCT_JBT_CancelMask.ts","./XCT_JBT_Completed.ts","./XCT_JBT_Dough.ts","./XCT_JBT_Egg.ts","./XCT_JBT_Ingredient.ts","./XCT_JBT_Pack.ts","./XCT_JBT_PancakeStick.ts","./XCT_JBT_Sauce.ts","./XCT_JP_Customer.ts","./XCT_JP_CustomerManager.ts","./XCT_JP_DialogManager.ts","./XCT_JP_OrderManager.ts","./XCT_KLM_Bowl.ts","./XCT_KLM_CancelMask.ts","./XCT_KLM_Completed.ts","./XCT_KLM_Egg.ts","./XCT_KLM_Ingredient.ts","./XCT_KLM_Pack.ts","./XCT_KLM_Pies.ts","./XCT_KLM_SauceTouch2.ts","./XCT_KLM_Shovel.ts","./XCT_KLM_Spoon.ts","./XCT_LSF_Bowl.ts","./XCT_LSF_CancelMask.ts","./XCT_LSF_Completed.ts","./XCT_LSF_Ingredient.ts","./XCT_LSF_Ingredient_Single.ts","./XCT_LSF_Salt.ts","./XCT_LSF_Sauce.ts","./XCT_LSF_Spoon.ts","./XCT_AudioManager.ts","./XCT_DialogManager.ts","./XCT_GameManager.ts","./XCT_HJM_DataManager.ts","./XCT_JBT_DataManager.ts","./XCT_JP_DataManager.ts","./XCT_KLM_DataManager.ts","./XCT_LSF_DataManager.ts","./XCT_UIManager.ts","./XCT_LoadingPanel.ts","./XCT_PassPanel.ts","./XCT_StartPanel.ts","./XCT_TablePanel.ts","./XCT_TipPanel.ts","./XCT_HJM_CheckoutPanel.ts","./XCT_HJM_DialogManager.ts","./XCT_HJM_DialoguePanel.ts","./XCT_HJM_GamePanel.ts","./XCT_HJM_GameUI.ts","./XCT_HJM_ShopPanel.ts","./XCT_HJM_TakeoutPanel.ts","./XCT_HJM_TipPanel.ts","./XCT_HJM_TutorialPanel.ts","./XCT_JBT_CheckoutPanel.ts","./XCT_JBT_DialoguePanel.ts","./XCT_JBT_GamePanel.ts","./XCT_JBT_GameUI.ts","./XCT_JBT_ShopPanel.ts","./XCT_JBT_TakeoutPanel.ts","./XCT_JBT_TipPanel.ts","./XCT_JBT_TutorialPanel.ts","./XCT_JP_GamePanel.ts","./XCT_KLM_CheckoutPanel.ts","./XCT_KLM_DialogManager.ts","./XCT_KLM_DialoguePanel.ts","./XCT_KLM_GamePanel.ts","./XCT_KLM_GameUI.ts","./XCT_KLM_ShopPanel.ts","./XCT_KLM_TakeoutPanel.ts","./XCT_KLM_TipPanel.ts","./XCT_KLM_TutorialPanel.ts","./XCT_LSF_CheckoutPanel.ts","./XCT_LSF_DialogManager.ts","./XCT_LSF_DialoguePanel.ts","./XCT_LSF_GamePanel.ts","./XCT_LSF_GameUI.ts","./XCT_LSF_ShopPanel.ts","./XCT_LSF_TakeoutPanel.ts","./XCT_LSF_TipPanel.ts","./XCT_LSF_TutorialPanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/XCT_AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var o,u,e,t,s,c,n,d,r;return{setters:[function(i){o=i.applyDecoratedDescriptor,u=i.initializerDefineProperty},function(i){e=i.cclegacy,t=i.AudioClip,s=i._decorator,c=i.Component,n=i.director,d=i.Node,r=i.AudioSource}],execute:function(){var a,p,S,l,h,A;e._RF.push({},"4977f66FEdErYJ1ZBE0y0vY","XCT_AudioManager",void 0);const{ccclass:M,property:g}=s;i("XCT_AudioManager",(a=M("XCT_AudioManager"),p=g(t),a(((A=class i extends c{constructor(...i){super(...i),u(this,"audioClips",h,this),this.MusicAudioSource=null,this.SoundAudioSource=null,this.clips=void 0}static getInstance(){if(!i.instance){const o=n.getScene().getChildByName("GameManager");if(o)i.instance=o.getComponent(i);else{const o=new d("GameManager");n.getScene().addChild(o),i.instance=o.addComponent(i)}}return i.instance}onLoad(){i.instance=this,this.init(this.audioClips,this.getComponents(r)[0],this.getComponents(r)[1])}init(i,o,u){this.clips=new Map,i.forEach((i=>{this.clips.set(i.name,i)})),this.MusicAudioSource=o,this.SoundAudioSource=u,this.MusicAudioSource&&(this.MusicAudioSource.volume=.4),this.SoundAudioSource&&(this.SoundAudioSource.volume=1)}playSound(i){const o=this.clips.get(i);o&&this.SoundAudioSource.playOneShot(o)}stopSound(){this.SoundAudioSource&&this.SoundAudioSource.stop()}playLongSound(i){const o=this.clips.get(i);o&&(this.SoundAudioSource.loop=!0,this.SoundAudioSource.clip&&this.SoundAudioSource.clip.name==i||(this.SoundAudioSource.stop(),this.SoundAudioSource.clip=o),this.SoundAudioSource.play())}stopLongSound(){this.SoundAudioSource&&(this.SoundAudioSource.stop(),this.SoundAudioSource.loop=!1)}playMusic(i){const o=this.clips.get(i);if(o){if(this.MusicAudioSource.clip&&this.MusicAudioSource.clip.name==i&&this.MusicAudioSource.playing)return;this.MusicAudioSource.clip&&this.MusicAudioSource.clip.name==i||(this.MusicAudioSource.stop(),this.MusicAudioSource.clip=o),this.MusicAudioSource.play()}}stopMusic(){this.MusicAudioSource&&this.MusicAudioSource.stop()}}).instance=void 0,h=o((l=A).prototype,"audioClips",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=l))||S));e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_BasePanel.ts",["cc","./XCT_UILayer.ts"],(function(t){var i,o,n,s,e,a,h,d,l,r,c;return{setters:[function(t){i=t.cclegacy,o=t.Component,n=t.find,s=t.Node,e=t.UITransform,a=t.Button,h=t.tween,d=t.Vec3,l=t.UIOpacity,r=t._decorator},function(t){c=t.XCT_UILayer}],execute:function(){var p;i._RF.push({},"e5fdbOvnglH9pF7UaPxyKYw","XCT_BasePanel",void 0);const{ccclass:_,property:m}=r;let g=t("XCT_PanelAnimation",function(t){return t[t.NONE=1]="NONE",t[t.FADE=2]="FADE",t[t.SCALE=3]="SCALE",t[t.SLIDE_FROM_TOP=4]="SLIDE_FROM_TOP",t[t.SLIDE_FROM_BOTTOM=5]="SLIDE_FROM_BOTTOM",t[t.SLIDE_FROM_LEFT=6]="SLIDE_FROM_LEFT",t[t.SLIDE_FROM_RIGHT=7]="SLIDE_FROM_RIGHT",t[t.SLIDE_TO_TOP=8]="SLIDE_TO_TOP",t[t.SLIDE_TO_BOTTOM=9]="SLIDE_TO_BOTTOM",t[t.SLIDE_TO_LEFT=10]="SLIDE_TO_LEFT",t[t.SLIDE_TO_RIGHT=11]="SLIDE_TO_RIGHT",t[t.PreLoad_at_Top=12]="PreLoad_at_Top",t[t.PreLoad_at_Bottom=13]="PreLoad_at_Bottom",t[t.PreLoad_at_Left=14]="PreLoad_at_Left",t[t.PreLoad_at_Right=15]="PreLoad_at_Right",t}({}));t("XCT_BasePanel",_("XCT_BasePanel")(p=class extends o{constructor(...t){super(...t),this.showAnimation=g.NONE,this.defaultShowAnimation=g.NONE,this.showEasing=null,this.hideAnimation=g.NONE,this.hideEasing=null,this.defaultHideAnimation=g.NONE,this.defaultLayer=c.Game,this.animationDuration=.2,this.closeOnClickOutside=!1,this.buttonToCallbackMap=new Map,this.isShowing=!1,this.isHiding=!1,this.maskNode=null}onLoad(){this.initPanel()}init(t){}initPanel(){this.closeOnClickOutside&&this.createMask()}createMask(){if(this.maskNode=n("mask",this.node),!this.maskNode){this.maskNode=new s("mask"),this.maskNode.setParent(this.node);this.maskNode.addComponent(e).setContentSize(1280,720),this.maskNode.setSiblingIndex(0);this.maskNode.addComponent(a).node.on(a.EventType.CLICK,this.onMaskClick,this)}}onMaskClick(){this.closeOnClickOutside&&this.hide()}addListener(){}removeListener(){}show(t,i){this.isShowing||(this.showAnimation=i||this.defaultShowAnimation,this.init(t),this.isShowing=!0,this.node.active=!0,this.playShowAnimation((()=>{this.isShowing=!1,this.onShowComplete()})))}playShowAnimation(t){let i=0,o=0;switch(this.showAnimation){case g.NONE:t();break;case g.FADE:this.node.getComponent(l).opacity=0,h(this.node.getComponent(l)).to(this.animationDuration,{opacity:255}).call(t).start();break;case g.SCALE:this.node.scale=new d(0,0,1),h(this.node).parallel(h().to(this.animationDuration,{scale:new d(1,1,1)},{easing:"backOut"})).call(t).start();break;case g.SLIDE_FROM_TOP:i=0,this.node.setPosition(this.node.position.x,this.node.getComponent(e).height,this.node.position.z),h(this.node).to(this.animationDuration,{position:new d(this.node.position.x,i,this.node.position.z)},{easing:this.showEasing}).call(t).start();break;case g.SLIDE_FROM_BOTTOM:i=0,this.node.setPosition(this.node.position.x,-this.node.getComponent(e).height,this.node.position.z),h(this.node).to(this.animationDuration,{position:new d(this.node.position.x,i,this.node.position.z)},{easing:this.showEasing}).call(t).start();break;case g.SLIDE_FROM_LEFT:o=0,this.node.setPosition(-this.node.getComponent(e).width,this.node.position.y,this.node.position.z),h(this.node).to(this.animationDuration,{position:new d(o,this.node.position.y,this.node.position.z)},{easing:this.showEasing}).call(t).start();break;case g.SLIDE_FROM_RIGHT:o=0,this.node.setPosition(this.node.getComponent(e).width,this.node.position.y,this.node.position.z),h(this.node).to(this.animationDuration,{position:new d(o,this.node.position.y,this.node.position.z)},{easing:this.showEasing}).call(t).start();break;case g.PreLoad_at_Top:this.node.setPosition(this.node.position.x,this.node.getComponent(e).height,this.node.position.z),t();break;case g.PreLoad_at_Bottom:this.node.setPosition(this.node.position.x,-this.node.getComponent(e).height,this.node.position.z),t();break;case g.PreLoad_at_Left:this.node.setPosition(-this.node.getComponent(e).width,this.node.position.y,this.node.position.z),t();break;case g.PreLoad_at_Right:this.node.setPosition(this.node.getComponent(e).width,this.node.position.y,this.node.position.z),t();break;default:t()}}hide(t,i){!this.isHiding&&this.node.active&&(this.hideAnimation=i||this.defaultHideAnimation,this.isHiding=!0,this.playHideAnimation((()=>{this.offButtonClick(),this.removeListener(),this.node.active=!1,this.isHiding=!1,this.onHideComplete(),t&&t()})))}playHideAnimation(t){switch(this.hideAnimation){case g.NONE:t();break;case g.FADE:h(this.node.getComponent(l)).to(this.animationDuration,{opacity:0}).call(t).start();break;case g.SCALE:h(this.node).to(this.animationDuration,{scale:new d(.8,.8,1)},{easing:"backIn"}).call((()=>{this.node.getComponent(l).opacity=0,t()})).start();break;case g.SLIDE_TO_TOP:this.node.setPosition(0,0,this.node.position.z),h(this.node).to(this.animationDuration,{position:new d(this.node.position.x,this.node.getComponent(e).height,this.node.position.z)},{easing:this.hideEasing}).call(t).start();break;case g.SLIDE_TO_BOTTOM:h(this.node).to(this.animationDuration,{position:new d(this.node.position.x,-this.node.getComponent(e).height,this.node.position.z)},{easing:this.hideEasing}).call(t).start();break;case g.SLIDE_TO_LEFT:h(this.node).to(this.animationDuration,{position:new d(-this.node.getComponent(e).width,this.node.position.y,this.node.position.z)},{easing:this.hideEasing}).call(t).start();break;case g.SLIDE_TO_RIGHT:h(this.node).to(this.animationDuration,{position:new d(this.node.getComponent(e).width,this.node.position.y,this.node.position.z)},{easing:this.hideEasing}).call(t).start();break;default:t()}}onShowComplete(){}onHideComplete(){}refresh(t){}onDestroy(){}findChild(t){return n(t,this.node)}addButtonClick(t,i,o,n=!0,s){t.node.on("click",(()=>{i.call(o)}),this),this.buttonToCallbackMap.set(t,{callback:i,target:o})}offButtonClick(){this.buttonToCallbackMap.forEach((({callback:t,target:i},o)=>{o.node.off("click",t,i)})),this.buttonToCallbackMap.clear()}})||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_DialogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_JBT_DataManager.ts","./EventManager.ts","./XCT_Events.ts","./Banner.ts","./XCT_AudioManager.ts"],(function(t){var e,n,s,i,a,r,o,l,c,u,h,g,d,m,C,I,p,D,f,T,y,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.JsonAsset,a=t.Node,r=t.Label,o=t.Button,l=t._decorator,c=t.Component,u=t.Graphics,h=t.Mask,g=t.instantiate,d=t.Layout,m=t.v3,C=t.tween},function(t){I=t.XCT_JBT_DataManager,p=t.XCT_JBT_ButtonAction,D=t.XCT_JBT_OrderStatus},function(t){f=t.EventManager},function(t){T=t.XCT_Events},function(t){y=t.default},function(t){S=t.XCT_AudioManager}],execute:function(){var k,_,b,E,v,x,w,P,B,N,A,R,M,L,G,O,J,X,j,z,K,U;s._RF.push({},"498f7CoiSNElJw1332Z9RsY","XCT_DialogManager",void 0);const{ccclass:$,property:V}=l;t("XCT_DialogManager",(k=$("XCT_DialogManager"),_=V({type:i}),b=V({type:i}),E=V({type:i}),v=V(a),x=V(a),w=V(r),P=V(a),B=V(r),N=V(o),k(((U=class t extends c{constructor(...t){super(...t),n(this,"gameConfig",M,this),n(this,"specialDialogConfig",L,this),n(this,"endingDialogConfig",G,this),n(this,"dialogPanel",O,this),n(this,"customerNode",J,this),n(this,"dialogText",X,this),n(this,"buttonContainer",j,this),n(this,"missingTip",z,this),n(this,"buttonPrefab",K,this),this.dayConfigs=[],this.specialDialogConfigs={},this.endingDialogConfigs={},this.currentCustomers=[],this.currentCustomer=null,this.currentSegmentIndex=0,this.isStartDialog=!0,this.dialogConfig=[],this.dialogEndCallback=null,this.isAngry=!1,this.currentText="",this.tween=null,this.timers=[],this.nextTimerId=0,this.isAllTimersPaused=!1}onLoad(){this.addListener(),t.Instance=this,this.dialogPanel.active=!1,this.missingTip.node.active=!1,this.dayConfigs=this.gameConfig.json,this.specialDialogConfigs=this.specialDialogConfig.json,this.endingDialogConfigs=this.endingDialogConfig.json,this.dialogPanel.active=!1}startCustomerDialog(t,e=!0,n=!1){this.currentCustomer=t,this.isStartDialog=e,this.dialogConfig=e?t.startDialogs:t.endDialogs,(!e&&!this.dialogConfig||n)&&(this.dialogConfig=this.endingDialogConfigs[t.avatar]);let s=null;e?n?(this.currentSegmentIndex=9,this.isAngry=!0,this.currentSegmentIndex++):this.currentSegmentIndex=1:("外卖员"===t.avatar?this.currentSegmentIndex=0:I.Instance.currentSmile<30?(this.currentSegmentIndex=8,this.isAngry=!0):0!==I.Instance.orderCheckResult.extraIngredients.length?(this.currentSegmentIndex=1,this.isAngry=!0,s=I.Instance.orderCheckResult.extraIngredients.join("、")):0!==I.Instance.orderCheckResult.missingIngredients.length?(this.currentSegmentIndex=2,this.isAngry=!0,s=I.Instance.orderCheckResult.missingIngredients.join("、")):0!==I.Instance.orderCheckResult.lessCountIngredients.length?(this.currentSegmentIndex=3,this.isAngry=!0,s=I.Instance.orderCheckResult.lessCountIngredients.join("、")):0!==I.Instance.orderCheckResult.moreCountIngredients.length?(this.currentSegmentIndex=7,s=I.Instance.orderCheckResult.moreCountIngredients.join("、")):this.currentSegmentIndex=0,this.currentSegmentIndex++),this.loadSp(this.currentCustomer.avatar),this.dialogPanel.active=!0,this.showCurrentSegment(s)}showCurrentSegment(t=null){if(this.currentSegmentIndex>=this.dialogConfig.length+1)return void this.leave();const e=this.dialogConfig[this.currentSegmentIndex-1];if(e.checkStock){const t=I.Instance.checkStock();this.updateStockTip(t)}else this.missingTip.node.active=!1;null!==t&&(e.text=e.text.replace("${}",t)),this.currentText=e.text,this.dialogText.string=e.text,this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!0,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!0,this.clearButtons(),this.createButtons(e),this.addTimer(.07,(()=>{this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!1,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!1})),this.addTimer(2,(()=>{this.dialogEndCallback&&this.dialogEndCallback(),this.dialogEndCallback=null}))}createButtons(t){if(I.Instance.missingStockIngredients.length>0&&!I.Instance.isRefuse){const t=g(this.buttonPrefab.node);t.parent=this.buttonContainer;t.getComponentInChildren(r).string=`进货：${I.Instance.missingStockIngredients[0]}`,t.getChildByName("sign_video").active=!0,t.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),t.active=!0,t.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.buyIngredient()}));const e=g(this.buttonPrefab.node);e.parent=this.buttonContainer;e.getComponentInChildren(r).string="不接待",e.getChildByName("sign_video").active=!1,e.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),e.active=!0,e.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.refuse()}))}else t.buttons.forEach(((e,n)=>{if(e.action==p.LEAVE)this.dialogEndCallback=this.leave;else if(e.action==p.DELIVER_TAKE_OUT)this.dialogEndCallback=this.deliverTakeOut;else if(e.action==p.TAKE_DISH)this.takeDish(e);else{const s=g(this.buttonPrefab.node);s.parent=this.buttonContainer;s.getComponent(o);s.getComponentInChildren(r).string=this.getButtonText(e,n),I.Instance.missingStockIngredients.length>0&&0===n&&(s.getChildByName("sign_video").active=!0),s.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),s.active=!0,s.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.onButtonClick(e,t)}))}}))}getButtonText(t,e){return I.Instance.missingStockIngredients.length>0&&0===e?`进货：${I.Instance.missingStockIngredients[0]}`:t.text}onButtonClick(t,e){let n=t.action;switch(n===p.START_MAKE&&I.Instance.missingStockIngredients.length>0&&(n=p.BUY_INGREDIENT),n!==p.BUY_INGREDIENT&&I.Instance.notes.push([this.currentText,t.text]),n){case p.START_MAKE:this.startMaking();break;case p.NEXT_DIALOG:this.nextSegment(t);break;case p.BUY_INGREDIENT:this.buyIngredient();break;case p.GET_TAKE_OUT:this.getTakeOutProgect(t);break;case p.DELIVER_TAKE_OUT:this.deliverTakeOut();break;case p.TAKE_DISH:this.takeDish(t);break;case p.REFUSE:this.refuse();break;case p.END_DIALOG:this.leave()}}startMaking(){I.Instance.isTakeout=!1,I.Instance.startCooking()}buyIngredient(){if(I.Instance.missingStockIngredients.length>0){const t=I.Instance.missingStockIngredients.shift();console.log(`购买了食材：${t}`),y.Instance.ShowVideoAd((()=>{I.Instance.playerData.stock[t]?I.Instance.playerData.stock[t]++:I.Instance.playerData.stock[t]=1,0===I.Instance.missingStockIngredients.length?this.missingTip.node.active=!1:this.missingTip.string=`缺少配料：${I.Instance.missingStockIngredients[0]}`,this.showCurrentSegment()}))}}nextSegment(t){if(!t)return this.currentSegmentIndex++,void this.showCurrentSegment();t.nextSegment&&-1!==t.nextSegment?(this.currentSegmentIndex=t.nextSegment,this.showCurrentSegment()):(this.currentSegmentIndex++,this.showCurrentSegment())}getTakeOutProgect(t){I.Instance.playerData.isTakeOutProjectSet=!0,f.Scene.emit(T.showTableItem),t&&this.nextSegment(t)}deliverTakeOut(){this.dialogPanel.active=!1,this.clearButtons(),I.Instance.isEndingDialog=!1,this.move(!1,(()=>{I.Instance.currentTakeoutOrder.status=D.DELIVERED,I.Instance.isDayEnd?I.Instance.checkoutDay():this.addTimer(.5,(()=>{this.restartCurrentCustomerDialog()}))}))}takeDish(t){let e=()=>{this.dialogPanel.active=!0,this.nextSegment(t),f.off(T.Dish_Drag_End,e,this)};f.on(T.Dish_Drag_End,e,this)}refuse(){I.Instance.isRefuse=!0,this.startCustomerDialog(I.Instance.currentCustomer,!0,!0)}leave(){this.dialogPanel.active=!1,this.clearButtons(),this.isStartDialog||I.Instance.checkoutCustomer(),I.Instance.isEndingDialog=!1,this.move(!1,(()=>{6===I.Instance.dayCustomerCount&&(I.Instance.isDayEnd=!0),I.Instance.isDayEnd?I.Instance.checkoutDay():this.addTimer(.5,(()=>{this.nextCustomer()}))}))}enter(t){this.move(!0,(()=>{t&&t()}))}move(t,e){t?(this.customerNode.setScale(m(1,0,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1.1,.9,1)}).to(.2,{scale:m(1,1,1)}).call((()=>{e()})).start()):(this.customerNode.setScale(m(1,1,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1,0,1)}).call((()=>{e()})).start())}clearButtons(){this.buttonContainer.children.forEach((t=>{t.destroy()}))}updateStockTip(t){!t&&I.Instance.missingStockIngredients.length>0?(this.missingTip.node.active=!0,this.missingTip.string=`缺少配料：${I.Instance.missingStockIngredients[0]}`):this.missingTip.node.active=!1}loadSp(t){this.customerNode.children.forEach((e=>{e.active=!1,e.name===t&&(e.active=!0,e.getChildByName("smile").active=!this.isAngry,e.getChildByName("angry").active=this.isAngry,this.isAngry=!1)}))}startNewDayDialog(){let t=I.Instance.playerData.currentDay>=16?16:I.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers,I.Instance.playerData.currentDay>=16?I.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):I.Instance.currentCustomerIndex=0,this.startNextCustomerDialog())}startNextCustomerDialog(){let t=I.Instance.playerData.currentDay>=16?16:I.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers);let n=null;if(I.Instance.playerData.isTakeOutProjectSet)for(n=this.currentCustomers[I.Instance.currentCustomerIndex];"外卖员"==n.avatar;)I.Instance.playerData.currentDay>=16?I.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):I.Instance.currentCustomerIndex++,n=this.currentCustomers[I.Instance.currentCustomerIndex];else n=this.currentCustomers[I.Instance.currentCustomerIndex];n?(I.Instance.resetCustomer(n),this.loadSp(n.avatar),this.enter((()=>{this.startCustomerDialog(n)}))):console.log(`第${I.Instance.playerData.currentDay}天结束`)}restartCurrentCustomerDialog(){this.startNextCustomerDialog()}showTakeoutEndDialog(){I.Instance.isEndingDialog&&(I.Instance.isEndingDialog=!1,"外卖员"!==I.Instance.currentCustomer.avatar&&(I.Instance.checkoutCustomer(),I.Instance.playerData.currentDay>=16?I.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):I.Instance.currentCustomerIndex++,I.Instance.dayCustomerCount++)),I.Instance.missingStockIngredients=[],this.dialogPanel.active=!1,this.customerNode.setScale(m(1,0,1));const t=this.specialDialogConfigs["外卖员"];t&&(this.loadSp(t.avatar),this.enter((()=>{this.startCustomerDialog(t,!1)})))}nextCustomer(){I.Instance.playerData.currentDay>=16?I.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):I.Instance.currentCustomerIndex++,I.Instance.dayCustomerCount++,I.Instance.addOneHour(),this.startNextCustomerDialog()}showEndDialogSp(){this.dialogPanel.active=!1,this.loadSp(I.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1))}continueCustomerDialog(){this.loadSp(I.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1)),this.startCustomerDialog(I.Instance.currentCustomer,!1)}onGamePause(){this.tween&&this.tween.pause(),this.pauseAllTimers()}onGameResume(){this.tween&&this.tween.resume(),this.resumeAllTimers()}addListener(){f.on(T.JBT_Start_NewDay_Dialog,this.startNewDayDialog,this),f.on(T.JBT_Show_End_Dialog_Sp,this.showEndDialogSp,this),f.on(T.JBT_Continue_Customer_EndDialog,this.continueCustomerDialog,this),f.on(T.JBT_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),f.on(T.Game_Pause,this.onGamePause,this),f.on(T.Game_Resume,this.onGameResume,this)}removeListener(){f.off(T.JBT_Start_NewDay_Dialog,this.startNewDayDialog,this),f.off(T.JBT_Show_End_Dialog_Sp,this.showEndDialogSp,this),f.off(T.JBT_Continue_Customer_EndDialog,this.continueCustomerDialog,this),f.off(T.JBT_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),f.off(T.Game_Pause,this.onGamePause,this),f.off(T.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener(),this.clearAllTimers()}update(t){if(0!==this.timers.length)for(let e=this.timers.length-1;e>=0;e--){const n=this.timers[e];if(!n.isPaused&&!this.isAllTimersPaused&&(n.elapsed+=t,n.elapsed>=n.duration)){try{n.callback()}catch(t){console.error("Timer callback error:",t)}this.timers.splice(e,1)}}}addTimer(t,e){const n=this.nextTimerId++,s={id:n,duration:t,elapsed:0,callback:e,isPaused:!1};return this.timers.push(s),n}pauseTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!0,!0)}resumeTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!1,!0)}removeTimer(t){const e=this.timers.findIndex((e=>e.id===t));return-1!==e&&(this.timers.splice(e,1),!0)}pauseAllTimers(){this.isAllTimersPaused=!0}resumeAllTimers(){this.isAllTimersPaused=!1}getTimerRemainingTime(t){const e=this.timers.find((e=>e.id===t));return e?Math.max(0,e.duration-e.elapsed):null}clearAllTimers(){this.timers=[],this.isAllTimersPaused=!1}}).Instance=void 0,M=e((R=U).prototype,"gameConfig",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(R.prototype,"specialDialogConfig",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(R.prototype,"endingDialogConfig",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(R.prototype,"dialogPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(R.prototype,"customerNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(R.prototype,"dialogText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(R.prototype,"buttonContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"missingTip",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(R.prototype,"buttonPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=R))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_DishNodeDrag.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts"],(function(t){var o,e,n,i,s,r,a,h,c,d,u;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Node,s=t._decorator,r=t.Component,a=t.v3,h=t.UITransform,c=t.v2},function(t){d=t.EventManager},function(t){u=t.XCT_Events}],execute:function(){var l,T,g,v,p;n._RF.push({},"bb8a6timTFCJq56UVixYruo","XCT_DishNodeDrag",void 0);const{ccclass:C,property:_}=s;t("XCT_DishNodeDrag",(l=C("XCT_DishNodeDrag"),T=_(i),l((p=o((v=class extends r{constructor(...t){super(...t),this.startPos=null,e(this,"targetArea",p,this),this.isCanMove=!1}onLoad(){this.startPos=this.node.getWorldPosition(),this.node.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchStart(t){this.isCanMove=!0;const o=t.getUILocation();this.node.setWorldPosition(a(o.x,o.y,0))}onTouchMove(t){if(!this.isCanMove)return;const o=t.getUILocation();this.node.setWorldPosition(a(o.x,o.y,0))}onTouchEnd(t){if(!this.isCanMove)return;this.targetArea.getComponent(h).getBoundingBoxToWorld().contains(c(this.node.getWorldPosition().x,this.node.getWorldPosition().y))?(this.node.active=!1,this.node.setWorldPosition(this.startPos),d.Scene.emit(u.Dish_Drag_End)):this.node.setWorldPosition(this.startPos)}}).prototype,"targetArea",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_Events.ts",["cc"],(function(_){var e;return{setters:[function(_){e=_.cclegacy}],execute:function(){e._RF.push({},"329b3IXZM5Mtp7F2s35YLru","XCT_Events",void 0);_("XCT_Events",function(_){return _.onBtnBackClick="onBtnBackClick",_.showTableItem="showTableItem",_.hideTableItem="hideTableItem",_.showTip="showTip",_.HandAnimation_Start="HandAnimation_Start",_.HandAnimation_End="HandAnimation_End",_.Hide_TutorialPanel="Hide_TutorialPanel",_.Show_TutorialPanel="Show_TutorialPanel",_.Dish_Drag_End="Dish_Drag_End",_.Game_Pause="Game_Pause",_.Game_Resume="Game_Resume",_.JBT_Update_Ingredient="JBT_Update_Ingredient",_.JBT_Start_NewDay_Dialog="JBT_Start_NewDay_Dialog",_.JBT_Show_End_Dialog_Sp="JBT_Show_End_Dialog_Sp",_.JBT_Continue_Customer_EndDialog="JBT_Continue_Customer_EndDialog",_.JBT_Show_Takeout_End_Dialog="JBT_Show_Takeout_End_Dialog",_.JBT_Cancel_All_Ingredients="JBT_Cancel_All_Ingredients",_.JBT_Disable_CancelMask="JBT_Disable_CancelMask",_.JBT_Pack_Ingredients="JBT_Pack_Ingredients",_.JBT_All_Packed="JBT_All_Packed",_.JBT_Show_Add_Tip="JBT_Show_Add_Tip",_.JBT_Update_Money="JBT_Update_Money",_.JBT_Update_Time="JBT_Update_Time",_.JBT_Update_Smile="JBT_Update_Smile",_.JBT_Hide_smile="JBT_Hide_smile",_.JBT_Show_smile="JBT_Show_smile",_.JBT_ORDER_DATA_UPDATED="JBT_ORDER_DATA_UPDATED",_.JBT_New_Takeout_Order="JBT_New_Takeout_Order",_.JBT_Hide_New_Takeout_Order="JBT_Hide_New_Takeout_Order",_.JBT_Take_Dish="JBT_Take_Dish",_.JBT_Show_Dish_Node="JBT_Show_Dish_Node",_.JBT_ShowTip_Back="JBT_ShowTip_Back",_.JBT_ShowTip_NoMoney="JBT_ShowTip_NoMoney",_.JBT_ShowTip_OpenTakeout="JBT_ShowTip_OpenTakeout",_.JBT_ShowTip_Evaluation="JBT_ShowTip_Evaluation",_.JBT_Takeout_Open="JBT_Takeout_Open",_.HJM_Update_Ingredient="HJM_Update_Ingredient",_.HJM_Start_NewDay_Dialog="HJM_Start_NewDay_Dialog",_.HJM_Show_End_Dialog_Sp="HJM_Show_End_Dialog_Sp",_.HJM_Show_Bowl="HJM_Show_Bowl",_.HJM_Continue_Customer_EndDialog="HJM_Continue_Customer_EndDialog",_.HJM_Show_Takeout_End_Dialog="HJM_Show_Takeout_End_Dialog",_.HJM_Cancel_All_Ingredients="HJM_Cancel_All_Ingredients",_.HJM_Change_CookArea="HJM_Change_CookArea",_.HJM_Completed="HJM_Completed",_.HJM_Pack_Ingredients="HJM_Pack_Ingredients",_.HJM_All_Packed="HJM_All_Packed",_.HJM_Show_Add_Tip="HJM_Show_Add_Tip",_.HJM_Update_Money="HJM_Update_Money",_.HJM_Update_Time="HJM_Update_Time",_.HJM_Update_Smile="HJM_Update_Smile",_.HJM_Hide_smile="HJM_Hide_smile",_.HJM_Show_smile="HJM_Show_smile",_.HJM_Hide_New_Takeout_Order="HJM_Hide_New_Takeout_Order",_.HJM_ORDER_DATA_UPDATED="HJM_ORDER_DATA_UPDATED",_.HJM_New_Takeout_Order="HJM_New_Takeout_Order",_.HJM_Take_Dish="HJM_Take_Dish",_.HJM_Show_Dish_Node="HJM_Show_Dish_Node",_.HJM_ShowTip_Back="HJM_ShowTip_Back",_.HJM_ShowTip_NoMoney="HJM_ShowTip_NoMoney",_.HJM_ShowTip_OpenTakeout="HJM_ShowTip_OpenTakeout",_.HJM_Takeout_Open="HJM_Takeout_Open",_.LSF_Update_Ingredient="LSF_Update_Ingredient",_.LSF_Start_NewDay_Dialog="LSF_Start_NewDay_Dialog",_.LSF_Show_End_Dialog_Sp="LSF_Show_End_Dialog_Sp",_.LSF_Show_Bowl="LSF_Show_Bowl",_.LSF_Continue_Customer_EndDialog="LSF_Continue_Customer_EndDialog",_.LSF_Show_Takeout_End_Dialog="LSF_Show_Takeout_End_Dialog",_.LSF_Cancel_All_Ingredients="LSF_Cancel_All_Ingredients",_.LSF_Change_CookArea="LSF_Change_CookArea",_.LSF_Completed="LSF_Completed",_.LSF_Pack_Ingredients="LSF_Pack_Ingredients",_.LSF_All_Packed="LSF_All_Packed",_.LSF_Show_Add_Tip="LSF_Show_Add_Tip",_.LSF_Update_Money="LSF_Update_Money",_.LSF_Update_Time="LSF_Update_Time",_.LSF_Update_Smile="LSF_Update_Smile",_.LSF_Hide_smile="LSF_Hide_smile",_.LSF_Show_smile="LSF_Show_smile",_.LSF_ORDER_DATA_UPDATED="LSF_ORDER_DATA_UPDATED",_.LSF_New_Takeout_Order="LSF_New_Takeout_Order",_.LSF_Hide_New_Takeout_Order="LSF_Hide_New_Takeout_Order",_.LSF_Take_Dish="LSF_Take_Dish",_.LSF_Show_Dish_Node="LSFShow_Dish_Node",_.LSF_ShowTip_Back="LSF_ShowTip_Back",_.LSF_ShowTip_NoMoney="LSF_ShowTip_NoMoney",_.LSF_ShowTip_OpenTakeout="LSF_ShowTip_OpenTakeout",_.LSF_Takeout_Open="LSF_Takeout_Open",_.KLM_Update_Ingredient="KLM_Update_Ingredient",_.KLM_Start_NewDay_Dialog="KLM_Start_NewDay_Dialog",_.KLM_Show_End_Dialog_Sp="KLM_Show_End_Dialog_Sp",_.KLM_Continue_Customer_EndDialog="KLM_Continue_Customer_EndDialog",_.KLM_Show_Takeout_End_Dialog="KLM_Show_Takeout_End_Dialog",_.KLM_Cancel_All_Ingredients="KLM_Cancel_All_Ingredients",_.KLM_Pack_Ingredients="KLM_Pack_Ingredients",_.KLM_All_Packed="KLM_All_Packed",_.KLM_Completed="KLM_Completed",_.KLM_Show_Add_Tip="KLM_Show_Add_Tip",_.KLM_Update_Money="KLM_Update_Money",_.KLM_Update_Time="KLM_Update_Time",_.KLM_Update_Smile="KLM_Update_Smile",_.KLM_Hide_smile="KLM_Hide_smile",_.KLM_Show_smile="KLM_Show_smile",_.KLM_ORDER_DATA_UPDATED="KLM_ORDER_DATA_UPDATED",_.KLM_New_Takeout_Order="KLM_New_Takeout_Order",_.KLM_Hide_New_Takeout_Order="KLM_Hide_New_Takeout_Order",_.KLM_Show_Dish="KLM_Show_Dish",_.KLM_Take_Dish="KLM_Take_Dish",_.KLM_Show_Dish_Node="KLM_Show_Dish_Node",_.KLM_ShowTip_Back="KLM_ShowTip_Back",_.KLM_ShowTip_NoMoney="KLM_ShowTip_NoMoney",_.KLM_ShowTip_OpenTakeout="KLM_ShowTip_OpenTakeout",_.KLM_Takeout_Open="KLM_Takeout_Open",_.JP_Show_PackBag="JP_Show_PackBag",_.JP_Hide_PackBag="JP_Hide_PackBag",_.JP_Show_EndPanel="JP_Show_EndPanel",_.JP_Hide_EndPanel="JP_Hide_EndPanel",_.JP_Show_Money="JP_Show_money",_.JP_Hide_Money="JP_Hide_money",_.JP_ShowTutorial="JP_ShowTutorial",_.JP_HideTutorial="JP_HideTutorial",_.JP_Remove_All_Customers="JP_Remove_All_Customers",_}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_GameManager.ts",["cc","./XCT_UIManager.ts","./XCT_UIPanel.ts","./EventManager.ts","./XCT_Events.ts","./XCT_BasePanel.ts","./XCT_JBT_DataManager.ts","./XCT_HJM_DataManager.ts","./XCT_KLM_DataManager.ts","./XCT_LSF_DataManager.ts","./XCT_JP_DataManager.ts"],(function(n){var a,e,t,l,s,o,c,P,i,h,r,I,u;return{setters:[function(n){a=n.cclegacy,e=n._decorator,t=n.Component},function(n){l=n.XCT_UIManager},function(n){s=n.XCT_UIPanel},function(n){o=n.EventManager},function(n){c=n.XCT_Events},function(n){P=n.XCT_PanelAnimation},function(n){i=n.XCT_JBT_DataManager},function(n){h=n.XCT_HJM_DataManager},function(n){r=n.XCT_KLM_DataManager},function(n){I=n.XCT_LSF_DataManager},function(n){u=n.XCT_JP_DataManager}],execute:function(){var _,T;a._RF.push({},"78702DLOrJOrZcWa+4l8bTL","XCT_GameManager",void 0);const{ccclass:d,property:L}=e;var M=function(n){return n[n.JBT=1]="JBT",n[n.HJM=2]="HJM",n[n.KLM=3]="KLM",n[n.LSF=4]="LSF",n[n.JP=5]="JP",n}(M||{});n("XCT_GameManager",d("XCT_GameManager")(((T=class n extends t{constructor(...n){super(...n),this.hasStartPanel=!0,this.gameMode=M.LSF}onLoad(){n.Instance=this}start(){l.Instance.showPanel(s.TablePanel),this.hasStartPanel?l.Instance.showPanel(s.StartPanel):this.chooseMode(this.gameMode)}chooseMode(n){switch(n){case M.JBT:this.onChooseJBT();break;case M.HJM:this.onChooseHJM();break;case M.KLM:this.onChooseKLM();break;case M.LSF:this.onChooseLSF();break;case M.JP:this.onChooseJP()}}onChooseJBT(){i.Instance.initData(),l.Instance.showPanel(s.LoadingPanel,(()=>{l.Instance.showPanel(s.JBT_GameUI,null,(()=>{l.Instance.showPanel(s.JBT_DialoguePanel,null,(()=>{l.Instance.showPanel(s.TipPanel);let n=!1,a=!1,e=()=>{1!=i.Instance.playerData.currentDay||i.Instance.isTutorialEnd||l.Instance.showPanel(s.JBT_TutorialPanel,null,null,P.PreLoad_at_Bottom),l.Instance.hidePanel(s.StartPanel),l.Instance.hidePanel(s.LoadingPanel,(()=>{l.Instance.hidePanel(s.TablePanel),o.Scene.emit(c.showTableItem),i.Instance.resetDay()}))};l.Instance.showPanel(s.JBT_GamePanel,null,(()=>{n=!0,a&&n&&e()}),P.PreLoad_at_Bottom),this.scheduleOnce((()=>{a=!0,a&&n&&e()}),.5)}),P.NONE)}),P.NONE)}),null,P.NONE)}onChooseHJM(){h.Instance.initData(),l.Instance.showPanel(s.LoadingPanel,(()=>{l.Instance.showPanel(s.HJM_GameUI,null,(()=>{l.Instance.showPanel(s.HJM_DialoguePanel,null,(()=>{l.Instance.showPanel(s.TipPanel);let n=!1,a=!1,e=()=>{1!=h.Instance.playerData.currentDay||h.Instance.isTutorialEnd||l.Instance.showPanel(s.HJM_TutorialPanel,null,null,P.PreLoad_at_Bottom),l.Instance.hidePanel(s.StartPanel),l.Instance.hidePanel(s.LoadingPanel,(()=>{l.Instance.hidePanel(s.TablePanel),o.Scene.emit(c.showTableItem),h.Instance.resetDay()}))};l.Instance.showPanel(s.HJM_GamePanel,null,(()=>{n=!0,a&&n&&e()}),P.PreLoad_at_Bottom),this.scheduleOnce((()=>{a=!0,a&&n&&e()}),.5)}),P.NONE)}),P.NONE)}),null,P.NONE)}onChooseKLM(){r.Instance.initData(),l.Instance.showPanel(s.LoadingPanel,(()=>{l.Instance.showPanel(s.KLM_GameUI,null,(()=>{l.Instance.showPanel(s.KLM_DialoguePanel,null,(()=>{l.Instance.showPanel(s.TipPanel);let n=!1,a=!1,e=()=>{1!=r.Instance.playerData.currentDay||r.Instance.isTutorialEnd||l.Instance.showPanel(s.KLM_TutorialPanel,null,null,P.PreLoad_at_Bottom),l.Instance.hidePanel(s.StartPanel),l.Instance.hidePanel(s.LoadingPanel,(()=>{l.Instance.hidePanel(s.TablePanel),o.Scene.emit(c.showTableItem),r.Instance.resetDay()}))};l.Instance.showPanel(s.KLM_GamePanel,null,(()=>{n=!0,a&&n&&e()}),P.PreLoad_at_Bottom),this.scheduleOnce((()=>{a=!0,a&&n&&e()}),.5)}),P.NONE)}),P.NONE)}),null,P.NONE)}onChooseLSF(){I.Instance.initData(),l.Instance.showPanel(s.LoadingPanel,(()=>{l.Instance.showPanel(s.LSF_GameUI,null,(()=>{l.Instance.showPanel(s.LSF_DialoguePanel,null,(()=>{l.Instance.showPanel(s.TipPanel);let n=!1,a=!1,e=()=>{1!=I.Instance.playerData.currentDay||I.Instance.isTutorialEnd||l.Instance.showPanel(s.LSF_TutorialPanel,null,null,P.PreLoad_at_Bottom),l.Instance.hidePanel(s.StartPanel),l.Instance.hidePanel(s.LoadingPanel,(()=>{l.Instance.hidePanel(s.TablePanel),o.Scene.emit(c.showTableItem),I.Instance.resetDay()}))};l.Instance.showPanel(s.LSF_GamePanel,null,(()=>{n=!0,a&&n&&e()}),P.PreLoad_at_Bottom),this.scheduleOnce((()=>{a=!0,a&&n&&e()}),.5)}),P.NONE)}),P.NONE)}),null,P.NONE)}onChooseJP(){l.Instance.showPanel(s.LoadingPanel,(()=>{l.Instance.showPanel(s.TipPanel),u.Instance.resetLevelData(),l.Instance.showPanel(s.JP_GamePanel,null,(()=>{this.scheduleOnce((()=>{l.Instance.hidePanel(s.StartPanel),l.Instance.hidePanel(s.LoadingPanel,(()=>{l.Instance.hidePanel(s.TablePanel),o.Scene.emit(c.showTableItem)}))}),.5)}),P.NONE)}),null,P.NONE)}}).Instance=void 0,_=T))||_);a._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_Bowl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts"],(function(o){var t,e,n,i,r,s,l,a,c,u;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.initializerDefineProperty},function(o){n=o.cclegacy,i=o.Node,r=o._decorator,s=o.Component,l=o.tween,a=o.v3},function(o){c=o.XCT_Events},function(o){u=o.EventManager}],execute:function(){var d,h,w,_,p,b,C,P,f,m,v,y,g;n._RF.push({},"1372273ws5KG4WbGtEtU2Mk","XCT_HJM_Bowl",void 0);const{ccclass:M,property:T}=r;o("XCT_HJM_Bowl",(d=M("XCT_HJM_Bowl"),h=T(i),w=T(i),_=T(i),p=T(i),b=T(i),d((f=t((P=class extends s{constructor(...o){super(...o),e(this,"bowlContainer1",f,this),e(this,"commonContainer",m,this),e(this,"bowlContainer2",v,this),e(this,"worldPos_1",y,this),e(this,"worldPos_2",g,this),this.count=0}onLoad(){this.addListener()}moveToPos2(){let o=this.node.worldPosition;this.node.setParent(this.commonContainer),this.node.setWorldPosition(o),l(this.node).call((()=>{this.node.getChildByName("cookArea").active=!0})).delay(.2).to(.5,{worldPosition:this.worldPos_2.worldPosition}).call((()=>{o=this.node.worldPosition,this.node.setParent(this.bowlContainer2),this.node.setWorldPosition(o)})).start(),l(this.node).delay(.2).to(.5,{scale:a(this.worldPos_2.scale.x,this.worldPos_2.scale.y,1)}).start()}addListener(){u.on(c.HJM_Change_CookArea,this.moveToPos2,this)}removeListener(){u.off(c.HJM_Change_CookArea,this.moveToPos2,this)}onDestroy(){this.removeListener()}}).prototype,"bowlContainer1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(P.prototype,"commonContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(P.prototype,"bowlContainer2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(P.prototype,"worldPos_1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(P.prototype,"worldPos_2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=P))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_CancelMask.ts",["cc","./EventManager.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts"],(function(n){var e,a,t,c,s,r;return{setters:[function(n){e=n.cclegacy,a=n.Component,t=n._decorator},function(n){c=n.EventManager},function(n){s=n.XCT_Events},function(n){r=n.XCT_HJM_DataManager}],execute:function(){var o;e._RF.push({},"bcafa0Z1n1ICIQfW9peLMri","XCT_HJM_CancelMask",void 0);const{ccclass:_,property:i}=t;n("XCT_HJM_CancelMask",_("XCT_HJM_CancelMask")(o=class extends a{onLoad(){this.node.on("click",this.onClick,this)}onClick(){(1!=r.Instance.playerData.currentDay||r.Instance.isTutorialEnd)&&c.Scene.emit(s.HJM_Cancel_All_Ingredients)}})||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_CheckoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,n,i,a,l,r,o,s,u,c,d,h,b,p,C,f,y,g,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,l=t.Node,r=t._decorator,o=t.Color,s=t.Button},function(t){u=t.EventManager},function(t){c=t.ProjectEventManager,d=t.ProjectEvent},function(t){h=t.XCT_BasePanel,b=t.XCT_PanelAnimation},function(t){p=t.XCT_UILayer},function(t){C=t.XCT_UIManager},function(t){f=t.XCT_UIPanel},function(t){y=t.XCT_Events},function(t){g=t.XCT_HJM_DataManager},function(t){I=t.XCT_AudioManager}],execute:function(){var _,P,T,M,m,v,X,D,w,E,H,R,A,S,J,U,k,z,L,F,O;i._RF.push({},"2efb1mkMItDR5CwrfVqFPKX","XCT_HJM_CheckoutPanel",void 0);const{ccclass:x,property:K}=r;t("XCT_HJM_CheckoutPanel",(_=x("XCT_HJM_CheckoutPanel"),P=K(a),T=K(a),M=K(a),m=K(a),v=K(a),X=K(a),D=K(a),w=K(l),E=K(a),_((A=e((R=class extends h{constructor(...t){super(...t),this.defaultShowAnimation=b.NONE,this.defaultHideAnimation=b.NONE,this.defaultLayer=p.Pop2,this.animationDuration=.6,n(this,"lblDay",A,this),n(this,"lblTurnover",S,this),n(this,"lblTip",J,this),n(this,"lblRent",U,this),n(this,"lblRefund",k,this),n(this,"lblCost",z,this),n(this,"lblProfit",L,this),n(this,"btnOK",F,this),n(this,"lblCatCost",O,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){c.emit(d.弹出窗口,"小吃摊"),this.initUI()}initUI(){this.lblDay.string=""+g.Instance.playerData.currentDay,g.Instance.playerData.money-=g.Instance.Rent,g.Instance.playerData.isAdoptedCat&&(g.Instance.playerData.money-=10),u.Scene.emit(y.HJM_Update_Money),this.lblTurnover.string="+"+g.Instance.daySellingPrice.toFixed(1),this.lblTip.string="+"+g.Instance.daySellingAddTip.toFixed(1),this.lblRent.string="-"+g.Instance.Rent,this.lblRefund.string="-"+g.Instance.dayRefund.toFixed(1),this.lblCost.string="-"+g.Instance.dayCost.toFixed(1),this.lblCatCost.string="-10",this.lblCatCost.node.active=g.Instance.playerData.isAdoptedCat;let t=g.Instance.daySellingPrice+g.Instance.daySellingAddTip-g.Instance.dayCost-g.Instance.Rent-g.Instance.dayRefund;this.lblProfit.color=new o(t<0?"C53737":"5FC537"),this.lblProfit.string=""+t.toFixed(1)}onClickOK(){I.getInstance().playSound("点击"),g.Instance.isHadShowShop?C.Instance.hidePanel(f.HJM_CheckoutPanel):(g.Instance.isHadShowShop=!0,C.Instance.showPanel(f.HJM_ShopPanel,null,(()=>{C.Instance.showPanel(f.HJM_GameUI,null,null,b.NONE,p.GameUI2),C.Instance.hidePanel(f.HJM_CheckoutPanel)})))}addListener(){this.btnOK.on(s.EventType.CLICK,this.onClickOK,this)}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lblDay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(R.prototype,"lblTurnover",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(R.prototype,"lblTip",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(R.prototype,"lblRent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(R.prototype,"lblRefund",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"lblCost",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(R.prototype,"lblProfit",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(R.prototype,"btnOK",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(R.prototype,"lblCatCost",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=R))||H));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_Completed.ts",["cc","./EventManager.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts"],(function(e){var t,n,c,a,o,s;return{setters:[function(e){t=e.cclegacy,n=e.Component,c=e._decorator},function(e){a=e.EventManager},function(e){o=e.XCT_Events},function(e){s=e.XCT_HJM_DataManager}],execute:function(){var i;t._RF.push({},"4139eNvJlZJ86SST0CVHSID","XCT_HJM_Completed",void 0);const{ccclass:r,property:l}=c;e("XCT_HJM_Completed",r("XCT_HJM_Completed")(i=class extends n{onLoad(){this.node.on("click",this.onClick,this)}onClick(){let e=!1,t=["酱","醋","盐","鸡精"];if(s.Instance.currentCookedSteps.forEach((n=>{e||t.includes(n)&&(e=!0)})),!e)return void a.Scene.emit(o.showTip,"请先调味！");let n=!1,c=["洋葱","芝士","香肠","腊肉","叉烧肉","咸鸭蛋","木耳","煎蛋","牛肉","腐竹","酸笋","酸豆角"];s.Instance.currentCookedSteps.forEach((e=>{n||c.includes(e)&&(n=!0)})),n?(1!=s.Instance.playerData.currentDay||s.Instance.isTutorialEnd||13===s.Instance.tutorialIdx)&&(a.Scene.emit(o.HJM_Cancel_All_Ingredients),s.Instance.currentCookedSteps.push("卷饼"),13==s.Instance.tutorialIdx&&(a.Scene.emit(o.HandAnimation_End),s.Instance.tutorialIdx++),a.Scene.emit(o.HJM_Completed)):a.Scene.emit(o.showTip,"要先撒上配料，才算制作完成哦！")}})||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_BasePanel.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,s,r,a,o,h,u,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.JsonAsset,r=e._decorator,a=e.Component},function(e){o=e.EventManager},function(e){h=e.XCT_Events},function(e){u=e.XCT_UIManager},function(e){c=e.XCT_UIPanel},function(e){l=e.XCT_PanelAnimation},function(e){d=e.XCT_AudioManager}],execute:function(){var g,T,m,S,p,_,C,k,f,I;n._RF.push({},"0247f3NIzJGv6FUx27aQEjq","XCT_HJM_DataManager",void 0);const{ccclass:E,property:D}=r;let P=e("XCT_HJM_IngredientType",function(e){return e.SPICE="撒料类",e.SPREAD="涂抹类",e.EGG="鸡蛋类",e}({})),M=(e("XCT_HJM_ButtonAction",function(e){return e.START_MAKE="开始制作",e.NEXT_DIALOG="下一段对话",e.BUY_INGREDIENT="购买食材",e.REFUSE="拒绝",e.END_DIALOG="结束对话",e.LEAVE="离开",e.GET_TAKE_OUT="开展外卖业务",e.DELIVER_TAKE_OUT="送达",e.TAKE_DISH="递餐",e}({})),e("XCT_HJM_OrderStatus",function(e){return e[e.UNHANDLED=0]="UNHANDLED",e[e.TIMEOUT=1]="TIMEOUT",e[e.COOKED=2]="COOKED",e[e.DELIVERED=3]="DELIVERED",e[e.REFUSED=4]="REFUSED",e}({})));e("XCT_HJM_DataManager",(g=E("XCT_HJM_DataManager"),T=D(s),m=D(s),S=D(s),g(((I=class e extends a{constructor(...e){super(...e),this.STORAGE_KEY="XCT_HJM_PlayerData",i(this,"ingredientsConfigJson",C,this),i(this,"TipConfigJson",k,this),i(this,"TakeoutOrderConfigJson",f,this),this.ingredientsConfig=null,this.ingredientsConfigObject=null,this.tipConfig=null,this.takeoutOrderConfig=null,this.standardSpreadCount=300,this.playerData=null,this.isTutorialEnd=!1,this.isNeedShowDragTutorial=!1,this.tutorialIdx=0,this.isCooking=!1,this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.MINUTES_PER_HOUR=12,this.MINUTE_INTERVAL=15,this.isTimePause=!1,this.totalTime=0,this.isDayEnd=!1,this.currentSmile=100,this.startCookingTime=0,this.isTakeout=!1,this.currentCustomerIndex=0,this.dayCustomerCount=0,this.currentCustomer=null,this.missingStockIngredients=[],this.isEndingDialog=!1,this.isRefuse=!1,this.currentDayTakeoutConfig=[],this.currentTakeoutOrders=[],this.lastTakeoutOrderIds=[],this.currentTakeoutOrder=null,this.needShowTakeoutCome=!1,this.notes=[],this.takeoutNotes=[],this.currentDishes={},this.orderCheckResult=this.initOrderCheckResult(),this.currentEggIngredientType="白面团",this.eggIngredientTypeTransfer={},this.currentSauceType="调味酱",this.sauceTypeCount={},this.currentCookedSteps=[],this.currentSellingPrice=0,this.daySellingPrice=0,this.currentSellingAddTip=0,this.totalSellingTip=10,this.daySellingAddTip=0,this.refund=0,this.dayRefund=0,this.Rent=10,this.dayCost=0,this.isHadShowShop=!1,this.isShowingTakeoutPanel=!1,this.isShowingShopPanel=!1,this.isCatDriveAway=!1,this.isPause=!1}initOrderCheckResult(){return{extraIngredients:[],missingIngredients:[],lessCountIngredients:[],lessSpreadIngredients:[],moreSpreadIngredients:[],lessRotateIngredients:[],moreCountIngredients:[]}}onLoad(){this.addListener(),e.Instance=this,this.ingredientsConfig=this.ingredientsConfigJson.json,this.ingredientsConfigObject=this.ingredientsConfig.reduce(((e,t)=>(e[t.name]=t,e)),{}),this.tipConfig=this.TipConfigJson.json,this.takeoutOrderConfig=this.TakeoutOrderConfigJson.json,this.playerData=this.loadData(),this.initData()}initData(){this.playerData=this.loadData(),this.resetDay()}loadData(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{money:100,currentDay:1,stock:{"番茄锅":1,"火鸡面":1,"洋葱":1,"咸鸭蛋":1,"酱":1,"盐":1},score:5,isTakeOutProjectSet:!1,isTakeOutProjectOpen:!1,isAdoptedCat:!1}}resetDay(){this.tutorialIdx=0,this.isTutorialEnd=!1,this.isNeedShowDragTutorial=!1,this.currentCustomerIndex=0,this.dayCustomerCount=0,this.orderCheckResult=this.initOrderCheckResult(),this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.totalTime=24*this.MINUTES_PER_HOUR,this.isDayEnd=!1,this.daySellingPrice=0,this.daySellingAddTip=0,this.dayRefund=0,this.currentDayTakeoutConfig=this.generateRandomTakeoutOrders(),this.currentTakeoutOrders=[],this.needShowTakeoutCome=!1,this.isShowingTakeoutPanel=!1,this.isCatDriveAway=!1,this.isCooking=!1,this.isPause=!1,o.Scene.emit(h.HJM_Update_Money),o.Scene.emit(h.HJM_Update_Smile),o.Scene.emit(h.HJM_Update_Time),o.Scene.emit(h.HJM_Hide_New_Takeout_Order),o.Scene.emit(h.HJM_Start_NewDay_Dialog)}generateRandomTakeoutOrders(){const e=this.takeoutOrderConfig.find((e=>5===e.day));if(!e||0===e.takeoutOrders.length)return console.warn("第5天的外卖订单配置不存在或为空"),[];const t=[...e.takeoutOrders],i=[],n=Math.min(5,t.length);for(let e=0;e<n;e++){const e=Math.floor(Math.random()*t.length),n={...t[e]};i.push(n),t.splice(e,1)}const s=this.generateOrderTimes(n);return i.map(((e,t)=>{e.showTime=s[t];const i=s[t][0]+2;return e.expireTime=[i,s[t][1]],e}))}generateOrderTimes(e){const t=Array.from({length:9},((e,t)=>t+9)),i=[0,15,30,45],n=[];for(const e of t)for(const t of i)n.push([e,t]);for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}const s=n.slice(0,e);return s.sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]-t[1])),s}resetCustomer(e){this.currentCustomer=e,this.isRefuse=!1,this.missingStockIngredients=[],this.currentSellingPrice=0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.startCookingTime=this.currentTime,this.currentCookedSteps=[],this.notes=[],this.startCookingTime=this.currentTime,this.currentSmile=100,this.isPause=!1,o.Scene.emit(h.HJM_Update_Smile)}resetTakout(e){this.currentTakeoutOrder=e,this.takeoutNotes=[],this.isTakeout=!0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.currentCookedSteps=[],this.isPause=!1}passDay(){this.playerData.currentDay++,this.saveData(),u.Instance.showPanel(c.HJM_GameUI,null,(()=>{u.Instance.showPanel(c.HJM_DialoguePanel,null,(()=>{u.Instance.showPanel(c.TipPanel),this.scheduleOnce((()=>{u.Instance.showPanel(c.HJM_GamePanel,null,null,l.PreLoad_at_Bottom),u.Instance.hidePanel(c.StartPanel),u.Instance.hidePanel(c.PassPanel),u.Instance.hidePanel(c.LoadingPanel,(()=>{u.Instance.hidePanel(c.TablePanel),o.Scene.emit(h.showTableItem),this.resetDay()}))}),.5)}),l.NONE)}),l.NONE)}startCooking(){this.isTakeout?(this.currentSellingPrice=this.calculateSellingPrice(this.currentTakeoutOrder.order),o.Scene.emit(h.HJM_Hide_smile)):(this.currentSellingPrice=this.calculateSellingPrice(this.currentCustomer.order),o.Scene.emit(h.HJM_Show_smile)),this.playerData.money+=this.currentSellingPrice,this.daySellingPrice+=this.currentSellingPrice,d.getInstance().playSound("收银"),o.Scene.emit(h.HJM_Update_Money),u.Instance.showPanel(c.HJM_GamePanel),1!=e.Instance.playerData.currentDay||e.Instance.isTutorialEnd||u.Instance.showPanel(c.HJM_TutorialPanel,null,null,l.SLIDE_FROM_BOTTOM),u.Instance.hidePanel(c.HJM_DialoguePanel),u.Instance.hidePanel(c.HJM_TakeoutPanel,null,l.SLIDE_TO_TOP),this.isCooking=!0,this.needShowTakeoutCome=!1,this.isPause=!1,o.Scene.emit(h.Game_Resume)}endCooking(e){this.pack(),this.isTakeout?(this.checkOrder(this.currentTakeoutOrder.order),o.Scene.emit(h.HJM_Hide_smile)):(this.checkOrder(this.currentCustomer.order),o.Scene.emit(h.HJM_Show_smile)),u.Instance.showPanel(c.HJM_DialoguePanel,!0,(()=>{o.Scene.emit(h.HJM_Show_Bowl,e),this.isTakeout?(o.Scene.emit(h.HJM_Show_Takeout_End_Dialog),o.Scene.emit(h.HJM_Show_Dish_Node)):(o.Scene.emit(h.HJM_Show_End_Dialog_Sp),o.Scene.emit(h.HJM_Show_Dish_Node)),this.isEndingDialog=!0,u.Instance.hidePanel(c.HJM_GamePanel)}),l.SLIDE_FROM_TOP),this.isCooking=!1,o.Scene.emit(h.Game_Resume)}checkoutCustomer(){if(this.calculateRefund(this.currentCustomer.order),this.refund>0)return this.playerData.money-=this.refund,o.Scene.emit(h.HJM_Update_Money),void(this.refund=0);this.calculateAddTip(),this.currentSellingAddTip>0&&(o.Scene.emit(h.HJM_Show_Add_Tip),this.playerData.money+=this.currentSellingAddTip,o.Scene.emit(h.HJM_Update_Money),this.currentSellingAddTip=0)}checkoutDay(){o.Scene.emit(h.hideTableItem),u.Instance.showPanel(c.TablePanel),u.Instance.showPanel(c.LoadingPanel,(()=>{u.Instance.showPanel(c.HJM_CheckoutPanel)}))}startNewDay(){}addOneHour(){this.currentTime+=this.MINUTES_PER_HOUR,this.updateLogic()}update(e){this.isPause||!this.isCooking||this.isDayEnd||this.isTakeout||(this.currentTime+=e,this.updateLogic())}updateLogic(){const e=this.currentTime/this.MINUTES_PER_HOUR,t=8+Math.floor(e);t!==this.currentHour&&e>=this.lastHourUpdate+1&&(this.currentHour=t,this.lastHourUpdate=Math.floor(e));const i=60*e,n=Math.floor(i/this.MINUTE_INTERVAL),s=n%4*this.MINUTE_INTERVAL;s!==this.currentMinute&&i>=this.lastMinuteUpdate+this.MINUTE_INTERVAL&&(this.currentMinute=s,this.lastMinuteUpdate=n*this.MINUTE_INTERVAL),this.currentHour>=19&&(this.currentTime=this.totalTime-13*this.MINUTES_PER_HOUR,this.currentHour=19,this.currentMinute=0,this.isDayEnd=!0),o.Scene.emit(h.HJM_Update_Time);for(let e=this.currentDayTakeoutConfig.length-1;e>=0;e--){const t=this.currentDayTakeoutConfig[e],[i,n]=t.showTime;if(this.currentHour>i||this.currentHour===i&&this.currentMinute>=n){const i={id:Date.now(),avatarName:t.avatarName,customerName:t.customerName,expireTime:t.expireTime,content:t.content,remark:t.remark,order:t.order,price:0,status:M.UNHANDLED,missingStockIngredients:[]};i.price=this.calculateSellingPrice(t.order),i.missingStockIngredients=this.checkTakeoutStock(t.order),this.currentTakeoutOrders.push(i),o.Scene.emit(h.HJM_ORDER_DATA_UPDATED),this.isCooking?this.needShowTakeoutCome=!0:o.Scene.emit(h.HJM_New_Takeout_Order),this.currentDayTakeoutConfig.splice(e,1)}}for(let e=0;e<this.currentTakeoutOrders.length;e++){const t=this.currentTakeoutOrders[e];if(t.status===M.UNHANDLED){const[e,i]=t.expireTime;(this.currentHour>e||this.currentHour===e&&this.currentMinute>=i)&&(t.status=M.TIMEOUT,o.Scene.emit(h.HJM_ORDER_DATA_UPDATED))}}if(!this.isTakeout){const e=60*((this.currentTime-this.startCookingTime)/this.MINUTES_PER_HOUR)/6;this.currentSmile=Math.max(0,100-Math.floor(e)),o.Scene.emit(h.HJM_Update_Smile)}}buyNewIngredient(e){this.playerData.stock[e]=1}resetOrderCheckResult(){this.orderCheckResult=this.initOrderCheckResult()}checkStock(){let e=this.currentCustomer.order;return this.missingStockIngredients=[],Object.keys(e).forEach((t=>{if(1===e[t].need){void 0!==this.playerData.stock[t]&&this.playerData.stock[t]>0||this.missingStockIngredients.push(t)}})),0===this.missingStockIngredients.length}checkTakeoutStock(e){let t=[];return Object.keys(e).forEach((i=>{if(1===e[i].need){void 0!==this.playerData.stock[i]&&this.playerData.stock[i]>0||t.push(i)}})),t}calculateSellingPrice(e){let t=0;for(let i in e){let n=e[i];if(0==n.need)continue;const s=this.ingredientsConfigObject[i];if(!s){console.log(`LSF_DataManager: 未找到材料配置 ${i},订单：`,e);continue}let r=s.sellingPrice;n.type==P.SPICE?r=s.sellingPrice*n.count:n.type==P.SPREAD?r=s.sellingPrice*n.percentage:n.type==P.EGG&&(r=s.sellingPrice*n.count),t+=r}return t}pack(){Object.keys(this.sauceTypeCount).forEach((t=>{let i=0;this.sauceTypeCount[t].forEach((e=>{i+=e}));let n=i/this.standardSpreadCount;e.Instance.currentDishes[t]||(e.Instance.currentDishes[t]={type:P.SPREAD,need:1,count:1,percentage:0,rotateCount:0}),this.currentDishes[t].percentage=n}))}checkOrder(e){let t=this.currentDishes;this.resetOrderCheckResult();const i=this.orderCheckResult;Object.keys(t).forEach((t=>{e[t]&&0===e[t].need&&i.extraIngredients.push(t)})),Object.keys(e).forEach((n=>{1!==e[n].need||t[n]||i.missingIngredients.push(n)})),Object.keys(e).forEach((n=>{const s=e[n],r=t[n];if(1===s.need&&r)switch(s.type){case P.SPICE:this.checkSpiceIngredient(n,s,r,i);break;case P.SPREAD:this.checkSpreadIngredient(n,s,r,i);break;case P.EGG:this.checkEggIngredient(n,s,r,i)}}))}checkSpiceIngredient(e,t,i,n){void 0!==t.count&&(i.count<t.count?n.lessCountIngredients.push(e):i.count>t.count&&n.moreCountIngredients.push(e))}checkSpreadIngredient(e,t,i,n){void 0!==t.percentage&&(i.percentage<t.percentage?n.lessSpreadIngredients.push(e):i.percentage>t.percentage+50&&n.moreSpreadIngredients.push(e))}checkEggIngredient(e,t,i,n){void 0!==t.count&&void 0!==t.rotateCount&&(i.count<t.count?n.lessCountIngredients.push(e):i.count>t.count&&n.moreCountIngredients.push(e),i.rotateCount<t.rotateCount&&n.lessRotateIngredients.push(e))}calculateRefund(e){return this.refund=0,this.orderCheckResult.extraIngredients.length>0?(this.refund+=.8*this.currentSellingPrice,this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),void(this.dayRefund+=this.refund)):(this.orderCheckResult.missingIngredients.length>0&&this.orderCheckResult.missingIngredients.forEach((t=>{const i=e[t];switch(i.type){case P.SPICE:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count;break;case P.SPREAD:this.refund+=1*this.ingredientsConfigObject[t].sellingPrice;break;case P.EGG:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count}})),this.orderCheckResult.lessCountIngredients.length>0&&this.orderCheckResult.lessCountIngredients.forEach((t=>{const i=this.currentDishes[t],n=e[t];this.refund+=this.ingredientsConfigObject[t].sellingPrice*(n.count-i.count)})),this.currentSmile<30&&(this.refund+=(30-this.currentSmile)/30*this.currentSellingPrice),this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),this.dayRefund+=this.refund,this.refund)}calculateAddTip(){this.currentSellingAddTip=0,this.orderCheckResult.extraIngredients.length>0||this.orderCheckResult.missingIngredients.length>0||this.orderCheckResult.lessCountIngredients.length>0||this.orderCheckResult.lessSpreadIngredients.length>0||this.orderCheckResult.moreSpreadIngredients.length>0||this.orderCheckResult.lessRotateIngredients.length>0||(this.orderCheckResult.moreCountIngredients.length>0&&(this.currentSellingAddTip+=this.orderCheckResult.moreCountIngredients.length+2),this.currentSmile>60&&(this.currentSellingAddTip+=(this.currentSmile-60)/40*this.totalSellingTip),this.currentSellingAddTip>this.totalSellingTip&&(this.currentSellingAddTip=this.totalSellingTip),this.daySellingAddTip+=this.currentSellingAddTip)}onGamePause(){this.isPause=!0}onGameResume(){this.isPause=!1}saveData(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.playerData))}addListener(){o.on(h.Game_Pause,this.onGamePause,this),o.on(h.Game_Resume,this.onGameResume,this)}removeListener(){o.off(h.Game_Pause,this.onGamePause,this),o.off(h.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener()}}).Instance=void 0,C=t((_=I).prototype,"ingredientsConfigJson",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(_.prototype,"TipConfigJson",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(_.prototype,"TakeoutOrderConfigJson",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=_))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_DialogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Banner.ts","./XCT_HJM_DataManager.ts","./XCT_Events.ts","./XCT_AudioManager.ts"],(function(t){var e,n,s,i,a,r,o,l,c,u,h,g,d,m,C,I,p,D,f,y,T,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.JsonAsset,a=t.Node,r=t.Label,o=t.Button,l=t._decorator,c=t.Component,u=t.Graphics,h=t.Mask,g=t.instantiate,d=t.Layout,m=t.v3,C=t.tween},function(t){I=t.EventManager},function(t){p=t.default},function(t){D=t.XCT_HJM_DataManager,f=t.XCT_HJM_ButtonAction,y=t.XCT_HJM_OrderStatus},function(t){T=t.XCT_Events},function(t){S=t.XCT_AudioManager}],execute:function(){var k,_,b,E,v,x,w,M,P,A,N,R,B,L,H,G,J,O,X,z,j,K;s._RF.push({},"0f7c9W3gtlCHLlD8QPXZQzp","XCT_HJM_DialogManager",void 0);const{ccclass:U,property:$}=l;t("XCT_HJM_DialogManager",(k=U("XCT_HJM_DialogManager"),_=$({type:i}),b=$({type:i}),E=$({type:i}),v=$(a),x=$(a),w=$(r),M=$(a),P=$(r),A=$(o),k(((K=class t extends c{constructor(...t){super(...t),n(this,"gameConfig",B,this),n(this,"specialDialogConfig",L,this),n(this,"endingDialogConfig",H,this),n(this,"dialogPanel",G,this),n(this,"customerNode",J,this),n(this,"dialogText",O,this),n(this,"buttonContainer",X,this),n(this,"missingTip",z,this),n(this,"buttonPrefab",j,this),this.dayConfigs=[],this.specialDialogConfigs={},this.endingDialogConfigs={},this.currentCustomers=[],this.currentCustomer=null,this.currentSegmentIndex=0,this.isStartDialog=!0,this.dialogConfig=[],this.dialogEndCallback=null,this.isAngry=!1,this.currentText="",this.tween=null,this.timers=[],this.nextTimerId=0,this.isAllTimersPaused=!1}onLoad(){this.addListener(),t.Instance=this,this.dialogPanel.active=!1,this.missingTip.node.active=!1,this.dayConfigs=this.gameConfig.json,this.specialDialogConfigs=this.specialDialogConfig.json,this.endingDialogConfigs=this.endingDialogConfig.json,this.dialogPanel.active=!1}startCustomerDialog(t,e=!0,n=!1){this.currentCustomer=t,this.isStartDialog=e,this.dialogConfig=e?t.startDialogs:t.endDialogs,(!e&&!this.dialogConfig||n)&&(this.dialogConfig=this.endingDialogConfigs[t.avatar]);let s=null;e?n?(this.currentSegmentIndex=9,this.isAngry=!0,this.currentSegmentIndex++):this.currentSegmentIndex=1:("外卖员"===t.avatar?this.currentSegmentIndex=0:D.Instance.currentSmile<30?(this.currentSegmentIndex=8,this.isAngry=!0):0!==D.Instance.orderCheckResult.extraIngredients.length?(this.currentSegmentIndex=1,this.isAngry=!0,s=D.Instance.orderCheckResult.extraIngredients.join("、")):0!==D.Instance.orderCheckResult.missingIngredients.length?(this.currentSegmentIndex=2,this.isAngry=!0,s=D.Instance.orderCheckResult.missingIngredients.join("、")):0!==D.Instance.orderCheckResult.lessCountIngredients.length?(this.currentSegmentIndex=3,this.isAngry=!0,s=D.Instance.orderCheckResult.lessCountIngredients.join("、")):0!==D.Instance.orderCheckResult.moreCountIngredients.length?(this.currentSegmentIndex=7,s=D.Instance.orderCheckResult.moreCountIngredients.join("、")):this.currentSegmentIndex=0,this.currentSegmentIndex++),this.loadSp(this.currentCustomer.avatar),this.dialogPanel.active=!0,this.showCurrentSegment(s)}showCurrentSegment(t=null){if(this.currentSegmentIndex>=this.dialogConfig.length+1)return void this.leave();const e=this.dialogConfig[this.currentSegmentIndex-1];if(e.checkStock){const t=D.Instance.checkStock();this.updateStockTip(t)}else this.missingTip.node.active=!1;null!==t&&(e.text=e.text.replace("${}",t)),this.currentText=e.text,this.dialogText.string=e.text,this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!0,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!0,this.clearButtons(),this.createButtons(e),this.addTimer(.07,(()=>{this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!1,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!1})),this.addTimer(2,(()=>{this.dialogEndCallback&&this.dialogEndCallback(),this.dialogEndCallback=null}))}createButtons(t){if(D.Instance.missingStockIngredients.length>0&&!D.Instance.isRefuse){const t=g(this.buttonPrefab.node);t.parent=this.buttonContainer;t.getComponentInChildren(r).string=`进货：${D.Instance.missingStockIngredients[0]}`,t.getChildByName("sign_video").active=!0,t.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),t.active=!0,t.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.buyIngredient()}));const e=g(this.buttonPrefab.node);e.parent=this.buttonContainer;e.getComponentInChildren(r).string="不接待",e.getChildByName("sign_video").active=!1,e.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),e.active=!0,e.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.refuse()}))}else t.buttons.forEach(((e,n)=>{if(e.action==f.LEAVE)this.dialogEndCallback=this.leave;else if(e.action==f.DELIVER_TAKE_OUT)this.dialogEndCallback=this.deliverTakeOut;else if(e.action==f.TAKE_DISH)this.dialogEndCallback=()=>{this.takeDish(e)};else{const s=g(this.buttonPrefab.node);s.parent=this.buttonContainer;s.getComponent(o);s.getComponentInChildren(r).string=this.getButtonText(e,n),D.Instance.missingStockIngredients.length>0&&0===n&&(s.getChildByName("sign_video").active=!0),s.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),s.active=!0,s.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.onButtonClick(e,t)}))}}))}getButtonText(t,e){return D.Instance.missingStockIngredients.length>0&&0===e?`进货：${D.Instance.missingStockIngredients[0]}`:t.text}onButtonClick(t,e){let n=t.action;switch(n===f.START_MAKE&&D.Instance.missingStockIngredients.length>0&&(n=f.BUY_INGREDIENT),n!==f.BUY_INGREDIENT&&D.Instance.notes.push([this.currentText,t.text]),n){case f.START_MAKE:this.startMaking();break;case f.NEXT_DIALOG:this.nextSegment(t);break;case f.BUY_INGREDIENT:this.buyIngredient();break;case f.GET_TAKE_OUT:this.getTakeOutProgect(t);break;case f.DELIVER_TAKE_OUT:this.deliverTakeOut();break;case f.TAKE_DISH:this.takeDish(t);break;case f.REFUSE:this.refuse();break;case f.END_DIALOG:this.leave()}}startMaking(){D.Instance.isTakeout=!1,D.Instance.startCooking()}buyIngredient(){if(D.Instance.missingStockIngredients.length>0){const t=D.Instance.missingStockIngredients.shift();console.log(`购买了食材：${t}`),p.Instance.ShowVideoAd((()=>{D.Instance.playerData.stock[t]?D.Instance.playerData.stock[t]++:D.Instance.playerData.stock[t]=1,0===D.Instance.missingStockIngredients.length?this.missingTip.node.active=!1:this.missingTip.string=`缺少配料：${D.Instance.missingStockIngredients[0]}`,this.showCurrentSegment()}))}}nextSegment(t){if(!t)return this.currentSegmentIndex++,void this.showCurrentSegment();t.nextSegment&&-1!==t.nextSegment?(this.currentSegmentIndex=t.nextSegment,this.showCurrentSegment()):(this.currentSegmentIndex++,this.showCurrentSegment())}getTakeOutProgect(t){D.Instance.playerData.isTakeOutProjectSet=!0,I.Scene.emit(T.showTableItem),t&&this.nextSegment(t)}deliverTakeOut(){this.dialogPanel.active=!1,this.clearButtons(),D.Instance.isEndingDialog=!1,this.move(!1,(()=>{D.Instance.currentTakeoutOrder.status=y.DELIVERED,D.Instance.isDayEnd?D.Instance.checkoutDay():this.addTimer(.5,(()=>{this.restartCurrentCustomerDialog()}))}))}takeDish(t){let e=()=>{this.dialogPanel.active=!0,this.nextSegment(t),I.off(T.Dish_Drag_End,e,this)};I.on(T.Dish_Drag_End,e,this)}refuse(){D.Instance.isRefuse=!0,this.startCustomerDialog(D.Instance.currentCustomer,!0,!0)}leave(){this.dialogPanel.active=!1,this.clearButtons(),this.isStartDialog||D.Instance.checkoutCustomer(),D.Instance.isEndingDialog=!1,this.move(!1,(()=>{6===D.Instance.dayCustomerCount&&(D.Instance.isDayEnd=!0),D.Instance.isDayEnd?D.Instance.checkoutDay():this.addTimer(.5,(()=>{this.nextCustomer()}))}))}enter(t){this.move(!0,(()=>{t&&t()}))}move(t,e){t?(this.customerNode.setScale(m(1,0,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1.1,.9,1)}).to(.2,{scale:m(1,1,1)}).call((()=>{e()})).start()):(this.customerNode.setScale(m(1,1,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1,0,1)}).call((()=>{e()})).start())}clearButtons(){this.buttonContainer.children.forEach((t=>{t.destroy()}))}updateStockTip(t){!t&&D.Instance.missingStockIngredients.length>0?(this.missingTip.node.active=!0,this.missingTip.string=`缺少配料：${D.Instance.missingStockIngredients[0]}`):this.missingTip.node.active=!1}loadSp(t){this.customerNode.children.forEach((e=>{e.active=!1,e.name===t&&(e.active=!0,e.getChildByName("smile").active=!this.isAngry,e.getChildByName("angry").active=this.isAngry,this.isAngry=!1)}))}startNewDayDialog(){let t=D.Instance.playerData.currentDay>=9?9:D.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers,D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex=0,this.startNextCustomerDialog())}startNextCustomerDialog(){let t=D.Instance.playerData.currentDay>=9?9:D.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers);let n=null;if(D.Instance.playerData.isTakeOutProjectSet)for(n=this.currentCustomers[D.Instance.currentCustomerIndex];"外卖员"==n.avatar;)D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,n=this.currentCustomers[D.Instance.currentCustomerIndex];else n=this.currentCustomers[D.Instance.currentCustomerIndex];n?(D.Instance.resetCustomer(n),this.loadSp(n.avatar),this.enter((()=>{this.startCustomerDialog(n)}))):console.log(`第${D.Instance.playerData.currentDay}天结束`)}restartCurrentCustomerDialog(){this.startNextCustomerDialog()}showTakeoutEndDialog(){D.Instance.isEndingDialog&&(D.Instance.isEndingDialog=!1,"外卖员"!==D.Instance.currentCustomer.avatar&&(D.Instance.checkoutCustomer(),D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,D.Instance.dayCustomerCount++)),D.Instance.missingStockIngredients=[],this.dialogPanel.active=!1,this.customerNode.setScale(m(1,0,1));const t=this.specialDialogConfigs["外卖员"];t&&(this.loadSp(t.avatar),this.enter((()=>{this.startCustomerDialog(t,!1)})))}nextCustomer(){D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,D.Instance.dayCustomerCount++,D.Instance.addOneHour(),this.startNextCustomerDialog()}showEndDialogSp(){this.dialogPanel.active=!1,this.loadSp(D.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1))}continueCustomerDialog(){this.loadSp(D.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1)),this.startCustomerDialog(D.Instance.currentCustomer,!1)}onGamePause(){this.tween&&this.tween.pause(),this.pauseAllTimers()}onGameResume(){this.tween&&this.tween.resume(),this.resumeAllTimers()}addListener(){I.on(T.HJM_Start_NewDay_Dialog,this.startNewDayDialog,this),I.on(T.HJM_Show_End_Dialog_Sp,this.showEndDialogSp,this),I.on(T.HJM_Continue_Customer_EndDialog,this.continueCustomerDialog,this),I.on(T.HJM_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),I.on(T.Game_Pause,this.onGamePause,this),I.on(T.Game_Resume,this.onGameResume,this)}removeListener(){I.off(T.HJM_Start_NewDay_Dialog,this.startNewDayDialog,this),I.off(T.HJM_Show_End_Dialog_Sp,this.showEndDialogSp,this),I.off(T.HJM_Continue_Customer_EndDialog,this.continueCustomerDialog,this),I.off(T.HJM_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),I.off(T.Game_Pause,this.onGamePause,this),I.off(T.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener(),this.clearAllTimers()}update(t){if(0!==this.timers.length)for(let e=this.timers.length-1;e>=0;e--){const n=this.timers[e];if(!n.isPaused&&!this.isAllTimersPaused&&(n.elapsed+=t,n.elapsed>=n.duration)){try{n.callback()}catch(t){console.error("Timer callback error:",t)}this.timers.splice(e,1)}}}addTimer(t,e){const n=this.nextTimerId++,s={id:n,duration:t,elapsed:0,callback:e,isPaused:!1};return this.timers.push(s),n}pauseTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!0,!0)}resumeTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!1,!0)}removeTimer(t){const e=this.timers.findIndex((e=>e.id===t));return-1!==e&&(this.timers.splice(e,1),!0)}pauseAllTimers(){this.isAllTimersPaused=!0}resumeAllTimers(){this.isAllTimersPaused=!1}getTimerRemainingTime(t){const e=this.timers.find((e=>e.id===t));return e?Math.max(0,e.duration-e.elapsed):null}clearAllTimers(){this.timers=[],this.isAllTimersPaused=!1}}).Instance=void 0,B=e((R=K).prototype,"gameConfig",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(R.prototype,"specialDialogConfig",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(R.prototype,"endingDialogConfig",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(R.prototype,"dialogPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(R.prototype,"customerNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(R.prototype,"dialogText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(R.prototype,"buttonContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"missingTip",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(R.prototype,"buttonPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=R))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_DialoguePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,i,n,a,o,s,h,r,l,d,c,u,C,T,m,p,_,b,g,w,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,o=t._decorator,s=t.instantiate,h=t.v3,r=t.Label,l=t.UIOpacity,d=t.tween,c=t.Vec3,u=t.Animation,C=t.Button},function(t){T=t.EventManager},function(t){m=t.XCT_BasePanel,p=t.XCT_PanelAnimation},function(t){_=t.XCT_UILayer},function(t){b=t.XCT_UIManager},function(t){g=t.XCT_UIPanel},function(t){w=t.XCT_Events},function(t){y=t.XCT_HJM_DataManager},function(t){f=t.XCT_AudioManager}],execute:function(){var k,v,I,D,N,P,A,S,B,M,O,H,J,E,X,L,z,U,j,x,R;n._RF.push({},"3adfe/+xL5HnoALah8xMRRU","XCT_HJM_DialoguePanel",void 0);const{ccclass:V,property:F}=o;t("XCT_HJM_DialoguePanel",(k=V("XCT_HJM_DialoguePanel"),v=F(a),I=F(a),D=F(a),N=F(a),P=F(a),A=F(a),S=F(a),B=F(a),M=F(a),k((J=e((H=class extends m{constructor(...t){super(...t),this.defaultShowAnimation=p.SLIDE_FROM_TOP,this.defaultHideAnimation=p.SLIDE_TO_TOP,this.defaultLayer=_.Dialog,this.animationDuration=.6,i(this,"tableItems",J,this),i(this,"moneyItem",E,this),i(this,"moneyContainer",X,this),i(this,"btnTakeout",L,this),i(this,"dishNode",z,this),i(this,"dishPos1",U,this),i(this,"dishPos2",j,this),i(this,"btnCat",x,this),i(this,"dargTurtrialAnim",R,this),this.isCatClicked=!1,this.needShowDish=!1,this.isAddedEvent=!1,this.takeoutTween=null,this.cb=null}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}onShowComplete(){this.cb&&this.cb(),this.cb=null}init(t=!0){this.dishNode.active=this.needShowDish,this.needShowDish=!1,this.dargTurtrialAnim.active=!1,t?this.onShowTableItem():this.hideTableItem(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,this.btnTakeout.getChildByName("nodeVideo").active=!1,y.Instance.needShowTakeoutCome&&this.showTakeoutCom(),this.isCatClicked=!1,y.Instance.isCatDriveAway=!1,1==y.Instance.playerData.currentDay||y.Instance.playerData.isAdoptedCat?this.btnCat.active=!1:this.btnCat.active=!0,this.btnCat.getChildByName("dialogue2").active=!1}hideTableItem(){this.tableItems.forEach((t=>{t.active=!1}))}onShowTableItem(){this.tableItems.forEach((t=>{t.active=!0})),this.btnTakeout.active=y.Instance.playerData.isTakeOutProjectSet,this.btnTakeout.getChildByName("nodeVideo").active=!y.Instance.playerData.isTakeOutProjectOpen}onShowAddTip(){this.moneyContainer.removeAllChildren();const t=s(this.moneyItem);t.parent=this.moneyContainer,t.setPosition(h(0,0,0)),t.getComponentInChildren(r).string="小费+"+y.Instance.currentSellingAddTip,t.setPosition(0,-200),t.getComponent(l).opacity=255,t.active=!0,d(t).to(1.5,{position:new c(0,200,0)},{easing:"sineIn"}).parallel(d(t.getComponent(l)).to(1.5,{opacity:0})).call((()=>{t.destroy()})).start()}onClickTakeout(){if(f.getInstance().playSound("点击"),y.Instance.playerData.isTakeOutProjectOpen){if(y.Instance.isEndingDialog)return void T.Scene.emit(w.showTip,"请先完成当前订单");this.takeoutTween&&this.takeoutTween.stop(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,b.Instance.showPanel(g.HJM_TakeoutPanel)}else b.Instance.showPanel(g.HJM_TipPanel,null,(()=>{T.Scene.emit(w.HJM_ShowTip_OpenTakeout)}))}showTakeoutCom(){if(y.Instance.playerData.isTakeOutProjectOpen){if(y.Instance.isShowingTakeoutPanel)return;this.btnTakeout.getChildByName("nodeOrderCome").active=!0,this.takeoutTween=d(this.btnTakeout.getChildByName("nodeOrderCome")).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.3,{scale:new c(.9,.9,.9)}).union().repeatForever().start()}else this.btnTakeout.getChildByName("nodeVideo").active=!0}hideTakeoutCom(){this.btnTakeout.getChildByName("nodeOrderCome").active=!1}takeoutOpen(){this.btnTakeout.getChildByName("nodeVideo").active=!1}onCatClick(){f.getInstance().playSound("猫"),this.isCatClicked=!this.isCatClicked;let t=this.btnCat.getChildByName("dialogue2"),e=t.getChildByName("btnDriveAway"),i=t.getChildByName("btnAdopt");e.active=!0,i.active=!0,this.isCatClicked?(t.active=!0,e.off("click"),e.on("click",this.onBtnDriveAwayClick,this),i.off("click"),i.on("click",this.onBtnAdoptClick,this)):(t.active=!1,e.off("click"),i.off("click"))}onBtnDriveAwayClick(){y.Instance.isCatDriveAway=!0;let t=this.btnCat.getChildByName("dialogue2");t.getChildByName("heart").getChildByName("heart_1").active=!1,t.getChildByName("heart").getChildByName("heart_2").active=!0,t.getChildByName("btnDriveAway").active=!1,t.getChildByName("btnAdopt").active=!1,this.scheduleOnce((()=>{this.btnCat.active=!1}),1)}onBtnAdoptClick(){y.Instance.playerData.isAdoptedCat=!0,this.btnCat.active=!1}showDishNode(){this.cb=()=>{this.needShowDish=!0,this.dishNode.active=!0,this.dishNode.setWorldPosition(h(this.dishPos1.worldPosition.x,this.dishPos1.worldPosition.y-300,this.dishPos1.worldPosition.z)),d(this.dishNode).to(.5,{worldPosition:this.dishPos1.worldPosition}).call((()=>{y.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.active=!0,this.dargTurtrialAnim.getComponent(u).play())})).start()}}hideDishNode(){this.dishNode.active=!1}dishDragEnd(){y.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.getComponent(u).stop(),this.dargTurtrialAnim.active=!1,y.Instance.isNeedShowDragTutorial=!1),y.Instance.isTakeout||T.Scene.emit(w.HJM_Continue_Customer_EndDialog)}showBowl(t){t.setParent(this.dishNode),t.setPosition(h(0,0,0)),t.setScale(h(.7,.7,1)),t.active=!0}addListener(){T.on(w.showTableItem,this.onShowTableItem,this),T.on(w.hideTableItem,this.hideTableItem,this),T.on(w.HJM_Show_Add_Tip,this.onShowAddTip,this),T.on(w.HJM_Takeout_Open,this.takeoutOpen,this),T.on(w.HJM_New_Takeout_Order,this.showTakeoutCom,this),T.on(w.HJM_Hide_New_Takeout_Order,this.hideTakeoutCom,this),T.on(w.HJM_Show_Dish_Node,this.showDishNode,this),T.on(w.Dish_Drag_End,this.dishDragEnd,this),T.on(w.HJM_Show_Bowl,this.showBowl,this),this.btnTakeout.on(C.EventType.CLICK,this.onClickTakeout,this),this.btnCat.on(C.EventType.CLICK,this.onCatClick,this)}removeListener(){T.off(w.showTableItem,this.onShowTableItem,this),T.off(w.hideTableItem,this.hideTableItem,this),T.off(w.HJM_Show_Add_Tip,this.onShowAddTip,this),T.off(w.HJM_New_Takeout_Order,this.showTakeoutCom,this),T.off(w.HJM_Hide_New_Takeout_Order,this.hideTakeoutCom,this),T.off(w.HJM_Takeout_Open,this.takeoutOpen,this),T.off(w.HJM_Show_Dish_Node,this.showDishNode,this),T.off(w.Dish_Drag_End,this.dishDragEnd,this),T.off(w.HJM_Show_Bowl,this.showBowl,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tableItems",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=e(H.prototype,"moneyItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(H.prototype,"moneyContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(H.prototype,"btnTakeout",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(H.prototype,"dishNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(H.prototype,"dishPos1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(H.prototype,"dishPos2",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(H.prototype,"btnCat",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(H.prototype,"dargTurtrialAnim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=H))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_GamePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,o,s,r,l,c,h,d,u,C,p,g,m,y,f,b,I,N,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,s=e.Widget,r=e.Layout,l=e.tween,c=e.Vec3,h=e.UITransform,d=e.instantiate,u=e.Label,C=e.v2},function(e){p=e.EventManager},function(e){g=e.XCT_BasePanel,m=e.XCT_PanelAnimation},function(e){y=e.XCT_UILayer},function(e){f=e.XCT_UIManager},function(e){b=e.XCT_UIPanel},function(e){I=e.XCT_Events},function(e){N=e.XCT_HJM_DataManager},function(e){_=e.XCT_AudioManager}],execute:function(){var w,P,k,v,T,B,A,M,E,D,H,X,S,z,J,L,U,G,R,O,F,W,x,j,V,K,Q,Z,q,Y,$,ee,te;i._RF.push({},"53a27yoLvpFDZVsoPkwHlFK","XCT_HJM_GamePanel",void 0);const{ccclass:ne,property:ie}=o;e("XCT_HJM_GamePanel",(w=ne("XCT_HJM_GamePanel"),P=ie(a),k=ie(a),v=ie(a),T=ie(a),B=ie(a),A=ie(a),M=ie(a),E=ie(a),D=ie(a),H=ie(a),X=ie(a),S=ie(a),z=ie(a),J=ie(a),L=ie(a),w((R=t((G=class extends g{constructor(...e){super(...e),this.defaultShowAnimation=m.SLIDE_FROM_BOTTOM,this.defaultHideAnimation=m.SLIDE_TO_BOTTOM,this.defaultLayer=y.Game,this.animationDuration=.6,n(this,"ingredientContainer",R,this),n(this,"spreadIngredientContainer",O,this),n(this,"noodleContainer",F,this),n(this,"soupContainer",W,this),n(this,"sauceContainer",x,this),n(this,"saltContainer",j,this),n(this,"btnNote1",V,this),n(this,"btnNote2",K,this),n(this,"NotePanel",Q,this),n(this,"NotePos1",Z,this),n(this,"NotePos2",q,this),n(this,"btnNoteClose",Y,this),n(this,"paws",$,this),n(this,"bowlNode",ee,this),n(this,"cookArea",te,this),this.isAddedEvent=!1,this.isArea2=!1,this.catIngredient=[],this.stealInterval=2,this.stealTimer=0,this.isPawPated=!1,this.tween=null}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.cookArea.children.forEach((e=>{e.getComponent(s).enabled=!0;let t=e.getComponent(s);t.updateAlignment(),t.enabled=!1})),this.cookArea.getComponent(r).enabled=!0,this.cookArea.getComponent(r).updateLayout(),this.cookArea.getComponent(r).enabled=!1,this.cookArea.getComponent(s).enabled=!1,this.NotePanel.active=!1,this.updateIngredientContainer(),this.isArea2=!1,this.paws.forEach((e=>{e.active=!1}))}changeCookArea(){l(this.cookArea).delay(.2).to(.5,{position:new c(-this.node.getComponent(h).width,0,0)}).call((()=>{p.Scene.emit(I.HandAnimation_End),this.isArea2=!0})).start()}onCompleted(){let e=d(this.bowlNode);N.Instance.endCooking(e)}updateIngredientContainer(){this.catIngredient=[];let e=0;this.ingredientContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++,this.catIngredient.push(t)):t.active=!1})),e<this.ingredientContainer.children.length-1&&(this.ingredientContainer.getChildByName("空_配料").active=!0,this.ingredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.spreadIngredientContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.spreadIngredientContainer.children.length-1&&(this.spreadIngredientContainer.getChildByName("空_配料").active=!0,this.spreadIngredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.noodleContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.noodleContainer.children.length-1&&(this.noodleContainer.getChildByName("空_配料").active=!0,this.noodleContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.soupContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.soupContainer.children.length-1&&(this.soupContainer.getChildByName("空_配料").active=!0,this.soupContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.saltContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e=0,this.sauceContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1}))}onClickEmptyIngredient(){p.Scene.emit(I.Hide_TutorialPanel),f.Instance.showPanel(b.HJM_ShopPanel,!0)}onClickNote(){_.getInstance().playSound("点击"),p.Scene.emit(I.Hide_TutorialPanel),this.NotePanel.active=!0;let e=this.NotePanel.getChildByName("noteNode"),t=this.NotePanel.getChildByName("takeoutNoteNode");e.active=!N.Instance.isTakeout,t.active=N.Instance.isTakeout;let n=N.Instance.isTakeout?"takeoutNoteNode":"noteNode",i=this.NotePanel.getChildByName(n),a=i.getChildByName("noteContainer"),o=N.Instance.isTakeout?N.Instance.takeoutNotes:N.Instance.notes;a.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1}));let s=a.children[0];o.forEach((e=>{let t=d(s);t.parent=a,t.getChildByName("lblQustion").getComponent(u).string=e[0],t.getChildByName("lblAnswer").getComponent(u).string=e[1],t.active=!0})),i.setWorldPosition(this.NotePos1.worldPosition),l(i).to(.3,{worldPosition:this.NotePos2.worldPosition}).start()}onClickCloseNote(){p.Scene.emit(I.Show_TutorialPanel),this.NotePanel.active=!1}update(e){if(!N.Instance.isPause&&this.isArea2&&!N.Instance.playerData.isAdoptedCat&&!N.Instance.isCatDriveAway&&1!=N.Instance.playerData.currentDay&&N.Instance.isCooking&&(this.stealTimer+=e,this.stealTimer>=this.stealInterval)){this.stealInterval=2*Math.random()+15,this.stealTimer=0;let e=Math.floor(Math.random()*this.paws.length),t=this.paws[e];if(0==e&&this.catIngredient.length<2)return;if(1==e&&this.catIngredient.length<4)return;if(2==e&&this.catIngredient.length<7)return;this.catSteal(t,e)}}catSteal(e,t){e.active=!0,e.getChildByName("button").off("click"),e.getChildByName("button").on("click",(()=>this.onPawClick(e)),this);let n=e.getChildByName("pawSp"),i=e.getChildByName("pawPos_0"),a=e.getChildByName("pawPos_1"),o=n.getChildByName("ingredientContainer");o.active=!1,e.getChildByName("nodePat").active=!1;let s=null;n.setWorldPosition(i.worldPosition),this.tween=l(n).to(1.5,{worldPosition:a.worldPosition}).delay(1).call((()=>{let t=e.getChildByName("pawPos").getWorldPosition();this.catIngredient.forEach((e=>{if(s)return;e.getComponent(h).getBoundingBoxToWorld().contains(C(t.x,t.y))&&(s=e.name)})),o.children.forEach((e=>{e.name!==s?e.active=!1:e.active=!0})),o.active=!0})).to(.2,{worldPosition:i.worldPosition}).call((()=>{e.active=!1;let t=N.Instance.ingredientsConfigObject[s].cost;N.Instance.playerData.money-=t,p.Scene.emit(I.HJM_Update_Money),this.tween=null})).start()}onPawClick(e){_.getInstance().playSound("猫2"),this.tween&&this.tween.stop();let t=e.getChildByName("pawSp"),n=e.getChildByName("pawPos_0");t.getChildByName("ingredientContainer").active=!1,e.getChildByName("nodePat").active=!0,this.tween=null,this.tween=l(t).to(.2,{worldPosition:n.worldPosition}).call((()=>{e.active=!1,this.tween=null})).start()}onPause(){this.tween&&this.tween.pause()}onResume(){this.tween&&this.tween.resume()}addListener(){p.on(I.HJM_Update_Ingredient,this.updateIngredientContainer,this),p.on(I.HJM_Change_CookArea,this.changeCookArea,this),p.on(I.HJM_Completed,this.onCompleted,this),p.on(I.Game_Pause,this.onPause,this),p.on(I.Game_Resume,this.onResume,this),this.btnNote1.on("click",this.onClickNote,this),this.btnNote2.on("click",this.onClickNote,this),this.btnNoteClose.on("click",this.onClickCloseNote,this)}removeListener(){p.off(I.HJM_Update_Ingredient,this.updateIngredientContainer,this),p.off(I.HJM_Change_CookArea,this.changeCookArea,this),p.off(I.HJM_Completed,this.onCompleted,this),p.off(I.Game_Pause,this.onPause,this),p.off(I.Game_Resume,this.onResume,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"ingredientContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(G.prototype,"spreadIngredientContainer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(G.prototype,"noodleContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(G.prototype,"soupContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(G.prototype,"sauceContainer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(G.prototype,"saltContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(G.prototype,"btnNote1",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(G.prototype,"btnNote2",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(G.prototype,"NotePanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(G.prototype,"NotePos1",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(G.prototype,"NotePos2",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(G.prototype,"btnNoteClose",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(G.prototype,"paws",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=t(G.prototype,"bowlNode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(G.prototype,"cookArea",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=G))||U));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,a,l,s,o,r,u,h,c,d,p,m,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,l=e.Label,s=e._decorator,o=e.Sprite},function(e){r=e.EventManager},function(e){u=e.XCT_BasePanel,h=e.XCT_PanelAnimation},function(e){c=e.XCT_UILayer},function(e){d=e.XCT_UIManager},function(e){p=e.XCT_UIPanel},function(e){m=e.XCT_Events},function(e){_=e.XCT_HJM_DataManager},function(e){b=e.XCT_AudioManager}],execute:function(){var f,M,y,T,S,g,I,H,w,C,J,U,v,X,D,A,P,E,N,k,z;n._RF.push({},"c2d97GOhIxDZ7DRvW1tC7oJ","XCT_HJM_GameUI",void 0);const{ccclass:B,property:L}=s;e("XCT_HJM_GameUI",(f=B("XCT_HJM_GameUI"),M=L(a),y=L(a),T=L(l),S=L(l),g=L(a),I=L(l),H=L(l),w=L(a),C=L(a),f((v=t((U=class extends u{constructor(...e){super(...e),this.defaultShowAnimation=h.NONE,this.defaultHideAnimation=h.NONE,this.defaultLayer=c.GameUI,this.animationDuration=.6,i(this,"btnMore",v,this),i(this,"spSun",X,this),i(this,"lblDay",D,this),i(this,"lblTime",A,this),i(this,"smileNode",P,this),i(this,"lblSmile",E,this),i(this,"lblMoney",N,this),i(this,"btnAdd",k,this),i(this,"btnShowTipBack",z,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){_.Instance.isDayEnd?this.smileNode.active=!1:this.smileNode.active=!0,this.updateUI()}updateUI(){this.lblDay.string="第"+_.Instance.playerData.currentDay+"天",this.updateTime(),this.updateSmile(),this.lblMoney.string=_.Instance.playerData.money.toFixed(1)}updateMoney(){this.lblMoney.string=_.Instance.playerData.money.toFixed(1)}updateTime(){const e=_.Instance.currentHour.toString().padStart(2,"0"),t=_.Instance.currentMinute.toString().padStart(2,"0");this.lblTime.string=`${e}:${t}`,this.spSun.getComponent(o).fillRange=-(_.Instance.currentTime+8*_.Instance.MINUTES_PER_HOUR)/_.Instance.totalTime}updateSmile(){this.lblSmile.string=_.Instance.currentSmile.toString()+"%"}onClickAdd(){b.getInstance().playSound("点击"),d.Instance.showPanel(p.HJM_TipPanel,null,(()=>{r.Scene.emit(m.HJM_ShowTip_NoMoney)}))}hideSmile(){this.smileNode.active=!1}showSmile(){this.smileNode.active=!0}showBackTipPanel(){b.getInstance().playSound("点击"),d.Instance.showPanel(p.HJM_TipPanel,null,(()=>{r.Scene.emit(m.HJM_ShowTip_Back)}))}addListener(){r.on(m.HJM_Update_Money,this.updateMoney,this),r.on(m.HJM_Update_Time,this.updateTime,this),r.on(m.HJM_Update_Smile,this.updateSmile,this),r.on(m.HJM_Hide_smile,this.hideSmile,this),r.on(m.HJM_Show_smile,this.showSmile,this),this.btnAdd.on("click",this.onClickAdd,this),this.btnShowTipBack.on("click",this.showBackTipPanel,this)}removeListener(){r.off(m.HJM_Update_Money,this.updateMoney,this),r.off(m.HJM_Update_Time,this.updateTime,this),r.off(m.HJM_Update_Smile,this.updateSmile,this),r.off(m.HJM_Hide_smile,this.hideSmile,this),r.off(m.HJM_Show_smile,this.showSmile,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"btnMore",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(U.prototype,"spSun",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(U.prototype,"lblDay",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(U.prototype,"lblTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(U.prototype,"smileNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(U.prototype,"lblSmile",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(U.prototype,"lblMoney",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(U.prototype,"btnAdd",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(U.prototype,"btnShowTipBack",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=U))||J));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_Ingredient_Single.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts","./XCT_HJM_DataManager.ts"],(function(e){var t,n,i,a,o,s,r,l,c,h,d,u,f,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,s=e.Component,r=e.instantiate,l=e.v3,c=e.Vec3,h=e.UIOpacity,d=e.Tween},function(e){u=e.XCT_Events},function(e){f=e.EventManager},function(e){p=e.XCT_HJM_DataManager,g=e.XCT_HJM_IngredientType}],execute:function(){var m,y,b,C,I,_,T,v,P,S,N,w,M,E,L;i._RF.push({},"ae1599WwqRL4aY0r+Xh7ii3","XCT_HJM_Ingredient_Single",void 0);const{ccclass:k,property:B}=o;e("XCT_HJM_Ingredient_Single",(m=k("XCT_HJM_Ingredient_Single"),y=B(a),b=B(a),C=B(a),I=B(a),_=B(a),T=B(Number),m((S=t((P=class extends s{constructor(...e){super(...e),n(this,"beforeLayer",S,this),n(this,"afterLayer",N,this),n(this,"toolsLayer",w,this),n(this,"spoonPrefab",M,this),n(this,"bowl",E,this),n(this,"IngredientType",L,this),this.beforePrefab=null,this.afterPrefab=null,this.maskPrefab=null,this.bowlPrefab=null,this.spoonNode=null,this.count=0,this.tween=null}onLoad(){this.addListener(),this.beforePrefab=this.node.getChildByName("beforePrefab"),this.afterPrefab=this.node.getChildByName("afterPrefab"),this.maskPrefab=this.node.getChildByName("maskPrefab"),this.bowlPrefab=this.node.getChildByName("bowlPrefab"),this.maskPrefab.active=!1,this.afterPrefab.active=!1,this.beforePrefab.active=!1,this.bowlPrefab.active=!1,this.spoonPrefab.active=!1,this.spoonPrefab.getChildByName("spoonMask").active=!1,this.bowl.getChildByName("cookArea").active=!1,this.node.getChildByName("ingredient_suspended").active=!1,this.node.getChildByName("selected").active=!1}onTouchStart(e){1==p.Instance.tutorialIdx&&"番茄锅"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++),3==p.Instance.tutorialIdx&&"火鸡面"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++)}onTouchEnd(e){let t=r(this.beforePrefab);t.parent=this.beforeLayer.getChildByName("Contanter"),t.setPosition(l(0,0,0)),t.eulerAngles=new c(0,0,50*Math.random()-50),t.getComponent(h).opacity=255,0==this.IngredientType&&t.setSiblingIndex(0),t.active=!0;let n=r(this.afterPrefab);n.parent=this.afterLayer.getChildByName("Contanter"),n.setPosition(l(0,0,0)),n.eulerAngles=new c(0,0,50*Math.random()-50),n.getComponent(h).opacity=0,0==this.IngredientType?n.setSiblingIndex(0):n.name="Noodle",n.active=!0,this.count++,f.Scene.emit(u.HJM_Cancel_All_Ingredients);let i="";i=0==this.IngredientType?"layer_Soup":"layer_Noodle";let a=this.bowl.getChildByName("cookArea").getChildByName(i).getChildByName("Contanter");a.children.forEach((e=>{e.destroy()}));let o=r(this.bowlPrefab);o.parent=a,o.setPosition(l(0,0,0)),o.eulerAngles=new c(0,0,0),o.active=!0;let s=r(this.maskPrefab),d=this.spoonPrefab.getChildByName("spoonMask"),m=0==this.IngredientType?d.getChildByName("soupMaskContainer"):d.getChildByName("noodleMaskContainer");if(m.children.forEach((e=>{e.destroy()})),s.parent=m,s.setPosition(l(0,0,0)),s.active=!0,1==this.IngredientType){let e=r(this.spoonPrefab);e.parent=this.toolsLayer.getChildByName("Contanter"),e.setPosition(l(0,0,0)),e.getChildByName("spoonMask").active=!1,e.active=!0,this.spoonNode=e}p.Instance.currentCookedSteps.push(this.node.name),p.Instance.currentDishes[this.node.name]||(p.Instance.currentDishes[this.node.name]={type:g.SPICE,need:1,count:0,percentage:0,rotateCount:0}),p.Instance.currentDishes[this.node.name].count++,p.Instance.playerData.money-=p.Instance.ingredientsConfigObject[this.node.name].cost,p.Instance.dayCost+=p.Instance.ingredientsConfigObject[this.node.name].cost,f.Scene.emit(u.HJM_Update_Money)}onCancel_Click(){this.spoonNode&&this.spoonNode.destroy(),this.spoonNode=null,this.stopScaleSingleItem(),this.removeTouchListener()}onClick(){let e=["番茄锅","红油辣锅","玉米排骨锅","菌菇锅"],t=["火鸡面","方便面","宽粉","拉面","细粉"];if(1==this.IngredientType){let n=!1;if(p.Instance.currentCookedSteps.forEach((t=>{n||e.includes(t)&&(n=!0)})),!n)return void f.Scene.emit(u.showTip,"要先选择汤底，才可以加面哦！");let i=!1;if(p.Instance.currentCookedSteps.forEach((e=>{i||t.includes(e)&&(i=!0)})),i)return void f.Scene.emit(u.showTip,"一碗面只能加一块面饼哦")}else{let t=!1;if(p.Instance.currentCookedSteps.forEach((n=>{t||e.includes(n)&&(t=!0)})),t)return void f.Scene.emit(u.showTip,"一碗面只能选择一种面汤底哦！")}if(1==p.Instance.playerData.currentDay&&!p.Instance.isTutorialEnd){if(-1==[0,2].indexOf(p.Instance.tutorialIdx))return;if(0==p.Instance.tutorialIdx&&"番茄锅"!==this.node.name)return;if(2==p.Instance.tutorialIdx&&"火鸡面"!==this.node.name)return}0==p.Instance.tutorialIdx&&"番茄锅"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++),2==p.Instance.tutorialIdx&&"火鸡面"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++),f.Scene.emit(u.HJM_Cancel_All_Ingredients),this.sacleSingeItem(),this.addTouchListener()}sacleSingeItem(){this.node.getChildByName("selected").active=!0;let e=this.node.getChildByName("ingredient_suspended");e.active=!0;const t=e.scale.clone();this.tween=new d(e).to(.5,{scale:new c(1.2*t.x,1.2*t.y,t.z)}).to(.5,{scale:t}).union().repeatForever().start()}stopScaleSingleItem(){this.node.getChildByName("selected").active=!1;let e=this.node.getChildByName("ingredient_suspended");e.active=!1,this.tween&&(this.tween.stop(),this.tween=null,e.scale=new c(1,1,1)),console.log("点击次数:",this.count)}addTouchListener(){this.afterLayer.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.afterLayer.on(a.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.afterLayer.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.afterLayer.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){f.on(u.HJM_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){f.off(u.HJM_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"beforeLayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(P.prototype,"afterLayer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(P.prototype,"toolsLayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(P.prototype,"spoonPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(P.prototype,"bowl",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(P.prototype,"IngredientType",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=P))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_Ingredient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,s,r,o,d,c,h,l,u,g,m,I,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,r=e.Component,o=e.instantiate,d=e.v3,c=e.Vec3,h=e.UITransform,l=e.tween},function(e){u=e.EventManager},function(e){g=e.XCT_Events},function(e){m=e.XCT_HJM_DataManager,I=e.XCT_HJM_IngredientType},function(e){C=e.XCT_AudioManager}],execute:function(){var _,T,p,y,f;i._RF.push({},"dfbafyiv61Irbp5DYWJ9QM7","XCT_HJM_Ingredient",void 0);const{ccclass:v,property:M}=s;e("XCT_HJM_Ingredient",(_=v("XCT_HJM_Ingredient"),T=M(a),_((f=t((y=class extends r{constructor(...e){super(...e),n(this,"targetArea",f,this),this.rainItem=null,this.rainContainer=null,this.rainTimer=0,this.isRaining=!1,this.ingredientPrefab=null,this.isTouching=!1,this.count=0}onLoad(){this.addListener(),this.ingredientPrefab=this.node.getChildByName("ingredient_sow"),this.rainItem=this.node.getChildByName("rainItem"),this.rainContainer=this.node.getChildByName("rainContainer"),this.node.getChildByName("ingredient_suspended").active=!1,this.node.getChildByName("selected").active=!1}onTouchStart(e){const t=e.getUILocation();let n=o(this.ingredientPrefab);n.parent=this.targetArea.getChildByName("Contanter"),n.setWorldPosition(d(t.x,t.y,0)),n.active=!0,n.eulerAngles=new c(0,0,10*Math.random()),this.count++,m.Instance.currentCookedSteps.push(this.node.name),10==m.Instance.tutorialIdx&&"洋葱"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),12==m.Instance.tutorialIdx&&"咸鸭蛋"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),m.Instance.currentDishes[this.node.name]||(m.Instance.currentDishes[this.node.name]={type:I.SPICE,need:1,count:0,percentage:0,rotateCount:0}),m.Instance.currentDishes[this.node.name].count++,C.getInstance().playSound("放"),m.Instance.playerData.money-=m.Instance.ingredientsConfigObject[this.node.name].cost,m.Instance.dayCost+=m.Instance.ingredientsConfigObject[this.node.name].cost,u.Scene.emit(g.HJM_Update_Money)}onTouchEnd(e){}update(e){this.isRaining&&(this.rainTimer-=e,this.rainTimer<=0&&(this.createRainItem(),this.rainTimer=.3*Math.random()))}createRainItem(){const e=this.node.getChildByName("ingredient_suspended"),t=e.getWorldPosition(),n=e.getComponent(h).width,i=o(this.rainItem);i.parent=this.rainContainer;const a=t.x-n/2+Math.random()*n;i.setWorldPosition(d(a,t.y,0)),i.active=!0;let s=70+50*Math.random();const r=s/300;s=i.worldPosition.y-s;let c=i.worldPosition.x;l(i).to(r,{worldPosition:d(c,s,0)}).to(r,{scale:d(0,0,0)}).call((()=>i.destroy())).start()}onCancel_Click(){this.stopRainIngredient(),this.removeTouchListener()}onClick(){let e=!1,t=["酱","醋","盐","鸡精"];if(m.Instance.currentCookedSteps.forEach((n=>{e||t.includes(n)&&(e=!0)})),e){if(1==m.Instance.playerData.currentDay&&!m.Instance.isTutorialEnd){if(-1==[9,11].indexOf(m.Instance.tutorialIdx))return;if(9==m.Instance.tutorialIdx&&"洋葱"!==this.node.name)return;if(11==m.Instance.tutorialIdx&&"咸鸭蛋"!==this.node.name)return}9==m.Instance.tutorialIdx&&"洋葱"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),11==m.Instance.tutorialIdx&&"咸鸭蛋"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),u.Scene.emit(g.HJM_Cancel_All_Ingredients),this.node.getChildByName("ingredient_suspended").active=!0,this.rainIngredient(),this.addTouchListener()}else u.Scene.emit(g.showTip,"请先调味！")}rainIngredient(){this.node.getChildByName("selected").active=!0,this.node.getChildByName("ingredient_suspended").active=!0,this.isRaining=!0,this.rainTimer=0}stopRainIngredient(){this.node.getChildByName("selected").active=!1,this.node.getChildByName("ingredient_suspended").active=!1,this.isRaining=!1}addTouchListener(){this.targetArea.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.on(a.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.targetArea.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){u.on(g.HJM_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){u.off(g.HJM_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"targetArea",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=y))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_Salt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,s,o,c,r,l,d,u,h,C,p,y,_,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,o=e.Component,c=e.Button,r=e.instantiate,l=e.Animation,d=e.v3,u=e.tween,h=e.UIOpacity},function(e){C=e.XCT_Events},function(e){p=e.EventManager},function(e){y=e.XCT_HJM_DataManager,_=e.XCT_HJM_IngredientType},function(e){g=e.XCT_AudioManager}],execute:function(){var m,f,I,b,M,N,S,k,v;i._RF.push({},"93913DuwU1L0Z74ezHkF5mg","XCT_HJM_Salt",void 0);const{ccclass:T,property:P}=s;e("XCT_HJM_Salt",(m=T("XCT_HJM_Salt"),f=P(a),I=P(Number),b=P(a),m((S=t((N=class extends o{constructor(...e){super(...e),n(this,"toolsLayer",S,this),n(this,"sauceType",k,this),n(this,"ingredientLayer",v,this),this.saucePrefab=null,this.sauceMaskPrefab=null,this.sauceNode=null,this.count=0,this.tween=null,this.isCancel=!1}onLoad(){this.addListener(),this.saucePrefab=this.node.getChildByName("saucePrefab"),this.saucePrefab.active=!1,this.sauceMaskPrefab=this.node.getChildByName("sauceMaskPrefab"),this.sauceMaskPrefab.active=!1}onCancel_Click(){this.isCancel=!0,this.destorySauceNode()}onClick(){if(1==y.Instance.playerData.currentDay&&!y.Instance.isTutorialEnd){if(-1==[7].indexOf(y.Instance.tutorialIdx))return;if(7==y.Instance.tutorialIdx&&"盐"!==this.node.name)return}7==y.Instance.tutorialIdx&&"盐"==this.node.name&&(p.Scene.emit(C.HandAnimation_End),y.Instance.tutorialIdx++),p.Scene.emit(C.HJM_Cancel_All_Ingredients),this.createSauceNode(),this.node.getComponent(c).enabled=!1}createSauceNode(){this.isCancel=!1,this.node.getChildByName("icon").active=!1;let e=r(this.saucePrefab),t=this.node.getWorldPosition();e.parent=this.toolsLayer,e.setWorldPosition(t),e.active=!0,this.sauceNode=e;let n=e.getComponent(l);0==this.sauceType?n.play("yan_1"):n.play("jijing_1"),this.scheduleOnce((()=>{this.isCancel?this.isCancel=!1:e&&e.isValid&&e.on("click",this.onSauceNodeClick,this)}),.17)}onSauceNodeClick(){y.Instance.currentCookedSteps.push(this.node.name),8==y.Instance.tutorialIdx&&"盐"==this.node.name&&(p.Scene.emit(C.HandAnimation_End),y.Instance.tutorialIdx++);let e=r(this.sauceMaskPrefab);e.parent=this.ingredientLayer.getChildByName("Contanter"),e.setPosition(d(0,0,0)),e.setScale(d(1,1,1)),e.active=!0,g.getInstance().playSound("盐"),u(e.getComponent(h)).to(1,{opacity:0}).call((()=>{e.destroy()})).start(),y.Instance.currentDishes[this.node.name]||(y.Instance.currentDishes[this.node.name]={type:_.SPICE,need:1,count:0,percentage:0,rotateCount:0}),y.Instance.currentDishes[this.node.name].count++,y.Instance.playerData.money-=y.Instance.ingredientsConfigObject[this.node.name].cost,y.Instance.dayCost+=y.Instance.ingredientsConfigObject[this.node.name].cost,p.Scene.emit(C.HJM_Update_Money)}destorySauceNode(){if(this.sauceNode){this.sauceNode.off("click",this.onSauceNodeClick,this);let e=this.sauceNode.getComponent(l);0==this.sauceType?e.play("yan_2"):e.play("jijing_2"),this.scheduleOnce((()=>{this.sauceNode&&this.sauceNode.isValid&&this.sauceNode.destroy(),this.sauceNode=null,this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}),.17)}else this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}addListener(){p.on(C.HJM_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){p.off(C.HJM_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"toolsLayer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(N.prototype,"sauceType",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=t(N.prototype,"ingredientLayer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=N))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_Sauce.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,s,o,c,r,l,u,d,h,C,p,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,o=e.Component,c=e.Button,r=e.instantiate,l=e.Animation,u=e.v3},function(e){d=e.XCT_Events},function(e){h=e.EventManager},function(e){C=e.XCT_HJM_DataManager,p=e.XCT_HJM_IngredientType},function(e){y=e.XCT_AudioManager}],execute:function(){var _,g,f,m,I,b,N,M,S;i._RF.push({},"f53ebDYRshE4og9S3vYE+Yl","XCT_HJM_Sauce",void 0);const{ccclass:v,property:k}=s;e("XCT_HJM_Sauce",(_=v("XCT_HJM_Sauce"),g=k(a),f=k(Number),m=k(a),_((N=t((b=class extends o{constructor(...e){super(...e),n(this,"toolsLayer",N,this),n(this,"sauceType",M,this),n(this,"soupLayer",S,this),this.saucePrefab=null,this.sauceMaskPrefab=null,this.sauceNode=null,this.count=0,this.tween=null,this.isCancel=!1}onLoad(){this.addListener(),this.saucePrefab=this.node.getChildByName("saucePrefab"),this.saucePrefab.active=!1,this.sauceMaskPrefab=this.node.getChildByName("sauceMaskPrefab"),this.sauceMaskPrefab.active=!1}onCancel_Click(){this.isCancel=!0,this.destorySauceNode()}onClick(){if(1==C.Instance.playerData.currentDay&&!C.Instance.isTutorialEnd){if(-1==[5].indexOf(C.Instance.tutorialIdx))return;if(5==C.Instance.tutorialIdx&&"酱"!==this.node.name)return}5==C.Instance.tutorialIdx&&"酱"==this.node.name&&(h.Scene.emit(d.HandAnimation_End),C.Instance.tutorialIdx++),h.Scene.emit(d.HJM_Cancel_All_Ingredients),this.createSauceNode(),this.node.getComponent(c).enabled=!1}createSauceNode(){this.isCancel=!1,this.node.getChildByName("icon").active=!1;let e=r(this.saucePrefab),t=this.node.getWorldPosition();e.parent=this.toolsLayer,e.setWorldPosition(t),e.active=!0,this.sauceNode=e;let n=e.getComponent(l);0==this.sauceType?n.play("jiang_1"):n.play("cu_1"),this.scheduleOnce((()=>{this.isCancel?this.isCancel=!1:e&&e.isValid&&e.on("click",this.onSauceNodeClick,this)}),.17)}onSauceNodeClick(){C.Instance.currentCookedSteps.push(this.node.name),6==C.Instance.tutorialIdx&&"酱"==this.node.name&&(h.Scene.emit(d.HandAnimation_End),C.Instance.tutorialIdx++),this.sauceNode.getComponent(l).play("drop"),y.getInstance().playSound("水滴"),this.scheduleOnce((()=>{let e=r(this.sauceMaskPrefab);e.parent=this.soupLayer.getChildByName("Contanter"),e.setPosition(u(0,0,0)),e.setScale(u(1,1,1)),e.active=!0}),.42),C.Instance.currentDishes[this.node.name]||(C.Instance.currentDishes[this.node.name]={type:p.SPICE,need:1,count:0,percentage:0,rotateCount:0}),C.Instance.currentDishes[this.node.name].count++,C.Instance.playerData.money-=C.Instance.ingredientsConfigObject[this.node.name].cost,C.Instance.dayCost+=C.Instance.ingredientsConfigObject[this.node.name].cost,h.Scene.emit(d.HJM_Update_Money)}destorySauceNode(){if(this.sauceNode){this.sauceNode.off("click",this.onSauceNodeClick,this);let e=this.sauceNode.getComponent(l);0==this.sauceType?e.play("jiang_2"):e.play("cu_2"),this.scheduleOnce((()=>{this.sauceNode&&this.sauceNode.isValid&&this.sauceNode.destroy(),this.sauceNode=null,this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}),.17)}else this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}addListener(){h.on(d.HJM_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){h.off(d.HJM_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"toolsLayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(b.prototype,"sauceType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=t(b.prototype,"soupLayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=b))||I));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_ShopPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,o,s,r,c,l,h,p,u,C,y,d,m,g,I,_,b,P,S,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e.SpriteFrame,s=e._decorator,r=e.instantiate,c=e.Sprite,l=e.v3,h=e.Label,p=e.Color,u=e.Button},function(e){C=e.EventManager},function(e){y=e.ProjectEventManager,d=e.ProjectEvent},function(e){m=e.XCT_BasePanel,g=e.XCT_PanelAnimation},function(e){I=e.XCT_UILayer},function(e){_=e.XCT_UIManager},function(e){b=e.XCT_UIPanel},function(e){P=e.XCT_Events},function(e){S=e.XCT_HJM_DataManager},function(e){f=e.XCT_AudioManager}],execute:function(){var D,M,v,N,T,B,E,k,H,X,J,w,L;i._RF.push({},"cc68elDE/JLDK8Oi6i13xnj","XCT_HJM_ShopPanel",void 0);const{ccclass:R,property:x}=s;e("XCT_HJM_ShopPanel",(D=R("XCT_HJM_ShopPanel"),M=x(a),v=x(o),N=x(a),T=x(a),B=x(a),D((H=t((k=class extends m{constructor(...e){super(...e),this.defaultShowAnimation=g.NONE,this.defaultHideAnimation=g.NONE,this.defaultLayer=I.Pop2,this.animationDuration=.6,n(this,"shopItemContainer",H,this),n(this,"ingredientSpes",X,this),n(this,"btnCheckoutPanel",J,this),n(this,"btnNextDay",w,this),n(this,"btnReturn",L,this),this.currentData=new Map,this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(e=!1){y.emit(d.弹出窗口,"小吃摊"),S.Instance.isShowingShopPanel=!0,C.Scene.emit(P.Game_Pause),this.initShopItem(),e?(this.btnCheckoutPanel.active=!1,this.btnNextDay.active=!1,this.btnReturn.active=!0):(this.btnCheckoutPanel.active=!0,this.btnNextDay.active=!0,this.btnReturn.active=!1)}initShopItem(){this.shopItemContainer.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1})),S.Instance.ingredientsConfig.forEach(((e,t)=>{let n=e.name;if(!(void 0!==S.Instance.playerData.stock[n]&&S.Instance.playerData.stock[n]>0)){let i=this.shopItemContainer.children[0],a=r(i);a.parent=this.shopItemContainer,a.name=n,a.getChildByName("icon").getComponent(c).spriteFrame=this.ingredientSpes[t],"土豆面"!==n&&"白面团"!==n||a.getChildByName("icon").setScale(l(.65,.65,.65)),"油条"===n&&a.getChildByName("icon").setScale(l(.9,.9,.9)),"鸡精"===n&&a.getChildByName("icon").setPosition(a.getChildByName("icon").position.x+50,a.getChildByName("icon").position.y),a.getChildByName("lblName").getComponent(h).string=n,a.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).string=e.price.toString();let o=S.Instance.playerData.money>=e.price?p.WHITE:p.RED;a.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=o,this.currentData.set(n,e.price),a.active=!0,a.getChildByName("btnBuy").on(u.EventType.CLICK,(()=>{f.getInstance().playSound("点击"),this.onClickBuy(n)}),this)}}))}updateShopItem(){this.shopItemContainer.children.forEach((e=>{let t=S.Instance.playerData.money>=this.currentData.get(e.name)?p.WHITE:p.RED;e.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=t}))}onClickBuy(e){f.getInstance().playSound("点击"),S.Instance.playerData.money<S.Instance.ingredientsConfigObject[e].price?_.Instance.showPanel(b.HJM_TipPanel,null,(()=>{C.Scene.emit(P.HJM_ShowTip_NoMoney)})):(S.Instance.playerData.stock[e]?S.Instance.playerData.stock[e]++:S.Instance.playerData.stock[e]=1,S.Instance.playerData.money-=S.Instance.ingredientsConfigObject[e].price,C.Scene.emit(P.HJM_Update_Money),C.Scene.emit(P.HJM_Update_Ingredient),this.shopItemContainer.getChildByName(e).destroy(),this.currentData.delete(e))}onClickCheckout(){f.getInstance().playSound("点击"),_.Instance.showPanel(b.HJM_CheckoutPanel)}onClickNextDay(){f.getInstance().playSound("点击"),_.Instance.showPanel(b.PassPanel,{tipConfig:S.Instance.tipConfig,currentDay:S.Instance.playerData.currentDay,passDayCb:()=>{S.Instance.passDay()}},(()=>{_.Instance.hidePanel(b.HJM_ShopPanel),_.Instance.hidePanel(b.HJM_GameUI)})),S.Instance.isHadShowShop=!1}onClickReturn(){f.getInstance().playSound("点击"),C.Scene.emit(P.Show_TutorialPanel),_.Instance.hidePanel(b.HJM_ShopPanel),C.Scene.emit(P.Game_Resume),S.Instance.isShowingShopPanel=!1}addListener(){C.on(P.HJM_Update_Money,this.updateShopItem,this),this.btnCheckoutPanel.on(u.EventType.CLICK,this.onClickCheckout,this),this.btnNextDay.on(u.EventType.CLICK,this.onClickNextDay,this),this.btnReturn.on(u.EventType.CLICK,this.onClickReturn,this)}removeListener(){C.off(P.HJM_Update_Money,this.updateShopItem,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"shopItemContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(k.prototype,"ingredientSpes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(k.prototype,"btnCheckoutPanel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(k.prototype,"btnNextDay",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(k.prototype,"btnReturn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=k))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_Spoon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts"],(function(t){var e,n,o,i,a,s,r,h,l,c,p,d,u,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,a=t._decorator,s=t.Component,r=t.Vec2,h=t.UIOpacity,l=t.Vec3,c=t.v3,p=t.Animation},function(t){d=t.EventManager},function(t){u=t.XCT_Events},function(t){y=t.XCT_HJM_DataManager}],execute:function(){var C,g,f,T,m,_,E,M,v,L,A,b,I;o._RF.push({},"521e5dcxh5JXJImn9sKYYy5","XCT_HJM_Spoon",void 0);const{ccclass:w,property:x}=a;t("XCT_HJM_Spoon",(C=w("XCT_HJM_Spoon"),g=x(i),f=x(i),T=x(i),m=x(i),_=x(i),C((v=e((M=class extends s{constructor(...t){super(...t),n(this,"pan",v,this),n(this,"beforeLayer",L,this),n(this,"afterLayer",A,this),n(this,"water",b,this),n(this,"toolLayer2",I,this),this.panCenter=r.ZERO,this.startAngle=0,this.endAngle=0,this.currentTransfer=0,this.totalAngle=0,this.touchIndex=-1,this.nodeIndex=0,this.touchAngles=[],this.lastAngle=0}onLoad(){this.addListener(),this.beforeLayer.getChildByName("Contanter").children.forEach((t=>{t.getComponent(h).opacity=255})),this.afterLayer.getChildByName("Contanter").children.forEach((t=>{t.getComponent(h).opacity=0})),this.water.getComponent(h).opacity=255,this.panCenter=new r(this.pan.worldPosition.x,this.pan.worldPosition.y),this.initSpoon()}onTouchStart(t){if(1==y.Instance.playerData.currentDay&&!y.Instance.isTutorialEnd){if(-1==[4].indexOf(y.Instance.tutorialIdx))return}const e=t.getUILocation();this.node.setWorldPosition(new l(e.x,e.y,0));const n=this.calcAngleRatio(e);this.lastAngle=n}onTouchMove(t){const e=t.getUILocation();this.node.setWorldPosition(new l(e.x,e.y,0));const n=this.calcAngleRatio(e),o=n*Math.PI*2;[...this.beforeLayer.getChildByName("Contanter").children,...this.afterLayer.getChildByName("Contanter").children,this.water].forEach((t=>{t.eulerAngles=new l(0,0,180*o/Math.PI)}));let i=n-this.lastAngle;if(Math.abs(i)>.5){if(i>0){i=1-n+this.lastAngle}else{i=1-this.lastAngle+n}}let a=Math.floor(255*Math.abs(i)/2);this.beforeLayer.getChildByName("Contanter").children.forEach((t=>{let e=t.getComponent(h),n=e.opacity;e.opacity=Math.max(0,n-a)})),this.afterLayer.getChildByName("Contanter").children.forEach((t=>{let e=t.getComponent(h),n=e.opacity;e.opacity=Math.min(255,n+a)})),this.water.getComponent(h).opacity=Math.max(0,this.water.getComponent(h).opacity-a),this.lastAngle=n}onTouchEnd(){if(0==this.water.getComponent(h).opacity){this.afterLayer.getChildByName("Contanter").getChildByName("Noodle").active=!1,this.node.setParent(this.toolLayer2.getChildByName("Contanter")),this.node.getChildByName("spoonMask").active=!0,this.playSpoonAnimation(),4==y.Instance.tutorialIdx&&(d.Scene.emit(u.HandAnimation_Start),y.Instance.tutorialIdx++)}else this.node.active=!0,this.node.setPosition(c(0,0,0))}playSpoonAnimation(){this.node.getComponent(p).play("spoon_1"),this.scheduleOnce((()=>{this.node.getChildByName("spoonMask").active=!1,d.Scene.emit(u.HJM_Change_CookArea),this.node.getComponent(p).play("spoon_2")}),.27)}calcAngleRatio(t){const e=new r(t.x-this.panCenter.x,t.y-this.panCenter.y);let n=Math.atan2(e.y,e.x);return n<0&&(n+=2*Math.PI),n/(2*Math.PI)}initSpoon(){this.node.active=!0,this.touchAngles=[],this.touchIndex=-1,this.nodeIndex=0,this.currentTransfer=0,this.totalAngle=0,this.addTouchListener()}addTouchListener(){this.node.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}removeTouchListener(){this.node.off(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}addListener(){}removeListener(){}onDestroy(){this.removeListener()}}).prototype,"pan",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(M.prototype,"beforeLayer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(M.prototype,"afterLayer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(M.prototype,"water",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(M.prototype,"toolLayer2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=M))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_TakeoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./EventManager.ts","./Banner.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,r,s,o,l,c,d,h,u,g,p,C,m,f,T,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,r=e.Node,s=e._decorator,o=e.instantiate,l=e.Button},function(e){c=e.XCT_BasePanel,d=e.XCT_PanelAnimation},function(e){h=e.XCT_UILayer},function(e){u=e.XCT_UIManager},function(e){g=e.XCT_UIPanel},function(e){p=e.XCT_Events},function(e){C=e.XCT_HJM_DataManager,m=e.XCT_HJM_OrderStatus},function(e){f=e.EventManager},function(e){T=e.default},function(e){I=e.XCT_AudioManager}],execute:function(){var y,v,_,b,N,E,k,S,P,D,M,B,O;i._RF.push({},"2924bzHAtZGq6T96e2v+/rP","XCT_HJM_TakeoutPanel",void 0);const{ccclass:A,property:L}=s;e("XCT_HJM_TakeoutPanel",(y=A("XCT_HJM_TakeoutPanel"),v=L({type:a}),_=L({type:r}),b=L({type:r}),N=L(r),E=L(r),y((P=t((S=class extends c{constructor(...e){super(...e),this.defaultShowAnimation=d.NONE,this.defaultHideAnimation=d.NONE,this.defaultLayer=h.Pop2,this.animationDuration=.6,n(this,"lbCurrentTime",P,this),n(this,"starContainer",D,this),n(this,"shopItemContainer",M,this),n(this,"btnReturn",B,this),n(this,"nodeNoOrder",O,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){C.Instance.isShowingTakeoutPanel=!0,super.init(),this.refreshPanel(),f.Scene.emit(p.Game_Pause)}refreshPanel(){const e=C.Instance.currentHour.toString().padStart(2,"0"),t=C.Instance.currentMinute.toString().padStart(2,"0");this.lbCurrentTime.string=`${e}:${t}`,this.updateStars(C.Instance.playerData.score);const n=C.Instance.currentTakeoutOrders;this.nodeNoOrder.active=0===n.length;const i=[];for(let e=n.length-1;e>=0;e--)i.push(n[e]);this.refreshOrderList(i)}updateStars(e){this.starContainer.children.forEach(((t,n)=>{t.active=n<e}))}refreshOrderList(e){for(let e=0;e<this.shopItemContainer.children.length;e++)0!==e?this.shopItemContainer.children[e].destroy():this.shopItemContainer.children[e].active=!1;let t=this.shopItemContainer.children[0];e.forEach((e=>{const n=o(t);n.parent=this.shopItemContainer,n.active=!0,this.updateOrderItem(n,e)})),C.Instance.lastTakeoutOrderIds=C.Instance.currentTakeoutOrders.map((e=>e.id))}updateOrderItem(e,t){C.Instance.lastTakeoutOrderIds.includes(t.id)?e.getChildByName("nodeNew").active=!1:e.getChildByName("nodeNew").active=!0,e.getChildByName("spAvatar").children.forEach((e=>{e.name===t.avatarName?e.active=!0:e.active=!1})),e.getChildByName("lblName").getComponent(a).string=t.customerName,e.getChildByName("lblExpirationTime").getComponent(a).string=`过期时间: ${t.expireTime[0].toString().padStart(2,"0")}:${t.expireTime[1].toString().padStart(2,"0")}`,e.getChildByName("lblContent").getComponent(a).string=t.content,e.getChildByName("lblNote").getComponent(a).string=`备注: ${t.remark}`,e.getChildByName("lblPrice").getComponent(a).string=t.price.toFixed(1),t.missingStockIngredients.length>0?(e.getChildByName("lblMissing").getComponent(a).string=`缺少配料：${t.missingStockIngredients[0]}`,e.getChildByName("lblMissing").active=!0):e.getChildByName("lblMissing").active=!1;const n=e.getChildByName("btnAccept").getComponent(l),i=e.getChildByName("btnVideo").getComponent(l),r=e.getChildByName("btnRefuse").getComponent(l),s=e.getChildByName("NodeTimeout"),o=e.getChildByName("NodeCookEnd"),c=e.getChildByName("NodeDelivered"),d=e.getChildByName("NodeRefused");switch(n.node.active=!1,i.node.active=!1,r.node.active=!1,s.active=!1,o.active=!1,c.active=!1,d.active=!1,t.status){case m.UNHANDLED:t.missingStockIngredients.length>0?(i.node.active=!0,i.node.off(l.EventType.CLICK),i.node.on(l.EventType.CLICK,(()=>this.handleVideo(t,e.getChildByName("lblMissing"))),this)):(n.node.active=!0,n.node.off(l.EventType.CLICK),n.node.on(l.EventType.CLICK,(()=>this.handleAcceptOrder(t)),this)),r.node.active=!0,r.node.off(l.EventType.CLICK),r.node.on(l.EventType.CLICK,(()=>this.handleRefuseOrder(t)),this);break;case m.TIMEOUT:s.active=!0;break;case m.COOKED:o.active=!0;break;case m.DELIVERED:c.active=!0;break;case m.REFUSED:d.active=!0}}handleVideo(e,t){I.getInstance().playSound("点击"),T.Instance.ShowVideoAd((()=>{C.Instance.playerData.stock[e.missingStockIngredients[0]]?C.Instance.playerData.stock[e.missingStockIngredients[0]]++:C.Instance.playerData.stock[e.missingStockIngredients[0]]=1,e.missingStockIngredients.splice(0,1),this.refreshPanel()}))}handleAcceptOrder(e){I.getInstance().playSound("点击"),C.Instance.resetTakout(e),C.Instance.takeoutNotes.push([e.content,`备注: ${e.remark}`]),C.Instance.startCooking(),this.refreshPanel()}handleRefuseOrder(e){I.getInstance().playSound("点击"),e.status=m.REFUSED,this.refreshPanel()}onClickReturn(){I.getInstance().playSound("点击"),C.Instance.isShowingTakeoutPanel=!1,u.Instance.hidePanel(g.HJM_TakeoutPanel)}onHideComplete(){f.Scene.emit(p.Game_Resume)}addListener(){super.addListener(),this.btnReturn.on(l.EventType.CLICK,this.onClickReturn,this),f.on(p.HJM_ORDER_DATA_UPDATED,this.refreshPanel,this),f.on(p.HJM_Update_Time,this.refreshPanel,this)}removeListener(){super.removeListener(),f.off(p.HJM_ORDER_DATA_UPDATED,this.refreshPanel,this),f.off(p.HJM_Update_Time,this.refreshPanel,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lbCurrentTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(S.prototype,"starContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(S.prototype,"shopItemContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(S.prototype,"btnReturn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(S.prototype,"nodeNoOrder",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=S))||k));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_TipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts","./Banner.ts","./XCT_AudioManager.ts","./XCT_GameManager.ts","./GameManager.ts","./UIManager.ts"],(function(e){var n,a,t,i,o,l,s,c,h,P,p,u,r,d,T,_,M,m,k,I,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){t=e.cclegacy,i=e.Node,o=e._decorator},function(e){l=e.EventManager},function(e){s=e.ProjectEventManager,c=e.ProjectEvent},function(e){h=e.XCT_BasePanel,P=e.XCT_PanelAnimation},function(e){p=e.XCT_UILayer},function(e){u=e.XCT_UIManager},function(e){r=e.XCT_UIPanel},function(e){d=e.XCT_Events},function(e){T=e.XCT_HJM_DataManager},function(e){_=e.default},function(e){M=e.XCT_AudioManager},function(e){m=e.XCT_GameManager},function(e){k=e.GameManager},function(e){I=e.UIManager,y=e.Panel}],execute:function(){var g,S,f,C,H,w,J,B,N;t._RF.push({},"7cbcb1rFvlANYkdSt/E4laK","XCT_HJM_TipPanel",void 0);const{ccclass:b,property:v}=o;e("XCT_HJM_TipPanel",(g=b("XCT_HJM_TipPanel"),S=v(i),f=v(i),C=v(i),g((J=n((w=class extends h{constructor(...e){super(...e),this.defaultShowAnimation=P.NONE,this.defaultHideAnimation=P.NONE,this.defaultLayer=p.Pop2,this.animationDuration=.6,a(this,"tipNoMoneyPanel",J,this),a(this,"tipBackPanel",B,this),a(this,"tipOpenTakeoutPanel",N,this),this.isAddedEvent=!1}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.hideTipPanel()}hideTipPanel(){this.tipNoMoneyPanel.active=!1,this.tipBackPanel.active=!1,this.tipOpenTakeoutPanel.active=!1}showBackTipPanel(){l.Scene.emit(d.Game_Pause),this.tipBackPanel.active=!0,this.tipBackPanel.getChildByName("btnContinue").on("click",this.hideBackTipPanel,this),this.tipBackPanel.getChildByName("btnExit").on("click",this.onBtnExit,this)}onBtnExit(){M.getInstance().playSound("点击"),m.Instance.hasStartPanel?(u.Instance.hidePanel(r.HJM_TipPanel),l.Scene.emit(d.hideTableItem),u.Instance.showPanel(r.TablePanel,null,(()=>{u.Instance.showPanel(r.LoadingPanel,(()=>{u.Instance.showPanel(r.StartPanel,null,(()=>{u.Instance.hidePanel(r.HJM_DialoguePanel),u.Instance.hidePanel(r.HJM_GameUI),u.Instance.hidePanel(r.HJM_TutorialPanel),u.Instance.hidePanel(r.HJM_GamePanel,null,P.NONE),u.Instance.hidePanel(r.TipPanel),this.scheduleOnce((()=>{u.Instance.hidePanel(r.LoadingPanel,(()=>{s.emit(c.游戏结束,"小吃摊")}))}),.5)}))}),(()=>{u.Instance.hidePanel(r.HJM_ShopPanel),u.Instance.hidePanel(r.HJM_CheckoutPanel),u.Instance.hidePanel(r.HJM_TakeoutPanel)}))}))):s.emit(c.返回主页按钮事件,(()=>{I.ShowPanel(y.LoadingPanel,k.StartScene,(()=>{s.emit(c.返回主页,"小吃摊")}))}))}hideBackTipPanel(){l.Scene.emit(d.Game_Resume),M.getInstance().playSound("点击"),u.Instance.hidePanel(r.HJM_TipPanel)}showNoMoneyTipPanel(){l.Scene.emit(d.Game_Pause),this.tipNoMoneyPanel.active=!0,this.tipNoMoneyPanel.getChildByName("btnBack").on("click",this.hideNoMoneyTipPanel,this),this.tipNoMoneyPanel.getChildByName("btnVideo").on("click",this.btnVideoClick,this)}hideNoMoneyTipPanel(){T.Instance.isShowingShopPanel||l.Scene.emit(d.Game_Resume),M.getInstance().playSound("点击"),u.Instance.hidePanel(r.HJM_TipPanel)}btnVideoClick(){M.getInstance().playSound("点击"),_.Instance.ShowVideoAd((()=>{T.Instance.playerData.money+=200,l.Scene.emit(d.HJM_Update_Money),u.Instance.hidePanel(r.HJM_TipPanel),T.Instance.isShowingShopPanel||l.Scene.emit(d.Game_Resume)}))}showOpenTakeoutPanel(){l.Scene.emit(d.Game_Pause),this.tipOpenTakeoutPanel.active=!0,this.tipOpenTakeoutPanel.getChildByName("btnBack").on("click",this.hideOpenTakeoutPanel,this),this.tipOpenTakeoutPanel.getChildByName("btnVideo").on("click",this.btnVideoOpenTakeoutClick,this)}hideOpenTakeoutPanel(){l.Scene.emit(d.Game_Resume),M.getInstance().playSound("点击"),u.Instance.hidePanel(r.HJM_TipPanel)}btnVideoOpenTakeoutClick(){M.getInstance().playSound("点击"),_.Instance.ShowVideoAd((()=>{T.Instance.playerData.isTakeOutProjectOpen=!0,l.Scene.emit(d.HJM_Takeout_Open),u.Instance.showPanel(r.HJM_TakeoutPanel,null,(()=>{u.Instance.hidePanel(r.HJM_TipPanel)}))}))}addListener(){l.on(d.HJM_ShowTip_Back,this.showBackTipPanel,this),l.on(d.HJM_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),l.on(d.HJM_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this)}removeListener(){l.off(d.HJM_ShowTip_Back,this.showBackTipPanel,this),l.off(d.HJM_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),l.off(d.HJM_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tipNoMoneyPanel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(w.prototype,"tipBackPanel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(w.prototype,"tipOpenTakeoutPanel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=w))||H));t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_HJM_TutorialPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_Events.ts","./XCT_HJM_DataManager.ts"],(function(t){var i,e,n,r,a,s,o,h,u,d,l,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,a=t._decorator,s=t.Animation},function(t){o=t.EventManager},function(t){h=t.XCT_BasePanel,u=t.XCT_PanelAnimation},function(t){d=t.XCT_UILayer},function(t){l=t.XCT_Events},function(t){c=t.XCT_HJM_DataManager}],execute:function(){var p,T,C,_,x;n._RF.push({},"592d0dzLrNCiJVWEj3hdyT4","XCT_HJM_TutorialPanel",void 0);const{ccclass:f,property:w}=a;t("XCT_HJM_TutorialPanel",(p=f("XCT_HJM_TutorialPanel"),T=w(r),p((x=i((_=class extends h{constructor(...t){super(...t),this.defaultShowAnimation=u.NONE,this.defaultHideAnimation=u.NONE,this.defaultLayer=d.Tutorial,this.animationDuration=.6,e(this,"arrowContainer",x,this),this.currentTutorialIdx=0,this.isCompleted=!1,this.tutorialDatas=[],this.currentStepIdx=0,this.data=[{idx:0,stepCount:2},{idx:1,stepCount:3},{idx:2,stepCount:2},{idx:3,stepCount:2},{idx:4,stepCount:2},{idx:5,stepCount:2},{idx:6,stepCount:1}],this.isAddedEvent=!1}start(){}init(){1!==c.Instance.playerData.currentDay||c.Instance.isTutorialEnd||(this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0),this.node.active=!1,this.startTutorial())}startTutorial(){this.tutorialDatas=this.data,this.currentTutorialIdx=0,this.currentStepIdx=0,this.isCompleted=!1,this.node.active=!0,this.showStep(this.currentTutorialIdx,this.currentStepIdx)}showStep(t,i){t>=this.tutorialDatas.length?this.completeTutorial():(this.currentTutorialIdx=t,this.updateArrow(t,i))}updateArrow(t,i){this.arrowContainer.children.forEach((e=>{e.getComponent(s).stop(),e.active=!1;let n=e.name.split("_"),r=parseInt(n[0]),a=parseInt(n[1]);r==t&&a==i&&(e.active=!0,e.getComponent(s).play())}))}completeTutorial(){this.hideArrow(),this.isCompleted=!0,c.Instance.isTutorialEnd=!0,c.Instance.isNeedShowDragTutorial=!0}onNextStep(){if(this.isCompleted)return;this.currentStepIdx++;let t=this.tutorialDatas[this.currentTutorialIdx].stepCount;if(this.currentStepIdx>t-1)return this.currentStepIdx=0,this.currentTutorialIdx++,void this.showStep(this.currentTutorialIdx,this.currentStepIdx);this.showStep(this.currentTutorialIdx,this.currentStepIdx)}hideArrow(){this.arrowContainer.children.forEach((t=>{t.getComponent(s).stop(),t.active=!1}))}hidePanel(){this.arrowContainer.active=!1}showPanel(){this.arrowContainer.active=!0}addListener(){o.on(l.Hide_TutorialPanel,this.hidePanel,this),o.on(l.Show_TutorialPanel,this.showPanel,this),o.on(l.HandAnimation_Start,this.hideArrow,this),o.on(l.HandAnimation_End,this.onNextStep,this)}removeListener(){o.off(l.Hide_TutorialPanel,this.hidePanel,this),o.off(l.Show_TutorialPanel,this.showPanel,this),o.off(l.HandAnimation_Start,this.hideArrow,this),o.off(l.HandAnimation_End,this.onNextStep,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"arrowContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=_))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_CancelMask.ts",["cc","./EventManager.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts"],(function(e){var n,t,s,a,i,c;return{setters:[function(e){n=e.cclegacy,t=e.Component,s=e._decorator},function(e){a=e.EventManager},function(e){i=e.XCT_Events},function(e){c=e.XCT_JBT_DataManager}],execute:function(){var l;n._RF.push({},"656f8YvhYNL9IQEyKDQm4Gd","XCT_JBT_CancelMask",void 0);const{ccclass:o,property:_}=s;e("XCT_JBT_CancelMask",o("XCT_JBT_CancelMask")(l=class extends t{onLoad(){this.node.on("click",this.onClick,this),this.addListener()}onClick(){(1!=c.Instance.playerData.currentDay||c.Instance.isTutorialEnd)&&a.Scene.emit(i.JBT_Cancel_All_Ingredients)}onClickEnable(){this.node.active=!0}onClickDisable(){this.node.active=!1}addListener(){a.on(i.JBT_Cancel_All_Ingredients,this.onClickEnable,this),a.on(i.JBT_Disable_CancelMask,this.onClickDisable,this)}removeListener(){a.off(i.JBT_Cancel_All_Ingredients,this.onClickEnable,this),a.off(i.JBT_Disable_CancelMask,this.onClickDisable,this)}onDestroy(){this.removeListener()}})||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_CheckoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,n,i,a,l,r,o,s,u,c,d,h,b,p,C,f,y,T,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,l=t.Node,r=t._decorator,o=t.Color,s=t.Button},function(t){u=t.EventManager},function(t){c=t.ProjectEventManager,d=t.ProjectEvent},function(t){h=t.XCT_BasePanel,b=t.XCT_PanelAnimation},function(t){p=t.XCT_UILayer},function(t){C=t.XCT_UIManager},function(t){f=t.XCT_UIPanel},function(t){y=t.XCT_Events},function(t){T=t.XCT_JBT_DataManager},function(t){g=t.XCT_AudioManager}],execute:function(){var I,_,P,m,v,X,D,w,B,E,A,R,S,J,M,z,U,L,k,F,O;i._RF.push({},"36b3aAm7PtPIZTR7Hz9J6eX","XCT_JBT_CheckoutPanel",void 0);const{ccclass:x,property:N}=r;t("XCT_JBT_CheckoutPanel",(I=x("XCT_JBT_CheckoutPanel"),_=N(a),P=N(a),m=N(a),v=N(a),X=N(a),D=N(a),w=N(a),B=N(a),E=N(l),I((S=e((R=class extends h{constructor(...t){super(...t),this.defaultShowAnimation=b.NONE,this.defaultHideAnimation=b.NONE,this.defaultLayer=p.Pop2,this.animationDuration=.6,n(this,"lblDay",S,this),n(this,"lblTurnover",J,this),n(this,"lblTip",M,this),n(this,"lblRent",z,this),n(this,"lblRefund",U,this),n(this,"lblCost",L,this),n(this,"lblCatCost",k,this),n(this,"lblProfit",F,this),n(this,"btnOK",O,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){c.emit(d.弹出窗口,"小吃摊"),this.initUI()}initUI(){this.lblDay.string=""+T.Instance.playerData.currentDay,T.Instance.playerData.money-=T.Instance.Rent,T.Instance.playerData.isAdoptedCat&&(T.Instance.playerData.money-=10),u.Scene.emit(y.JBT_Update_Money),this.lblTurnover.string="+"+T.Instance.daySellingPrice.toFixed(1),this.lblTip.string="+"+T.Instance.daySellingAddTip.toFixed(1),this.lblRent.string="-"+T.Instance.Rent,this.lblRefund.string="-"+T.Instance.dayRefund.toFixed(1),this.lblCost.string="-"+T.Instance.dayCost.toFixed(1),this.lblCatCost.string="-10",this.lblCatCost.node.active=T.Instance.playerData.isAdoptedCat;let t=T.Instance.daySellingPrice+T.Instance.daySellingAddTip-T.Instance.dayCost-T.Instance.Rent-T.Instance.dayRefund;this.lblProfit.color=new o(t<0?"C53737":"5FC537"),this.lblProfit.string=""+t.toFixed(1)}onClickOK(){g.getInstance().playSound("点击"),T.Instance.isHadShowShop?C.Instance.hidePanel(f.JBT_CheckoutPanel):(T.Instance.isHadShowShop=!0,C.Instance.showPanel(f.JBT_ShopPanel,null,(()=>{C.Instance.showPanel(f.JBT_GameUI,null,null,b.NONE,p.GameUI2),C.Instance.hidePanel(f.JBT_CheckoutPanel)})))}addListener(){this.btnOK.on(s.EventType.CLICK,this.onClickOK,this)}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lblDay",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(R.prototype,"lblTurnover",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(R.prototype,"lblTip",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"lblRent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(R.prototype,"lblRefund",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(R.prototype,"lblCost",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(R.prototype,"lblCatCost",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(R.prototype,"lblProfit",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(R.prototype,"btnOK",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=R))||A));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_Completed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts","./XCT_JBT_DataManager.ts"],(function(t){var e,n,i,o,s,c,a,r,h,u,d,l,p,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,s=t._decorator,c=t.Component,a=t.Vec3,r=t.Graphics,h=t.Mask,u=t.instantiate,d=t.v3},function(t){l=t.XCT_Events},function(t){p=t.EventManager},function(t){C=t.XCT_JBT_DataManager}],execute:function(){var m,f,T,v,_,k,g,B,b,E,y;i._RF.push({},"eaeddUk+SRNmJMbkxPB0n8L","XCT_JBT_Completed",void 0);const{ccclass:I,property:P}=s;t("XCT_JBT_Completed",(m=I("XCT_JBT_Completed"),f=P(o),T=P(o),v=P(o),_=P(o),m((B=e((g=class extends c{constructor(...t){super(...t),n(this,"maskNode",B,this),n(this,"touchBtn",b,this),n(this,"guideContainer",E,this),n(this,"completedContainer",y,this),this.completedContainerPrefab=null,this.startY=0,this.distance=0,this.startPos=new a}onLoad(){this.addListener(),this.completedContainerPrefab=this.node.getChildByName("completedContainerPrefab"),this.completedContainerPrefab.active=!1,this.touchBtn.active=!1,this.guideContainer.children.forEach((t=>{t.active=!1}))}onTouchStart(t){const e=t.getUILocation();this.startY=e.y,this.startPos=this.touchBtn.position}onTouchMove(t){const e=t.getUILocation();this.touchBtn.setWorldPosition(new a(e.x,e.y,0))}onTouchEnd(t){const e=t.getUILocation();this.startY-e.y>200&&(this.showPackAnim(),this.hideGuideAnim(),this.touchBtn.active=!1,this.cancelTouchBtn()),this.touchBtn.setPosition(this.startPos)}showPackAnim(){this.maskNode.getComponent(r).enabled=!0,this.maskNode.getComponent(h).enabled=!0;let t=u(this.completedContainerPrefab);t.parent=this.completedContainer,t.setPosition(d(0,0,0)),t.active=!0,t.children.forEach((t=>{t.active=!0}))}showGuideAnim(){this.guideContainer.children.forEach((t=>{t.active=!0}))}hideGuideAnim(){this.guideContainer.children.forEach((t=>{t.active=!1}))}onClick(){if(!C.Instance.currentCookedSteps.includes("白面团")&&!C.Instance.currentCookedSteps.includes("土豆面"))return void p.Scene.emit(l.showTip,"请先摊好面皮");if(!C.Instance.currentCookedSteps.includes("鸡蛋"))return void p.Scene.emit(l.showTip,"请先摊好面皮");if(!C.Instance.currentCookedSteps.includes("调味酱")&&!C.Instance.currentCookedSteps.includes("辣椒酱"))return void p.Scene.emit(l.showTip,"要先抹好调味酱，才能撒配料哦！");let t=!1,e=["培根","油条","烤肠","牛肉","生菜","红枣","辣条","薄脆","鸭腿","黄瓜","葱花","香菜"];C.Instance.currentCookedSteps.forEach((n=>{t||e.includes(n)&&(t=!0)})),t?(1!=C.Instance.playerData.currentDay||C.Instance.isTutorialEnd||12===C.Instance.tutorialIdx)&&(p.Scene.emit(l.JBT_Cancel_All_Ingredients),C.Instance.isPacked=!0,C.Instance.currentCookedSteps.push("卷饼"),12==C.Instance.tutorialIdx&&(p.Scene.emit(l.HandAnimation_End),C.Instance.tutorialIdx++),this.showPackAnim(),this.hideGuideAnim()):p.Scene.emit(l.showTip,"要先撒上配料，才能卷饼哦！")}cancelTouchBtn(){this.touchBtn.off(o.EventType.TOUCH_START,this.onTouchStart,this),this.touchBtn.off(o.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchBtn.off(o.EventType.TOUCH_END,this.onTouchEnd,this),this.touchBtn.off(o.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}addListener(){this.node.on("click",this.onClick,this)}removeListener(){this.node.off("click",this.onClick,this)}onDestroy(){this.removeListener()}}).prototype,"maskNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(g.prototype,"touchBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(g.prototype,"guideContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(g.prototype,"completedContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=g))||k));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_BasePanel.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,s,r,a,o,h,u,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.JsonAsset,r=e._decorator,a=e.Component},function(e){o=e.EventManager},function(e){h=e.XCT_Events},function(e){u=e.XCT_UIManager},function(e){c=e.XCT_UIPanel},function(e){l=e.XCT_PanelAnimation},function(e){d=e.XCT_AudioManager}],execute:function(){var g,T,m,S,p,_,C,k,f,I,E,P;n._RF.push({},"1a726avyP9DHKdc/Lksbzdf","XCT_JBT_DataManager",void 0);const{ccclass:D,property:y}=r;let O=e("XCT_JBT_IngredientType",function(e){return e.SPICE="撒料类",e.SPREAD="涂抹类",e.EGG="鸡蛋类",e}({})),R=(e("XCT_JBT_ButtonAction",function(e){return e.START_MAKE="开始制作",e.NEXT_DIALOG="下一段对话",e.BUY_INGREDIENT="购买食材",e.REFUSE="拒绝",e.END_DIALOG="结束对话",e.LEAVE="离开",e.GET_TAKE_OUT="开展外卖业务",e.DELIVER_TAKE_OUT="送达",e.TAKE_DISH="递餐",e}({})),e("XCT_JBT_OrderStatus",function(e){return e[e.UNHANDLED=0]="UNHANDLED",e[e.TIMEOUT=1]="TIMEOUT",e[e.COOKED=2]="COOKED",e[e.DELIVERED=3]="DELIVERED",e[e.REFUSED=4]="REFUSED",e}({})));e("XCT_JBT_DataManager",(g=D("XCT_JBT_DataManager"),T=y(s),m=y(s),S=y(s),p=y(s),g(((P=class e extends a{constructor(...e){super(...e),this.STORAGE_KEY="XCT_JBT_PlayerData",i(this,"ingredientsConfigJson",k,this),i(this,"TipConfigJson",f,this),i(this,"TakeoutOrderConfigJson",I,this),i(this,"EvaluationConfigJson",E,this),this.ingredientsConfig=null,this.ingredientsConfigObject=null,this.evaluationConfig=null,this.tipConfig=null,this.takeoutOrderConfig=null,this.standardSpreadCount=100,this.playerData=null,this.isTutorialEnd=!1,this.isNeedShowDragTutorial=!1,this.tutorialIdx=0,this.isCooking=!1,this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.MINUTES_PER_HOUR=12,this.MINUTE_INTERVAL=15,this.isTimePause=!1,this.totalTime=24*this.MINUTES_PER_HOUR,this.isDayEnd=!1,this.currentSmile=100,this.startCookingTime=0,this.isTakeout=!1,this.dayCustomerCount=0,this.currentCustomerIndex=0,this.currentCustomer=null,this.missingStockIngredients=[],this.isEndingDialog=!1,this.isRefuse=!1,this.currentDayTakeoutConfig=[],this.currentTakeoutOrders=[],this.lastTakeoutOrderIds=[],this.currentTakeoutOrder=null,this.needShowTakeoutCome=!1,this.notes=[],this.takeoutNotes=[],this.evaluationOrder=null,this.currentDishes={},this.orderCheckResult=this.initOrderCheckResult(),this.currentEggIngredientType="白面团",this.eggIngredientTypeTransfer={},this.currentSauceType="调味酱",this.sauceTypeCount={},this.currentCookedSteps=[],this.currentSellingPrice=0,this.daySellingPrice=0,this.currentSellingAddTip=0,this.totalSellingTip=10,this.daySellingAddTip=0,this.refund=0,this.dayRefund=0,this.Rent=10,this.dayCost=0,this.isHadShowShop=!1,this.isShowingTakeoutPanel=!1,this.isShowingShopPanel=!1,this.isCatDriveAway=!1,this.isPacked=!1,this.isPause=!1}initOrderCheckResult(){return{extraIngredients:[],missingIngredients:[],lessCountIngredients:[],lessSpreadIngredients:[],moreSpreadIngredients:[],lessRotateIngredients:[],moreCountIngredients:[]}}onLoad(){this.addListener(),e.Instance=this,this.ingredientsConfig=this.ingredientsConfigJson.json,this.ingredientsConfigObject=this.ingredientsConfig.reduce(((e,t)=>(e[t.name]=t,e)),{}),this.evaluationConfig=this.EvaluationConfigJson.json,this.tipConfig=this.TipConfigJson.json,this.takeoutOrderConfig=this.TakeoutOrderConfigJson.json,this.initData()}initData(){this.playerData=this.loadData(),this.resetDay()}loadData(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{money:100,currentDay:1,stock:{"鸡蛋":1,"白面团":1,"葱花":1,"调味酱":1,"薄脆":1,"生菜":1},score:5,isTakeOutProjectSet:!1,isTakeOutProjectOpen:!1,isAdoptedCat:!1,historyEvaluation:[{avatarName:"上班族",star:5,customerName:"上班族",price:10,refund:2}]}}resetDay(){this.tutorialIdx=0,this.isTutorialEnd=!1,this.isNeedShowDragTutorial=!1,this.currentCustomerIndex=0,this.dayCustomerCount=0,this.orderCheckResult=this.initOrderCheckResult(),this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.totalTime=24*this.MINUTES_PER_HOUR,this.isDayEnd=!1,this.daySellingPrice=0,this.daySellingAddTip=0,this.dayRefund=0,this.currentDayTakeoutConfig=this.generateRandomTakeoutOrders(),this.currentTakeoutOrders=[],this.needShowTakeoutCome=!1,this.isShowingTakeoutPanel=!1,this.isCatDriveAway=!1,this.isCooking=!1,this.isPause=!1,o.Scene.emit(h.JBT_Update_Money),o.Scene.emit(h.JBT_Update_Smile),o.Scene.emit(h.JBT_Update_Time),o.Scene.emit(h.JBT_Hide_New_Takeout_Order),o.Scene.emit(h.JBT_Start_NewDay_Dialog)}generateRandomTakeoutOrders(){const e=this.takeoutOrderConfig.find((e=>5===e.day));if(!e||0===e.takeoutOrders.length)return console.warn("第5天的外卖订单配置不存在或为空"),[];const t=[...e.takeoutOrders],i=[],n=Math.min(5,t.length);for(let e=0;e<n;e++){const e=Math.floor(Math.random()*t.length),n={...t[e]};i.push(n),t.splice(e,1)}const s=this.generateOrderTimes(n);return i.map(((e,t)=>{e.showTime=s[t];const i=s[t][0]+2;return e.expireTime=[i,s[t][1]],e}))}generateOrderTimes(e){const t=Array.from({length:9},((e,t)=>t+9)),i=[0,15,30,45],n=[];for(const e of t)for(const t of i)n.push([e,t]);for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}const s=n.slice(0,e);return s.sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]-t[1])),s}resetCustomer(e){this.currentCustomer=e,this.isRefuse=!1,this.missingStockIngredients=[],this.currentSellingPrice=0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.startCookingTime=this.currentTime,this.currentCookedSteps=[],this.notes=[],this.isPacked=!1,this.startCookingTime=this.currentTime,this.currentSmile=100,this.isPause=!1,o.Scene.emit(h.JBT_Update_Smile)}resetTakout(e){this.currentTakeoutOrder=e,this.takeoutNotes=[],this.isTakeout=!0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.currentCookedSteps=[],this.isPacked=!1,this.isPause=!1}passDay(){this.playerData.currentDay++,this.saveData(),u.Instance.showPanel(c.JBT_GameUI,null,(()=>{u.Instance.showPanel(c.JBT_DialoguePanel,null,(()=>{u.Instance.showPanel(c.TipPanel),this.scheduleOnce((()=>{u.Instance.showPanel(c.JBT_GamePanel,null,null,l.PreLoad_at_Bottom),u.Instance.hidePanel(c.StartPanel),u.Instance.hidePanel(c.PassPanel),u.Instance.hidePanel(c.LoadingPanel,(()=>{u.Instance.hidePanel(c.TablePanel),o.Scene.emit(h.showTableItem),this.resetDay()}))}),.5)}),l.NONE)}),l.NONE)}startCooking(){this.isTakeout?(this.currentSellingPrice=this.calculateSellingPrice(this.currentTakeoutOrder.order),o.Scene.emit(h.JBT_Hide_smile)):(this.currentSellingPrice=this.calculateSellingPrice(this.currentCustomer.order),o.Scene.emit(h.JBT_Show_smile)),this.playerData.money+=this.currentSellingPrice,this.daySellingPrice+=this.currentSellingPrice,d.getInstance().playSound("收银"),o.Scene.emit(h.JBT_Update_Money),u.Instance.showPanel(c.JBT_GamePanel),d.getInstance().playMusic("煎"),1!=e.Instance.playerData.currentDay||e.Instance.isTutorialEnd||u.Instance.showPanel(c.JBT_TutorialPanel,null,null,l.SLIDE_FROM_BOTTOM),u.Instance.hidePanel(c.JBT_DialoguePanel),u.Instance.hidePanel(c.JBT_TipPanel),u.Instance.hidePanel(c.JBT_TakeoutPanel,null,l.SLIDE_TO_TOP),this.isCooking=!0,this.needShowTakeoutCome=!1,this.isPause=!1,o.Scene.emit(h.Game_Resume)}endCooking(){this.pack(),this.isTakeout?(this.checkOrder(this.currentTakeoutOrder.order),o.Scene.emit(h.JBT_Hide_smile)):(this.checkOrder(this.currentCustomer.order),o.Scene.emit(h.JBT_Show_smile)),u.Instance.showPanel(c.JBT_DialoguePanel,!0,(()=>{u.Instance.showPanel(c.JBT_DialoguePanel,!0,(()=>{this.isTakeout?(o.Scene.emit(h.JBT_Show_Takeout_End_Dialog),this.evaluationOrder=this.currentTakeoutOrder,o.Scene.emit(h.JBT_Show_Dish_Node)):(o.Scene.emit(h.JBT_Show_End_Dialog_Sp),o.Scene.emit(h.JBT_Show_Dish_Node)),this.isEndingDialog=!0,u.Instance.hidePanel(c.JBT_GamePanel)}),l.SLIDE_FROM_TOP)}),l.PreLoad_at_Top),this.isCooking=!1,d.getInstance().stopMusic(),o.Scene.emit(h.Game_Resume)}checkoutCustomer(){if(this.calculateRefund(this.currentCustomer.order),this.refund>0)return this.playerData.money-=this.refund,o.Scene.emit(h.JBT_Update_Money),void(this.refund=0);this.calculateAddTip(),this.currentSellingAddTip>0&&(o.Scene.emit(h.JBT_Show_Add_Tip),this.playerData.money+=this.currentSellingAddTip,o.Scene.emit(h.JBT_Update_Money),this.currentSellingAddTip=0)}checkoutDay(){o.Scene.emit(h.hideTableItem),u.Instance.showPanel(c.TablePanel),u.Instance.showPanel(c.LoadingPanel,(()=>{u.Instance.showPanel(c.JBT_CheckoutPanel)}))}startNewDay(){}addOneHour(){this.currentTime+=this.MINUTES_PER_HOUR,this.updateLogic()}update(e){this.isPause||!this.isCooking||this.isDayEnd||this.isTakeout||(this.currentTime+=e,this.updateLogic())}updateLogic(){const e=this.currentTime/this.MINUTES_PER_HOUR,t=8+Math.floor(e);t!==this.currentHour&&e>=this.lastHourUpdate+1&&(this.currentHour=t,this.lastHourUpdate=Math.floor(e));const i=60*e,n=Math.floor(i/this.MINUTE_INTERVAL),s=n%4*this.MINUTE_INTERVAL;s!==this.currentMinute&&i>=this.lastMinuteUpdate+this.MINUTE_INTERVAL&&(this.currentMinute=s,this.lastMinuteUpdate=n*this.MINUTE_INTERVAL),this.currentHour>=19&&(this.currentTime=this.totalTime-13*this.MINUTES_PER_HOUR,this.currentHour=19,this.currentMinute=0,this.isDayEnd=!0),o.Scene.emit(h.JBT_Update_Time);for(let e=this.currentDayTakeoutConfig.length-1;e>=0;e--){const t=this.currentDayTakeoutConfig[e],[i,n]=t.showTime;if(this.currentHour>i||this.currentHour===i&&this.currentMinute>=n){const i={id:Date.now(),avatarName:t.avatarName,customerName:t.customerName,expireTime:t.expireTime,content:t.content,remark:t.remark,order:t.order,price:0,status:R.UNHANDLED,missingStockIngredients:[],sellingAddTip:0,refund:0,star:0,evaluation:""};i.price=this.calculateSellingPrice(t.order),i.missingStockIngredients=this.checkTakeoutStock(t.order),this.currentTakeoutOrders.push(i),o.Scene.emit(h.JBT_ORDER_DATA_UPDATED),this.isCooking?this.needShowTakeoutCome=!0:o.Scene.emit(h.JBT_New_Takeout_Order),this.currentDayTakeoutConfig.splice(e,1)}}for(let e=0;e<this.currentTakeoutOrders.length;e++){const t=this.currentTakeoutOrders[e];if(t.status===R.UNHANDLED){const[e,i]=t.expireTime;(this.currentHour>e||this.currentHour===e&&this.currentMinute>=i)&&(t.status=R.TIMEOUT,o.Scene.emit(h.JBT_ORDER_DATA_UPDATED))}}if(!this.isTakeout){const e=60*((this.currentTime-this.startCookingTime)/this.MINUTES_PER_HOUR)/6;this.currentSmile=Math.max(0,100-Math.floor(e)),o.Scene.emit(h.JBT_Update_Smile)}}buyNewIngredient(e){this.playerData.stock[e]=1}resetOrderCheckResult(){this.orderCheckResult=this.initOrderCheckResult()}checkStock(){let e=this.currentCustomer.order;return this.missingStockIngredients=[],Object.keys(e).forEach((t=>{if(1===e[t].need){void 0!==this.playerData.stock[t]&&this.playerData.stock[t]>0||this.missingStockIngredients.push(t)}})),0===this.missingStockIngredients.length}checkTakeoutStock(e){let t=[];return Object.keys(e).forEach((i=>{if(1===e[i].need){void 0!==this.playerData.stock[i]&&this.playerData.stock[i]>0||t.push(i)}})),t}calculateSellingPrice(e){let t=0;for(let i in e){let n=e[i];if(0==n.need)continue;const s=this.ingredientsConfigObject[i];if(!s){console.log(`LSF_DataManager: 未找到材料配置 ${i},订单：`,e);continue}let r=s.sellingPrice;n.type==O.SPICE?r=s.sellingPrice*n.count:n.type==O.SPREAD?r=s.sellingPrice*n.percentage:n.type==O.EGG&&(r=s.sellingPrice*n.count),t+=r}return t}pack(){Object.keys(this.sauceTypeCount).forEach((t=>{let i=0;this.sauceTypeCount[t].forEach((e=>{i+=e}));let n=i/this.standardSpreadCount;e.Instance.currentDishes[t]||(e.Instance.currentDishes[t]={type:O.SPREAD,need:1,count:1,percentage:0,rotateCount:0}),this.currentDishes[t].percentage=n}))}checkOrder(e){let t=this.currentDishes;this.resetOrderCheckResult();const i=this.orderCheckResult;Object.keys(t).forEach((t=>{e[t]&&0===e[t].need&&i.extraIngredients.push(t)})),Object.keys(e).forEach((n=>{1!==e[n].need||t[n]||i.missingIngredients.push(n)})),Object.keys(e).forEach((n=>{const s=e[n],r=t[n];if(1===s.need&&r)switch(s.type){case O.SPICE:this.checkSpiceIngredient(n,s,r,i);break;case O.SPREAD:this.checkSpreadIngredient(n,s,r,i);break;case O.EGG:this.checkEggIngredient(n,s,r,i)}}))}checkSpiceIngredient(e,t,i,n){void 0!==t.count&&(i.count<t.count?n.lessCountIngredients.push(e):i.count>t.count&&n.moreCountIngredients.push(e))}checkSpreadIngredient(e,t,i,n){void 0!==t.percentage&&(i.percentage<t.percentage?n.lessSpreadIngredients.push(e):i.percentage>t.percentage+50&&n.moreSpreadIngredients.push(e))}checkEggIngredient(e,t,i,n){void 0!==t.count&&void 0!==t.rotateCount&&(i.count<t.count?n.lessCountIngredients.push(e):i.count>t.count&&n.moreCountIngredients.push(e),i.rotateCount<t.rotateCount&&n.lessRotateIngredients.push(e))}calculateRefund(e){return this.refund=0,this.orderCheckResult.extraIngredients.length>0?(this.refund+=.8*this.currentSellingPrice,this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),void(this.dayRefund+=this.refund)):(this.orderCheckResult.missingIngredients.length>0&&this.orderCheckResult.missingIngredients.forEach((t=>{const i=e[t];switch(i.type){case O.SPICE:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count;break;case O.SPREAD:this.refund+=1*this.ingredientsConfigObject[t].sellingPrice;break;case O.EGG:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count}})),this.orderCheckResult.lessCountIngredients.length>0&&this.orderCheckResult.lessCountIngredients.forEach((t=>{const i=this.currentDishes[t],n=e[t];this.refund+=this.ingredientsConfigObject[t].sellingPrice*(n.count-i.count)})),this.currentSmile<30&&(this.refund+=(30-this.currentSmile)/30*this.currentSellingPrice),this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),this.dayRefund+=this.refund,this.refund)}calculateAddTip(){this.currentSellingAddTip=0,this.orderCheckResult.extraIngredients.length>0||this.orderCheckResult.missingIngredients.length>0||this.orderCheckResult.lessCountIngredients.length>0||this.orderCheckResult.lessSpreadIngredients.length>0||this.orderCheckResult.moreSpreadIngredients.length>0||this.orderCheckResult.lessRotateIngredients.length>0||(this.orderCheckResult.moreCountIngredients.length>0&&(this.currentSellingAddTip+=this.orderCheckResult.moreCountIngredients.length+2),this.currentSmile>60&&(this.currentSellingAddTip+=(this.currentSmile-60)/40*this.totalSellingTip),this.currentSellingAddTip>this.totalSellingTip&&(this.currentSellingAddTip=this.totalSellingTip),this.daySellingAddTip+=this.currentSellingAddTip)}onGamePause(){this.isPause=!0}onGameResume(){this.isPause=!1}saveData(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.playerData))}addListener(){o.on(h.Game_Pause,this.onGamePause,this),o.on(h.Game_Resume,this.onGameResume,this)}removeListener(){o.off(h.Game_Pause,this.onGamePause,this),o.off(h.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener()}}).Instance=void 0,k=t((C=P).prototype,"ingredientsConfigJson",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(C.prototype,"TipConfigJson",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(C.prototype,"TakeoutOrderConfigJson",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(C.prototype,"EvaluationConfigJson",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=C))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_DialoguePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,i,n,a,o,s,h,r,l,d,c,u,T,C,m,p,g,b,_,y,w,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,o=t._decorator,s=t.instantiate,h=t.v3,r=t.Label,l=t.UIOpacity,d=t.tween,c=t.Vec3,u=t.Animation,T=t.Button},function(t){C=t.EventManager},function(t){m=t.XCT_BasePanel,p=t.XCT_PanelAnimation},function(t){g=t.XCT_UILayer},function(t){b=t.XCT_UIManager},function(t){_=t.XCT_UIPanel},function(t){y=t.XCT_Events},function(t){w=t.XCT_JBT_DataManager},function(t){f=t.XCT_AudioManager}],execute:function(){var k,v,I,D,B,N,P,A,S,O,E,J,X,L,M,z,U,j,V,F,H;n._RF.push({},"4146ego6RdIB7yMlWpMUv6K","XCT_JBT_DialoguePanel",void 0);const{ccclass:R,property:x}=o;t("XCT_JBT_DialoguePanel",(k=R("XCT_JBT_DialoguePanel"),v=x(a),I=x(a),D=x(a),B=x(a),N=x(a),P=x(a),A=x(a),S=x(a),O=x(a),k((X=e((J=class extends m{constructor(...t){super(...t),this.defaultShowAnimation=p.SLIDE_FROM_TOP,this.defaultHideAnimation=p.SLIDE_TO_TOP,this.defaultLayer=g.Dialog,this.animationDuration=.6,i(this,"tableItems",X,this),i(this,"moneyItem",L,this),i(this,"moneyContainer",M,this),i(this,"btnTakeout",z,this),i(this,"dishNode",U,this),i(this,"dishPos1",j,this),i(this,"dishPos2",V,this),i(this,"btnCat",F,this),i(this,"dargTurtrialAnim",H,this),this.isCatClicked=!1,this.needShowDish=!1,this.isAddedEvent=!1,this.takeoutTween=null,this.cb=null}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}onShowComplete(){this.cb&&this.cb(),this.cb=null}init(t=!0){this.dishNode.active=this.needShowDish,this.needShowDish=!1,this.dargTurtrialAnim.active=!1,t?this.onShowTableItem():this.hideTableItem(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,this.btnTakeout.getChildByName("nodeVideo").active=!1,w.Instance.needShowTakeoutCome&&this.showTakeoutCom(),this.isCatClicked=!1,w.Instance.isCatDriveAway=!1,1==w.Instance.playerData.currentDay||w.Instance.playerData.isAdoptedCat?this.btnCat.active=!1:this.btnCat.active=!0,this.btnCat.getChildByName("dialogue2").active=!1}hideTableItem(){this.tableItems.forEach((t=>{t.active=!1}))}onShowTableItem(){this.tableItems.forEach((t=>{t.active=!0})),this.btnTakeout.active=w.Instance.playerData.isTakeOutProjectSet,this.btnTakeout.getChildByName("nodeVideo").active=!w.Instance.playerData.isTakeOutProjectOpen}onShowAddTip(){this.moneyContainer.removeAllChildren();const t=s(this.moneyItem);t.parent=this.moneyContainer,t.setPosition(h(0,0,0)),t.getComponentInChildren(r).string="小费+"+w.Instance.currentSellingAddTip,t.setPosition(0,-200),t.getComponent(l).opacity=255,t.active=!0,d(t).to(1.5,{position:new c(0,200,0)},{easing:"sineIn"}).parallel(d(t.getComponent(l)).to(1.5,{opacity:0})).call((()=>{t.destroy()})).start()}onClickTakeout(){if(f.getInstance().playSound("点击"),w.Instance.playerData.isTakeOutProjectOpen){if(w.Instance.isEndingDialog)return void C.Scene.emit(y.showTip,"请先完成当前订单");this.takeoutTween&&this.takeoutTween.stop(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,b.Instance.showPanel(_.JBT_TakeoutPanel)}else b.Instance.showPanel(_.JBT_TipPanel,null,(()=>{C.Scene.emit(y.JBT_ShowTip_OpenTakeout)}))}showTakeoutCom(){if(w.Instance.playerData.isTakeOutProjectOpen){if(w.Instance.isShowingTakeoutPanel)return;this.btnTakeout.getChildByName("nodeOrderCome").active=!0,this.takeoutTween=d(this.btnTakeout.getChildByName("nodeOrderCome")).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.3,{scale:new c(.9,.9,.9)}).union().repeatForever().start()}else this.btnTakeout.getChildByName("nodeVideo").active=!0}hideTakeoutCom(){this.btnTakeout.getChildByName("nodeOrderCome").active=!1}takeoutOpen(){this.btnTakeout.getChildByName("nodeVideo").active=!1}onCatClick(){f.getInstance().playSound("猫"),this.isCatClicked=!this.isCatClicked;let t=this.btnCat.getChildByName("dialogue2"),e=t.getChildByName("btnDriveAway"),i=t.getChildByName("btnAdopt");e.active=!0,i.active=!0,this.isCatClicked?(t.active=!0,e.off("click"),e.on("click",this.onBtnDriveAwayClick,this),i.off("click"),i.on("click",this.onBtnAdoptClick,this)):(t.active=!1,e.off("click"),i.off("click"))}onBtnDriveAwayClick(){w.Instance.isCatDriveAway=!0;let t=this.btnCat.getChildByName("dialogue2");t.getChildByName("heart").getChildByName("heart_1").active=!1,t.getChildByName("heart").getChildByName("heart_2").active=!0,t.getChildByName("btnDriveAway").active=!1,t.getChildByName("btnAdopt").active=!1,this.scheduleOnce((()=>{this.btnCat.active=!1}),1)}onBtnAdoptClick(){w.Instance.playerData.isAdoptedCat=!0,this.btnCat.active=!1}showDishNode(){this.cb=()=>{this.needShowDish=!0,this.dishNode.active=!0,this.dishNode.setWorldPosition(h(this.dishPos1.worldPosition.x,this.dishPos1.worldPosition.y-300,this.dishPos1.worldPosition.z)),d(this.dishNode).to(.5,{worldPosition:this.dishPos1.worldPosition}).call((()=>{w.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.active=!0,this.dargTurtrialAnim.getComponent(u).play())})).start()}}hideDishNode(){this.dishNode.active=!1}dishDragEnd(){w.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.getComponent(u).stop(),this.dargTurtrialAnim.active=!1,w.Instance.isNeedShowDragTutorial=!1),w.Instance.isTakeout||C.Scene.emit(y.JBT_Continue_Customer_EndDialog)}addListener(){C.on(y.showTableItem,this.onShowTableItem,this),C.on(y.hideTableItem,this.hideTableItem,this),C.on(y.JBT_Show_Add_Tip,this.onShowAddTip,this),C.on(y.JBT_Takeout_Open,this.takeoutOpen,this),C.on(y.JBT_New_Takeout_Order,this.showTakeoutCom,this),C.on(y.JBT_Hide_New_Takeout_Order,this.hideTakeoutCom,this),C.on(y.JBT_Show_Dish_Node,this.showDishNode,this),C.on(y.Dish_Drag_End,this.dishDragEnd,this),this.btnTakeout.on(T.EventType.CLICK,this.onClickTakeout,this),this.btnCat.on(T.EventType.CLICK,this.onCatClick,this)}removeListener(){C.off(y.showTableItem,this.onShowTableItem,this),C.off(y.hideTableItem,this.hideTableItem,this),C.off(y.JBT_Show_Add_Tip,this.onShowAddTip,this),C.off(y.JBT_New_Takeout_Order,this.showTakeoutCom,this),C.off(y.JBT_Hide_New_Takeout_Order,this.hideTakeoutCom,this),C.off(y.JBT_Takeout_Open,this.takeoutOpen,this),C.off(y.JBT_Show_Dish_Node,this.showDishNode,this),C.off(y.Dish_Drag_End,this.dishDragEnd,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tableItems",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=e(J.prototype,"moneyItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(J.prototype,"moneyContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(J.prototype,"btnTakeout",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(J.prototype,"dishNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(J.prototype,"dishPos1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(J.prototype,"dishPos2",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(J.prototype,"btnCat",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(J.prototype,"dargTurtrialAnim",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=J))||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_Dough.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_JBT_PancakeStick.ts","./EventManager.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts"],(function(e){var t,n,i,o,a,s,r,l,c,h,u,d,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Node,a=e._decorator,s=e.Component,r=e.instantiate,l=e.v3},function(e){c=e.XCT_JBT_PancakeStick},function(e){h=e.EventManager},function(e){u=e.XCT_Events},function(e){d=e.XCT_JBT_DataManager,C=e.XCT_JBT_IngredientType}],execute:function(){var _,g,p,B,m,y,f;i._RF.push({},"f3739ow7NxBnYEBtBHigfM/","XCT_JBT_Dough",void 0);const{ccclass:b,property:T}=a;e("XCT_JBT_Dough",(_=b("XCT_JBT_Dough"),g=T(o),p=T(o),_((y=t((m=class extends s{constructor(...e){super(...e),n(this,"doughContainer",y,this),n(this,"toolsLayer",f,this),this.btnDough_1=null,this.btnDough_2=null,this.polePrefab=null,this.poleNode=null,this.piePrefabsContanter_1=null,this.piePrefabsContanter_2=null,this.doughAnimation=null}onLoad(){this.btnDough_1=this.node.getChildByName("btnDough_1"),this.btnDough_2=this.node.getChildByName("btnDough_2"),this.polePrefab=this.node.getChildByName("polePrefab"),this.piePrefabsContanter_1=this.node.getChildByName("pieprefabsContanter_1"),this.piePrefabsContanter_2=this.node.getChildByName("pieprefabsContanter_2"),this.doughAnimation=this.node.getChildByName("doughAnimation"),this.onCancel_Click(),this.addListener()}onBtn_1Click(){this.onBtnClick(1)}onBtn_2Click(){this.onBtnClick(2)}onBtnClick(e){if(d.Instance.isPacked)return void h.Scene.emit(u.showTip,"卷饼后不可再添加材料哦！");if(d.Instance.currentCookedSteps.includes("白面团")||d.Instance.currentCookedSteps.includes("土豆面"))return void h.Scene.emit(u.showTip,"面饼只可以摊一次！");if(1==d.Instance.playerData.currentDay&&!d.Instance.isTutorialEnd&&0!==d.Instance.tutorialIdx)return;0==d.Instance.tutorialIdx&&(h.Scene.emit(u.HandAnimation_Start),d.Instance.tutorialIdx++),h.Scene.emit(u.JBT_Cancel_All_Ingredients);let t=1==e?"白面团":"土豆面";d.Instance.currentDishes[t]||(d.Instance.currentDishes[t]={type:C.EGG,need:1,count:0,percentage:0,rotateCount:0}),d.Instance.currentDishes[t].count++,d.Instance.currentEggIngredientType=t,d.Instance.playerData.money-=d.Instance.ingredientsConfigObject[t].cost,d.Instance.dayCost+=d.Instance.ingredientsConfigObject[t].cost,h.Scene.emit(u.JBT_Update_Money),this.btnDough_1.getChildByName("selected").active=1==e,this.btnDough_2.getChildByName("selected").active=2==e;let n=this.doughAnimation,i=r(n);i.getChildByName("面1").active=1==e,i.getChildByName("面2").active=2==e,i.getChildByName("勺子").getChildByName("面1").active=1==e,i.getChildByName("勺子").getChildByName("面2").active=2==e,i.parent=this.toolsLayer,i.setPosition(l(0,0,0)),i.active=!0,this.scheduleOnce((()=>{h.Scene.emit(u.JBT_Disable_CancelMask),h.Scene.emit(u.HandAnimation_End),i.parent=this.doughContainer;let t=r(this.polePrefab);t.parent=this.toolsLayer,t.setPosition(l(0,0,0)),t.getComponent(c).setPiePrefabs(1==e?this.piePrefabsContanter_1:this.piePrefabsContanter_2,this.doughContainer),t.active=!0,this.poleNode=t}),.72)}onCancel_Click(){if(this.btnDough_1.getChildByName("selected").active=!1,this.btnDough_2.getChildByName("selected").active=!1,this.poleNode){this.poleNode.getComponent(c).totalAngle;this.poleNode.destroy()}this.poleNode=null}addListener(){h.on(u.JBT_Cancel_All_Ingredients,this.onCancel_Click,this),this.btnDough_1.on("click",this.onBtn_1Click,this),this.btnDough_2.on("click",this.onBtn_2Click,this)}removeListener(){h.off(u.JBT_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"doughContainer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(m.prototype,"toolsLayer",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=m))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_Egg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_JBT_PancakeStick.ts","./EventManager.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts"],(function(e){var t,n,i,a,s,o,r,c,l,g,d,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,o=e.Component,r=e.instantiate,c=e.v3},function(e){l=e.XCT_JBT_PancakeStick},function(e){g=e.EventManager},function(e){d=e.XCT_Events},function(e){h=e.XCT_JBT_DataManager,u=e.XCT_JBT_IngredientType}],execute:function(){var C,p,_,f,T,m,y;i._RF.push({},"2f0d8i5VzdKkqKJPCVBYHjX","XCT_JBT_Egg",void 0);const{ccclass:I,property:b}=s;e("XCT_JBT_Egg",(C=I("XCT_JBT_Egg"),p=b(a),_=b(a),C((m=t((T=class extends o{constructor(...e){super(...e),n(this,"eggContainer",m,this),n(this,"toolsLayer",y,this),this.polePrefab=null,this.eggPrefabsContanter=null,this.eggAnimationPrefab=null,this.poleNode=null}onLoad(){this.polePrefab=this.node.getChildByName("polePrefab"),this.eggPrefabsContanter=this.node.getChildByName("eggPrefabsContanter"),this.eggAnimationPrefab=this.node.getChildByName("eggAnimationPrefab"),this.onCancel_Click(),this.addListener()}onBtnClick(){if(h.Instance.isPacked)return void g.Scene.emit(d.showTip,"卷饼后不可再添加材料哦！");if(!h.Instance.currentCookedSteps.includes("白面团")&&!h.Instance.currentCookedSteps.includes("土豆面"))return void g.Scene.emit(d.showTip,"要先摊好面皮，才能加鸡蛋哦！");if(1==h.Instance.playerData.currentDay&&!h.Instance.isTutorialEnd&&2!==h.Instance.tutorialIdx)return;2==h.Instance.tutorialIdx&&(g.Scene.emit(d.HandAnimation_Start),h.Instance.tutorialIdx++),g.Scene.emit(d.JBT_Cancel_All_Ingredients),h.Instance.currentDishes["鸡蛋"]||(h.Instance.currentDishes["鸡蛋"]={type:u.EGG,need:1,count:0,percentage:0,rotateCount:0}),h.Instance.currentDishes["鸡蛋"].count++,h.Instance.currentEggIngredientType="鸡蛋",h.Instance.playerData.money-=h.Instance.ingredientsConfigObject["鸡蛋"].cost,h.Instance.dayCost+=h.Instance.ingredientsConfigObject["鸡蛋"].cost,g.Scene.emit(d.JBT_Update_Money),this.node.getChildByName("selected").active=!0;let e=this.eggAnimationPrefab,t=r(e);t.parent=this.toolsLayer,t.setPosition(c(0,0,0)),t.active=!0,this.scheduleOnce((()=>{g.Scene.emit(d.JBT_Disable_CancelMask),g.Scene.emit(d.HandAnimation_End),t.parent=this.eggContainer;let e=r(this.polePrefab);e.parent=this.toolsLayer,e.setPosition(c(0,0,0)),e.getComponent(l).setPiePrefabs(this.eggPrefabsContanter,this.eggContainer),e.active=!0,this.poleNode=e}),.72)}onCancel_Click(){if(this.node.getChildByName("selected").active=!1,this.poleNode){this.poleNode.getComponent(l).totalAngle;this.poleNode.destroy()}this.poleNode=null}addListener(){g.on(d.JBT_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onBtnClick,this)}removeListener(){g.off(d.JBT_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"eggContainer",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(T.prototype,"toolsLayer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=T))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_GamePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,o,s,r,l,h,c,d,u,g,C,m,p,y,f,P,_,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,s=e.Graphics,r=e.Mask,l=e.instantiate,h=e.Label,c=e.tween,d=e.UITransform,u=e.v2},function(e){g=e.EventManager},function(e){C=e.XCT_BasePanel,m=e.XCT_PanelAnimation},function(e){p=e.XCT_UILayer},function(e){y=e.XCT_Events},function(e){f=e.XCT_JBT_DataManager},function(e){P=e.XCT_UIManager},function(e){_=e.XCT_UIPanel},function(e){I=e.XCT_AudioManager}],execute:function(){var N,w,k,b,T,B,v,A,D,E,X,M,S,L,J,z,G,U,R,O,H,x,W,j,F;i._RF.push({},"4b3f40tjqZA0rAH2emyAkdE","XCT_JBT_GamePanel",void 0);const{ccclass:q,property:Q}=o;e("XCT_JBT_GamePanel",(N=q("XCT_JBT_GamePanel"),w=Q(a),k=Q(a),b=Q(a),T=Q(a),B=Q(a),v=Q(a),A=Q(a),D=Q(a),E=Q(a),X=Q(a),M=Q(a),N((J=t((L=class extends C{constructor(...e){super(...e),this.defaultShowAnimation=m.SLIDE_FROM_BOTTOM,this.defaultHideAnimation=m.SLIDE_TO_BOTTOM,this.defaultLayer=p.Game,this.animationDuration=.6,n(this,"cookArea",J,this),n(this,"toolsLayer",z,this),n(this,"btnNote",G,this),n(this,"NotePanel",U,this),n(this,"NotePos1",R,this),n(this,"NotePos2",O,this),n(this,"btnNoteClose",H,this),n(this,"ingredientContainer",x,this),n(this,"spreadIngredientContainer",W,this),n(this,"DoughContainer",j,this),n(this,"paws",F,this),this.isAddedEvent=!1,this.catIngredient=[],this.stealInterval=2,this.stealTimer=0,this.isPawPated=!1,this.tween=null}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.startNewDish(),this.NotePanel.active=!1,this.updateIngredientContainer(),this.paws.forEach((e=>{e.active=!1}))}startNewDish(){this.cookArea.children.forEach((e=>{e.getChildByName("Contanter")&&e.getChildByName("Contanter").children.forEach((e=>{e.destroy()}))})),this.toolsLayer.children.forEach((e=>{e.destroy()})),this.cookArea.getComponent(s).enabled=!1,this.cookArea.getComponent(r).enabled=!1}updateIngredientContainer(){let e=0;this.catIngredient=[],this.ingredientContainer.children.forEach((t=>{f.Instance.playerData.stock[t.name]&&f.Instance.playerData.stock[t.name]>0?(t.active=!0,e++,this.catIngredient.push(t)):t.active=!1})),e<this.ingredientContainer.children.length-1&&(this.ingredientContainer.getChildByName("空_配料").active=!0,this.ingredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.spreadIngredientContainer.children.forEach((t=>{f.Instance.playerData.stock[t.name]&&f.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.spreadIngredientContainer.children.length-1&&(this.spreadIngredientContainer.getChildByName("空_配料").active=!0,this.spreadIngredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this));let t=f.Instance.playerData.stock["土豆面"]&&f.Instance.playerData.stock["土豆面"]>0;this.DoughContainer.getChildByName("btnDough_2").active=t,this.DoughContainer.getChildByName("空_面团").active=!t,this.DoughContainer.getChildByName("空_面团").on("click",this.onClickEmptyIngredient,this)}onClickEmptyIngredient(){g.Scene.emit(y.Hide_TutorialPanel),P.Instance.showPanel(_.JBT_ShopPanel,!0)}onPackIngredients(){this.cookArea.children.forEach((e=>{let t=e.getChildByName("Contanter");t&&t.children.forEach((e=>{e.destroy()}))})),this.toolsLayer.children.forEach((e=>{e.destroy()})),this.cookArea.getComponent(s).enabled=!1,this.cookArea.getComponent(r).enabled=!1}onAllPackd(){f.Instance.endCooking()}onClickNote(){I.getInstance().playSound("点击"),g.Scene.emit(y.Hide_TutorialPanel),this.NotePanel.active=!0;let e=this.NotePanel.getChildByName("noteNode"),t=this.NotePanel.getChildByName("takeoutNoteNode");e.active=!f.Instance.isTakeout,t.active=f.Instance.isTakeout;let n=f.Instance.isTakeout?"takeoutNoteNode":"noteNode",i=this.NotePanel.getChildByName(n),a=i.getChildByName("noteContainer"),o=f.Instance.isTakeout?f.Instance.takeoutNotes:f.Instance.notes;a.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1}));let s=a.children[0];o.forEach((e=>{let t=l(s);t.parent=a,t.getChildByName("lblQustion").getComponent(h).string=e[0],t.getChildByName("lblAnswer").getComponent(h).string=e[1],t.active=!0})),i.setWorldPosition(this.NotePos1.worldPosition),c(i).to(.3,{worldPosition:this.NotePos2.worldPosition}).start()}onClickCloseNote(){g.Scene.emit(y.Show_TutorialPanel),this.NotePanel.active=!1}update(e){if(!(f.Instance.isPause||f.Instance.playerData.isAdoptedCat||f.Instance.isCatDriveAway||1==f.Instance.playerData.currentDay)&&f.Instance.isCooking&&(this.stealTimer+=e,this.stealTimer>=this.stealInterval)){this.stealInterval=2*Math.random()+15,this.stealTimer=0;let e=Math.floor(Math.random()*this.paws.length),t=this.paws[e];if(0!==e){if(1==e&&this.catIngredient.length<2)return;if(2==e&&this.catIngredient.length<4)return;if(3==e&&this.catIngredient.length<7)return}this.catSteal(t,e)}}catSteal(e,t){e.active=!0,e.getChildByName("button").off("click"),e.getChildByName("button").on("click",(()=>this.onPawClick(e)),this);let n=e.getChildByName("pawSp"),i=e.getChildByName("pawPos_0"),a=e.getChildByName("pawPos_1"),o=n.getChildByName("ingredientContainer");o.active=!1,e.getChildByName("nodePat").active=!1;let s=null;n.setWorldPosition(i.worldPosition),this.tween=c(n).to(1.5,{worldPosition:a.worldPosition}).delay(1).call((()=>{if(0!==t){let t=e.getChildByName("pawPos").getWorldPosition();this.catIngredient.forEach((e=>{if(s)return;e.getComponent(d).getBoundingBoxToWorld().contains(u(t.x,t.y))&&(s=e.name)}))}else s="鸡蛋";o.children.forEach((e=>{e.name!==s?e.active=!1:e.active=!0})),o.active=!0})).to(.2,{worldPosition:i.worldPosition}).call((()=>{e.active=!1;let t=f.Instance.ingredientsConfigObject[s].cost;f.Instance.playerData.money-=t,g.Scene.emit(y.JBT_Update_Money),this.tween=null})).start()}onPawClick(e){I.getInstance().playSound("猫2"),this.tween&&this.tween.stop();let t=e.getChildByName("pawSp"),n=e.getChildByName("pawPos_0");t.getChildByName("ingredientContainer").active=!1,e.getChildByName("nodePat").active=!0,this.tween=null,this.tween=c(t).to(.2,{worldPosition:n.worldPosition}).call((()=>{e.active=!1,this.tween=null})).start()}onPause(){this.tween&&this.tween.pause()}onResume(){this.tween&&this.tween.resume()}addListener(){g.on(y.JBT_Update_Ingredient,this.updateIngredientContainer,this),g.on(y.JBT_Pack_Ingredients,this.onPackIngredients,this),g.on(y.JBT_All_Packed,this.onAllPackd,this),g.on(y.Game_Pause,this.onPause,this),g.on(y.Game_Resume,this.onResume,this),this.btnNote.on("click",this.onClickNote,this),this.btnNoteClose.on("click",this.onClickCloseNote,this)}removeListener(){g.off(y.JBT_Update_Ingredient,this.updateIngredientContainer,this),g.off(y.JBT_Pack_Ingredients,this.onPackIngredients,this),g.off(y.JBT_All_Packed,this.onAllPackd,this),g.off(y.Game_Pause,this.onPause,this),g.off(y.Game_Resume,this.onResume,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"cookArea",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"toolsLayer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(L.prototype,"btnNote",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(L.prototype,"NotePanel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"NotePos1",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(L.prototype,"NotePos2",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(L.prototype,"btnNoteClose",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(L.prototype,"ingredientContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(L.prototype,"spreadIngredientContainer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(L.prototype,"DoughContainer",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"paws",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=L))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,a,l,s,o,r,u,h,c,d,p,m,T,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,l=e.Label,s=e._decorator,o=e.Sprite},function(e){r=e.EventManager},function(e){u=e.XCT_BasePanel,h=e.XCT_PanelAnimation},function(e){c=e.XCT_UILayer},function(e){d=e.XCT_UIManager},function(e){p=e.XCT_UIPanel},function(e){m=e.XCT_Events},function(e){T=e.XCT_JBT_DataManager},function(e){_=e.XCT_AudioManager}],execute:function(){var b,f,y,S,g,B,I,w,M,C,U,J,v,X,A,D,P,E,N,k,z;n._RF.push({},"984c3hKL7VAfpg9+vbAH9M4","XCT_JBT_GameUI",void 0);const{ccclass:L,property:H}=s;e("XCT_JBT_GameUI",(b=L("XCT_JBT_GameUI"),f=H(a),y=H(a),S=H(l),g=H(l),B=H(a),I=H(l),w=H(l),M=H(a),C=H(a),b((v=t((J=class extends u{constructor(...e){super(...e),this.defaultShowAnimation=h.NONE,this.defaultHideAnimation=h.NONE,this.defaultLayer=c.GameUI,this.animationDuration=.6,i(this,"btnMore",v,this),i(this,"spSun",X,this),i(this,"lblDay",A,this),i(this,"lblTime",D,this),i(this,"smileNode",P,this),i(this,"lblSmile",E,this),i(this,"lblMoney",N,this),i(this,"btnAdd",k,this),this.isAddedEvent=!1,i(this,"btnShowTipBack",z,this)}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){T.Instance.isDayEnd?this.smileNode.active=!1:this.smileNode.active=!0,this.updateUI()}updateUI(){this.lblDay.string="第"+T.Instance.playerData.currentDay+"天",this.updateTime(),this.updateSmile(),this.lblMoney.string=T.Instance.playerData.money.toFixed(1)}updateMoney(){this.lblMoney.string=T.Instance.playerData.money.toFixed(1)}updateTime(){const e=T.Instance.currentHour.toString().padStart(2,"0"),t=T.Instance.currentMinute.toString().padStart(2,"0");this.lblTime.string=`${e}:${t}`,this.spSun.getComponent(o).fillRange=-(T.Instance.currentTime+8*T.Instance.MINUTES_PER_HOUR)/T.Instance.totalTime}updateSmile(){this.lblSmile.string=T.Instance.currentSmile.toString()+"%"}onClickAdd(){_.getInstance().playSound("点击"),d.Instance.showPanel(p.JBT_TipPanel,null,(()=>{r.Scene.emit(m.JBT_ShowTip_NoMoney)}))}hideSmile(){this.smileNode.active=!1}showSmile(){this.smileNode.active=!0}showBackTipPanel(){_.getInstance().playSound("点击"),d.Instance.showPanel(p.JBT_TipPanel,null,(()=>{r.Scene.emit(m.JBT_ShowTip_Back)}))}addListener(){r.on(m.JBT_Update_Money,this.updateMoney,this),r.on(m.JBT_Update_Time,this.updateTime,this),r.on(m.JBT_Update_Smile,this.updateSmile,this),r.on(m.JBT_Hide_smile,this.hideSmile,this),r.on(m.JBT_Show_smile,this.showSmile,this),this.btnAdd.on("click",this.onClickAdd,this),this.btnShowTipBack.on("click",this.showBackTipPanel,this)}removeListener(){r.off(m.JBT_Update_Money,this.updateMoney,this),r.off(m.JBT_Update_Time,this.updateTime,this),r.off(m.JBT_Update_Smile,this.updateSmile,this),r.off(m.JBT_Hide_smile,this.hideSmile,this),r.off(m.JBT_Show_smile,this.showSmile,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"btnMore",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(J.prototype,"spSun",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(J.prototype,"lblDay",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(J.prototype,"lblTime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(J.prototype,"smileNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(J.prototype,"lblSmile",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(J.prototype,"lblMoney",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(J.prototype,"btnAdd",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(J.prototype,"btnShowTipBack",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=J))||U));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_Ingredient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,s,r,o,d,c,h,l,u,g,I,m,C,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,r=e.Component,o=e.instantiate,d=e.UITransform,c=e.v2,h=e.v3,l=e.Vec3,u=e.tween},function(e){g=e.EventManager},function(e){I=e.XCT_Events},function(e){m=e.XCT_JBT_DataManager,C=e.XCT_JBT_IngredientType},function(e){T=e.XCT_AudioManager}],execute:function(){var p,_,y,f,x;i._RF.push({},"8f615b/CmBKVZI6SWixjrUT","XCT_JBT_Ingredient",void 0);const{ccclass:A,property:S}=s;e("XCT_JBT_Ingredient",(p=A("XCT_JBT_Ingredient"),_=S(a),p((x=t((f=class extends r{constructor(...e){super(...e),n(this,"targetArea",x,this),this.rainItem=null,this.rainContainer=null,this.rainTimer=0,this.isRaining=!1,this.ingredientPrefab=null,this.isTouching=!1}onLoad(){this.addListener(),this.ingredientPrefab=this.node.getChildByName("ingredient_sow"),this.rainItem=this.node.getChildByName("rainItem"),this.rainContainer=this.node.getChildByName("rainContainer"),this.node.getChildByName("ingredient_suspended").active=!1,this.node.getChildByName("selected").active=!1}onTouchStart(e){if(1==m.Instance.playerData.currentDay&&!m.Instance.isTutorialEnd){if(7==m.Instance.tutorialIdx&&"生菜"!==this.node.name)return;if(9==m.Instance.tutorialIdx&&"薄脆"!==this.node.name)return;if(11==m.Instance.tutorialIdx&&"葱花"!==this.node.name)return}let t=e.getUILocation(),n=o(this.ingredientPrefab);n.parent=this.targetArea.getChildByName("Contanter");let i=this.ingredientPrefab.getComponent(d),a=this.targetArea.getComponent(d),s=c(t.x-this.targetArea.worldPosition.x,t.y-this.targetArea.worldPosition.y);s.length()>a.width/2&&(s=s.normalize().multiplyScalar(a.width/2),t=c(this.targetArea.worldPosition.x+s.x,this.targetArea.worldPosition.y+s.y));let r=this.targetArea.worldPosition.x+a.width/2-i.width/2,u=this.targetArea.worldPosition.x-a.width/2+i.width/2,p=this.targetArea.worldPosition.y+a.height/2-i.height/2,_=this.targetArea.worldPosition.y-a.height/2+i.height/2;t.x>r&&(t.x=r),t.x<u&&(t.x=u),t.y>p&&(t.y=p),t.y<_&&(t.y=_),n.setWorldPosition(h(t.x,t.y,0)),n.active=!0,n.eulerAngles=new l(0,0,10*Math.random());let y=this.node.name;m.Instance.currentDishes[y]||(m.Instance.currentDishes[y]={type:C.SPICE,need:1,count:0,percentage:0,rotateCount:0}),m.Instance.currentDishes[y].count++,T.getInstance().playSound("放"),m.Instance.playerData.money-=m.Instance.ingredientsConfigObject[y].cost,m.Instance.dayCost+=m.Instance.ingredientsConfigObject[y].cost,g.Scene.emit(I.JBT_Update_Money),m.Instance.currentCookedSteps.push(y),7==m.Instance.tutorialIdx&&"生菜"==this.node.name&&(g.Scene.emit(I.HandAnimation_End),m.Instance.tutorialIdx++),9==m.Instance.tutorialIdx&&"薄脆"==this.node.name&&(g.Scene.emit(I.HandAnimation_End),m.Instance.tutorialIdx++),11==m.Instance.tutorialIdx&&"葱花"==this.node.name&&(g.Scene.emit(I.HandAnimation_End),m.Instance.tutorialIdx++)}onTouchEnd(e){}update(e){this.isRaining&&(this.rainTimer-=e,this.rainTimer<=0&&(this.createRainItem(),this.rainTimer=.3*Math.random()))}createRainItem(){const e=this.node.getChildByName("ingredient_suspended"),t=e.getWorldPosition(),n=e.getComponent(d).width,i=o(this.rainItem);i.parent=this.rainContainer;const a=t.x-n/2+Math.random()*n;i.setWorldPosition(h(a,t.y,0)),i.active=!0;let s=70+50*Math.random();const r=s/300;s=i.worldPosition.y-s;let c=i.worldPosition.x;u(i).to(r,{worldPosition:h(c,s,0)}).to(r,{scale:h(0,0,0)}).call((()=>i.destroy())).start()}onCancel_Click(){this.stopRainIngredient(),this.removeTouchListener()}onClick(){if(m.Instance.isPacked)g.Scene.emit(I.showTip,"卷饼后不可再添加材料哦！");else{if(1==m.Instance.playerData.currentDay&&!m.Instance.isTutorialEnd){if(-1==[6,8,10].indexOf(m.Instance.tutorialIdx))return;if(6==m.Instance.tutorialIdx&&"生菜"!==this.node.name)return;if(8==m.Instance.tutorialIdx&&"薄脆"!==this.node.name)return;if(10==m.Instance.tutorialIdx&&"葱花"!==this.node.name)return}6==m.Instance.tutorialIdx&&"生菜"==this.node.name&&(g.Scene.emit(I.HandAnimation_End),m.Instance.tutorialIdx++),8==m.Instance.tutorialIdx&&"薄脆"==this.node.name&&(g.Scene.emit(I.HandAnimation_End),m.Instance.tutorialIdx++),10==m.Instance.tutorialIdx&&"葱花"==this.node.name&&(g.Scene.emit(I.HandAnimation_End),m.Instance.tutorialIdx++),m.Instance.currentCookedSteps.includes("白面团")||m.Instance.currentCookedSteps.includes("土豆面")?m.Instance.currentCookedSteps.includes("鸡蛋")?m.Instance.currentCookedSteps.includes("调味酱")||m.Instance.currentCookedSteps.includes("辣椒酱")?(g.Scene.emit(I.JBT_Cancel_All_Ingredients),this.node.getChildByName("ingredient_suspended").active=!0,this.rainIngredient(),this.addTouchListener()):g.Scene.emit(I.showTip,"要先抹好调味酱，才能撒配料哦！"):g.Scene.emit(I.showTip,"请先摊好鸡蛋"):g.Scene.emit(I.showTip,"请先摊好面皮")}}rainIngredient(){this.node.getChildByName("selected").active=!0,this.node.getChildByName("ingredient_suspended").active=!0,this.isRaining=!0,this.rainTimer=0}stopRainIngredient(){this.node.getChildByName("selected").active=!1,this.node.getChildByName("ingredient_suspended").active=!1,this.isRaining=!1}addTouchListener(){this.targetArea.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.on(a.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.targetArea.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){g.on(I.JBT_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){g.off(I.JBT_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"targetArea",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_Pack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts"],(function(e){var t,n,i,a,o,c,s,h,r,d,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,c=e.Component,s=e.Animation,h=e.instantiate},function(e){r=e.EventManager},function(e){d=e.XCT_Events},function(e){l=e.XCT_JBT_DataManager}],execute:function(){var u,_,p,T,C;i._RF.push({},"d9758YrW2BEHa9s2R5ia/2P","XCT_JBT_Pack",void 0);const{ccclass:k,property:m}=o;e("XCT_JBT_Pack",(u=k("XCT_JBT_Pack"),_=m(a),u((C=t((T=class extends c{constructor(...e){super(...e),n(this,"touchArea",C,this),this.packedNodePrefab=null,this.packedNodeContainer=null,this.packAnimation_1=null,this.packAnimation_2=null}onLoad(){this.packAnimation_1=this.node.getChildByName("packAnimation_1"),this.packAnimation_2=this.node.getChildByName("packAnimation_2"),this.packAnimation_1.active=!1,this.packAnimation_2.active=!1,this.packedNodePrefab=this.node.getChildByName("packedNodePrefab"),this.packedNodeContainer=this.node.getChildByName("packedNodeContainer"),this.packedNodePrefab.active=!1,this.packedNodeContainer.children.forEach((e=>{e.destroy()})),this.onCancel_Click(),this.addListener()}pack(){this.node.getChildByName("selected").active=!1,this.packAnimation_1.active=!0;let e=this.packAnimation_1.getComponent(s);e.play(),this.scheduleOnce((()=>{this.packAnimation_1.active=!1,r.Scene.emit(d.JBT_Pack_Ingredients),this.packAnimation_2.active=!0,e=this.packAnimation_2.getComponent(s),e.play(),this.scheduleOnce((()=>{let e=h(this.packedNodePrefab);e.parent=this.packedNodeContainer,e.active=!0,this.packAnimation_2.active=!1,r.Scene.emit(d.JBT_All_Packed)}),.6)}),.33)}onTouchStart(e){(1!=l.Instance.playerData.currentDay||l.Instance.isTutorialEnd||14===l.Instance.tutorialIdx)&&(14==l.Instance.tutorialIdx&&(r.Scene.emit(d.HandAnimation_End),l.Instance.tutorialIdx++),this.pack())}onTouchMove(e){}onTouchEnd(e){}onCancel_Click(){this.node.getChildByName("selected").active=!1,this.removeTouchListener()}onClick(){l.Instance.currentCookedSteps.includes("卷饼")?(1!=l.Instance.playerData.currentDay||l.Instance.isTutorialEnd||13===l.Instance.tutorialIdx)&&(r.Scene.emit(d.JBT_Cancel_All_Ingredients),console.log("点击了"+this.node.name),this.node.getChildByName("selected").active=!0,13==l.Instance.tutorialIdx&&(r.Scene.emit(d.HandAnimation_End),l.Instance.tutorialIdx++),this.addTouchListener()):r.Scene.emit(d.showTip,"要先卷饼才可以打包哦！")}addTouchListener(){this.touchArea.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.touchArea.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchArea.on(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.touchArea.on(a.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.touchArea.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.touchArea.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchArea.off(a.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.touchArea.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){r.on(d.JBT_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){r.off(d.JBT_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"touchArea",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_PancakeStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_JBT_DataManager.ts","./EventManager.ts","./XCT_Events.ts","./XCT_AudioManager.ts"],(function(t){var e,n,i,s,a,r,o,h,c,l,g,d,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,s=t.Node,a=t._decorator,r=t.Component,o=t.Vec2,h=t.Sprite,c=t.Vec3,l=t.instantiate},function(t){g=t.XCT_JBT_DataManager},function(t){d=t.EventManager},function(t){u=t.XCT_Events},function(t){T=t.XCT_AudioManager}],execute:function(){var p,I,A,f,C;i._RF.push({},"0d7d2azV/1MG6+1k7gCTXDz","XCT_JBT_PancakeStick",void 0);const{ccclass:E,property:P}=a;t("XCT_JBT_PancakeStick",(p=E("XCT_JBT_PancakeStick"),I=P(s),p((C=e((f=class extends r{constructor(...t){super(...t),n(this,"pan",C,this),this.piePrefabsContainer=null,this.pieNodesContanter=null,this.currentPieNode=null,this.panCenter=o.ZERO,this.startAngle=0,this.endAngle=0,this.currentTransfer=0,this.totalAngle=0,this.touchIndex=-1,this.nodeIndex=0,this.touchAngles=[],this.lastAngle=0,this.doughNum=0}onLoad(){g.Instance.eggIngredientTypeTransfer[g.Instance.currentEggIngredientType]?g.Instance.eggIngredientTypeTransfer[g.Instance.currentEggIngredientType].push(0):g.Instance.eggIngredientTypeTransfer[g.Instance.currentEggIngredientType]=[0],this.doughNum=g.Instance.eggIngredientTypeTransfer[g.Instance.currentEggIngredientType].length-1,this.addListener(),this.piePrefabsContainer.children.forEach(((t,e)=>{t.active=!1;const n=t.getComponent(h);n.fillStart=0,n.fillRange=0})),this.panCenter=new o(this.pan.worldPosition.x,this.pan.worldPosition.y),this.initPancakeStick()}setPiePrefabs(t,e){this.piePrefabsContainer=t,this.pieNodesContanter=e}onTouchStart(t){if(!this.piePrefabsContainer||!this.pieNodesContanter)return;const e=t.getUILocation(),n=this.calcAngleRatio(e),i=n*Math.PI*2;this.node.eulerAngles=new c(0,0,180*i/Math.PI),this.startAngle=n,this.endAngle=this.startAngle,this.lastAngle=n,this.touchIndex++,this.touchAngles.push([]),this.getNewPieNode(!0),T.getInstance().playLongSound("刮板")}onTouchMove(t){const e=t.getUILocation(),n=this.calcAngleRatio(e),i=n*Math.PI*2;this.node.eulerAngles=new c(0,0,180*i/Math.PI);let s=n-this.lastAngle,a=s<0,r=this.currentTransfer;this.updateTotalAngle(),r!==this.currentTransfer&&(this.getNewPieNode(),a?this.endAngle=this.startAngle:this.startAngle=this.endAngle),Math.abs(s)>.5&&(a=s>0,a?this.startAngle=0:this.endAngle=1,this.updatePieNodeSprite(),this.getNewPieNode(),a?this.endAngle=this.startAngle=1:this.startAngle=this.endAngle=0),a=n-this.startAngle<0,a?this.startAngle=Math.min(n,this.startAngle):this.endAngle=Math.max(n,this.endAngle),this.lastAngle=n,this.updatePieNodeSprite()}onTouchEnd(){if(1==g.Instance.playerData.currentDay&&!g.Instance.isTutorialEnd&&1!==g.Instance.tutorialIdx&&3!==g.Instance.tutorialIdx)return;T.getInstance().stopLongSound();let t=parseFloat(this.totalAngle.toFixed(1));g.Instance.eggIngredientTypeTransfer[g.Instance.currentEggIngredientType][this.doughNum]=t;let e=0;g.Instance.eggIngredientTypeTransfer[g.Instance.currentEggIngredientType].forEach((t=>{e+=t})),e>.6&&(g.Instance.currentCookedSteps.push(g.Instance.currentEggIngredientType),1!=g.Instance.tutorialIdx&&3!=g.Instance.tutorialIdx||(d.Scene.emit(u.HandAnimation_End),g.Instance.tutorialIdx++))}calcAngleRatio(t){const e=new o(t.x-this.panCenter.x,t.y-this.panCenter.y);let n=Math.atan2(e.y,e.x);return n<0&&(n+=2*Math.PI),n/(2*Math.PI)}updateTotalAngle(){let t=this.endAngle-this.startAngle;this.touchAngles[this.touchIndex][this.nodeIndex]=t,this.totalAngle=0,this.touchAngles.forEach((t=>{t.forEach((t=>{this.totalAngle+=t}))})),this.currentTransfer=Math.floor(this.totalAngle),console.log("总角度："+this.totalAngle,"总圈数:"+this.currentTransfer)}getNewPieNode(t=!1){let e=Math.min(this.currentTransfer,this.piePrefabsContainer.children.length-1),n=this.piePrefabsContainer.children[e],i=l(n);i.setParent(this.pieNodesContanter),i.setWorldPosition(this.pieNodesContanter.worldPosition),i.active=!0,this.currentPieNode=i,t?this.nodeIndex=0:this.nodeIndex++,this.touchAngles[this.touchIndex].push(1)}updatePieNodeSprite(){let t=this.currentPieNode.getComponent(h);t.fillStart=this.startAngle,t.fillRange=this.endAngle-this.startAngle}initPancakeStick(){this.node.active=!0,this.touchAngles=[],this.touchIndex=-1,this.nodeIndex=0,this.currentTransfer=0,this.totalAngle=0,this.addTouchListener()}addTouchListener(){this.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}removeTouchListener(){this.node.off(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}addListener(){}removeListener(){}onDestroy(){this.removeListener()}}).prototype,"pan",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=f))||A));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_Sauce.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts"],(function(t){var e,n,s,i,o,a,c,r,h,u,l,d,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.Node,o=t._decorator,a=t.Component,c=t.v3,r=t.UITransform,h=t.v2,u=t.instantiate},function(t){l=t.EventManager},function(t){d=t.XCT_Events},function(t){T=t.XCT_JBT_DataManager}],execute:function(){var C,p,y,b,m,g,I,P,_,f,v;s._RF.push({},"e7d6et9OPdDwaNJK52Dya5N","XCT_JBT_Sauce",void 0);const{ccclass:S,property:E}=o;t("XCT_JBT_Sauce",(C=S("XCT_JBT_Sauce"),p=E(i),y=E(i),b=E(i),m=E(i),C((P=e((I=class extends a{constructor(...t){super(...t),n(this,"touchArea",P,this),n(this,"maskPointContainer",_,this),n(this,"Pot",f,this),n(this,"toolsLayer",v,this),this.brush=null,this.maskPointPrefab=null,this.daubCount=0,this.cost=0,this.lastCost=0,this.startPos=null,this.isTouching=!1,this.daubInterval=.01,this.daubTimer=0,this.isCanDaub=!0,this.sauceNum=0}onLoad(){this.addListener(),this.maskPointPrefab=this.node.getChildByName("maskPointPrefab"),this.maskPointPrefab.active=!1,this.brush=this.node.getChildByName("brush"),this.node.getChildByName("selected").active=!1}onTouchStart(t){this.isTouching=!0,this.daubTimer=0,this.startPos=this.brush.getPosition();const e=t.getUILocation();this.brush.setParent(this.toolsLayer),this.brush.setWorldPosition(c(e.x,e.y,0));this.Pot.getComponent(r).getBoundingBoxToWorld().contains(h(this.brush.getWorldPosition().x,this.brush.getWorldPosition().y))&&(this.isCanDaub=!1,this.createMaskPoint(e))}onTouchMove(t){const e=t.getUILocation();if(this.brush.setWorldPosition(c(e.x,e.y,0)),!this.isCanDaub)return;this.Pot.getComponent(r).getBoundingBoxToWorld().contains(h(this.brush.getWorldPosition().x,this.brush.getWorldPosition().y))&&(this.isCanDaub=!1,this.createMaskPoint(e))}onTouchEnd(t){this.isTouching=!1,T.Instance.sauceTypeCount[T.Instance.currentSauceType][this.sauceNum]=this.daubCount,this.cost=Math.floor(this.daubCount/100),this.cost!==this.lastCost&&(T.Instance.playerData.money-=(this.cost-this.lastCost)*T.Instance.ingredientsConfigObject[T.Instance.currentSauceType].cost,T.Instance.dayCost+=(this.cost-this.lastCost)*T.Instance.ingredientsConfigObject[T.Instance.currentSauceType].cost,l.Scene.emit(d.JBT_Update_Money)),this.lastCost=this.cost,this.brush.setParent(this.node),this.brush.setPosition(this.startPos);let e=0;T.Instance.sauceTypeCount[T.Instance.currentSauceType].forEach((t=>{e+=t})),e>100&&(T.Instance.currentCookedSteps.push(T.Instance.currentSauceType),5==T.Instance.tutorialIdx&&(l.Scene.emit(d.HandAnimation_End),T.Instance.tutorialIdx++))}createMaskPoint(t){this.daubCount++,console.log("点击次数:",this.daubCount);const e=u(this.maskPointPrefab);e.parent=this.maskPointContainer,e.active=!0;let n=e.getChildByName("Sp");n.setParent(this.maskPointContainer),n.setPosition(c(0,0,0)),e.setWorldPosition(c(t.x,t.y,0));let s=n.getWorldPosition();n.setParent(e),n.setWorldPosition(c(s.x,s.y,0))}update(t){this.isTouching&&(this.daubTimer+=t,this.daubTimer>=this.daubInterval&&(this.daubTimer=0,this.isCanDaub=!0))}onCancel_Click(){this.node.getChildByName("selected").active=!1,this.isTouching=!1,this.removeTouchListener()}onClick(){T.Instance.isPacked?l.Scene.emit(d.showTip,"卷饼后不可再添加材料哦！"):(1!=T.Instance.playerData.currentDay||T.Instance.isTutorialEnd||4===T.Instance.tutorialIdx)&&(T.Instance.currentCookedSteps.includes("白面团")||T.Instance.currentCookedSteps.includes("土豆面")?T.Instance.currentCookedSteps.includes("鸡蛋")?(4==T.Instance.tutorialIdx&&(l.Scene.emit(d.HandAnimation_End),T.Instance.tutorialIdx++),l.Scene.emit(d.JBT_Cancel_All_Ingredients),T.Instance.currentSauceType=this.node.name,T.Instance.sauceTypeCount[T.Instance.currentSauceType]?T.Instance.sauceTypeCount[T.Instance.currentSauceType].push(0):T.Instance.sauceTypeCount[T.Instance.currentSauceType]=[0],this.sauceNum=T.Instance.sauceTypeCount[T.Instance.currentSauceType].length-1,console.log("点击了"+this.node.name),this.node.getChildByName("selected").active=!0,this.addTouchListener()):l.Scene.emit(d.showTip,"要先摊好鸡蛋，才能抹酱哦！"):l.Scene.emit(d.showTip,"请先摊好面皮"))}addTouchListener(){this.touchArea.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.touchArea.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchArea.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.touchArea.on(i.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.touchArea.off(i.EventType.TOUCH_START,this.onTouchStart,this),this.touchArea.off(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.touchArea.off(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.touchArea.off(i.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){l.on(d.JBT_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){l.off(d.JBT_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"touchArea",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(I.prototype,"maskPointContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(I.prototype,"Pot",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(I.prototype,"toolsLayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=I))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_ShopPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,a,i,o,s,r,c,l,h,p,u,C,y,d,m,g,I,_,T,b,S,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.Node,o=e.SpriteFrame,s=e._decorator,r=e.instantiate,c=e.Sprite,l=e.v3,h=e.Label,p=e.Color,u=e.Button},function(e){C=e.EventManager},function(e){y=e.ProjectEventManager,d=e.ProjectEvent},function(e){m=e.XCT_BasePanel,g=e.XCT_PanelAnimation},function(e){I=e.XCT_UILayer},function(e){_=e.XCT_UIManager},function(e){T=e.XCT_UIPanel},function(e){b=e.XCT_Events},function(e){S=e.XCT_JBT_DataManager},function(e){f=e.XCT_AudioManager}],execute:function(){var P,B,D,v,N,E,k,X,J,M,w,L,R;a._RF.push({},"c040fs5SSlEiJ85frFFmaLJ","XCT_JBT_ShopPanel",void 0);const{ccclass:U,property:x}=s;e("XCT_JBT_ShopPanel",(P=U("XCT_JBT_ShopPanel"),B=x(i),D=x(o),v=x(i),N=x(i),E=x(i),P((J=t((X=class extends m{constructor(...e){super(...e),this.defaultShowAnimation=g.NONE,this.defaultHideAnimation=g.NONE,this.defaultLayer=I.Pop2,this.animationDuration=.6,n(this,"shopItemContainer",J,this),n(this,"ingredientSpes",M,this),n(this,"btnCheckoutPanel",w,this),n(this,"btnNextDay",L,this),n(this,"btnReturn",R,this),this.isAddedEvent=!1,this.currentData=new Map}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(e=!1){y.emit(d.弹出窗口,"小吃摊"),S.Instance.isShowingShopPanel=!0,C.Scene.emit(b.Game_Pause),this.initShopItem(),e?(this.btnCheckoutPanel.active=!1,this.btnNextDay.active=!1,this.btnReturn.active=!0):(this.btnCheckoutPanel.active=!0,this.btnNextDay.active=!0,this.btnReturn.active=!1)}initShopItem(){this.shopItemContainer.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1})),S.Instance.ingredientsConfig.forEach(((e,t)=>{let n=e.name;if(!(void 0!==S.Instance.playerData.stock[n]&&S.Instance.playerData.stock[n]>0)){let a=this.shopItemContainer.children[0],i=r(a);i.parent=this.shopItemContainer,i.name=n,i.getChildByName("icon").getComponent(c).spriteFrame=this.ingredientSpes[t],"土豆面"!==n&&"白面团"!==n||i.getChildByName("icon").setScale(l(.65,.65,.65)),"油条"===n&&i.getChildByName("icon").setScale(l(.9,.9,.9)),i.getChildByName("lblName").getComponent(h).string=n,i.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).string=e.price.toString();let o=S.Instance.playerData.money>=e.price?p.WHITE:p.RED;i.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=o,this.currentData.set(n,e.price),i.active=!0,i.getChildByName("btnBuy").on(u.EventType.CLICK,(()=>{this.onClickBuy(n)}),this)}}))}updateShopItem(){this.shopItemContainer.children.forEach((e=>{let t=S.Instance.playerData.money>=this.currentData.get(e.name)?p.WHITE:p.RED;e.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=t}))}onClickBuy(e){f.getInstance().playSound("点击"),S.Instance.playerData.money<S.Instance.ingredientsConfigObject[e].price?_.Instance.showPanel(T.JBT_TipPanel,null,(()=>{C.Scene.emit(b.JBT_ShowTip_NoMoney)})):(S.Instance.playerData.stock[e]?S.Instance.playerData.stock[e]++:S.Instance.playerData.stock[e]=1,S.Instance.playerData.money-=S.Instance.ingredientsConfigObject[e].price,C.Scene.emit(b.JBT_Update_Money),C.Scene.emit(b.JBT_Update_Ingredient),this.shopItemContainer.getChildByName(e).destroy(),this.currentData.delete(e))}onClickCheckout(){f.getInstance().playSound("点击"),_.Instance.showPanel(T.JBT_CheckoutPanel)}onClickNextDay(){f.getInstance().playSound("点击"),_.Instance.showPanel(T.PassPanel,{tipConfig:S.Instance.tipConfig,currentDay:S.Instance.playerData.currentDay,passDayCb:()=>{S.Instance.passDay()}},(()=>{_.Instance.hidePanel(T.JBT_ShopPanel),_.Instance.hidePanel(T.JBT_GameUI)})),S.Instance.isHadShowShop=!1}onClickReturn(){f.getInstance().playSound("点击"),C.Scene.emit(b.Show_TutorialPanel),_.Instance.hidePanel(T.JBT_ShopPanel),C.Scene.emit(b.Game_Resume),S.Instance.isShowingShopPanel=!1}addListener(){C.on(b.JBT_Update_Money,this.updateShopItem,this),this.btnCheckoutPanel.on(u.EventType.CLICK,this.onClickCheckout,this),this.btnNextDay.on(u.EventType.CLICK,this.onClickNextDay,this),this.btnReturn.on(u.EventType.CLICK,this.onClickReturn,this)}removeListener(){C.off(b.JBT_Update_Money,this.updateShopItem,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"shopItemContainer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(X.prototype,"ingredientSpes",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(X.prototype,"btnCheckoutPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(X.prototype,"btnNextDay",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(X.prototype,"btnReturn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=X))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_TakeoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./EventManager.ts","./Banner.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,r,o,s,l,c,d,h,u,g,C,m,p,v,y,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,r=e.Node,o=e._decorator,s=e.instantiate,l=e.Button},function(e){c=e.XCT_BasePanel,d=e.XCT_PanelAnimation},function(e){h=e.XCT_UILayer},function(e){u=e.XCT_UIManager},function(e){g=e.XCT_UIPanel},function(e){C=e.XCT_Events},function(e){m=e.XCT_JBT_DataManager,p=e.XCT_JBT_OrderStatus},function(e){v=e.EventManager},function(e){y=e.default},function(e){f=e.XCT_AudioManager}],execute:function(){var T,I,E,N,b,B,_,S,P,k,D,L,A,O,w,R,X;i._RF.push({},"039e8Vss8pA8aSqt1wv6HG6","XCT_JBT_TakeoutPanel",void 0);const{ccclass:M,property:U}=o;e("XCT_JBT_TakeoutPanel",(T=M("XCT_JBT_TakeoutPanel"),I=U({type:a}),E=U({type:r}),N=U({type:r}),b=U(r),B=U(r),_=U(r),S=U(r),T((D=t((k=class extends c{constructor(...e){super(...e),this.defaultShowAnimation=d.NONE,this.defaultHideAnimation=d.NONE,this.defaultLayer=h.Pop2,this.animationDuration=.6,n(this,"lbCurrentTime",D,this),n(this,"starContainer",L,this),n(this,"shopItemContainer",A,this),n(this,"btnReturn",O,this),n(this,"nodeNoOrder",w,this),n(this,"btnShowEvaluation",R,this),n(this,"EvaluationPanel",X,this),this.isAddedEvent=!1,this.newOrderIds=[]}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){m.Instance.isShowingTakeoutPanel=!0,super.init(),this.refreshPanel(),v.Scene.emit(C.Game_Pause)}refreshPanel(){const e=m.Instance.currentHour.toString().padStart(2,"0"),t=m.Instance.currentMinute.toString().padStart(2,"0");this.lbCurrentTime.string=`${e}:${t}`,this.updateStars(m.Instance.playerData.score);const n=m.Instance.currentTakeoutOrders;this.nodeNoOrder.active=0===n.length;const i=[];for(let e=n.length-1;e>=0;e--)i.push(n[e]);this.refreshOrderList(i)}updateStars(e){this.starContainer.children.forEach(((t,n)=>{t.active=n<e}))}refreshOrderList(e){for(let e=0;e<this.shopItemContainer.children.length;e++)0!==e?this.shopItemContainer.children[e].destroy():this.shopItemContainer.children[e].active=!1;let t=this.shopItemContainer.children[0];e.forEach((e=>{const n=s(t);n.parent=this.shopItemContainer,n.active=!0,this.updateOrderItem(n,e)})),m.Instance.lastTakeoutOrderIds=m.Instance.currentTakeoutOrders.map((e=>e.id))}updateOrderItem(e,t){m.Instance.lastTakeoutOrderIds.includes(t.id)?e.getChildByName("nodeNew").active=!1:e.getChildByName("nodeNew").active=!0,e.getChildByName("spAvatar").children.forEach((e=>{e.name===t.avatarName?e.active=!0:e.active=!1})),e.getChildByName("lblName").getComponent(a).string=t.customerName,e.getChildByName("lblExpirationTime").getComponent(a).string=`过期时间: ${t.expireTime[0].toString().padStart(2,"0")}:${t.expireTime[1].toString().padStart(2,"0")}`,e.getChildByName("lblContent").getComponent(a).string=t.content,e.getChildByName("lblNote").getComponent(a).string=`备注: ${t.remark}`,e.getChildByName("lblPrice").getComponent(a).string=t.price.toFixed(1),t.missingStockIngredients.length>0?(e.getChildByName("lblMissing").getComponent(a).string=`缺少配料：${t.missingStockIngredients[0]}`,e.getChildByName("lblMissing").active=!0):e.getChildByName("lblMissing").active=!1;const n=e.getChildByName("btnAccept").getComponent(l),i=e.getChildByName("btnVideo").getComponent(l),r=e.getChildByName("btnRefuse").getComponent(l),o=e.getChildByName("NodeTimeout"),s=e.getChildByName("NodeCookEnd"),c=e.getChildByName("NodeDelivered"),d=e.getChildByName("NodeRefused");switch(n.node.active=!1,i.node.active=!1,r.node.active=!1,o.active=!1,s.active=!1,c.active=!1,d.active=!1,t.status){case p.UNHANDLED:t.missingStockIngredients.length>0?(i.node.active=!0,i.node.off(l.EventType.CLICK),i.node.on(l.EventType.CLICK,(()=>this.handleVideo(t,e.getChildByName("lblMissing"))),this)):(n.node.active=!0,n.node.off(l.EventType.CLICK),n.node.on(l.EventType.CLICK,(()=>this.handleAcceptOrder(t)),this)),r.node.active=!0,r.node.off(l.EventType.CLICK),r.node.on(l.EventType.CLICK,(()=>this.handleRefuseOrder(t)),this);break;case p.TIMEOUT:o.active=!0;break;case p.COOKED:s.active=!0;break;case p.DELIVERED:c.active=!0;break;case p.REFUSED:d.active=!0}}handleVideo(e,t){f.getInstance().playSound("点击"),y.Instance.ShowVideoAd((()=>{m.Instance.playerData.stock[e.missingStockIngredients[0]]?m.Instance.playerData.stock[e.missingStockIngredients[0]]++:m.Instance.playerData.stock[e.missingStockIngredients[0]]=1,e.missingStockIngredients.splice(0,1),this.refreshPanel()}))}handleAcceptOrder(e){f.getInstance().playSound("点击"),m.Instance.resetTakout(e),m.Instance.takeoutNotes.push([e.content,`备注: ${e.remark}`]),m.Instance.startCooking(),this.refreshPanel()}handleRefuseOrder(e){f.getInstance().playSound("点击"),e.status=p.REFUSED,this.refreshPanel()}onClickReturn(){f.getInstance().playSound("点击"),m.Instance.isShowingTakeoutPanel=!1,u.Instance.hidePanel(g.JBT_TakeoutPanel)}onHideComplete(){v.Scene.emit(C.Game_Resume)}onClickShowEvaluation(){f.getInstance().playSound("点击"),this.EvaluationPanel.active=!0,this.EvaluationPanel.getChildByName("lblTime2").getComponent(a).string=this.lbCurrentTime.string;let e=this.EvaluationPanel.getChildByName("btnBack");e.off(l.EventType.CLICK),e.on(l.EventType.CLICK,this.hideEvaluationPanel,this);let t=this.EvaluationPanel.getChildByName("ScrollView").getChildByName("view").getChildByName("evaluationContainer");for(let e=0;e<t.children.length;e++)0!==e?t.children[e].destroy():t.children[e].active=!1;let n=t.children[0];m.Instance.playerData.historyEvaluation.forEach((e=>{const t=s(n);t.parent=this.shopItemContainer,t.active=!0,t.getChildByName("spAvatar").children.forEach((t=>{t.name===e.avatarName?t.active=!0:t.active=!1})),t.getChildByName("lblEvaluation").getComponent(a).string=m.Instance.evaluationConfig[e.avatarName][e.star],t.getChildByName("lblName").getComponent(a).string=e.customerName,t.getChildByName("Layout").getChildByName("lblAdd").getComponent(a).string="收入："+e.price.toFixed(2);let i=t.getChildByName("Layout").getChildByName("lblRefund");i.active=e.refund>0,i.getComponent(a).string="-"+e.refund.toFixed(2),t.getChildByName("starContainer").children.forEach((t=>{parseInt(t.name)<=e.star?t.children[0].active=!1:t.children[0].active=!0}))}))}hideEvaluationPanel(){this.EvaluationPanel.active=!1}addListener(){super.addListener(),this.btnReturn.on(l.EventType.CLICK,this.onClickReturn,this),this.btnShowEvaluation.on(l.EventType.CLICK,this.onClickShowEvaluation,this),v.on(C.JBT_ORDER_DATA_UPDATED,this.refreshPanel,this),v.on(C.JBT_Update_Time,this.refreshPanel,this)}removeListener(){super.removeListener(),v.off(C.JBT_ORDER_DATA_UPDATED,this.refreshPanel,this),v.off(C.JBT_Update_Time,this.refreshPanel,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lbCurrentTime",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(k.prototype,"starContainer",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(k.prototype,"shopItemContainer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(k.prototype,"btnReturn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(k.prototype,"nodeNoOrder",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(k.prototype,"btnShowEvaluation",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(k.prototype,"EvaluationPanel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=k))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_TipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./Banner.ts","./XCT_AudioManager.ts","./XCT_GameManager.ts","./UIManager.ts","./GameManager.ts"],(function(e){var n,t,a,i,o,l,s,h,c,p,u,r,P,T,d,m,_,g,B,y,I,v,C,k,f,w,S,N;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.Node,o=e._decorator,l=e.Label,s=e.UITransform,h=e.v3,c=e.tween,p=e.Vec3,u=e.instantiate,r=e.UIOpacity},function(e){P=e.EventManager},function(e){T=e.ProjectEventManager,d=e.ProjectEvent},function(e){m=e.XCT_BasePanel,_=e.XCT_PanelAnimation},function(e){g=e.XCT_UILayer},function(e){B=e.XCT_UIManager},function(e){y=e.XCT_UIPanel},function(e){I=e.XCT_Events},function(e){v=e.XCT_JBT_DataManager},function(e){C=e.default},function(e){k=e.XCT_AudioManager},function(e){f=e.XCT_GameManager},function(e){w=e.UIManager,S=e.Panel},function(e){N=e.GameManager}],execute:function(){var M,E,J,b,O,X,G,A,L,U,R;a._RF.push({},"4172aWYBLZNkI1MkwV4zUia","XCT_JBT_TipPanel",void 0);const{ccclass:D,property:V}=o;e("XCT_JBT_TipPanel",(M=D("XCT_JBT_TipPanel"),E=V(i),J=V(i),b=V(i),O=V(i),M((A=n((G=class extends m{constructor(...e){super(...e),this.defaultShowAnimation=_.NONE,this.defaultHideAnimation=_.NONE,this.defaultLayer=g.Pop2,this.animationDuration=.6,t(this,"tipNoMoneyPanel",A,this),t(this,"tipBackPanel",L,this),t(this,"tipOpenTakeoutPanel",U,this),t(this,"tipEvaluationPanel",R,this),this.isAddedEvent=!1,this.tween=null}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.hideTipPanel()}hideTipPanel(){this.tipNoMoneyPanel.active=!1,this.tipBackPanel.active=!1,this.tipOpenTakeoutPanel.active=!1,this.tipEvaluationPanel.active=!1}showBackTipPanel(){P.Scene.emit(I.Game_Pause),this.tipBackPanel.active=!0,this.tipBackPanel.getChildByName("btnContinue").on("click",this.hideBackTipPanel,this),this.tipBackPanel.getChildByName("btnExit").on("click",this.onBtnExit,this)}onBtnExit(){k.getInstance().playSound("点击"),k.getInstance().stopMusic(),f.Instance.hasStartPanel?(B.Instance.hidePanel(y.JBT_TipPanel),P.Scene.emit(I.hideTableItem),B.Instance.showPanel(y.TablePanel,null,(()=>{B.Instance.showPanel(y.LoadingPanel,(()=>{B.Instance.showPanel(y.StartPanel,null,(()=>{B.Instance.hidePanel(y.JBT_DialoguePanel),B.Instance.hidePanel(y.JBT_GameUI),B.Instance.hidePanel(y.JBT_TutorialPanel),B.Instance.hidePanel(y.JBT_GamePanel,null,_.NONE),B.Instance.hidePanel(y.TipPanel),this.scheduleOnce((()=>{B.Instance.hidePanel(y.LoadingPanel,(()=>{T.emit(d.游戏结束,"小吃摊")}))}),.5)}))}),(()=>{B.Instance.hidePanel(y.JBT_ShopPanel),B.Instance.hidePanel(y.JBT_CheckoutPanel),B.Instance.hidePanel(y.JBT_TakeoutPanel)}))}))):T.emit(d.返回主页按钮事件,(()=>{w.ShowPanel(S.LoadingPanel,N.StartScene,(()=>{T.emit(d.返回主页,"小吃摊")}))}))}hideBackTipPanel(){P.Scene.emit(I.Game_Resume),k.getInstance().playSound("点击"),B.Instance.hidePanel(y.JBT_TipPanel)}showNoMoneyTipPanel(){P.Scene.emit(I.Game_Pause),this.tipNoMoneyPanel.active=!0,this.tipNoMoneyPanel.getChildByName("btnBack").on("click",this.hideNoMoneyTipPanel,this),this.tipNoMoneyPanel.getChildByName("btnVideo").on("click",this.btnVideoClick,this)}hideNoMoneyTipPanel(){v.Instance.isShowingShopPanel||P.Scene.emit(I.Game_Resume),k.getInstance().playSound("点击"),B.Instance.hidePanel(y.JBT_TipPanel)}btnVideoClick(){k.getInstance().playSound("点击"),C.Instance.ShowVideoAd((()=>{v.Instance.playerData.money+=200,P.Scene.emit(I.JBT_Update_Money),B.Instance.hidePanel(y.JBT_TipPanel),v.Instance.isShowingShopPanel||P.Scene.emit(I.Game_Resume)}))}showOpenTakeoutPanel(){P.Scene.emit(I.Game_Pause),this.tipOpenTakeoutPanel.active=!0,this.tipOpenTakeoutPanel.getChildByName("btnBack").on("click",this.hideOpenTakeoutPanel,this),this.tipOpenTakeoutPanel.getChildByName("btnVideo").on("click",this.btnVideoOpenTakeoutClick,this)}hideOpenTakeoutPanel(){P.Scene.emit(I.Game_Resume),k.getInstance().playSound("点击"),B.Instance.hidePanel(y.JBT_TipPanel)}btnVideoOpenTakeoutClick(){k.getInstance().playSound("点击"),C.Instance.ShowVideoAd((()=>{v.Instance.playerData.isTakeOutProjectOpen=!0,P.Scene.emit(I.JBT_Takeout_Open),B.Instance.showPanel(y.JBT_TakeoutPanel,null,(()=>{B.Instance.hidePanel(y.JBT_TipPanel)}))}))}showEvaluationTipPanel(){let e=v.Instance.evaluationOrder;this.tipEvaluationPanel.active=!0;let n=this.tipEvaluationPanel.getChildByName("right").getChildByName("NodeEvaluation");n.getChildByName("spAvatar").children.forEach((n=>{n.name===e.avatarName?n.active=!0:n.active=!1})),n.getChildByName("lblName").getComponent(l).string=e.customerName,n.getChildByName("starContainer").children.forEach((n=>{parseInt(n.name)<=e.star?n.children[0].active=!1:n.children[0].active=!0}));let t=n.getComponent(s).width;n.setPosition(h(t,0,0)),this.tween=c(n).to(1,{position:p.ZERO}).call((()=>{if(e.sellingAddTip>0){let e=n.getChildByName("moneyContainer"),t=e.getChildByName("moneyItem");e.removeAllChildren();const a=u(t);a.parent=e,a.setPosition(h(0,0,0)),a.getComponentInChildren(l).string="小费+"+v.Instance.currentSellingAddTip,a.setPosition(0,-100),a.getComponent(r).opacity=255,a.active=!0,c(a).to(1.5,{position:new p(0,100,0)},{easing:"sineIn"}).parallel(c(a.getComponent(r)).to(1.5,{opacity:0})).call((()=>{a.destroy()})).start()}})).delay(1.5).to(1,{position:h(t,0,0)}).call((()=>{this.tipEvaluationPanel.active=!1,v.Instance.evaluationOrder=null,this.tween=null})).start()}gamePause(){this.tween&&this.tween.pause()}gameResume(){this.tween&&this.tween.resume()}addListener(){P.on(I.JBT_ShowTip_Back,this.showBackTipPanel,this),P.on(I.JBT_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),P.on(I.JBT_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this),P.on(I.JBT_ShowTip_Evaluation,this.showEvaluationTipPanel,this),P.on(I.Game_Pause,this.gamePause,this),P.on(I.Game_Resume,this.gameResume,this)}removeListener(){P.off(I.JBT_ShowTip_Back,this.showBackTipPanel,this),P.off(I.JBT_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),P.off(I.JBT_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this),P.off(I.JBT_ShowTip_Evaluation,this.showEvaluationTipPanel,this),P.off(I.Game_Pause,this.gamePause,this),P.off(I.Game_Resume,this.gameResume,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tipNoMoneyPanel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(G.prototype,"tipBackPanel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(G.prototype,"tipOpenTakeoutPanel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(G.prototype,"tipEvaluationPanel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=G))||X));a._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JBT_TutorialPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts"],(function(t){var i,e,n,r,a,s,o,h,u,d,l,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,a=t._decorator,s=t.Animation},function(t){o=t.EventManager},function(t){h=t.XCT_BasePanel,u=t.XCT_PanelAnimation},function(t){d=t.XCT_UILayer},function(t){l=t.XCT_Events},function(t){c=t.XCT_JBT_DataManager}],execute:function(){var p,T,C,_,x;n._RF.push({},"003b0D60VhHRr7YU7CIfiG4","XCT_JBT_TutorialPanel",void 0);const{ccclass:f,property:I}=a;t("XCT_JBT_TutorialPanel",(p=f("XCT_JBT_TutorialPanel"),T=I(r),p((x=i((_=class extends h{constructor(...t){super(...t),this.defaultShowAnimation=u.NONE,this.defaultHideAnimation=u.NONE,this.defaultLayer=d.Tutorial,this.animationDuration=.6,e(this,"arrowContainer",x,this),this.currentTutorialIdx=0,this.isCompleted=!1,this.tutorialDatas=[],this.currentStepIdx=0,this.data=[{idx:0,stepCount:2},{idx:1,stepCount:2},{idx:2,stepCount:2},{idx:3,stepCount:2},{idx:4,stepCount:2},{idx:5,stepCount:2},{idx:6,stepCount:1},{idx:7,stepCount:2}],this.isAddedEvent=!1}start(){}init(){1!==c.Instance.playerData.currentDay||c.Instance.isTutorialEnd||(this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0),this.node.active=!1,this.startTutorial())}startTutorial(){this.tutorialDatas=this.data,this.currentTutorialIdx=0,this.currentStepIdx=0,this.isCompleted=!1,this.node.active=!0,this.showStep(this.currentTutorialIdx,this.currentStepIdx)}showStep(t,i){t>=this.tutorialDatas.length?this.completeTutorial():(this.currentTutorialIdx=t,this.updateArrow(t,i))}updateArrow(t,i){this.arrowContainer.children.forEach((e=>{e.getComponent(s).stop(),e.active=!1;let n=e.name.split("_"),r=parseInt(n[0]),a=parseInt(n[1]);r==t&&a==i&&(e.active=!0,e.getComponent(s).play())}))}completeTutorial(){this.hideArrow(),this.isCompleted=!0,c.Instance.isTutorialEnd=!0,c.Instance.isNeedShowDragTutorial=!0}onNextStep(){if(this.isCompleted)return;this.currentStepIdx++;let t=this.tutorialDatas[this.currentTutorialIdx].stepCount;if(this.currentStepIdx>t-1)return this.currentStepIdx=0,this.currentTutorialIdx++,void this.showStep(this.currentTutorialIdx,this.currentStepIdx);this.showStep(this.currentTutorialIdx,this.currentStepIdx)}hideArrow(){this.arrowContainer.children.forEach((t=>{t.getComponent(s).stop(),t.active=!1}))}hidePanel(){this.arrowContainer.active=!1}showPanel(){this.arrowContainer.active=!0}addListener(){o.on(l.Hide_TutorialPanel,this.hidePanel,this),o.on(l.Show_TutorialPanel,this.showPanel,this),o.on(l.HandAnimation_Start,this.hideArrow,this),o.on(l.HandAnimation_End,this.onNextStep,this)}removeListener(){o.off(l.Hide_TutorialPanel,this.hidePanel,this),o.off(l.Show_TutorialPanel,this.showPanel,this),o.off(l.HandAnimation_Start,this.hideArrow,this),o.off(l.HandAnimation_End,this.onNextStep,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"arrowContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=_))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JP_Customer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,s,i,o,d,a,r,l,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.SpriteFrame,d=e._decorator,a=e.Component,r=e.Vec3,l=e.tween,n=e.v3}],execute:function(){var c,h,p,N,u;i._RF.push({},"3e71fH7y/xFZIYE29bjpblH","XCT_JP_Customer",void 0);const{ccclass:m,property:y}=d;e("XCT_JP_Customer",(c=m("XCT_JP_Customer"),h=y(o),c((u=t((N=class extends a{constructor(...e){super(...e),this.orderId="",this.personId=1,this.targetWorldPos=r.ZERO,this.speed=500,s(this,"customerSps",u,this),this.spNode=null}onLoad(){this.spNode=null}walk(e,t=null,s=500){let i=s||this.speed,o=e[0];e.splice(0,1);let d=o.worldPosition,a=o.scale,c=r.distance(this.node.worldPosition,d)/i,h=()=>{l(this.node).to(c,{worldPosition:d}).call((()=>{e.length>0?(o=e[0],e.splice(0,1),d=o.worldPosition,a=o.scale,c=r.distance(this.node.worldPosition,d)/i,h()):t&&t()})).start(),l(this.node).to(c,{scale:n(a.x,a.y,1)}).start()};h()}run(e){this.targetWorldPos=e,console.log(`顾客${this.personId}向${e}奔跑`)}setSP(e){let t=this.node.getChildByName("spNode");t.children.forEach((e=>{e.active=!1})),this.spNode=t.getChildByName(e),this.spNode&&(this.spNode.getChildByName("smile").active=!0,this.spNode.getChildByName("angry").active=!1,this.spNode.getChildByName("moneyNode").active=!0,this.spNode.getChildByName("packedNode").active=!1,this.spNode.getChildByName("hand").active=!0),this.spNode.active=!0,this.node.active=!0}setAngry(){this.spNode&&(this.spNode.getChildByName("smile").active=!1,this.spNode.getChildByName("angry").active=!0)}setPacked(){this.spNode&&(this.spNode.getChildByName("moneyNode").active=!1,this.spNode.getChildByName("packedNode").active=!0,this.spNode.getChildByName("hand").active=!0)}show(){this.node.active=!0}hide(){this.node.active=!1}}).prototype,"customerSps",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=N))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JP_CustomerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_JP_Customer.ts","./XCT_JP_DataManager.ts","./EventManager.ts","./XCT_Events.ts"],(function(e){var t,r,i,o,s,n,a,u,l,c,m,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Prefab,s=e.Node,n=e._decorator,a=e.Component,u=e.instantiate},function(e){l=e.XCT_JP_Customer},function(e){c=e.XCT_JP_DataManager},function(e){m=e.EventManager},function(e){h=e.XCT_Events}],execute:function(){var p,C,f,d,P,_,b,g,y,v,J,T,X,w,M,z,R;i._RF.push({},"d6dacSLRRpE1ZpibrmRnS9A","XCT_JP_CustomerManager",void 0);const{ccclass:A,property:D}=n;e("XCT_JP_CustomerManager",(p=A("XCT_JP_CustomerManager"),C=D({type:o}),f=D({type:s}),d=D({type:s}),P=D({type:s}),_=D({type:s}),b=D({type:s}),g=D({type:s}),p((J=t((v=class extends a{constructor(...e){super(...e),r(this,"customerPrefab",J,this),r(this,"customerContainer",T,this),r(this,"createPos",X,this),r(this,"dialogPath1",w,this),r(this,"dialogPath2",M,this),r(this,"destoryPath",z,this),r(this,"destroyPos",R,this),this.activeCustomers=[]}init(){this.addListener()}createCustomer(e){const t=c.Instance.getOrderConfig(e);if(!t)return null;let r=u(this.customerPrefab).getComponent(l);return r.node.name=t.spName,r.node.parent=this.customerContainer,r.node.setWorldPosition(this.createPos.worldPosition),r.node.setScale(this.createPos.scale),r.orderId=e,r.show(),r.setSP(t.spName),this.activeCustomers.push(r),r}removeCustomer(e){const t=this.activeCustomers.indexOf(e);t>-1&&this.activeCustomers.splice(t,1)}removeAllCustomers(){this.activeCustomers.forEach((e=>{this.removeCustomer(e),e.hide(),e.destroy()}))}getFirstCustomer(){return this.activeCustomers.length>0?this.activeCustomers[0]:null}addListener(){m.on(h.JP_Remove_All_Customers,this.removeAllCustomers,this)}removeListener(){m.off(h.JP_Remove_All_Customers,this.removeAllCustomers,this)}onDestroy(){this.removeListener()}}).prototype,"customerPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(v.prototype,"customerContainer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(v.prototype,"createPos",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"dialogPath1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(v.prototype,"dialogPath2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(v.prototype,"destoryPath",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(v.prototype,"destroyPos",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JP_DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts"],(function(e){var t,i,r,s,n,o,h,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,s=e.JsonAsset,n=e._decorator,o=e.Component},function(e){h=e.EventManager},function(e){a=e.XCT_Events}],execute:function(){var l,d,u,c,g,f,C,m,D,p;r._RF.push({},"cdb3dAwu0FBF5FaANk5go8a","XCT_JP_DataManager",void 0);const{ccclass:v,property:_}=n;e("XCT_JP_DataManager",(l=v("XCT_JP_DataManager"),d=_(s),u=_(s),c=_(s),l(((p=class e extends o{constructor(...e){super(...e),i(this,"dialogConfigJson",C,this),i(this,"levelConfigJson",m,this),i(this,"orderConfigJson",D,this),this.dialogConfig=null,this.levelConfig=null,this.orderConfig=null,this.currentLevel=1,this.currentOrderIndex=0,this.currentCustomer=null,this.lastCustomer=null,this.currentRemindType=0,this.currentDishes={},this.extraDishes={},this.lessDishes={},this.isFail=!1,this.isRemind=!1,this.isWrongRemind=!1,this.isTutorial=!0,this.isCanGetItem=!1,this.tutorialIndexs=[],this.isEnd=!1,this.isRandomMode=!1}onLoad(){e.Instance=this,this.dialogConfig=this.dialogConfigJson.json,this.levelConfig=this.levelConfigJson.json,this.orderConfig=this.orderConfigJson.json}resetLevelData(){this.isRandomMode=!1,this.currentOrderIndex=0,this.currentDishes={},this.extraDishes={},this.lessDishes={},this.isFail=!1,this.isEnd=!1,this.isRemind=!0,this.isWrongRemind=!1,this.isTutorial=!0,this.tutorialIndexs=[],h.Scene.emit(a.JP_Hide_Money),h.Scene.emit(a.JP_Hide_PackBag)}getCurrentLevelOrders(){return this.levelConfig[1].orders}getNextOrderId(){const e=this.getCurrentLevelOrders();if(this.currentOrderIndex>=1&&(this.isRandomMode=!0),this.isRandomMode&&(this.currentOrderIndex=Math.floor(Math.random()*(e.length-1)),this.lastCustomer))for(;this.orderConfig[e[this.currentOrderIndex]].spName===(null==(t=this.lastCustomer)?void 0:t.name);){var t;this.currentOrderIndex=Math.floor(Math.random()*(e.length-1))}return e[this.currentOrderIndex++]}getOrderConfig(e){return this.orderConfig[e]}checkOrder(){const t=e.Instance.getOrderConfig(this.currentCustomer.orderId);for(let e in t.order)this.currentDishes[e]?this.currentDishes[e]<t.order[e]?this.lessDishes[e]=t.order[e]-this.currentDishes[e]:this.currentDishes[e]>t.order[e]&&(this.extraDishes[e]=this.currentDishes[e]-t.order[e]):this.lessDishes[e]=t.order[e]}}).Instance=void 0,C=t((f=p).prototype,"dialogConfigJson",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(f.prototype,"levelConfigJson",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(f.prototype,"orderConfigJson",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=f))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JP_DialogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_JP_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var i,e,n,o,a,r,l,s,u,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,a=t.Label,r=t.Button,l=t._decorator,s=t.Component},function(t){u=t.XCT_JP_DataManager},function(t){h=t.XCT_AudioManager}],execute:function(){var g,c,p,D,b,d,f,y,m,w,_,x,v,C,L,I,z,M,T;n._RF.push({},"a76f5WdjqhOt5XwLtYm/Nmf","XCT_JP_DialogManager",void 0);const{ccclass:X,property:P}=l;t("XCT_JP_DialogManager",(g=X("XCT_JP_DialogManager"),c=P({type:o}),p=P({type:o}),D=P({type:o}),b=P({type:o}),d=P({type:a}),f=P({type:a}),y=P({type:a}),m=P({type:r}),g((x=i((_=class extends s{constructor(...t){super(...t),e(this,"hostNode",x,this),e(this,"narratorDialog",v,this),e(this,"hostDialog",C,this),e(this,"customerDialog",L,this),e(this,"narratorLabel",I,this),e(this,"hostLabel",z,this),e(this,"customerLabel",M,this),e(this,"nextBtn",T,this),this.currentDialogIndex=0,this.onDialogEnd=()=>{}}init(){this.nextBtn.node.on(r.EventType.CLICK,this.showNextDialog,this),this.hideAllDialogs()}showOpeningDialog(t){this.onDialogEnd=t,this.currentDialogIndex=0,this.showCurrentOpeningDialog()}showCurrentOpeningDialog(){const t=u.Instance.dialogConfig.opening;if(this.currentDialogIndex>=t.length)return this.onDialogEnd(),void this.hideAllDialogs();const i=t[this.currentDialogIndex];this.showDialog(i.content,i.personId,!1)}showDialog(t,i,e){switch(this.hideAllDialogs(),this.nextBtn.node.active=!e,i){case-1:this.narratorDialog.active=!0,this.narratorLabel.string=t;break;case 0:this.hostNode.active=!0,this.hostDialog.active=!0,this.hostLabel.string=t;break;default:this.customerDialog.active=!0,this.customerLabel.string=t}}showNextDialog(){h.getInstance().playSound("点击");const t=u.Instance.dialogConfig.opening[this.currentDialogIndex];if(-1===t.next)return this.onDialogEnd(),void this.hideAllDialogs();this.currentDialogIndex=t.next-1,this.showCurrentOpeningDialog()}hideAllDialogs(){this.narratorDialog.active=!1,this.hostDialog.active=!1,this.customerDialog.active=!1,this.nextBtn.node.active=!1}}).prototype,"hostNode",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(_.prototype,"narratorDialog",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(_.prototype,"hostDialog",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(_.prototype,"customerDialog",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(_.prototype,"narratorLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(_.prototype,"hostLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(_.prototype,"customerLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(_.prototype,"nextBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=_))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JP_GamePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_JP_DialogManager.ts","./XCT_JP_DataManager.ts","./XCT_JP_OrderManager.ts","./XCT_JP_CustomerManager.ts","./XCT_AudioManager.ts","./XCT_GameManager.ts","./UIManager.ts","./GameManager.ts"],(function(e){var t,n,i,a,s,r,o,l,h,c,u,d,g,m,P,f,I,p,b,_,C,y,T,B,w,M,k,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Button,s=e.Node,r=e._decorator,o=e.instantiate,l=e.v3,h=e.tween,c=e.Animation},function(e){u=e.EventManager},function(e){d=e.ProjectEventManager,g=e.ProjectEvent},function(e){m=e.XCT_BasePanel,P=e.XCT_PanelAnimation},function(e){f=e.XCT_UILayer},function(e){I=e.XCT_UIManager},function(e){p=e.XCT_UIPanel},function(e){b=e.XCT_Events},function(e){_=e.XCT_JP_DialogManager},function(e){C=e.XCT_JP_DataManager},function(e){y=e.XCT_JP_OrderManager},function(e){T=e.XCT_JP_CustomerManager},function(e){B=e.XCT_AudioManager},function(e){w=e.XCT_GameManager},function(e){M=e.UIManager,k=e.Panel},function(e){v=e.GameManager}],execute:function(){var E,N,J,X,S,x,D,L,z,O,A,G,R,H,U,j,F,K,Q,V,q,W,Y,Z,$,ee,te,ne,ie,ae,se,re,oe;i._RF.push({},"1971fIQxK9IMJh0pg1VLO7p","XCT_JP_GamePanel",void 0);const{ccclass:le,property:he}=r;e("XCT_JP_GamePanel",(E=le("XCT_JP_GamePanel"),N=he({type:T}),J=he({type:_}),X=he({type:y}),S=he({type:a}),x=he(s),D=he(s),L=he(s),z=he(s),O=he(s),A=he(s),G=he(s),R=he(s),H=he(s),U=he(s),j=he(s),E((Q=t((K=class extends m{constructor(...e){super(...e),this.defaultShowAnimation=P.SLIDE_FROM_BOTTOM,this.defaultHideAnimation=P.SLIDE_TO_TOP,this.defaultLayer=f.Game,this.animationDuration=.6,this.isAddedEvent=!1,n(this,"customerManager",Q,this),n(this,"dialogManager",V,this),n(this,"orderManager",q,this),n(this,"packageBtn",W,this),n(this,"itemBtns",Y,this),n(this,"packContainer",Z,this),n(this,"packBag",$,this),n(this,"EndPanel",ee,this),n(this,"btnNext",te,this),n(this,"btnRestart",ne,this),n(this,"btnBack",ie,this),n(this,"btnReturn",ae,this),n(this,"tableItems",se,this),n(this,"monayNode",re,this),n(this,"tutorialPanel",oe,this)}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.customerManager.init(),this.dialogManager.init(),this.orderManager.init(),this.hideTableItem(),this.showOpeningDialog(),this.itemBtns.forEach(((e,t)=>{e.getChildByName("item").active=!1})),this.packBag.active=!1,this.EndPanel.active=!1,this.monayNode.active=!1,this.hideTutorial()}showOpeningDialog(){this.dialogManager.showOpeningDialog((()=>{this.orderManager.startProcessing()}))}onBtnPackClick(){if(C.Instance.isTutorial){if(C.Instance.tutorialIndexs.includes(3)||C.Instance.tutorialIndexs.includes(4))return;if(!C.Instance.tutorialIndexs.includes(1)&&!C.Instance.tutorialIndexs.includes(2))return;C.Instance.tutorialIndexs.push(3),this.hideTutorial()}C.Instance.isCanGetItem=!1,B.getInstance().playSound("点击"),this.orderManager.packageOrder(),this.packContainer.removeAllChildren(),this.packBag.active=!0}onItemClick(e){if(!C.Instance.isCanGetItem)return;if(C.Instance.isTutorial){if(C.Instance.tutorialIndexs.includes(3)||C.Instance.tutorialIndexs.includes(4))return;if("鸡排"!==this.itemBtns[e].name&&"可乐"!==this.itemBtns[e].name)return;if("鸡排"==this.itemBtns[e].name&&C.Instance.tutorialIndexs.includes(1))return;if("可乐"==this.itemBtns[e].name&&C.Instance.tutorialIndexs.includes(2))return}C.Instance.currentDishes[this.itemBtns[e].name]?C.Instance.currentDishes[this.itemBtns[e].name]++:C.Instance.currentDishes[this.itemBtns[e].name]=1,B.getInstance().playSound("点击");let t=this.itemBtns[e].getChildByName("item"),n=o(t);if(n.parent=this.packContainer,n.active=!0,C.Instance.isTutorial)if("鸡排"==this.itemBtns[e].name){let e=0;C.Instance.tutorialIndexs.forEach((t=>{2==t&&e++})),e<1?(this.hideTutorial(),this.showTutorial("2"),C.Instance.tutorialIndexs.push(1)):(C.Instance.tutorialIndexs.push(1),this.hideTutorial(),this.showTutorial("3"))}else"可乐"==this.itemBtns[e].name&&(C.Instance.tutorialIndexs.includes(1)?(C.Instance.tutorialIndexs.push(2),this.hideTutorial(),this.showTutorial("3")):(this.hideTutorial(),this.showTutorial("1"),C.Instance.tutorialIndexs.push(2)))}showPackBag(){this.packBag.active=!0}hidePackBag(){this.packBag.active=!1}showEndPanel(){d.emit(g.游戏结束,"小吃摊"),C.Instance.isFail?(this.EndPanel.getChildByName("Node").getChildByName("fail").active=!0,this.EndPanel.getChildByName("Node").getChildByName("success").active=!1):(this.EndPanel.getChildByName("Node").getChildByName("success").active=!0,this.EndPanel.getChildByName("Node").getChildByName("fail").active=!1),this.EndPanel.getChildByName("Node").setScale(l(0,0,0)),h(this.EndPanel.getChildByName("Node")).to(.2,{scale:l(1,1,1)}).start(),this.EndPanel.active=!0}hideEndPanel(){this.EndPanel.active=!1}btnNextClick(){B.getInstance().playSound("点击"),C.Instance.currentLevel++,C.Instance.resetLevelData(),this.hideEndPanel(),this.dialogManager.showOpeningDialog((()=>{this.orderManager.startProcessing()}))}btnRestartClick(){d.emit(g.游戏开始,"小吃摊"),B.getInstance().playSound("点击"),this.customerManager.removeAllCustomers(),C.Instance.resetLevelData(),this.hideEndPanel(),this.dialogManager.showOpeningDialog((()=>{this.orderManager.startProcessing()}))}btnBackClick(){B.getInstance().playSound("点击"),w.Instance.hasStartPanel?(C.Instance.resetLevelData(),u.Scene.emit(b.hideTableItem),I.Instance.showPanel(p.TablePanel,null,(()=>{I.Instance.showPanel(p.LoadingPanel,(()=>{I.Instance.showPanel(p.StartPanel,null,(()=>{I.Instance.hidePanel(p.JP_GamePanel),I.Instance.hidePanel(p.TipPanel),this.scheduleOnce((()=>{I.Instance.hidePanel(p.LoadingPanel,(()=>{d.emit(g.游戏结束,"小吃摊")}))}),.5)}))}))}))):d.emit(g.返回主页按钮事件,(()=>{M.ShowPanel(k.LoadingPanel,v.StartScene,(()=>{d.emit(g.返回主页,"小吃摊")}))}))}hideTableItem(){this.tableItems.forEach((e=>{e.active=!1}))}onShowTableItem(){this.tableItems.forEach((e=>{e.active=!0}))}showMoney(){this.monayNode.active=!0}hideMoney(){this.monayNode.active=!1}showTutorial(e){this.tutorialPanel.children.forEach((t=>{t.active=!1,this.tutorialPanel.getChildByName(e).getComponent(c).stop()})),this.tutorialPanel.getChildByName(e).active=!0,this.tutorialPanel.getChildByName(e).getComponent(c).play()}hideTutorial(){this.tutorialPanel.children.forEach((e=>{e.getComponent(c).stop(),e.active=!1}))}addListener(){u.on(b.showTableItem,this.onShowTableItem,this),u.on(b.hideTableItem,this.hideTableItem,this),u.on(b.JP_Show_PackBag,this.showPackBag,this),u.on(b.JP_Hide_PackBag,this.hidePackBag,this),u.on(b.JP_Show_EndPanel,this.showEndPanel,this),u.on(b.JP_Hide_EndPanel,this.hideEndPanel,this),u.on(b.JP_Show_Money,this.showMoney,this),u.on(b.JP_Hide_Money,this.hideMoney,this),u.on(b.JP_ShowTutorial,this.showTutorial,this),u.on(b.JP_HideTutorial,this.hideTutorial,this),this.packageBtn.node.on(a.EventType.CLICK,this.onBtnPackClick,this),this.itemBtns.forEach(((e,t)=>{e.on("click",(()=>{this.onItemClick(t)}),this)})),this.btnNext.on("click",this.btnNextClick,this),this.btnRestart.on("click",this.btnRestartClick,this),this.btnBack.on("click",this.btnBackClick,this),this.btnReturn.on("click",this.btnBackClick,this)}removeListener(){u.off(b.showTableItem,this.onShowTableItem,this),u.off(b.hideTableItem,this.hideTableItem,this),u.off(b.JP_Show_PackBag,this.showPackBag,this),u.off(b.JP_Hide_PackBag,this.hidePackBag,this),u.off(b.JP_Show_EndPanel,this.showEndPanel,this),u.off(b.JP_Hide_EndPanel,this.hideEndPanel,this),u.off(b.JP_Show_Money,this.showMoney,this),u.off(b.JP_Hide_Money,this.hideMoney,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"customerManager",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(K.prototype,"dialogManager",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(K.prototype,"orderManager",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(K.prototype,"packageBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(K.prototype,"itemBtns",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=t(K.prototype,"packContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(K.prototype,"packBag",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(K.prototype,"EndPanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(K.prototype,"btnNext",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(K.prototype,"btnRestart",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(K.prototype,"btnBack",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(K.prototype,"btnReturn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(K.prototype,"tableItems",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),re=t(K.prototype,"monayNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(K.prototype,"tutorialPanel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=K))||F));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_JP_OrderManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_JP_CustomerManager.ts","./XCT_JP_DialogManager.ts","./XCT_JP_DataManager.ts","./EventManager.ts","./XCT_Events.ts","./XCT_AudioManager.ts"],(function(e){var n,t,s,a,r,i,o,c,l,d,u,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){s=e.cclegacy,a=e._decorator,r=e.Component,i=e.Button},function(e){o=e.XCT_JP_CustomerManager},function(e){c=e.XCT_JP_DialogManager},function(e){l=e.XCT_JP_DataManager},function(e){d=e.EventManager},function(e){u=e.XCT_Events},function(e){g=e.XCT_AudioManager}],execute:function(){var h,m,I,C,_,M,P;s._RF.push({},"c300bgEcKxNPqvedIHR24Og","XCT_JP_OrderManager",void 0);const{ccclass:y,property:p}=a;e("XCT_JP_OrderManager",(h=y("XCT_JP_OrderManager"),m=p({type:o}),I=p({type:c}),h((M=n((_=class extends r{constructor(...e){super(...e),t(this,"customerManager",M,this),t(this,"dialogManager",P,this)}init(){}startProcessing(){this.createNextOrder()}createNextOrder(){const e=l.Instance.getNextOrderId();if(!e)return void this.handleLevelPass();const n=this.customerManager.createCustomer(e);if(n){n.node.getChildByName("remindBtn").on(i.EventType.CLICK,this.onRemindClick,this),n.node.getChildByName("remindBtn").active=!1,l.Instance.currentCustomer=n;let t=[...this.customerManager.dialogPath1.children];n.walk(t,(()=>{l.Instance.isCanGetItem=!0;const t=l.Instance.getOrderConfig(e);this.dialogManager.showDialog(t.content,n.personId,!0),l.Instance.isTutorial&&(d.Scene.emit(u.JP_HideTutorial),l.Instance.tutorialIndexs.includes(1)?l.Instance.tutorialIndexs.includes(2)?l.Instance.tutorialIndexs.includes(3)||d.Scene.emit(u.JP_ShowTutorial,"3"):d.Scene.emit(u.JP_ShowTutorial,"2"):d.Scene.emit(u.JP_ShowTutorial,"1")),n.node.getChildByName("remindBtn").active=!1}))}}packageOrder(){if(!l.Instance.currentCustomer)return;l.Instance.currentCustomer.node.getChildByName("remindBtn").active=!1;const e=l.Instance.getOrderConfig(l.Instance.currentCustomer.orderId);this.dialogManager.showDialog(l.Instance.dialogConfig.host[1],0,!0),this.scheduleOnce((()=>{if(l.Instance.isTutorial&&d.Scene.emit(u.JP_ShowTutorial,"4"),d.Scene.emit(u.JP_Hide_PackBag),l.Instance.checkOrder(),0===Object.keys(l.Instance.extraDishes).length&&0===Object.keys(l.Instance.lessDishes).length){if(l.Instance.lessDishes={},l.Instance.extraDishes={},l.Instance.currentDishes={},this.dialogManager.showDialog(l.Instance.dialogConfig.customer[e.personId][0],e.personId,!0),l.Instance.currentRemindType=1,l.Instance.currentCustomer.node.getChildByName("remindBtn").active=!0,l.Instance.currentCustomer.setPacked(),1===e.specialType?(l.Instance.isRemind=!1,d.Scene.emit(u.JP_Hide_Money)):(l.Instance.isRemind=!0,d.Scene.emit(u.JP_Show_Money)),l.Instance.isTutorial)return;this.scheduleOnce((()=>{if(d.Scene.emit(u.JP_Hide_Money),l.Instance.currentCustomer.node.getChildByName("remindBtn").active=!1,l.Instance.isRemind)if(l.Instance.isWrongRemind);else{var e;this.dialogManager.hideAllDialogs(),l.Instance.currentCustomer.node.setSiblingIndex(0),l.Instance.lastCustomer=l.Instance.currentCustomer,this.customerManager.removeCustomer(l.Instance.currentCustomer),this.createNextOrder();let n=[...this.customerManager.destoryPath.children,this.customerManager.destroyPos];l.Instance.isRemind=!1,null==(e=l.Instance.lastCustomer)||e.walk(n,(()=>{l.Instance.lastCustomer.hide(),l.Instance.lastCustomer.destroy(),l.Instance.lastCustomer=null}),1e3)}else{var n;this.dialogManager.hideAllDialogs(),l.Instance.currentCustomer.node.setSiblingIndex(0);let e=[...this.customerManager.destoryPath.children,this.customerManager.destroyPos];l.Instance.isRemind=!1,null==(n=l.Instance.currentCustomer)||n.walk(e,(()=>{this.dialogManager.showDialog(l.Instance.dialogConfig.narrator[1],-1,!0),this.scheduleOnce((()=>{l.Instance.isFail=!0,d.Scene.emit(u.JP_Show_EndPanel)}),1.5)}),1e3)}}),2)}else{var n;let t="";const s=l.Instance.dialogConfig.customer[e.personId];Object.keys(l.Instance.lessDishes).length>0&&(t=""+s[1],t=t.replace("${goods}",Object.keys(l.Instance.lessDishes).join("、"))),this.dialogManager.showDialog(t,e.personId,!0),null==(n=l.Instance.currentCustomer)||n.setAngry(),l.Instance.lessDishes={},l.Instance.extraDishes={},l.Instance.currentDishes={},this.scheduleOnce((()=>{l.Instance.isFail=!0,d.Scene.emit(u.JP_Show_EndPanel)}),2)}}),1.5)}onRemindClick(){if(!l.Instance.currentCustomer)return;g.getInstance().playSound("点击"),l.Instance.isTutorial&&(d.Scene.emit(u.JP_HideTutorial),l.Instance.isTutorial=!1);const e=l.Instance.getOrderConfig(l.Instance.currentCustomer.orderId),n=l.Instance.dialogConfig.customer[e.personId];l.Instance.dialogConfig.narrator;let t="";var s;0===l.Instance.currentRemindType||(1===e.specialType?(l.Instance.isRemind=!0,d.Scene.emit(u.JP_Show_Money),t=n[2],this.dialogManager.showDialog(t,e.personId,!0),this.scheduleOnce((()=>{var e;if(!l.Instance.isRemind)return;d.Scene.emit(u.JP_Hide_Money),l.Instance.currentCustomer.node.getChildByName("remindBtn").active=!1,this.dialogManager.hideAllDialogs(),l.Instance.currentCustomer.node.setSiblingIndex(0),l.Instance.lastCustomer=l.Instance.currentCustomer,this.customerManager.removeCustomer(l.Instance.currentCustomer),this.createNextOrder(),l.Instance.isRemind=!1;let n=[...this.customerManager.destoryPath.children,this.customerManager.destroyPos];null==(e=l.Instance.lastCustomer)||e.walk(n,(()=>{l.Instance.lastCustomer.hide(),l.Instance.lastCustomer.destroy(),l.Instance.lastCustomer=null}),1e3)}),2)):(l.Instance.isWrongRemind=!0,t=n[3],this.dialogManager.showDialog(t,e.personId,!0),null==(s=l.Instance.currentCustomer)||s.setAngry(),this.scheduleOnce((()=>{l.Instance.isFail=!0,d.Scene.emit(u.JP_Show_EndPanel)}),2)));l.Instance.currentCustomer.node.getChildByName("remindBtn").active=!1}handleLevelPass(){this.dialogManager.showDialog(l.Instance.dialogConfig.host[1],0,!0),this.scheduleOnce((()=>{l.Instance.isFail=!1,d.Scene.emit(u.JP_Show_EndPanel)}),2)}}).prototype,"customerManager",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(_.prototype,"dialogManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=_))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Bowl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_KLM_DataManager.ts","./XCT_Events.ts","./EventManager.ts"],(function(e){var t,i,n,o,s,a,r,c,d,h,l,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Node,s=e._decorator,a=e.Component,r=e.v3,c=e.UITransform,d=e.v2,h=e.instantiate},function(e){l=e.XCT_KLM_DataManager},function(e){u=e.XCT_Events},function(e){p=e.EventManager}],execute:function(){var f,v,g,C,T,y,_,P,m;n._RF.push({},"47443OxiRtL9oktEQqiSicK","XCT_KLM_Bowl",void 0);const{ccclass:E,property:M}=s;e("XCT_KLM_Bowl",(f=E("XCT_KLM_Bowl"),v=M(o),g=M(o),C=M(o),f((_=t((y=class extends a{constructor(...e){super(...e),this.startPos=null,this.targetPos=null,this.packedPrefab=null,i(this,"targetArea",_,this),i(this,"dividers",P,this),i(this,"pieceNodes",m,this),this.isCanMove=!1}onLoad(){this.startPos=this.node.getWorldPosition(),this.targetPos=this.targetArea.getWorldPosition(),this.node.getChildByName("selected").active=!1,this.packedPrefab=this.node.getChildByName("packedPrefab"),this.packedPrefab.active=!1,this.node.on(o.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(o.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(o.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(o.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchStart(e){if(1==l.Instance.playerData.currentDay&&!l.Instance.isTutorialEnd){if(-1==[10].indexOf(l.Instance.tutorialIdx))return}if(l.Instance.currentCookedSteps.includes("烤冷面碗"))return void p.Scene.emit(u.showTip,"只能打包一次！");let t=!1,i=["卷冷面"];if(l.Instance.currentCookedSteps.forEach((e=>{t||i.includes(e)&&(t=!0)})),!t)return p.Scene.emit(u.showTip,"请先卷好冷面！"),void(this.isCanMove=!1);let n=!1,o=["铲子"];if(l.Instance.currentCookedSteps.forEach((e=>{n||o.includes(e)&&(n=!0)})),!n)return p.Scene.emit(u.showTip,"要先切割好冷面，才可以打包哦"),void(this.isCanMove=!1);p.Scene.emit(u.KLM_Cancel_All_Ingredients),this.isCanMove=!0;const s=e.getUILocation();this.node.setWorldPosition(r(s.x,s.y,0)),this.node.getChildByName("selected").active=!0}onTouchMove(e){if(!this.isCanMove)return;const t=e.getUILocation();if(1==l.Instance.playerData.currentDay&&!l.Instance.isTutorialEnd){if(-1==[10].indexOf(l.Instance.tutorialIdx))return}this.node.setWorldPosition(r(t.x,t.y,0))}onTouchEnd(e){if(!this.isCanMove)return;if(this.targetArea.getComponent(c).getBoundingBoxToWorld().contains(d(this.node.getWorldPosition().x,this.node.getWorldPosition().y))){this.dividers.forEach((e=>{e.active=!1})),this.pieceNodes.forEach((e=>{e.active=!1,e.getChildByName("before").active=!0,e.getChildByName("after").active=!1}));let e=h(this.packedPrefab);e.parent=this.targetArea.getChildByName("Contanter"),e.setWorldPosition(this.targetPos),e.active=!0,this.node.setWorldPosition(this.startPos),this.node.getChildByName("selected").active=!1,l.Instance.currentCookedSteps.push(this.node.name),10==l.Instance.tutorialIdx&&(p.Scene.emit(u.HandAnimation_End),l.Instance.tutorialIdx++)}else this.node.setWorldPosition(this.startPos),this.node.getChildByName("selected").active=!1}}).prototype,"targetArea",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(y.prototype,"dividers",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=t(y.prototype,"pieceNodes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=y))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_CancelMask.ts",["cc","./EventManager.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts"],(function(n){var e,t,a,c,s,o;return{setters:[function(n){e=n.cclegacy,t=n.Component,a=n._decorator},function(n){c=n.EventManager},function(n){s=n.XCT_Events},function(n){o=n.XCT_KLM_DataManager}],execute:function(){var r;e._RF.push({},"4bf58wP+UlINoSAshGqX/MG","XCT_KLM_CancelMask",void 0);const{ccclass:_,property:i}=a;n("XCT_KLM_CancelMask",_("XCT_KLM_CancelMask")(r=class extends t{onLoad(){this.node.on("click",this.onClick,this)}onClick(){(1!=o.Instance.playerData.currentDay||o.Instance.isTutorialEnd)&&c.Scene.emit(s.KLM_Cancel_All_Ingredients)}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_CheckoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,n,i,a,l,r,o,s,u,c,d,b,h,p,C,f,y,g,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,l=t.Node,r=t._decorator,o=t.Color,s=t.Button},function(t){u=t.EventManager},function(t){c=t.ProjectEventManager,d=t.ProjectEvent},function(t){b=t.XCT_BasePanel,h=t.XCT_PanelAnimation},function(t){p=t.XCT_UILayer},function(t){C=t.XCT_UIManager},function(t){f=t.XCT_UIPanel},function(t){y=t.XCT_Events},function(t){g=t.XCT_KLM_DataManager},function(t){_=t.XCT_AudioManager}],execute:function(){var I,P,T,M,m,v,L,X,D,K,w,E,S,A,R,U,z,k,F,O,x;i._RF.push({},"0cb0bMG4BBPgYDUnlXPPcUS","XCT_KLM_CheckoutPanel",void 0);const{ccclass:N,property:B}=r;t("XCT_KLM_CheckoutPanel",(I=N("XCT_KLM_CheckoutPanel"),P=B(a),T=B(a),M=B(a),m=B(a),v=B(a),L=B(a),X=B(a),D=B(l),K=B(a),I((S=e((E=class extends b{constructor(...t){super(...t),this.defaultShowAnimation=h.NONE,this.defaultHideAnimation=h.NONE,this.defaultLayer=p.Pop2,this.animationDuration=.6,n(this,"lblDay",S,this),n(this,"lblTurnover",A,this),n(this,"lblTip",R,this),n(this,"lblRent",U,this),n(this,"lblRefund",z,this),n(this,"lblCost",k,this),n(this,"lblProfit",F,this),n(this,"btnOK",O,this),n(this,"lblCatCost",x,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){c.emit(d.弹出窗口,"小吃摊"),this.initUI()}initUI(){this.lblDay.string=""+g.Instance.playerData.currentDay,g.Instance.playerData.money-=g.Instance.Rent,g.Instance.playerData.isAdoptedCat&&(g.Instance.playerData.money-=10),u.Scene.emit(y.KLM_Update_Money),this.lblTurnover.string="+"+g.Instance.daySellingPrice.toFixed(1),this.lblTip.string="+"+g.Instance.daySellingAddTip.toFixed(1),this.lblRent.string="-"+g.Instance.Rent,this.lblRefund.string="-"+g.Instance.dayRefund.toFixed(1),this.lblCost.string="-"+g.Instance.dayCost.toFixed(1),this.lblCatCost.string="-10",this.lblCatCost.node.active=g.Instance.playerData.isAdoptedCat;let t=g.Instance.daySellingPrice+g.Instance.daySellingAddTip-g.Instance.dayCost-g.Instance.Rent-g.Instance.dayRefund;this.lblProfit.color=new o(t<0?"C53737":"5FC537"),this.lblProfit.string=""+t.toFixed(1)}onClickOK(){_.getInstance().playSound("点击"),g.Instance.isHadShowShop?C.Instance.hidePanel(f.KLM_CheckoutPanel):(g.Instance.isHadShowShop=!0,C.Instance.showPanel(f.KLM_ShopPanel,null,(()=>{C.Instance.showPanel(f.KLM_GameUI,null,null,h.NONE,p.GameUI2),C.Instance.hidePanel(f.KLM_CheckoutPanel)})))}addListener(){this.btnOK.on(s.EventType.CLICK,this.onClickOK,this)}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lblDay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(E.prototype,"lblTurnover",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(E.prototype,"lblTip",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(E.prototype,"lblRent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(E.prototype,"lblRefund",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"lblCost",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(E.prototype,"lblProfit",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(E.prototype,"btnOK",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(E.prototype,"lblCatCost",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=E))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Completed.ts",["cc","./EventManager.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts"],(function(e){var n,t,a,c,o,i;return{setters:[function(e){n=e.cclegacy,t=e.Component,a=e._decorator},function(e){c=e.EventManager},function(e){o=e.XCT_Events},function(e){i=e.XCT_KLM_DataManager}],execute:function(){var s;n._RF.push({},"789f8j6z6NPKbMmwWu7QF1w","XCT_KLM_Completed",void 0);const{ccclass:r,property:d}=a;e("XCT_KLM_Completed",r("XCT_KLM_Completed")(s=class extends t{onLoad(){this.node.on("click",this.onClick,this)}onClick(){let e=!1,n=["烤冷面碗"];if(i.Instance.currentCookedSteps.forEach((t=>{e||n.includes(t)&&(e=!0)})),e){if(1==i.Instance.playerData.currentDay&&!i.Instance.isTutorialEnd){if(-1==[11,13].indexOf(i.Instance.tutorialIdx))return}11==i.Instance.tutorialIdx&&(c.Scene.emit(o.HandAnimation_End),i.Instance.tutorialIdx++),c.Scene.emit(o.KLM_Cancel_All_Ingredients),i.Instance.currentCookedSteps.push(this.node.name),13==i.Instance.tutorialIdx&&(c.Scene.emit(o.HandAnimation_End),i.Instance.tutorialIdx++),c.Scene.emit(o.KLM_Completed)}else c.Scene.emit(o.showTip,"要制作并打包好才能算完成哦！")}})||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_BasePanel.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,s,r,a,o,h,u,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.JsonAsset,r=e._decorator,a=e.Component},function(e){o=e.EventManager},function(e){h=e.XCT_Events},function(e){u=e.XCT_UIManager},function(e){c=e.XCT_UIPanel},function(e){l=e.XCT_PanelAnimation},function(e){d=e.XCT_AudioManager}],execute:function(){var g,T,m,S,p,_,k,C,f,I;n._RF.push({},"8d3a8zVWY1FO7MM+lOkDBiK","XCT_KLM_DataManager",void 0);const{ccclass:D,property:E}=r;let P=e("XCT_KLM_IngredientType",function(e){return e.SPICE="撒料类",e.SPREAD="涂抹类",e.EGG="鸡蛋类",e}({})),M=(e("XCT_KLM_ButtonAction",function(e){return e.START_MAKE="开始制作",e.NEXT_DIALOG="下一段对话",e.BUY_INGREDIENT="购买食材",e.REFUSE="拒绝",e.END_DIALOG="结束对话",e.LEAVE="离开",e.GET_TAKE_OUT="开展外卖业务",e.DELIVER_TAKE_OUT="送达",e.TAKE_DISH="递餐",e}({})),e("XCT_KLM_OrderStatus",function(e){return e[e.UNHANDLED=0]="UNHANDLED",e[e.TIMEOUT=1]="TIMEOUT",e[e.COOKED=2]="COOKED",e[e.DELIVERED=3]="DELIVERED",e[e.REFUSED=4]="REFUSED",e}({})));e("XCT_KLM_DataManager",(g=D("XCT_KLM_DataManager"),T=E(s),m=E(s),S=E(s),g(((I=class e extends a{constructor(...e){super(...e),this.STORAGE_KEY="XCT_KLM_PlayerData",i(this,"ingredientsConfigJson",k,this),i(this,"TipConfigJson",C,this),i(this,"TakeoutOrderConfigJson",f,this),this.ingredientsConfig=null,this.ingredientsConfigObject=null,this.tipConfig=null,this.takeoutOrderConfig=null,this.standardSpreadCount=300,this.playerData=null,this.isTutorialEnd=!1,this.isNeedShowDragTutorial=!1,this.tutorialIdx=0,this.isCooking=!1,this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.MINUTES_PER_HOUR=12,this.MINUTE_INTERVAL=15,this.isTimePause=!1,this.totalTime=0,this.isDayEnd=!1,this.currentSmile=100,this.startCookingTime=0,this.isTakeout=!1,this.currentCustomerIndex=0,this.dayCustomerCount=0,this.currentCustomer=null,this.missingStockIngredients=[],this.isEndingDialog=!1,this.isRefuse=!1,this.currentDayTakeoutConfig=[],this.currentTakeoutOrders=[],this.lastTakeoutOrderIds=[],this.currentTakeoutOrder=null,this.needShowTakeoutCome=!1,this.notes=[],this.takeoutNotes=[],this.currentDishes={},this.orderCheckResult=this.initOrderCheckResult(),this.currentEggIngredientType="白面团",this.eggIngredientTypeTransfer={},this.currentSauceType="调味酱",this.sauceTypeCount={},this.currentCookedSteps=[],this.currentSellingPrice=0,this.daySellingPrice=0,this.currentSellingAddTip=0,this.totalSellingTip=10,this.daySellingAddTip=0,this.refund=0,this.dayRefund=0,this.Rent=10,this.dayCost=0,this.isHadShowShop=!1,this.isShowingTakeoutPanel=!1,this.isShowingShopPanel=!1,this.isCatDriveAway=!1,this.isPacked=!1,this.isPause=!1}initOrderCheckResult(){return{extraIngredients:[],missingIngredients:[],lessCountIngredients:[],lessSpreadIngredients:[],moreSpreadIngredients:[],lessRotateIngredients:[],moreCountIngredients:[]}}onLoad(){this.addListener(),e.Instance=this,this.ingredientsConfig=this.ingredientsConfigJson.json,this.ingredientsConfigObject=this.ingredientsConfig.reduce(((e,t)=>(e[t.name]=t,e)),{}),this.tipConfig=this.TipConfigJson.json,this.takeoutOrderConfig=this.TakeoutOrderConfigJson.json,this.playerData=this.loadData(),this.initData()}initData(){this.playerData=this.loadData(),this.resetDay()}loadData(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{money:100,currentDay:1,stock:{"鸡蛋":1,"冷面皮":1,"油":1,"洋葱":1,"浅色酱":1,"生菜":1},score:5,isTakeOutProjectSet:!1,isTakeOutProjectOpen:!1,isAdoptedCat:!1}}resetDay(){this.tutorialIdx=0,this.isTutorialEnd=!1,this.isNeedShowDragTutorial=!1,this.currentCustomerIndex=0,this.dayCustomerCount=0,this.orderCheckResult=this.initOrderCheckResult(),this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.totalTime=24*this.MINUTES_PER_HOUR,this.isDayEnd=!1,this.daySellingPrice=0,this.daySellingAddTip=0,this.dayRefund=0,this.currentDayTakeoutConfig=this.generateRandomTakeoutOrders(),this.currentTakeoutOrders=[],this.needShowTakeoutCome=!1,this.isShowingTakeoutPanel=!1,this.isCatDriveAway=!1,this.isCooking=!1,this.isPause=!1,o.Scene.emit(h.KLM_Update_Money),o.Scene.emit(h.KLM_Update_Smile),o.Scene.emit(h.KLM_Update_Time),o.Scene.emit(h.KLM_Hide_New_Takeout_Order),o.Scene.emit(h.KLM_Start_NewDay_Dialog)}generateRandomTakeoutOrders(){const e=this.takeoutOrderConfig.find((e=>5===e.day));if(!e||0===e.takeoutOrders.length)return console.warn("第5天的外卖订单配置不存在或为空"),[];const t=[...e.takeoutOrders],i=[],n=Math.min(5,t.length);for(let e=0;e<n;e++){const e=Math.floor(Math.random()*t.length),n={...t[e]};i.push(n),t.splice(e,1)}const s=this.generateOrderTimes(n);return i.map(((e,t)=>{e.showTime=s[t];const i=s[t][0]+2;return e.expireTime=[i,s[t][1]],e}))}generateOrderTimes(e){const t=Array.from({length:9},((e,t)=>t+9)),i=[0,15,30,45],n=[];for(const e of t)for(const t of i)n.push([e,t]);for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}const s=n.slice(0,e);return s.sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]-t[1])),s}resetCustomer(e){this.currentCustomer=e,this.isRefuse=!1,this.missingStockIngredients=[],this.currentSellingPrice=0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.startCookingTime=this.currentTime,this.currentCookedSteps=[],this.notes=[],this.startCookingTime=this.currentTime,this.currentSmile=100,this.isPacked=!1,this.isPause=!1,o.Scene.emit(h.KLM_Update_Smile)}resetTakout(e){this.currentTakeoutOrder=e,this.takeoutNotes=[],this.isTakeout=!0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.currentCookedSteps=[],this.isPacked=!1,this.isPause=!1}passDay(){this.playerData.currentDay++,this.saveData(),u.Instance.showPanel(c.KLM_GameUI,null,(()=>{u.Instance.showPanel(c.KLM_DialoguePanel,null,(()=>{u.Instance.showPanel(c.TipPanel),this.scheduleOnce((()=>{u.Instance.showPanel(c.KLM_GamePanel,null,null,l.PreLoad_at_Bottom),u.Instance.hidePanel(c.StartPanel),u.Instance.hidePanel(c.PassPanel),u.Instance.hidePanel(c.LoadingPanel,(()=>{u.Instance.hidePanel(c.TablePanel),o.Scene.emit(h.showTableItem),this.resetDay()}))}),.5)}),l.NONE)}),l.NONE)}startCooking(){this.isTakeout?(this.currentSellingPrice=this.calculateSellingPrice(this.currentTakeoutOrder.order),o.Scene.emit(h.KLM_Hide_smile)):(this.currentSellingPrice=this.calculateSellingPrice(this.currentCustomer.order),o.Scene.emit(h.KLM_Show_smile)),this.playerData.money+=this.currentSellingPrice,this.daySellingPrice+=this.currentSellingPrice,d.getInstance().playSound("收银"),o.Scene.emit(h.KLM_Update_Money),u.Instance.showPanel(c.KLM_GamePanel),1!=e.Instance.playerData.currentDay||e.Instance.isTutorialEnd||u.Instance.showPanel(c.KLM_TutorialPanel,null,null,l.SLIDE_FROM_BOTTOM),u.Instance.hidePanel(c.KLM_DialoguePanel),u.Instance.hidePanel(c.KLM_TakeoutPanel,null,l.SLIDE_TO_TOP),this.isCooking=!0,this.needShowTakeoutCome=!1,this.isPause=!1,o.Scene.emit(h.Game_Resume)}endCooking(){this.pack(),this.isTakeout?(this.checkOrder(this.currentTakeoutOrder.order),o.Scene.emit(h.KLM_Hide_smile)):(this.checkOrder(this.currentCustomer.order),o.Scene.emit(h.KLM_Show_smile)),u.Instance.showPanel(c.KLM_DialoguePanel,!0,(()=>{this.isTakeout?(o.Scene.emit(h.KLM_Show_Takeout_End_Dialog),o.Scene.emit(h.KLM_Show_Dish_Node)):(o.Scene.emit(h.KLM_Show_End_Dialog_Sp),o.Scene.emit(h.KLM_Show_Dish_Node)),this.isEndingDialog=!0,u.Instance.hidePanel(c.KLM_GamePanel)}),l.SLIDE_FROM_TOP),this.isCooking=!1,o.Scene.emit(h.Game_Resume)}checkoutCustomer(){if(this.calculateRefund(this.currentCustomer.order),this.refund>0)return this.playerData.money-=this.refund,o.Scene.emit(h.KLM_Update_Money),void(this.refund=0);this.calculateAddTip(),this.currentSellingAddTip>0&&(o.Scene.emit(h.KLM_Show_Add_Tip),this.playerData.money+=this.currentSellingAddTip,o.Scene.emit(h.KLM_Update_Money),this.currentSellingAddTip=0)}checkoutDay(){o.Scene.emit(h.hideTableItem),u.Instance.showPanel(c.TablePanel),u.Instance.showPanel(c.LoadingPanel,(()=>{u.Instance.showPanel(c.KLM_CheckoutPanel)}))}startNewDay(){}addOneHour(){this.currentTime+=this.MINUTES_PER_HOUR,this.updateLogic()}update(e){this.isPause||!this.isCooking||this.isDayEnd||this.isTakeout||(this.currentTime+=e,this.updateLogic())}updateLogic(){const e=this.currentTime/this.MINUTES_PER_HOUR,t=8+Math.floor(e);t!==this.currentHour&&e>=this.lastHourUpdate+1&&(this.currentHour=t,this.lastHourUpdate=Math.floor(e));const i=60*e,n=Math.floor(i/this.MINUTE_INTERVAL),s=n%4*this.MINUTE_INTERVAL;s!==this.currentMinute&&i>=this.lastMinuteUpdate+this.MINUTE_INTERVAL&&(this.currentMinute=s,this.lastMinuteUpdate=n*this.MINUTE_INTERVAL),this.currentHour>=19&&(this.currentTime=this.totalTime-13*this.MINUTES_PER_HOUR,this.currentHour=19,this.currentMinute=0,this.isDayEnd=!0),o.Scene.emit(h.KLM_Update_Time);for(let e=this.currentDayTakeoutConfig.length-1;e>=0;e--){const t=this.currentDayTakeoutConfig[e],[i,n]=t.showTime;if(this.currentHour>i||this.currentHour===i&&this.currentMinute>=n){const i={id:Date.now(),avatarName:t.avatarName,customerName:t.customerName,expireTime:t.expireTime,content:t.content,remark:t.remark,order:t.order,price:0,status:M.UNHANDLED,missingStockIngredients:[]};i.price=this.calculateSellingPrice(t.order),i.missingStockIngredients=this.checkTakeoutStock(t.order),this.currentTakeoutOrders.push(i),o.Scene.emit(h.KLM_ORDER_DATA_UPDATED),this.isCooking?this.needShowTakeoutCome=!0:o.Scene.emit(h.KLM_New_Takeout_Order),this.currentDayTakeoutConfig.splice(e,1)}}for(let e=0;e<this.currentTakeoutOrders.length;e++){const t=this.currentTakeoutOrders[e];if(t.status===M.UNHANDLED){const[e,i]=t.expireTime;(this.currentHour>e||this.currentHour===e&&this.currentMinute>=i)&&(t.status=M.TIMEOUT,o.Scene.emit(h.KLM_ORDER_DATA_UPDATED))}}if(!this.isTakeout){const e=60*((this.currentTime-this.startCookingTime)/this.MINUTES_PER_HOUR)/6;this.currentSmile=Math.max(0,100-Math.floor(e)),o.Scene.emit(h.KLM_Update_Smile)}}buyNewIngredient(e){this.playerData.stock[e]=1}resetOrderCheckResult(){this.orderCheckResult=this.initOrderCheckResult()}checkStock(){let e=this.currentCustomer.order;return this.missingStockIngredients=[],Object.keys(e).forEach((t=>{if(1===e[t].need){void 0!==this.playerData.stock[t]&&this.playerData.stock[t]>0||this.missingStockIngredients.push(t)}})),0===this.missingStockIngredients.length}checkTakeoutStock(e){let t=[];return Object.keys(e).forEach((i=>{if(1===e[i].need){void 0!==this.playerData.stock[i]&&this.playerData.stock[i]>0||t.push(i)}})),t}calculateSellingPrice(e){let t=0;for(let i in e){let n=e[i];if(0==n.need)continue;const s=this.ingredientsConfigObject[i];if(!s){console.log(`LSF_DataManager: 未找到材料配置 ${i},订单：`,e);continue}let r=s.sellingPrice;n.type==P.SPICE?r=s.sellingPrice*n.count:n.type==P.SPREAD?r=s.sellingPrice*n.percentage:n.type==P.EGG&&(r=s.sellingPrice*n.count),t+=r}return t}pack(){Object.keys(this.sauceTypeCount).forEach((t=>{let i=0;this.sauceTypeCount[t].forEach((e=>{i+=e}));let n=i/this.standardSpreadCount;e.Instance.currentDishes[t]||(e.Instance.currentDishes[t]={type:P.SPREAD,need:1,count:1,percentage:0,rotateCount:0}),this.currentDishes[t].percentage=n}))}checkOrder(e){let t=this.currentDishes;this.resetOrderCheckResult();const i=this.orderCheckResult;Object.keys(t).forEach((t=>{e[t]&&0===e[t].need&&i.extraIngredients.push(t)})),Object.keys(e).forEach((n=>{1!==e[n].need||t[n]||i.missingIngredients.push(n)})),Object.keys(e).forEach((n=>{const s=e[n],r=t[n];if(1===s.need&&r)switch(s.type){case P.SPICE:this.checkSpiceIngredient(n,s,r,i);break;case P.SPREAD:this.checkSpreadIngredient(n,s,r,i);break;case P.EGG:this.checkEggIngredient(n,s,r,i)}}))}checkSpiceIngredient(e,t,i,n){if(void 0!==t.count)if(i.count<t.count)n.lessCountIngredients.push(e);else if(i.count>t.count){-1==["浅色酱","油","调味酱","花生酱","芝麻酱"].indexOf(e)&&n.moreCountIngredients.push(e)}}checkSpreadIngredient(e,t,i,n){void 0!==t.percentage&&(i.percentage<t.percentage?n.lessSpreadIngredients.push(e):i.percentage>t.percentage+50&&n.moreSpreadIngredients.push(e))}checkEggIngredient(e,t,i,n){void 0!==t.count&&void 0!==t.rotateCount&&(i.count<t.count?n.lessCountIngredients.push(e):i.count>t.count&&n.moreCountIngredients.push(e),i.rotateCount<t.rotateCount&&n.lessRotateIngredients.push(e))}calculateRefund(e){return this.refund=0,this.orderCheckResult.extraIngredients.length>0?(this.refund+=.8*this.currentSellingPrice,this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),void(this.dayRefund+=this.refund)):(this.orderCheckResult.missingIngredients.length>0&&this.orderCheckResult.missingIngredients.forEach((t=>{const i=e[t];switch(i.type){case P.SPICE:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count;break;case P.SPREAD:this.refund+=1*this.ingredientsConfigObject[t].sellingPrice;break;case P.EGG:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count}})),this.orderCheckResult.lessCountIngredients.length>0&&this.orderCheckResult.lessCountIngredients.forEach((t=>{const i=this.currentDishes[t],n=e[t];this.refund+=this.ingredientsConfigObject[t].sellingPrice*(n.count-i.count)})),this.currentSmile<30&&(this.refund+=(30-this.currentSmile)/30*this.currentSellingPrice),this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),this.dayRefund+=this.refund,this.refund)}calculateAddTip(){this.currentSellingAddTip=0,this.orderCheckResult.extraIngredients.length>0||this.orderCheckResult.missingIngredients.length>0||this.orderCheckResult.lessCountIngredients.length>0||this.orderCheckResult.lessSpreadIngredients.length>0||this.orderCheckResult.moreSpreadIngredients.length>0||this.orderCheckResult.lessRotateIngredients.length>0||(this.orderCheckResult.moreCountIngredients.length>0&&(this.currentSellingAddTip+=this.orderCheckResult.moreCountIngredients.length+2),this.currentSmile>60&&(this.currentSellingAddTip+=(this.currentSmile-60)/40*this.totalSellingTip),this.currentSellingAddTip>this.totalSellingTip&&(this.currentSellingAddTip=this.totalSellingTip),this.daySellingAddTip+=this.currentSellingAddTip)}onGamePause(){this.isPause=!0}onGameResume(){this.isPause=!1}saveData(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.playerData))}addListener(){o.on(h.Game_Pause,this.onGamePause,this),o.on(h.Game_Resume,this.onGameResume,this)}removeListener(){o.off(h.Game_Pause,this.onGamePause,this),o.off(h.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener()}}).Instance=void 0,k=t((_=I).prototype,"ingredientsConfigJson",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(_.prototype,"TipConfigJson",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(_.prototype,"TakeoutOrderConfigJson",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=_))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_DialogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Banner.ts","./XCT_KLM_DataManager.ts","./XCT_Events.ts","./XCT_AudioManager.ts"],(function(t){var e,n,s,i,a,r,o,l,c,u,h,g,d,m,C,I,p,D,f,y,T,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.JsonAsset,a=t.Node,r=t.Label,o=t.Button,l=t._decorator,c=t.Component,u=t.Graphics,h=t.Mask,g=t.instantiate,d=t.Layout,m=t.v3,C=t.tween},function(t){I=t.EventManager},function(t){p=t.default},function(t){D=t.XCT_KLM_DataManager,f=t.XCT_KLM_ButtonAction,y=t.XCT_KLM_OrderStatus},function(t){T=t.XCT_Events},function(t){S=t.XCT_AudioManager}],execute:function(){var k,_,b,E,v,x,M,w,L,P,A,N,R,B,K,G,O,X,j,z,U,$;s._RF.push({},"c731aUm7x9MQY7f963178yU","XCT_KLM_DialogManager",void 0);const{ccclass:V,property:H}=l;t("XCT_KLM_DialogManager",(k=V("XCT_KLM_DialogManager"),_=H({type:i}),b=H({type:i}),E=H({type:i}),v=H(a),x=H(a),M=H(r),w=H(a),L=H(r),P=H(o),k((($=class t extends c{constructor(...t){super(...t),n(this,"gameConfig",R,this),n(this,"specialDialogConfig",B,this),n(this,"endingDialogConfig",K,this),n(this,"dialogPanel",G,this),n(this,"customerNode",O,this),n(this,"dialogText",X,this),n(this,"buttonContainer",j,this),n(this,"missingTip",z,this),n(this,"buttonPrefab",U,this),this.dayConfigs=[],this.specialDialogConfigs={},this.endingDialogConfigs={},this.currentCustomers=[],this.currentCustomer=null,this.currentSegmentIndex=0,this.isStartDialog=!0,this.dialogConfig=[],this.dialogEndCallback=null,this.isAngry=!1,this.currentText="",this.tween=null,this.timers=[],this.nextTimerId=0,this.isAllTimersPaused=!1}onLoad(){this.addListener(),t.Instance=this,this.dialogPanel.active=!1,this.missingTip.node.active=!1,this.dayConfigs=this.gameConfig.json,this.specialDialogConfigs=this.specialDialogConfig.json,this.endingDialogConfigs=this.endingDialogConfig.json,this.dialogPanel.active=!1}startCustomerDialog(t,e=!0,n=!1){this.currentCustomer=t,this.isStartDialog=e,this.dialogConfig=e?t.startDialogs:t.endDialogs,(!e&&!this.dialogConfig||n)&&(this.dialogConfig=this.endingDialogConfigs[t.avatar]);let s=null;e?n?(this.currentSegmentIndex=9,this.isAngry=!0,this.currentSegmentIndex++):this.currentSegmentIndex=1:("外卖员"===t.avatar?this.currentSegmentIndex=0:D.Instance.currentSmile<30?(this.currentSegmentIndex=8,this.isAngry=!0):0!==D.Instance.orderCheckResult.extraIngredients.length?(this.currentSegmentIndex=1,this.isAngry=!0,s=D.Instance.orderCheckResult.extraIngredients.join("、")):0!==D.Instance.orderCheckResult.missingIngredients.length?(this.currentSegmentIndex=2,this.isAngry=!0,s=D.Instance.orderCheckResult.missingIngredients.join("、")):0!==D.Instance.orderCheckResult.lessCountIngredients.length?(this.currentSegmentIndex=3,this.isAngry=!0,s=D.Instance.orderCheckResult.lessCountIngredients.join("、")):0!==D.Instance.orderCheckResult.moreCountIngredients.length?(this.currentSegmentIndex=7,s=D.Instance.orderCheckResult.moreCountIngredients.join("、")):this.currentSegmentIndex=0,this.currentSegmentIndex++),this.loadSp(this.currentCustomer.avatar),this.dialogPanel.active=!0,this.showCurrentSegment(s)}showCurrentSegment(t=null){if(this.currentSegmentIndex>=this.dialogConfig.length+1)return void this.leave();const e=this.dialogConfig[this.currentSegmentIndex-1];if(e.checkStock){const t=D.Instance.checkStock();this.updateStockTip(t)}else this.missingTip.node.active=!1;null!==t&&(e.text=e.text.replace("${}",t)),this.currentText=e.text,this.dialogText.string=e.text,this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!0,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!0,this.clearButtons(),this.createButtons(e),this.addTimer(.07,(()=>{this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!1,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!1})),this.addTimer(2,(()=>{this.dialogEndCallback&&this.dialogEndCallback(),this.dialogEndCallback=null}))}createButtons(t){if(D.Instance.missingStockIngredients.length>0&&!D.Instance.isRefuse){const t=g(this.buttonPrefab.node);t.parent=this.buttonContainer;t.getComponentInChildren(r).string=`进货：${D.Instance.missingStockIngredients[0]}`,t.getChildByName("sign_video").active=!0,t.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),t.active=!0,t.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.buyIngredient()}));const e=g(this.buttonPrefab.node);e.parent=this.buttonContainer;e.getComponentInChildren(r).string="不接待",e.getChildByName("sign_video").active=!1,e.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),e.active=!0,e.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.refuse()}))}else t.buttons.forEach(((e,n)=>{if(e.action==f.LEAVE)this.dialogEndCallback=this.leave;else if(e.action==f.DELIVER_TAKE_OUT)this.dialogEndCallback=this.deliverTakeOut;else if(e.action==f.TAKE_DISH)this.dialogEndCallback=()=>{this.takeDish(e)};else{const s=g(this.buttonPrefab.node);s.parent=this.buttonContainer;s.getComponent(o);s.getComponentInChildren(r).string=this.getButtonText(e,n),D.Instance.missingStockIngredients.length>0&&0===n&&(s.getChildByName("sign_video").active=!0),s.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),s.active=!0,s.on(o.EventType.CLICK,(()=>{S.getInstance().playSound("点击"),this.onButtonClick(e,t)}))}}))}getButtonText(t,e){return D.Instance.missingStockIngredients.length>0&&0===e?`进货：${D.Instance.missingStockIngredients[0]}`:t.text}onButtonClick(t,e){let n=t.action;switch(n===f.START_MAKE&&D.Instance.missingStockIngredients.length>0&&(n=f.BUY_INGREDIENT),n!==f.BUY_INGREDIENT&&D.Instance.notes.push([this.currentText,t.text]),n){case f.START_MAKE:this.startMaking();break;case f.NEXT_DIALOG:this.nextSegment(t);break;case f.BUY_INGREDIENT:this.buyIngredient();break;case f.GET_TAKE_OUT:this.getTakeOutProgect(t);break;case f.DELIVER_TAKE_OUT:this.deliverTakeOut();break;case f.TAKE_DISH:this.takeDish(t);break;case f.REFUSE:this.refuse();break;case f.END_DIALOG:this.leave()}}startMaking(){D.Instance.isTakeout=!1,D.Instance.startCooking()}buyIngredient(){if(D.Instance.missingStockIngredients.length>0){const t=D.Instance.missingStockIngredients.shift();console.log(`购买了食材：${t}`),p.Instance.ShowVideoAd((()=>{D.Instance.playerData.stock[t]?D.Instance.playerData.stock[t]++:D.Instance.playerData.stock[t]=1,0===D.Instance.missingStockIngredients.length?this.missingTip.node.active=!1:this.missingTip.string=`缺少配料：${D.Instance.missingStockIngredients[0]}`,this.showCurrentSegment()}))}}nextSegment(t){if(!t)return this.currentSegmentIndex++,void this.showCurrentSegment();t.nextSegment&&-1!==t.nextSegment?(this.currentSegmentIndex=t.nextSegment,this.showCurrentSegment()):(this.currentSegmentIndex++,this.showCurrentSegment())}getTakeOutProgect(t){D.Instance.playerData.isTakeOutProjectSet=!0,I.Scene.emit(T.showTableItem),t&&this.nextSegment(t)}deliverTakeOut(){this.dialogPanel.active=!1,this.clearButtons(),D.Instance.isEndingDialog=!1,this.move(!1,(()=>{D.Instance.currentTakeoutOrder.status=y.DELIVERED,D.Instance.isDayEnd?D.Instance.checkoutDay():this.addTimer(.5,(()=>{this.restartCurrentCustomerDialog()}))}))}takeDish(t){let e=()=>{this.dialogPanel.active=!0,this.nextSegment(t),I.off(T.Dish_Drag_End,e,this)};I.on(T.Dish_Drag_End,e,this)}refuse(){D.Instance.isRefuse=!0,this.startCustomerDialog(D.Instance.currentCustomer,!0,!0)}leave(){this.dialogPanel.active=!1,this.clearButtons(),this.isStartDialog||D.Instance.checkoutCustomer(),D.Instance.isEndingDialog=!1,this.move(!1,(()=>{6===D.Instance.dayCustomerCount&&(D.Instance.isDayEnd=!0),D.Instance.isDayEnd?D.Instance.checkoutDay():this.addTimer(.5,(()=>{this.nextCustomer()}))}))}enter(t){this.move(!0,(()=>{t&&t()}))}move(t,e){t?(this.customerNode.setScale(m(1,0,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1.1,.9,1)}).to(.2,{scale:m(1,1,1)}).call((()=>{e()})).start()):(this.customerNode.setScale(m(1,1,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1,0,1)}).call((()=>{e()})).start())}clearButtons(){this.buttonContainer.children.forEach((t=>{t.destroy()}))}updateStockTip(t){!t&&D.Instance.missingStockIngredients.length>0?(this.missingTip.node.active=!0,this.missingTip.string=`缺少配料：${D.Instance.missingStockIngredients[0]}`):this.missingTip.node.active=!1}loadSp(t){this.customerNode.children.forEach((e=>{e.active=!1,e.name===t&&(e.active=!0,e.getChildByName("smile").active=!this.isAngry,e.getChildByName("angry").active=this.isAngry,this.isAngry=!1)}))}startNewDayDialog(){let t=D.Instance.playerData.currentDay>=7?7:D.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers,D.Instance.playerData.currentDay>=7?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex=0,this.startNextCustomerDialog())}startNextCustomerDialog(){let t=D.Instance.playerData.currentDay>=7?7:D.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers);let n=null;if(D.Instance.playerData.isTakeOutProjectSet)for(n=this.currentCustomers[D.Instance.currentCustomerIndex];"外卖员"==n.avatar;)D.Instance.playerData.currentDay>=7?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,n=this.currentCustomers[D.Instance.currentCustomerIndex];else n=this.currentCustomers[D.Instance.currentCustomerIndex];n?(D.Instance.resetCustomer(n),this.loadSp(n.avatar),this.enter((()=>{this.startCustomerDialog(n)}))):console.log(`第${D.Instance.playerData.currentDay}天结束`)}restartCurrentCustomerDialog(){this.startNextCustomerDialog()}showTakeoutEndDialog(){D.Instance.isEndingDialog&&(D.Instance.isEndingDialog=!1,"外卖员"!==D.Instance.currentCustomer.avatar&&(D.Instance.checkoutCustomer(),D.Instance.playerData.currentDay>=7?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,D.Instance.dayCustomerCount++)),D.Instance.missingStockIngredients=[],this.dialogPanel.active=!1,this.customerNode.setScale(m(1,0,1));const t=this.specialDialogConfigs["外卖员"];t&&(this.loadSp(t.avatar),this.enter((()=>{this.startCustomerDialog(t,!1)})))}nextCustomer(){D.Instance.playerData.currentDay>=7?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,D.Instance.dayCustomerCount++,D.Instance.addOneHour(),this.startNextCustomerDialog()}showEndDialogSp(){this.dialogPanel.active=!1,this.loadSp(D.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1))}continueCustomerDialog(){this.loadSp(D.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1)),this.startCustomerDialog(D.Instance.currentCustomer,!1)}onGamePause(){this.tween&&this.tween.pause(),this.pauseAllTimers()}onGameResume(){this.tween&&this.tween.resume(),this.resumeAllTimers()}addListener(){I.on(T.KLM_Start_NewDay_Dialog,this.startNewDayDialog,this),I.on(T.KLM_Show_End_Dialog_Sp,this.showEndDialogSp,this),I.on(T.KLM_Continue_Customer_EndDialog,this.continueCustomerDialog,this),I.on(T.KLM_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),I.on(T.Game_Pause,this.onGamePause,this),I.on(T.Game_Resume,this.onGameResume,this)}removeListener(){I.off(T.KLM_Start_NewDay_Dialog,this.startNewDayDialog,this),I.off(T.KLM_Show_End_Dialog_Sp,this.showEndDialogSp,this),I.off(T.KLM_Continue_Customer_EndDialog,this.continueCustomerDialog,this),I.off(T.KLM_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),I.off(T.Game_Pause,this.onGamePause,this),I.off(T.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener(),this.clearAllTimers()}update(t){if(0!==this.timers.length)for(let e=this.timers.length-1;e>=0;e--){const n=this.timers[e];if(!n.isPaused&&!this.isAllTimersPaused&&(n.elapsed+=t,n.elapsed>=n.duration)){try{n.callback()}catch(t){console.error("Timer callback error:",t)}this.timers.splice(e,1)}}}addTimer(t,e){const n=this.nextTimerId++,s={id:n,duration:t,elapsed:0,callback:e,isPaused:!1};return this.timers.push(s),n}pauseTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!0,!0)}resumeTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!1,!0)}removeTimer(t){const e=this.timers.findIndex((e=>e.id===t));return-1!==e&&(this.timers.splice(e,1),!0)}pauseAllTimers(){this.isAllTimersPaused=!0}resumeAllTimers(){this.isAllTimersPaused=!1}getTimerRemainingTime(t){const e=this.timers.find((e=>e.id===t));return e?Math.max(0,e.duration-e.elapsed):null}clearAllTimers(){this.timers=[],this.isAllTimersPaused=!1}}).Instance=void 0,R=e((N=$).prototype,"gameConfig",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(N.prototype,"specialDialogConfig",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(N.prototype,"endingDialogConfig",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(N.prototype,"dialogPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(N.prototype,"customerNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(N.prototype,"dialogText",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(N.prototype,"buttonContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(N.prototype,"missingTip",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(N.prototype,"buttonPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=N))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_DialoguePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,i,n,a,o,s,h,r,l,d,c,u,C,T,m,p,_,b,g,y,k,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,o=t._decorator,s=t.instantiate,h=t.v3,r=t.Label,l=t.UIOpacity,d=t.tween,c=t.Vec3,u=t.Animation,C=t.Button},function(t){T=t.EventManager},function(t){m=t.XCT_BasePanel,p=t.XCT_PanelAnimation},function(t){_=t.XCT_UILayer},function(t){b=t.XCT_UIManager},function(t){g=t.XCT_UIPanel},function(t){y=t.XCT_Events},function(t){k=t.XCT_KLM_DataManager},function(t){w=t.XCT_AudioManager}],execute:function(){var f,v,I,D,N,P,A,L,S,M,O,B,K,E,X,z,U,j,F,H,V;n._RF.push({},"89357ifCZRBYYHMGLSFk4sl","XCT_KLM_DialoguePanel",void 0);const{ccclass:R,property:x}=o;t("XCT_KLM_DialoguePanel",(f=R("XCT_KLM_DialoguePanel"),v=x(a),I=x(a),D=x(a),N=x(a),P=x(a),A=x(a),L=x(a),S=x(a),M=x(a),f((K=e((B=class extends m{constructor(...t){super(...t),this.defaultShowAnimation=p.SLIDE_FROM_TOP,this.defaultHideAnimation=p.SLIDE_TO_TOP,this.defaultLayer=_.Dialog,this.animationDuration=.6,i(this,"tableItems",K,this),i(this,"moneyItem",E,this),i(this,"moneyContainer",X,this),i(this,"btnTakeout",z,this),i(this,"dishNode",U,this),i(this,"dishPos1",j,this),i(this,"dishPos2",F,this),i(this,"btnCat",H,this),i(this,"dargTurtrialAnim",V,this),this.isCatClicked=!1,this.needShowDish=!1,this.isAddedEvent=!1,this.takeoutTween=null,this.cb=null}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}onShowComplete(){this.cb&&this.cb(),this.cb=null}init(t=!0){this.dishNode.active=this.needShowDish,this.needShowDish=!1,this.dargTurtrialAnim.active=!1,t?this.onShowTableItem():this.hideTableItem(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,this.btnTakeout.getChildByName("nodeVideo").active=!1,k.Instance.needShowTakeoutCome&&this.showTakeoutCom(),this.isCatClicked=!1,k.Instance.isCatDriveAway=!1,1==k.Instance.playerData.currentDay||k.Instance.playerData.isAdoptedCat?this.btnCat.active=!1:this.btnCat.active=!0,this.btnCat.getChildByName("dialogue2").active=!1}hideTableItem(){this.tableItems.forEach((t=>{t.active=!1}))}onShowTableItem(){this.tableItems.forEach((t=>{t.active=!0})),this.btnTakeout.active=k.Instance.playerData.isTakeOutProjectSet,this.btnTakeout.getChildByName("nodeVideo").active=!k.Instance.playerData.isTakeOutProjectOpen}onShowAddTip(){this.moneyContainer.removeAllChildren();const t=s(this.moneyItem);t.parent=this.moneyContainer,t.setPosition(h(0,0,0)),t.getComponentInChildren(r).string="小费+"+k.Instance.currentSellingAddTip,t.setPosition(0,-200),t.getComponent(l).opacity=255,t.active=!0,d(t).to(1.5,{position:new c(0,200,0)},{easing:"sineIn"}).parallel(d(t.getComponent(l)).to(1.5,{opacity:0})).call((()=>{t.destroy()})).start()}onClickTakeout(){if(w.getInstance().playSound("点击"),k.Instance.playerData.isTakeOutProjectOpen){if(k.Instance.isEndingDialog)return void T.Scene.emit(y.showTip,"请先完成当前订单");this.takeoutTween&&this.takeoutTween.stop(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,b.Instance.showPanel(g.KLM_TakeoutPanel)}else b.Instance.showPanel(g.KLM_TipPanel,null,(()=>{T.Scene.emit(y.KLM_ShowTip_OpenTakeout)}))}showTakeoutCom(){if(k.Instance.playerData.isTakeOutProjectOpen){if(k.Instance.isShowingTakeoutPanel)return;this.btnTakeout.getChildByName("nodeOrderCome").active=!0,this.takeoutTween=d(this.btnTakeout.getChildByName("nodeOrderCome")).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.3,{scale:new c(.9,.9,.9)}).union().repeatForever().start()}else this.btnTakeout.getChildByName("nodeVideo").active=!0}hideTakeoutCom(){this.btnTakeout.getChildByName("nodeOrderCome").active=!1}takeoutOpen(){this.btnTakeout.getChildByName("nodeVideo").active=!1}onCatClick(){w.getInstance().playSound("猫"),this.isCatClicked=!this.isCatClicked;let t=this.btnCat.getChildByName("dialogue2"),e=t.getChildByName("btnDriveAway"),i=t.getChildByName("btnAdopt");e.active=!0,i.active=!0,this.isCatClicked?(t.active=!0,e.off("click"),e.on("click",this.onBtnDriveAwayClick,this),i.off("click"),i.on("click",this.onBtnAdoptClick,this)):(t.active=!1,e.off("click"),i.off("click"))}onBtnDriveAwayClick(){k.Instance.isCatDriveAway=!0;let t=this.btnCat.getChildByName("dialogue2");t.getChildByName("heart").getChildByName("heart_1").active=!1,t.getChildByName("heart").getChildByName("heart_2").active=!0,t.getChildByName("btnDriveAway").active=!1,t.getChildByName("btnAdopt").active=!1,this.scheduleOnce((()=>{this.btnCat.active=!1}),1)}onBtnAdoptClick(){k.Instance.playerData.isAdoptedCat=!0,this.btnCat.active=!1}showDishNode(){this.cb=()=>{this.needShowDish=!0,this.dishNode.active=!0,this.dishNode.setWorldPosition(h(this.dishPos1.worldPosition.x,this.dishPos1.worldPosition.y-300,this.dishPos1.worldPosition.z)),d(this.dishNode).to(.5,{worldPosition:this.dishPos1.worldPosition}).call((()=>{k.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.active=!0,this.dargTurtrialAnim.getComponent(u).play())})).start()}}hideDishNode(){this.dishNode.active=!1}dishDragEnd(){k.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.getComponent(u).stop(),this.dargTurtrialAnim.active=!1,k.Instance.isNeedShowDragTutorial=!1),k.Instance.isTakeout||T.Scene.emit(y.KLM_Continue_Customer_EndDialog)}addListener(){T.on(y.showTableItem,this.onShowTableItem,this),T.on(y.hideTableItem,this.hideTableItem,this),T.on(y.KLM_Show_Add_Tip,this.onShowAddTip,this),T.on(y.KLM_Takeout_Open,this.takeoutOpen,this),T.on(y.KLM_Takeout_Open,this.takeoutOpen,this),T.on(y.KLM_New_Takeout_Order,this.showTakeoutCom,this),T.on(y.KLM_Hide_New_Takeout_Order,this.hideTakeoutCom,this),T.on(y.KLM_Show_Dish_Node,this.showDishNode,this),T.on(y.Dish_Drag_End,this.dishDragEnd,this),this.btnTakeout.on(C.EventType.CLICK,this.onClickTakeout,this),this.btnCat.on(C.EventType.CLICK,this.onCatClick,this)}removeListener(){T.off(y.showTableItem,this.onShowTableItem,this),T.off(y.hideTableItem,this.hideTableItem,this),T.off(y.KLM_Show_Add_Tip,this.onShowAddTip,this),T.off(y.KLM_New_Takeout_Order,this.showTakeoutCom,this),T.off(y.KLM_Hide_New_Takeout_Order,this.hideTakeoutCom,this),T.off(y.KLM_Takeout_Open,this.takeoutOpen,this),T.off(y.KLM_Show_Dish_Node,this.showDishNode,this),T.off(y.Dish_Drag_End,this.dishDragEnd,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tableItems",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=e(B.prototype,"moneyItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(B.prototype,"moneyContainer",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(B.prototype,"btnTakeout",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(B.prototype,"dishNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(B.prototype,"dishPos1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(B.prototype,"dishPos2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(B.prototype,"btnCat",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(B.prototype,"dargTurtrialAnim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=B))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Egg.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_KLM_DataManager.ts","./EventManager.ts","./XCT_Events.ts"],(function(e){var t,n,i,o,s,a,r,c,d,h,l,g,u,C,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Node,s=e._decorator,a=e.Component,r=e.Animation,c=e.v3,d=e.UITransform,h=e.v2,l=e.instantiate},function(e){g=e.XCT_KLM_DataManager,u=e.XCT_KLM_IngredientType},function(e){C=e.EventManager},function(e){p=e.XCT_Events}],execute:function(){var T,f,v,y,_;i._RF.push({},"71d7dE1MXxJyKbkkFwWLdrG","XCT_KLM_Egg",void 0);const{ccclass:I,property:m}=s;e("XCT_KLM_Egg",(T=I("XCT_KLM_Egg"),f=m(o),T((_=t((y=class extends a{constructor(...e){super(...e),this.startPos=null,this.targetPos=null,this.eggPrefab=null,n(this,"targetArea",_,this),this.isCanMove=!1}onLoad(){this.startPos=this.node.getWorldPosition(),this.targetPos=this.targetArea.getWorldPosition(),this.node.getChildByName("selected").active=!1,this.eggPrefab=this.node.getChildByName("eggPrefab"),this.eggPrefab.active=!1,this.eggPrefab.getComponent(r).play(),this.node.on(o.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(o.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(o.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(o.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchStart(e){if(g.Instance.isPacked)return void C.Scene.emit(p.showTip,"卷冷面后不可再添加材料哦！");let t=!1,n=["油"];if(g.Instance.currentCookedSteps.forEach((e=>{t||n.includes(e)&&(t=!0)})),!t)return C.Scene.emit(p.showTip,"要先刷油才可以放冷面皮哦！"),void(this.isCanMove=!1);let i=!1,o=["冷面皮"];if(g.Instance.currentCookedSteps.forEach((e=>{i||o.includes(e)&&(i=!0)})),!i)return C.Scene.emit(p.showTip,"请先放置冷面皮！"),void(this.isCanMove=!1);if(1==g.Instance.playerData.currentDay&&!g.Instance.isTutorialEnd){if(-1==[2].indexOf(g.Instance.tutorialIdx))return}C.Scene.emit(p.KLM_Cancel_All_Ingredients),this.isCanMove=!0;const s=e.getUILocation();this.node.setWorldPosition(c(s.x,s.y,0)),this.node.getChildByName("selected").active=!0}onTouchMove(e){if(!this.isCanMove)return;if(1==g.Instance.playerData.currentDay&&!g.Instance.isTutorialEnd){if(-1==[2].indexOf(g.Instance.tutorialIdx))return}const t=e.getUILocation();this.node.setWorldPosition(c(t.x,t.y,0))}onTouchEnd(e){if(!this.isCanMove)return;if(this.targetArea.getComponent(d).getBoundingBoxToWorld().contains(h(this.node.getWorldPosition().x,this.node.getWorldPosition().y))){let e=l(this.eggPrefab);e.parent=this.targetArea.getChildByName("Contanter"),e.setWorldPosition(this.targetPos),e.active=!0,this.node.setWorldPosition(this.startPos),this.node.getChildByName("selected").active=!1,g.Instance.currentCookedSteps.push(this.node.name),2==g.Instance.tutorialIdx&&(C.Scene.emit(p.HandAnimation_End),g.Instance.tutorialIdx++),g.Instance.currentDishes[this.node.name]||(g.Instance.currentDishes[this.node.name]={type:u.SPICE,need:1,count:0,percentage:0,rotateCount:0}),g.Instance.currentDishes[this.node.name].count++,g.Instance.playerData.money-=g.Instance.ingredientsConfigObject[this.node.name].cost,g.Instance.dayCost+=g.Instance.ingredientsConfigObject[this.node.name].cost,C.Scene.emit(p.KLM_Update_Money)}else this.node.setWorldPosition(this.startPos),this.node.getChildByName("selected").active=!1}}).prototype,"targetArea",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_GamePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,o,s,r,l,h,c,d,u,g,C,m,p,f,P,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,s=e.instantiate,r=e.Label,l=e.tween,h=e.UITransform,c=e.v2},function(e){d=e.EventManager},function(e){u=e.XCT_BasePanel,g=e.XCT_PanelAnimation},function(e){C=e.XCT_UILayer},function(e){m=e.XCT_UIManager},function(e){p=e.XCT_UIPanel},function(e){f=e.XCT_Events},function(e){P=e.XCT_KLM_DataManager},function(e){y=e.XCT_AudioManager}],execute:function(){var _,I,N,w,v,b,T,k,B,M,L,E,X,D,S,A,K,U,z;i._RF.push({},"6a2857t5/xCX4WrfoQwu5V7","XCT_KLM_GamePanel",void 0);const{ccclass:G,property:R}=o;e("XCT_KLM_GamePanel",(_=G("XCT_KLM_GamePanel"),I=R(a),N=R(a),w=R(a),v=R(a),b=R(a),T=R(a),k=R(a),B=R(a),_((E=t((L=class extends u{constructor(...e){super(...e),this.defaultShowAnimation=g.SLIDE_FROM_BOTTOM,this.defaultHideAnimation=g.SLIDE_TO_BOTTOM,this.defaultLayer=C.Game,this.animationDuration=.6,n(this,"ingredientContainer",E,this),n(this,"spreadIngredientContainer",X,this),n(this,"btnNote",D,this),n(this,"NotePanel",S,this),n(this,"NotePos1",A,this),n(this,"NotePos2",K,this),n(this,"btnNoteClose",U,this),n(this,"paws",z,this),this.isAddedEvent=!1,this.catIngredient=[],this.stealInterval=2,this.stealTimer=0,this.isPawPated=!1,this.tween=null}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.updateIngredientContainer(),this.NotePanel.active=!1,this.paws.forEach((e=>{e.active=!1}))}onCompleted(){P.Instance.endCooking()}updateIngredientContainer(){let e=0;this.catIngredient=[],this.ingredientContainer.children.forEach((t=>{P.Instance.playerData.stock[t.name]&&P.Instance.playerData.stock[t.name]>0?(t.active=!0,e++,this.catIngredient.push(t)):t.active=!1})),e<this.ingredientContainer.children.length-1&&(this.ingredientContainer.getChildByName("空_配料").active=!0,this.ingredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.spreadIngredientContainer.children.forEach((t=>{P.Instance.playerData.stock[t.name]&&P.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.spreadIngredientContainer.children.length-1&&(this.spreadIngredientContainer.getChildByName("空_配料").active=!0,this.spreadIngredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this))}onClickEmptyIngredient(){d.Scene.emit(f.Hide_TutorialPanel),m.Instance.showPanel(p.KLM_ShopPanel,!0)}onClickNote(){y.getInstance().playSound("点击"),d.Scene.emit(f.Hide_TutorialPanel),this.NotePanel.active=!0;let e=this.NotePanel.getChildByName("noteNode"),t=this.NotePanel.getChildByName("takeoutNoteNode");e.active=!P.Instance.isTakeout,t.active=P.Instance.isTakeout;let n=P.Instance.isTakeout?"takeoutNoteNode":"noteNode",i=this.NotePanel.getChildByName(n),a=i.getChildByName("noteContainer"),o=P.Instance.isTakeout?P.Instance.takeoutNotes:P.Instance.notes;a.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1}));let h=a.children[0];o.forEach((e=>{let t=s(h);t.parent=a,t.getChildByName("lblQustion").getComponent(r).string=e[0],t.getChildByName("lblAnswer").getComponent(r).string=e[1],t.active=!0})),i.setWorldPosition(this.NotePos1.worldPosition),l(i).to(.3,{worldPosition:this.NotePos2.worldPosition}).start()}onClickCloseNote(){d.Scene.emit(f.Show_TutorialPanel),this.NotePanel.active=!1}update(e){if(!(P.Instance.isPause||P.Instance.playerData.isAdoptedCat||P.Instance.isCatDriveAway||1==P.Instance.playerData.currentDay)&&P.Instance.isCooking&&(this.stealTimer+=e,this.stealTimer>=this.stealInterval)){this.stealInterval=2*Math.random()+15,this.stealTimer=0;let e=Math.floor(Math.random()*this.paws.length),t=this.paws[e];if(0!==e){if(1==e&&this.catIngredient.length<2)return;if(2==e&&this.catIngredient.length<4)return;if(3==e&&this.catIngredient.length<7)return}this.catSteal(t,e)}}catSteal(e,t){e.active=!0,e.getChildByName("button").off("click"),e.getChildByName("button").on("click",(()=>this.onPawClick(e)),this);let n=e.getChildByName("pawSp"),i=e.getChildByName("pawPos_0"),a=e.getChildByName("pawPos_1"),o=n.getChildByName("ingredientContainer");o.active=!1,e.getChildByName("nodePat").active=!1;let s=null;n.setWorldPosition(i.worldPosition),this.tween=l(n).to(1.5,{worldPosition:a.worldPosition}).delay(1).call((()=>{if(0!==t){let t=e.getChildByName("pawPos").getWorldPosition();this.catIngredient.forEach((e=>{if(s)return;e.getComponent(h).getBoundingBoxToWorld().contains(c(t.x,t.y))&&(s=e.name)}))}else s="鸡蛋";o.children.forEach((e=>{e.name!==s?e.active=!1:e.active=!0})),o.active=!0})).to(.2,{worldPosition:i.worldPosition}).call((()=>{e.active=!1;let t=P.Instance.ingredientsConfigObject[s].cost;P.Instance.playerData.money-=t,d.Scene.emit(f.KLM_Update_Money),this.tween=null})).start()}onPawClick(e){y.getInstance().playSound("猫2"),this.tween&&this.tween.stop();let t=e.getChildByName("pawSp"),n=e.getChildByName("pawPos_0");t.getChildByName("ingredientContainer").active=!1,e.getChildByName("nodePat").active=!0,this.tween=null,this.tween=l(t).to(.2,{worldPosition:n.worldPosition}).call((()=>{e.active=!1,this.tween=null})).start()}onPause(){this.tween&&this.tween.pause()}onResume(){this.tween&&this.tween.resume()}addListener(){d.on(f.KLM_Update_Ingredient,this.updateIngredientContainer,this),d.on(f.KLM_Completed,this.onCompleted,this),d.on(f.Game_Pause,this.onPause,this),d.on(f.Game_Resume,this.onResume,this),this.btnNote.on("click",this.onClickNote,this),this.btnNoteClose.on("click",this.onClickCloseNote,this)}removeListener(){d.off(f.KLM_Update_Ingredient,this.updateIngredientContainer,this),d.off(f.KLM_Completed,this.onCompleted,this),d.off(f.Game_Pause,this.onPause,this),d.off(f.Game_Resume,this.onResume,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"ingredientContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(L.prototype,"spreadIngredientContainer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(L.prototype,"btnNote",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(L.prototype,"NotePanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(L.prototype,"NotePos1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(L.prototype,"NotePos2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(L.prototype,"btnNoteClose",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"paws",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=L))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,a,l,s,o,r,u,h,c,d,p,m,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,l=e.Label,s=e._decorator,o=e.Sprite},function(e){r=e.EventManager},function(e){u=e.XCT_BasePanel,h=e.XCT_PanelAnimation},function(e){c=e.XCT_UILayer},function(e){d=e.XCT_UIManager},function(e){p=e.XCT_UIPanel},function(e){m=e.XCT_Events},function(e){_=e.XCT_KLM_DataManager},function(e){b=e.XCT_AudioManager}],execute:function(){var f,M,y,T,S,g,I,L,w,C,U,K,X,v,D,A,P,E,N,k,z;n._RF.push({},"7fdb9GIrlZCZYW16D5OZ+W8","XCT_KLM_GameUI",void 0);const{ccclass:B,property:G}=s;e("XCT_KLM_GameUI",(f=B("XCT_KLM_GameUI"),M=G(a),y=G(a),T=G(l),S=G(l),g=G(a),I=G(l),L=G(l),w=G(a),C=G(a),f((X=t((K=class extends u{constructor(...e){super(...e),this.defaultShowAnimation=h.NONE,this.defaultHideAnimation=h.NONE,this.defaultLayer=c.GameUI,this.animationDuration=.6,i(this,"btnMore",X,this),i(this,"spSun",v,this),i(this,"lblDay",D,this),i(this,"lblTime",A,this),i(this,"smileNode",P,this),i(this,"lblSmile",E,this),i(this,"lblMoney",N,this),i(this,"btnAdd",k,this),i(this,"btnShowTipBack",z,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){_.Instance.isDayEnd?this.smileNode.active=!1:this.smileNode.active=!0,this.updateUI()}updateUI(){this.lblDay.string="第"+_.Instance.playerData.currentDay+"天",this.updateTime(),this.updateSmile(),this.lblMoney.string=_.Instance.playerData.money.toFixed(1)}updateMoney(){this.lblMoney.string=_.Instance.playerData.money.toFixed(1)}updateTime(){const e=_.Instance.currentHour.toString().padStart(2,"0"),t=_.Instance.currentMinute.toString().padStart(2,"0");this.lblTime.string=`${e}:${t}`,this.spSun.getComponent(o).fillRange=-(_.Instance.currentTime+8*_.Instance.MINUTES_PER_HOUR)/_.Instance.totalTime}updateSmile(){this.lblSmile.string=_.Instance.currentSmile.toString()+"%"}onClickAdd(){b.getInstance().playSound("点击"),d.Instance.showPanel(p.KLM_TipPanel,null,(()=>{r.Scene.emit(m.KLM_ShowTip_NoMoney)}))}hideSmile(){this.smileNode.active=!1}showSmile(){this.smileNode.active=!0}showBackTipPanel(){b.getInstance().playSound("点击"),d.Instance.showPanel(p.KLM_TipPanel,null,(()=>{r.Scene.emit(m.KLM_ShowTip_Back)}))}addListener(){r.on(m.KLM_Update_Money,this.updateMoney,this),r.on(m.KLM_Update_Time,this.updateTime,this),r.on(m.KLM_Update_Smile,this.updateSmile,this),r.on(m.KLM_Hide_smile,this.hideSmile,this),r.on(m.KLM_Show_smile,this.showSmile,this),this.btnAdd.on("click",this.onClickAdd,this),this.btnShowTipBack.on("click",this.showBackTipPanel,this)}removeListener(){r.off(m.KLM_Update_Money,this.updateMoney,this),r.off(m.KLM_Update_Time,this.updateTime,this),r.off(m.KLM_Update_Smile,this.updateSmile,this),r.off(m.KLM_Hide_smile,this.hideSmile,this),r.off(m.KLM_Show_smile,this.showSmile,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"btnMore",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(K.prototype,"spSun",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(K.prototype,"lblDay",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(K.prototype,"lblTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(K.prototype,"smileNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(K.prototype,"lblSmile",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(K.prototype,"lblMoney",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(K.prototype,"btnAdd",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(K.prototype,"btnShowTipBack",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=K))||U));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Ingredient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,s,a,o,r,c,d,l,h,u,g,I,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.Node,a=e._decorator,o=e.Component,r=e.instantiate,c=e.v3,d=e.Vec3,l=e.Tween},function(e){h=e.EventManager},function(e){u=e.XCT_Events},function(e){g=e.XCT_KLM_DataManager,I=e.XCT_KLM_IngredientType},function(e){m=e.XCT_AudioManager}],execute:function(){var C,_,p,T,f;i._RF.push({},"f37fbZIy39KN541Fqgjs37/","XCT_KLM_Ingredient",void 0);const{ccclass:y,property:S}=a;e("XCT_KLM_Ingredient",(C=y("XCT_KLM_Ingredient"),_=S(s),C((f=t((T=class extends o{constructor(...e){super(...e),n(this,"targetArea",f,this),this.ingredientPrefab=null,this.isTouching=!1,this.tween=null,this.count=0}onLoad(){this.addListener(),this.ingredientPrefab=this.node.getChildByName("ingredient"),this.node.getChildByName("ingredient").active=!1,this.node.getChildByName("selected").active=!1}onTouchStart(e){const t=e.getUILocation();let n=r(this.ingredientPrefab);n.parent=this.targetArea.getChildByName("Contanter"),n.setWorldPosition(c(t.x,t.y,0)),n.setScale(c(2,2,2)),n.eulerAngles=new d(0,0,20),this.count++,g.Instance.currentCookedSteps.push(this.node.name),5==g.Instance.tutorialIdx&&"生菜"==this.node.name&&(h.Scene.emit(u.HandAnimation_End),g.Instance.tutorialIdx++),7==g.Instance.tutorialIdx&&"洋葱"==this.node.name&&(h.Scene.emit(u.HandAnimation_End),g.Instance.tutorialIdx++),g.Instance.currentDishes[this.node.name]||(g.Instance.currentDishes[this.node.name]={type:I.SPICE,need:1,count:0,percentage:0,rotateCount:0}),g.Instance.currentDishes[this.node.name].count++,m.getInstance().playSound("放"),g.Instance.playerData.money-=g.Instance.ingredientsConfigObject[this.node.name].cost,g.Instance.dayCost+=g.Instance.ingredientsConfigObject[this.node.name].cost,h.Scene.emit(u.KLM_Update_Money)}onTouchEnd(e){}update(e){}onKLM_Cancel_Click(){this.stopScaleSingleItem(),this.removeTouchListener()}onClick(){if(g.Instance.isPacked)return void h.Scene.emit(u.showTip,"卷冷面后不可再添加材料哦！");let e=!1,t=["油"];if(g.Instance.currentCookedSteps.forEach((n=>{e||t.includes(n)&&(e=!0)})),!e)return void h.Scene.emit(u.showTip,"要先刷油才可以放冷面皮哦！");let n=!1,i=["冷面皮"];if(g.Instance.currentCookedSteps.forEach((e=>{n||i.includes(e)&&(n=!0)})),!n)return void h.Scene.emit(u.showTip,"请先放置冷面皮！");let s=!1,a=["鸡蛋"];if(g.Instance.currentCookedSteps.forEach((e=>{s||a.includes(e)&&(s=!0)})),!s)return void h.Scene.emit(u.showTip,"请先放置鸡蛋！");let o=!1,r=["浅色酱","芝麻","调味酱","花生酱"];if(g.Instance.currentCookedSteps.forEach((e=>{o||r.includes(e)&&(o=!0)})),o){if(1==g.Instance.playerData.currentDay&&!g.Instance.isTutorialEnd){if(-1==[4,6].indexOf(g.Instance.tutorialIdx))return;if(4==g.Instance.tutorialIdx&&"生菜"!==this.node.name)return;if(6==g.Instance.tutorialIdx&&"洋葱"!==this.node.name)return}h.Scene.emit(u.KLM_Cancel_All_Ingredients),4==g.Instance.tutorialIdx&&"生菜"==this.node.name&&(h.Scene.emit(u.HandAnimation_End),g.Instance.tutorialIdx++),6==g.Instance.tutorialIdx&&"洋葱"==this.node.name&&(h.Scene.emit(u.HandAnimation_End),g.Instance.tutorialIdx++),this.node.getChildByName("ingredient").active=!0,this.sacleSingeItem(),this.addTouchListener()}else h.Scene.emit(u.showTip,"要先刷上酱料，才能放置配料哦！")}sacleSingeItem(){this.node.getChildByName("selected").active=!0;let e=this.node.getChildByName("ingredient");e.active=!0;const t=e.scale.clone();this.tween=new l(e).to(.5,{scale:new d(1.2*t.x,1.2*t.y,t.z)}).to(.5,{scale:t}).union().repeatForever().start()}stopScaleSingleItem(){this.node.getChildByName("selected").active=!1;let e=this.node.getChildByName("ingredient");e.active=!1,this.tween&&(this.tween.stop(),this.tween=null,e.scale=new d(1,1,1)),console.log("点击次数:",this.count)}addTouchListener(){this.targetArea.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.on(s.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.targetArea.off(s.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.off(s.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){h.on(u.KLM_Cancel_All_Ingredients,this.onKLM_Cancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){h.off(u.KLM_Cancel_All_Ingredients,this.onKLM_Cancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"targetArea",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=T))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Pack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts"],(function(e){var t,n,i,r,c,o,a,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Node,c=e._decorator,o=e.Component},function(e){a=e.EventManager},function(e){s=e.XCT_Events},function(e){l=e.XCT_KLM_DataManager}],execute:function(){var d,u,p,h,f,C,_,m,v;i._RF.push({},"71b7dEgjmpPZpYNwY03Yx9C","XCT_KLM_Pack",void 0);const{ccclass:k,property:I}=c;e("XCT_KLM_Pack",(d=k("XCT_KLM_Pack"),u=I(r),p=I(r),h=I(r),d((_=t((C=class extends o{constructor(...e){super(...e),n(this,"cookArea",_,this),n(this,"pieceNodes",m,this),n(this,"dividers",v,this)}onLoad(){this.node.on("click",this.onClick,this)}onClick(){if(l.Instance.isPacked)return void a.Scene.emit(s.showTip,"不能重复卷冷面哦！");let e=!1,t=["油"];if(l.Instance.currentCookedSteps.forEach((n=>{e||t.includes(n)&&(e=!0)})),!e)return void a.Scene.emit(s.showTip,"要先刷油才可以放冷面皮哦！");let n=!1,i=["冷面皮"];if(l.Instance.currentCookedSteps.forEach((e=>{n||i.includes(e)&&(n=!0)})),!n)return void a.Scene.emit(s.showTip,"请先放置冷面皮！");let r=!1,c=["鸡蛋"];if(l.Instance.currentCookedSteps.forEach((e=>{r||c.includes(e)&&(r=!0)})),!r)return void a.Scene.emit(s.showTip,"请先放置鸡蛋！");let o=!1,d=["浅色酱","芝麻","调味酱","花生酱"];if(l.Instance.currentCookedSteps.forEach((e=>{o||d.includes(e)&&(o=!0)})),!o)return void a.Scene.emit(s.showTip,"要先刷上酱料，才能放置配料哦！");let u=!1,p=["洋葱","生菜","火腿肠","辣白菜","鸡柳","辣条","猪排","芝士","鱼片"];if(l.Instance.currentCookedSteps.forEach((e=>{u||p.includes(e)&&(u=!0)})),u){if(1==l.Instance.playerData.currentDay&&!l.Instance.isTutorialEnd){if(-1==[8].indexOf(l.Instance.tutorialIdx))return}8==l.Instance.tutorialIdx&&(a.Scene.emit(s.HandAnimation_End),l.Instance.tutorialIdx++),a.Scene.emit(s.KLM_Cancel_All_Ingredients),l.Instance.isPacked=!0,l.Instance.currentCookedSteps.push(this.node.name),this.cookArea.children.forEach((e=>{e.getChildByName("Contanter")&&"layer_Completed"!==e.name&&e.getChildByName("Contanter").children.forEach((e=>{e.active=!0,e.destroy()}))})),this.dividers.forEach((e=>{e.active=!0})),this.pieceNodes.forEach((e=>{e.active=!0,e.getChildByName("before").active=!0,e.getChildByName("after").active=!1}))}else a.Scene.emit(s.showTip,"要先撒上配料，才能卷面皮哦！")}}).prototype,"cookArea",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(C.prototype,"pieceNodes",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=t(C.prototype,"dividers",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=C))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Pies.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_KLM_DataManager.ts","./EventManager.ts","./XCT_Events.ts"],(function(e){var t,n,i,s,o,a,r,c,d,h,l,u,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.Node,o=e._decorator,a=e.Component,r=e.v3,c=e.UITransform,d=e.v2,h=e.instantiate},function(e){l=e.XCT_KLM_DataManager,u=e.XCT_KLM_IngredientType},function(e){g=e.EventManager},function(e){p=e.XCT_Events}],execute:function(){var C,T,v,_,P;i._RF.push({},"7115dFgWNJCXbp7YgWiGAW/","XCT_KLM_Pies",void 0);const{ccclass:f,property:y}=o;e("XCT_KLM_Pies",(C=f("XCT_KLM_Pies"),T=y(s),C((P=t((_=class extends a{constructor(...e){super(...e),this.startPos=null,this.targetPos=null,this.piePrefab=null,n(this,"targetArea",P,this),this.isCanMove=!1}onLoad(){this.startPos=this.node.getWorldPosition(),this.targetPos=this.targetArea.getWorldPosition(),this.node.getChildByName("selected").active=!1,this.piePrefab=this.node.getChildByName("piePrefab"),this.piePrefab.active=!1,this.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchStart(e){if(l.Instance.isPacked)return void g.Scene.emit(p.showTip,"卷冷面后不可再添加材料哦！");if(l.Instance.currentCookedSteps.includes("冷面皮"))return void g.Scene.emit(p.showTip,"冷面皮只可以放一张！");let t=!1,n=["油"];if(l.Instance.currentCookedSteps.forEach((e=>{t||n.includes(e)&&(t=!0)})),!t)return g.Scene.emit(p.showTip,"要先刷油才可以放冷面皮哦！"),void(this.isCanMove=!1);if(1==l.Instance.playerData.currentDay&&!l.Instance.isTutorialEnd){if(-1==[1].indexOf(l.Instance.tutorialIdx))return}g.Scene.emit(p.KLM_Cancel_All_Ingredients),this.isCanMove=!0;const i=e.getUILocation();this.node.setWorldPosition(r(i.x,i.y,0)),this.node.getChildByName("selected").active=!0}onTouchMove(e){if(!this.isCanMove)return;const t=e.getUILocation();this.node.setWorldPosition(r(t.x,t.y,0))}onTouchEnd(e){if(!this.isCanMove)return;if(this.targetArea.getComponent(c).getBoundingBoxToWorld().contains(d(this.node.getWorldPosition().x,this.node.getWorldPosition().y))){let e=h(this.piePrefab);e.parent=this.targetArea.getChildByName("Contanter"),e.setWorldPosition(this.targetPos),e.active=!0,this.node.setWorldPosition(this.startPos),this.node.getChildByName("selected").active=!1,1==l.Instance.tutorialIdx&&(g.Scene.emit(p.HandAnimation_End),l.Instance.tutorialIdx++),l.Instance.currentCookedSteps.push(this.node.name),l.Instance.currentDishes[this.node.name]||(l.Instance.currentDishes[this.node.name]={type:u.SPICE,need:1,count:0,percentage:0,rotateCount:0}),l.Instance.currentDishes[this.node.name].count++,l.Instance.playerData.money-=l.Instance.ingredientsConfigObject[this.node.name].cost,l.Instance.dayCost+=l.Instance.ingredientsConfigObject[this.node.name].cost,g.Scene.emit(p.KLM_Update_Money)}else this.node.setWorldPosition(this.startPos),this.node.getChildByName("selected").active=!1}}).prototype,"targetArea",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=_))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_SauceTouch2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,o,n,a,h,r,u,c,l,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.Prefab,n=t.Node,a=t._decorator,h=t.Component,r=t.Input,u=t.instantiate,c=t.v3,l=t.UITransform,b=t.Vec3}],execute:function(){var d,T,p,P,y,C,g;s._RF.push({},"eb8e0Qhq2BFqbg2rkwJzrgX","XCT_KLM_SauceTouch2",void 0);const{ccclass:m,property:f}=a;t("XCT_KLM_SauceLayer2",(d=m("XCT_KLM_SauceLayer2"),T=f(o),p=f(n),d((C=e((y=class extends h{constructor(...t){super(...t),this.pan=null,this.breshPrefab=null,this.breshNode=null,this.toolsLayer=null,i(this,"maskPointPrefab",C,this),i(this,"maskPointContainer",g,this),this.isTouching=!1,this.daubInterval=.1,this.daubTimer=0,this.isCanDaub=!0,this.count=0}onLoad(){this.node.on(r.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(r.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(r.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(r.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}init(t,e,i){this.pan=t,this.breshPrefab=e,this.toolsLayer=i}onTouchStart(t){this.isTouching=!1,this.daubTimer=0;const e=t.getLocation();this.breshNode=u(this.breshPrefab),this.breshNode.parent=this.toolsLayer,this.breshNode.setWorldPosition(c(e.x,e.y,0));const i=this.pan.getComponent(l),s=i.convertToNodeSpaceAR(new b(e.x,e.y,0)),o=i.width,n=i.height;Math.abs(s.x)<=o/2&&Math.abs(s.y)<=n/2&&(this.isCanDaub=!1,this.createMaskPoint(e))}onTouchMove(t){if(!this.isCanDaub)return;const e=t.getLocation();if(!this.breshNode)return;this.breshNode.setWorldPosition(c(e.x,e.y,0));const i=this.pan.getComponent(l),s=i.convertToNodeSpaceAR(new b(e.x,e.y,0)),o=i.width,n=i.height;Math.abs(s.x)<=o/2&&Math.abs(s.y)<=n/2&&(this.isCanDaub=!1,this.createMaskPoint(e))}onTouchEnd(){this.isTouching=!1,console.log("点击次数:",this.count),this.breshNode.destroy()}createMaskPoint(t){this.count++;const e=u(this.maskPointPrefab);e.parent=this.maskPointContainer;let i=e.getChildByName("SourceSp");i.setParent(this.maskPointContainer),i.setPosition(c(0,0,0)),e.setPosition(c(t.x,t.y,0));let s=i.getWorldPosition();i.setParent(e),i.setPosition(c(s.x,s.y,0))}update(t){this.isTouching&&(this.daubTimer+=t,this.daubTimer>=this.daubInterval&&(this.daubTimer=0,this.isCanDaub=!0))}}).prototype,"maskPointPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(y.prototype,"maskPointContainer",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_ShopPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,a,i,o,s,r,c,l,h,p,u,C,y,d,m,g,I,_,b,P,S,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.Node,o=e.SpriteFrame,s=e._decorator,r=e.instantiate,c=e.Sprite,l=e.v3,h=e.Label,p=e.Color,u=e.Button},function(e){C=e.EventManager},function(e){y=e.ProjectEventManager,d=e.ProjectEvent},function(e){m=e.XCT_BasePanel,g=e.XCT_PanelAnimation},function(e){I=e.XCT_UILayer},function(e){_=e.XCT_UIManager},function(e){b=e.XCT_UIPanel},function(e){P=e.XCT_Events},function(e){S=e.XCT_KLM_DataManager},function(e){f=e.XCT_AudioManager}],execute:function(){var D,M,v,L,T,N,E,k,B,K,X,w,R;a._RF.push({},"06b144n6VxE2IFW9S0UGzuh","XCT_KLM_ShopPanel",void 0);const{ccclass:U,property:x}=s;e("XCT_KLM_ShopPanel",(D=U("XCT_KLM_ShopPanel"),M=x(i),v=x(o),L=x(i),T=x(i),N=x(i),D((B=t((k=class extends m{constructor(...e){super(...e),this.defaultShowAnimation=g.NONE,this.defaultHideAnimation=g.NONE,this.defaultLayer=I.Pop2,this.animationDuration=.6,n(this,"shopItemContainer",B,this),n(this,"ingredientSpes",K,this),n(this,"btnCheckoutPanel",X,this),n(this,"btnNextDay",w,this),n(this,"btnReturn",R,this),this.currentData=new Map,this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(e=!1){y.emit(d.弹出窗口,"小吃摊"),S.Instance.isShowingShopPanel=!0,C.Scene.emit(P.Game_Pause),this.initShopItem(),e?(this.btnCheckoutPanel.active=!1,this.btnNextDay.active=!1,this.btnReturn.active=!0):(this.btnCheckoutPanel.active=!0,this.btnNextDay.active=!0,this.btnReturn.active=!1)}initShopItem(){this.shopItemContainer.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1})),S.Instance.ingredientsConfig.forEach(((e,t)=>{let n=e.name;if(!(void 0!==S.Instance.playerData.stock[n]&&S.Instance.playerData.stock[n]>0)){let a=this.shopItemContainer.children[0],i=r(a);i.parent=this.shopItemContainer,i.name=n,i.getChildByName("icon").getComponent(c).spriteFrame=this.ingredientSpes[t],"土豆面"!==n&&"白面团"!==n||i.getChildByName("icon").setScale(l(.65,.65,.65)),"油条"===n&&i.getChildByName("icon").setScale(l(.9,.9,.9)),i.getChildByName("lblName").getComponent(h).string=n,i.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).string=e.price.toString();let o=S.Instance.playerData.money>=e.price?p.WHITE:p.RED;i.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=o,this.currentData.set(n,e.price),i.active=!0,i.getChildByName("btnBuy").on(u.EventType.CLICK,(()=>{this.onClickBuy(n)}),this)}}))}updateShopItem(){this.shopItemContainer.children.forEach((e=>{let t=S.Instance.playerData.money>=this.currentData.get(e.name)?p.WHITE:p.RED;e.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=t}))}onClickBuy(e){S.Instance.playerData.money<S.Instance.ingredientsConfigObject[e].price?_.Instance.showPanel(b.KLM_TipPanel,null,(()=>{C.Scene.emit(P.KLM_ShowTip_NoMoney)})):(S.Instance.playerData.stock[e]?S.Instance.playerData.stock[e]++:S.Instance.playerData.stock[e]=1,S.Instance.playerData.money-=S.Instance.ingredientsConfigObject[e].price,C.Scene.emit(P.KLM_Update_Money),C.Scene.emit(P.KLM_Update_Ingredient),this.shopItemContainer.getChildByName(e).destroy(),this.currentData.delete(e))}onClickCheckout(){f.getInstance().playSound("点击"),_.Instance.showPanel(b.KLM_CheckoutPanel)}onClickNextDay(){f.getInstance().playSound("点击"),_.Instance.showPanel(b.PassPanel,{tipConfig:S.Instance.tipConfig,currentDay:S.Instance.playerData.currentDay,passDayCb:()=>{S.Instance.passDay()}},(()=>{_.Instance.hidePanel(b.KLM_ShopPanel),_.Instance.hidePanel(b.KLM_GameUI)})),S.Instance.isHadShowShop=!1}onClickReturn(){f.getInstance().playSound("点击"),C.Scene.emit(P.Show_TutorialPanel),_.Instance.hidePanel(b.KLM_ShopPanel),C.Scene.emit(P.Game_Resume),S.Instance.isShowingShopPanel=!1}addListener(){C.on(P.KLM_Update_Money,this.updateShopItem,this),this.btnCheckoutPanel.on(u.EventType.CLICK,this.onClickCheckout,this),this.btnNextDay.on(u.EventType.CLICK,this.onClickNextDay,this),this.btnReturn.on(u.EventType.CLICK,this.onClickReturn,this)}removeListener(){C.off(P.KLM_Update_Money,this.updateShopItem,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"shopItemContainer",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(k.prototype,"ingredientSpes",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=t(k.prototype,"btnCheckoutPanel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(k.prototype,"btnNextDay",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(k.prototype,"btnReturn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=k))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Shovel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_KLM_DataManager.ts","./EventManager.ts","./XCT_Events.ts"],(function(e){var t,i,o,n,s,r,a,c,d,h,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e.Node,s=e._decorator,r=e.Component,a=e.v3,c=e.UITransform,d=e.v2},function(e){h=e.XCT_KLM_DataManager},function(e){l=e.EventManager},function(e){u=e.XCT_Events}],execute:function(){var v,p,C,f,T,_,g;o._RF.push({},"6c443Cr5sxMjboojSEIMIZF","XCT_KLM_Shovel",void 0);const{ccclass:y,property:M}=s;e("XCT_KLM_Shovel",(v=y("XCT_KLM_Shovel"),p=M(n),C=M(n),v((_=t((T=class extends r{constructor(...e){super(...e),i(this,"dividers",_,this),i(this,"pieceNodes",g,this),this.dividerCount=0,this.startPos=null,this.isCanMove=!1}onLoad(){this.startPos=this.node.getWorldPosition(),this.dividers.forEach((e=>{e.active=!1})),this.pieceNodes.forEach((e=>{e.getChildByName("before").active=!0,e.getChildByName("after").active=!1,e.active=!1})),this.node.on(n.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(n.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(n.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(n.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onTouchStart(e){let t=!1,i=["卷冷面"];if(h.Instance.currentCookedSteps.forEach((e=>{t||i.includes(e)&&(t=!0)})),!t)return l.Scene.emit(u.showTip,"请先卷好冷面，才能切开哦！"),void(this.isCanMove=!1);if(1==h.Instance.playerData.currentDay&&!h.Instance.isTutorialEnd){if(-1==[9].indexOf(h.Instance.tutorialIdx))return}l.Scene.emit(u.KLM_Cancel_All_Ingredients),this.isCanMove=!0;const o=e.getUILocation();this.node.setWorldPosition(a(o.x,o.y,0))}onTouchMove(e){if(!this.isCanMove)return;const t=e.getUILocation();this.node.setWorldPosition(a(t.x,t.y,0));let i=!1,o=-1;this.dividers.forEach(((e,t)=>{if(!i&&e.active){const n=e.getComponent(c);i=n.getBoundingBoxToWorld().contains(d(this.node.getWorldPosition().x,this.node.getWorldPosition().y)),i&&(9==h.Instance.tutorialIdx&&this.dividerCount++,o=t,e.active=!1)}})),-1!=o&&(h.Instance.currentCookedSteps.push(this.node.name),9==h.Instance.tutorialIdx&&3==this.dividerCount&&(l.Scene.emit(u.HandAnimation_End),h.Instance.tutorialIdx++),this.pieceNodes[o].getChildByName("before").active=!1,this.pieceNodes[o].getChildByName("after").active=!0,1!=o&&2!=o||(this.pieceNodes[o+1].getChildByName("before").active=!1,this.pieceNodes[o+1].getChildByName("after").active=!0))}onTouchEnd(e){this.isCanMove&&this.node.setWorldPosition(this.startPos)}}).prototype,"dividers",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(T.prototype,"pieceNodes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=T))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_Spoon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_KLM_DataManager.ts","./XCT_Events.ts","./EventManager.ts"],(function(t){var n,e,i,o,s,a,r,c,h,u,d,l,p,C;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,s=t._decorator,a=t.Component,r=t.v3,c=t.UITransform,h=t.v2,u=t.instantiate},function(t){d=t.XCT_KLM_DataManager,l=t.XCT_KLM_IngredientType},function(t){p=t.XCT_Events},function(t){C=t.EventManager}],execute:function(){var m,T,I,f,P,g,v;i._RF.push({},"3305cupqfRFRq7nHxQlJcW9","XCT_KLM_Spoon",void 0);const{ccclass:_,property:b}=s;t("XCT_KLM_Spoon",(m=_("XCT_KLM_Spoon"),T=b(o),I=b(o),m((g=n((P=class extends a{constructor(...t){super(...t),e(this,"pie",g,this),this.maskPointPrefab=null,e(this,"maskPointContainer",v,this),this.daubCount=0,this.startPos=null,this.isTouching=!1,this.daubInterval=.05,this.daubTimer=0,this.isCanDaub=!0,this.isCanMove=!1}onLoad(){this.maskPointPrefab=this.node.getChildByName("maskPointPrefab"),this.maskPointPrefab.active=!1,this.node.on(o.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(o.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(o.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(o.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}init(t){this.pie=t}onTouchStart(t){if(d.Instance.isPacked)return void C.Scene.emit(p.showTip,"卷冷面后不可再添加材料哦！");if("油"!==this.node.parent.name){let t=!1,n=["油"];if(d.Instance.currentCookedSteps.forEach((e=>{t||n.includes(e)&&(t=!0)})),!t)return C.Scene.emit(p.showTip,"要先刷油才可以放冷面皮哦！"),void(this.isCanMove=!1);let e=!1,i=["冷面皮"];if(d.Instance.currentCookedSteps.forEach((t=>{e||i.includes(t)&&(e=!0)})),!e)return C.Scene.emit(p.showTip,"请先放置冷面皮！"),void(this.isCanMove=!1);let o=!1,s=["鸡蛋"];if(d.Instance.currentCookedSteps.forEach((t=>{o||s.includes(t)&&(o=!0)})),!o)return C.Scene.emit(p.showTip,"请先放置鸡蛋！"),void(this.isCanMove=!1)}if(1==d.Instance.playerData.currentDay&&!d.Instance.isTutorialEnd){if(-1==[0,3].indexOf(d.Instance.tutorialIdx))return;if(0==d.Instance.tutorialIdx&&"油"!==this.node.parent.name)return;if(3==d.Instance.tutorialIdx&&"浅色酱"!==this.node.parent.name)return}C.Scene.emit(p.KLM_Cancel_All_Ingredients),this.isCanMove=!0,this.isTouching=!0,this.daubTimer=0,this.startPos=this.node.getPosition();const n=t.getUILocation();this.node.setWorldPosition(r(n.x,n.y,0));this.pie.getComponent(c).getBoundingBoxToWorld().contains(h(this.node.getWorldPosition().x,this.node.getWorldPosition().y))&&(this.isCanDaub=!1,this.createMaskPoint(n))}onTouchMove(t){if(!this.isCanMove)return;if(1==d.Instance.playerData.currentDay&&!d.Instance.isTutorialEnd){if(-1==[0,3].indexOf(d.Instance.tutorialIdx))return;if(0==d.Instance.tutorialIdx&&"油"!==this.node.parent.name)return;if(3==d.Instance.tutorialIdx&&"浅色酱"!==this.node.parent.name)return}const n=t.getUILocation();if(this.node.setWorldPosition(r(n.x,n.y,0)),!this.isCanDaub)return;this.pie.getComponent(c).getBoundingBoxToWorld().contains(h(this.node.getWorldPosition().x,this.node.getWorldPosition().y))&&(this.isCanDaub=!1,this.createMaskPoint(n))}onTouchEnd(t){this.isCanMove&&(this.isTouching=!1,console.log("点击次数:",this.daubCount),this.daubCount>0&&(0==d.Instance.tutorialIdx&&"油"==this.node.parent.name&&(C.Scene.emit(p.HandAnimation_End),d.Instance.tutorialIdx++),3==d.Instance.tutorialIdx&&"浅色酱"==this.node.parent.name&&(C.Scene.emit(p.HandAnimation_End),d.Instance.tutorialIdx++),d.Instance.currentCookedSteps.push(this.node.parent.name),d.Instance.currentDishes[this.node.parent.name]?d.Instance.currentDishes[this.node.parent.name].count++:d.Instance.currentDishes[this.node.parent.name]={type:l.SPICE,need:1,count:1,percentage:0,rotateCount:0},d.Instance.playerData.money-=d.Instance.ingredientsConfigObject[this.node.parent.name].cost,d.Instance.dayCost+=d.Instance.ingredientsConfigObject[this.node.parent.name].cost,C.Scene.emit(p.KLM_Update_Money)),this.node.setPosition(this.startPos))}createMaskPoint(t){this.daubCount++;const n=u(this.maskPointPrefab);n.parent=this.maskPointContainer,n.active=!0;let e=n.getChildByName("Sp");e.setParent(this.maskPointContainer),e.setPosition(r(0,0,0)),n.setWorldPosition(r(t.x,t.y,0));let i=e.getWorldPosition();e.setParent(n),e.setWorldPosition(r(i.x,i.y,0))}update(t){this.isTouching&&(this.daubTimer+=t,this.daubTimer>=this.daubInterval&&(this.daubTimer=0,this.isCanDaub=!0))}}).prototype,"pie",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(P.prototype,"maskPointContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=P))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_TakeoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./EventManager.ts","./Banner.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,r,s,o,l,c,d,h,u,g,p,C,m,f,y,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,r=e.Node,s=e._decorator,o=e.instantiate,l=e.Button},function(e){c=e.XCT_BasePanel,d=e.XCT_PanelAnimation},function(e){h=e.XCT_UILayer},function(e){u=e.XCT_UIManager},function(e){g=e.XCT_UIPanel},function(e){p=e.XCT_Events},function(e){C=e.XCT_KLM_DataManager,m=e.XCT_KLM_OrderStatus},function(e){f=e.EventManager},function(e){y=e.default},function(e){I=e.XCT_AudioManager}],execute:function(){var T,v,_,b,N,E,L,k,S,P,M,D,B;i._RF.push({},"310c5VWifJKybbNLEmyY8EM","XCT_KLM_TakeoutPanel",void 0);const{ccclass:O,property:A}=s;e("XCT_KLM_TakeoutPanel",(T=O("XCT_KLM_TakeoutPanel"),v=A({type:a}),_=A({type:r}),b=A({type:r}),N=A(r),E=A(r),T((S=t((k=class extends c{constructor(...e){super(...e),this.defaultShowAnimation=d.NONE,this.defaultHideAnimation=d.NONE,this.defaultLayer=h.Pop2,this.animationDuration=.6,n(this,"lbCurrentTime",S,this),n(this,"starContainer",P,this),n(this,"shopItemContainer",M,this),n(this,"btnReturn",D,this),n(this,"nodeNoOrder",B,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){C.Instance.isShowingTakeoutPanel=!0,super.init(),this.refreshPanel(),f.Scene.emit(p.Game_Pause)}refreshPanel(){const e=C.Instance.currentHour.toString().padStart(2,"0"),t=C.Instance.currentMinute.toString().padStart(2,"0");this.lbCurrentTime.string=`${e}:${t}`,this.updateStars(C.Instance.playerData.score);const n=C.Instance.currentTakeoutOrders;this.nodeNoOrder.active=0===n.length;const i=[];for(let e=n.length-1;e>=0;e--)i.push(n[e]);this.refreshOrderList(i)}updateStars(e){this.starContainer.children.forEach(((t,n)=>{t.active=n<e}))}refreshOrderList(e){for(let e=0;e<this.shopItemContainer.children.length;e++)0!==e?this.shopItemContainer.children[e].destroy():this.shopItemContainer.children[e].active=!1;let t=this.shopItemContainer.children[0];e.forEach((e=>{const n=o(t);n.parent=this.shopItemContainer,n.active=!0,this.updateOrderItem(n,e)})),C.Instance.lastTakeoutOrderIds=C.Instance.currentTakeoutOrders.map((e=>e.id))}updateOrderItem(e,t){C.Instance.lastTakeoutOrderIds.includes(t.id)?e.getChildByName("nodeNew").active=!1:e.getChildByName("nodeNew").active=!0,e.getChildByName("spAvatar").children.forEach((e=>{e.name===t.avatarName?e.active=!0:e.active=!1})),e.getChildByName("lblName").getComponent(a).string=t.customerName,e.getChildByName("lblExpirationTime").getComponent(a).string=`过期时间: ${t.expireTime[0].toString().padStart(2,"0")}:${t.expireTime[1].toString().padStart(2,"0")}`,e.getChildByName("lblContent").getComponent(a).string=t.content,e.getChildByName("lblNote").getComponent(a).string=`备注: ${t.remark}`,e.getChildByName("lblPrice").getComponent(a).string=t.price.toFixed(1),t.missingStockIngredients.length>0?(e.getChildByName("lblMissing").getComponent(a).string=`缺少配料：${t.missingStockIngredients[0]}`,e.getChildByName("lblMissing").active=!0):e.getChildByName("lblMissing").active=!1;const n=e.getChildByName("btnAccept").getComponent(l),i=e.getChildByName("btnVideo").getComponent(l),r=e.getChildByName("btnRefuse").getComponent(l),s=e.getChildByName("NodeTimeout"),o=e.getChildByName("NodeCookEnd"),c=e.getChildByName("NodeDelivered"),d=e.getChildByName("NodeRefused");switch(n.node.active=!1,i.node.active=!1,r.node.active=!1,s.active=!1,o.active=!1,c.active=!1,d.active=!1,t.status){case m.UNHANDLED:t.missingStockIngredients.length>0?(i.node.active=!0,i.node.off(l.EventType.CLICK),i.node.on(l.EventType.CLICK,(()=>this.handleVideo(t,e.getChildByName("lblMissing"))),this)):(n.node.active=!0,n.node.off(l.EventType.CLICK),n.node.on(l.EventType.CLICK,(()=>this.handleAcceptOrder(t)),this)),r.node.active=!0,r.node.off(l.EventType.CLICK),r.node.on(l.EventType.CLICK,(()=>this.handleRefuseOrder(t)),this);break;case m.TIMEOUT:s.active=!0;break;case m.COOKED:o.active=!0;break;case m.DELIVERED:c.active=!0;break;case m.REFUSED:d.active=!0}}handleVideo(e,t){I.getInstance().playSound("点击"),y.Instance.ShowVideoAd((()=>{C.Instance.playerData.stock[e.missingStockIngredients[0]]?C.Instance.playerData.stock[e.missingStockIngredients[0]]++:C.Instance.playerData.stock[e.missingStockIngredients[0]]=1,e.missingStockIngredients.splice(0,1),this.refreshPanel()}))}handleAcceptOrder(e){I.getInstance().playSound("点击"),C.Instance.resetTakout(e),C.Instance.takeoutNotes.push([e.content,`备注: ${e.remark}`]),C.Instance.startCooking(),this.refreshPanel()}handleRefuseOrder(e){I.getInstance().playSound("点击"),e.status=m.REFUSED,this.refreshPanel()}onClickReturn(){I.getInstance().playSound("点击"),C.Instance.isShowingTakeoutPanel=!1,u.Instance.hidePanel(g.KLM_TakeoutPanel)}onHideComplete(){f.Scene.emit(p.Game_Resume)}addListener(){super.addListener(),this.btnReturn.on(l.EventType.CLICK,this.onClickReturn,this),f.on(p.KLM_ORDER_DATA_UPDATED,this.refreshPanel,this),f.on(p.KLM_Update_Time,this.refreshPanel,this)}removeListener(){super.removeListener(),f.off(p.KLM_ORDER_DATA_UPDATED,this.refreshPanel,this),f.off(p.KLM_Update_Time,this.refreshPanel,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lbCurrentTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"starContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(k.prototype,"shopItemContainer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"btnReturn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"nodeNoOrder",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=k))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_TipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts","./Banner.ts","./XCT_AudioManager.ts","./XCT_GameManager.ts","./GameManager.ts","./UIManager.ts"],(function(e){var n,a,t,i,o,l,s,c,h,P,p,u,r,d,T,_,M,m,k,y,I;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){t=e.cclegacy,i=e.Node,o=e._decorator},function(e){l=e.EventManager},function(e){s=e.ProjectEventManager,c=e.ProjectEvent},function(e){h=e.XCT_BasePanel,P=e.XCT_PanelAnimation},function(e){p=e.XCT_UILayer},function(e){u=e.XCT_UIManager},function(e){r=e.XCT_UIPanel},function(e){d=e.XCT_Events},function(e){T=e.XCT_KLM_DataManager},function(e){_=e.default},function(e){M=e.XCT_AudioManager},function(e){m=e.XCT_GameManager},function(e){k=e.GameManager},function(e){y=e.UIManager,I=e.Panel}],execute:function(){var g,L,S,f,C,w,B,K,N;t._RF.push({},"1b145ZvYBRAHrojscmyfkN2","XCT_KLM_TipPanel",void 0);const{ccclass:v,property:b}=o;e("XCT_KLM_TipPanel",(g=v("XCT_KLM_TipPanel"),L=b(i),S=b(i),f=b(i),g((B=n((w=class extends h{constructor(...e){super(...e),this.defaultShowAnimation=P.NONE,this.defaultHideAnimation=P.NONE,this.defaultLayer=p.Pop2,this.animationDuration=.6,a(this,"tipNoMoneyPanel",B,this),a(this,"tipBackPanel",K,this),a(this,"tipOpenTakeoutPanel",N,this),this.isAddedEvent=!1}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.hideTipPanel()}hideTipPanel(){this.tipNoMoneyPanel.active=!1,this.tipBackPanel.active=!1,this.tipOpenTakeoutPanel.active=!1}showBackTipPanel(){l.Scene.emit(d.Game_Pause),this.tipBackPanel.active=!0,this.tipBackPanel.getChildByName("btnContinue").on("click",this.hideBackTipPanel,this),this.tipBackPanel.getChildByName("btnExit").on("click",this.onBtnExit,this)}onBtnExit(){M.getInstance().playSound("点击"),m.Instance.hasStartPanel?(u.Instance.hidePanel(r.KLM_TipPanel),l.Scene.emit(d.hideTableItem),u.Instance.showPanel(r.TablePanel,null,(()=>{u.Instance.showPanel(r.LoadingPanel,(()=>{u.Instance.showPanel(r.StartPanel,null,(()=>{u.Instance.hidePanel(r.KLM_DialoguePanel),u.Instance.hidePanel(r.KLM_GameUI),u.Instance.hidePanel(r.KLM_TutorialPanel),u.Instance.hidePanel(r.KLM_GamePanel,null,P.NONE),u.Instance.hidePanel(r.TipPanel),this.scheduleOnce((()=>{u.Instance.hidePanel(r.LoadingPanel,(()=>{s.emit(c.游戏结束,"小吃摊")}))}),.5)}))}),(()=>{u.Instance.hidePanel(r.KLM_ShopPanel),u.Instance.hidePanel(r.KLM_CheckoutPanel),u.Instance.hidePanel(r.KLM_TakeoutPanel)}))}))):s.emit(c.返回主页按钮事件,(()=>{y.ShowPanel(I.LoadingPanel,k.StartScene,(()=>{s.emit(c.返回主页,"小吃摊")}))}))}hideBackTipPanel(){l.Scene.emit(d.Game_Resume),M.getInstance().playSound("点击"),u.Instance.hidePanel(r.KLM_TipPanel)}showNoMoneyTipPanel(){l.Scene.emit(d.Game_Pause),this.tipNoMoneyPanel.active=!0,this.tipNoMoneyPanel.getChildByName("btnBack").on("click",this.hideNoMoneyTipPanel,this),this.tipNoMoneyPanel.getChildByName("btnVideo").on("click",this.btnVideoClick,this)}hideNoMoneyTipPanel(){T.Instance.isShowingShopPanel||l.Scene.emit(d.Game_Resume),M.getInstance().playSound("点击"),u.Instance.hidePanel(r.KLM_TipPanel)}btnVideoClick(){M.getInstance().playSound("点击"),_.Instance.ShowVideoAd((()=>{T.Instance.playerData.money+=200,l.Scene.emit(d.KLM_Update_Money),u.Instance.hidePanel(r.KLM_TipPanel),T.Instance.isShowingShopPanel||l.Scene.emit(d.Game_Resume)}))}showOpenTakeoutPanel(){l.Scene.emit(d.Game_Pause),this.tipOpenTakeoutPanel.active=!0,this.tipOpenTakeoutPanel.getChildByName("btnBack").on("click",this.hideOpenTakeoutPanel,this),this.tipOpenTakeoutPanel.getChildByName("btnVideo").on("click",this.btnVideoOpenTakeoutClick,this)}hideOpenTakeoutPanel(){l.Scene.emit(d.Game_Resume),M.getInstance().playSound("点击"),u.Instance.hidePanel(r.KLM_TipPanel)}btnVideoOpenTakeoutClick(){M.getInstance().playSound("点击"),_.Instance.ShowVideoAd((()=>{T.Instance.playerData.isTakeOutProjectOpen=!0,l.Scene.emit(d.KLM_Takeout_Open),u.Instance.showPanel(r.KLM_TakeoutPanel,null,(()=>{u.Instance.hidePanel(r.KLM_TipPanel)}))}))}addListener(){l.on(d.KLM_ShowTip_Back,this.showBackTipPanel,this),l.on(d.KLM_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),l.on(d.KLM_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this)}removeListener(){l.off(d.KLM_ShowTip_Back,this.showBackTipPanel,this),l.off(d.KLM_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),l.off(d.KLM_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tipNoMoneyPanel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(w.prototype,"tipBackPanel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(w.prototype,"tipOpenTakeoutPanel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=w))||C));t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_KLM_TutorialPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_Events.ts","./XCT_KLM_DataManager.ts"],(function(t){var e,i,n,r,a,s,o,h,u,d,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,a=t._decorator,s=t.Animation},function(t){o=t.EventManager},function(t){h=t.XCT_BasePanel,u=t.XCT_PanelAnimation},function(t){d=t.XCT_UILayer},function(t){l=t.XCT_Events},function(t){c=t.XCT_KLM_DataManager}],execute:function(){var p,C,T,_,x;n._RF.push({},"3cac6ypIaZBKo/zJvOB7ds8","XCT_KLM_TutorialPanel",void 0);const{ccclass:f,property:I}=a;t("XCT_KLM_TutorialPanel",(p=f("XCT_KLM_TutorialPanel"),C=I(r),p((x=e((_=class extends h{constructor(...t){super(...t),this.defaultShowAnimation=u.NONE,this.defaultHideAnimation=u.NONE,this.defaultLayer=d.Tutorial,this.animationDuration=.6,i(this,"arrowContainer",x,this),this.currentTutorialIdx=0,this.isCompleted=!1,this.tutorialDatas=[],this.currentStepIdx=0,this.data=[{idx:0,stepCount:1},{idx:1,stepCount:1},{idx:2,stepCount:1},{idx:3,stepCount:1},{idx:4,stepCount:2},{idx:5,stepCount:2},{idx:6,stepCount:1},{idx:7,stepCount:1},{idx:8,stepCount:1},{idx:9,stepCount:1}],this.isAddedEvent=!1}start(){}init(){1!==c.Instance.playerData.currentDay||c.Instance.isTutorialEnd||(this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0),this.node.active=!1,this.startTutorial())}startTutorial(){this.tutorialDatas=this.data,this.currentTutorialIdx=0,this.currentStepIdx=0,this.isCompleted=!1,this.node.active=!0,this.showStep(this.currentTutorialIdx,this.currentStepIdx)}showStep(t,e){t>=this.tutorialDatas.length?this.completeTutorial():(this.currentTutorialIdx=t,this.updateArrow(t,e))}updateArrow(t,e){this.arrowContainer.children.forEach((i=>{i.getComponent(s).stop(),i.active=!1;let n=i.name.split("_"),r=parseInt(n[0]),a=parseInt(n[1]);r==t&&a==e&&(i.active=!0,i.getComponent(s).play())}))}completeTutorial(){this.hideArrow(),this.isCompleted=!0,c.Instance.isTutorialEnd=!0,c.Instance.isNeedShowDragTutorial=!0}onNextStep(){if(this.isCompleted)return;this.currentStepIdx++;let t=this.tutorialDatas[this.currentTutorialIdx].stepCount;if(this.currentStepIdx>t-1)return this.currentStepIdx=0,this.currentTutorialIdx++,void this.showStep(this.currentTutorialIdx,this.currentStepIdx);this.showStep(this.currentTutorialIdx,this.currentStepIdx)}hideArrow(){this.arrowContainer.children.forEach((t=>{t.getComponent(s).stop(),t.active=!1}))}hidePanel(){this.arrowContainer.active=!1}showPanel(){this.arrowContainer.active=!0}addListener(){o.on(l.Hide_TutorialPanel,this.hidePanel,this),o.on(l.Show_TutorialPanel,this.showPanel,this),o.on(l.HandAnimation_Start,this.hideArrow,this),o.on(l.HandAnimation_End,this.onNextStep,this)}removeListener(){o.off(l.Hide_TutorialPanel,this.hidePanel,this),o.off(l.Show_TutorialPanel,this.showPanel,this),o.off(l.HandAnimation_Start,this.hideArrow,this),o.off(l.HandAnimation_End,this.onNextStep,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"arrowContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=_))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LoadingPanel.ts",["cc","./XCT_BasePanel.ts","./XCT_UILayer.ts"],(function(t){var e,i,n,s,a;return{setters:[function(t){e=t.cclegacy,i=t._decorator},function(t){n=t.XCT_BasePanel,s=t.XCT_PanelAnimation},function(t){a=t.XCT_UILayer}],execute:function(){var o;e._RF.push({},"47fe1HA5sZBYqFo+cz5X7H8","XCT_LoadingPanel",void 0);const{ccclass:d,property:c}=i;t("XCT_LoadingPanel",d("XCT_LoadingPanel")(o=class extends n{constructor(...t){super(...t),this.defaultShowAnimation=s.SLIDE_FROM_TOP,this.defaultHideAnimation=s.SLIDE_TO_TOP,this.defaultLayer=a.Loading,this.animationDuration=.6,this.hideEasing="quadOut",this.showEasing="quadIn",this.isAddedEvent=!1,this.callback=null}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(t){this.callback=t}onShowComplete(){var t;null==(t=this.callback)||t.call(this)}addListener(){}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}})||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_Bowl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts"],(function(o){var e,t,n,i,r,s,l,a,c,u;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.initializerDefineProperty},function(o){n=o.cclegacy,i=o.Node,r=o._decorator,s=o.Component,l=o.tween,a=o.v3},function(o){c=o.XCT_Events},function(o){u=o.EventManager}],execute:function(){var d,h,w,_,p,b,C,f,P,m,y,v,g;n._RF.push({},"f5546jiy55F0ZQ47adc9Cby","XCT_LSF_Bowl",void 0);const{ccclass:L,property:F}=r;o("XCT_LSF_Bowl",(d=L("XCT_LSF_Bowl"),h=F(i),w=F(i),_=F(i),p=F(i),b=F(i),d((P=e((f=class extends s{constructor(...o){super(...o),t(this,"bowlContainer1",P,this),t(this,"commonContainer",m,this),t(this,"bowlContainer2",y,this),t(this,"worldPos_1",v,this),t(this,"worldPos_2",g,this),this.count=0}onLoad(){this.addListener()}moveToPos2(){let o=this.node.worldPosition;this.node.setParent(this.commonContainer),this.node.setWorldPosition(o),l(this.node).call((()=>{this.node.getChildByName("cookArea").active=!0})).delay(.2).to(.5,{worldPosition:this.worldPos_2.worldPosition}).call((()=>{o=this.node.worldPosition,this.node.setParent(this.bowlContainer2),this.node.setWorldPosition(o)})).start(),l(this.node).delay(.2).to(.5,{scale:a(this.worldPos_2.scale.x,this.worldPos_2.scale.y,1)}).start()}addListener(){u.on(c.LSF_Change_CookArea,this.moveToPos2,this)}removeListener(){u.off(c.LSF_Change_CookArea,this.moveToPos2,this)}onDestroy(){this.removeListener()}}).prototype,"bowlContainer1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(f.prototype,"commonContainer",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(f.prototype,"bowlContainer2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(f.prototype,"worldPos_1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(f.prototype,"worldPos_2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=f))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_CancelMask.ts",["cc","./EventManager.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts"],(function(n){var t,e,a,c,s,o;return{setters:[function(n){t=n.cclegacy,e=n.Component,a=n._decorator},function(n){c=n.EventManager},function(n){s=n.XCT_Events},function(n){o=n.XCT_LSF_DataManager}],execute:function(){var r;t._RF.push({},"5f42cfF91tDiIkyK1cEYzSq","XCT_LSF_CancelMask",void 0);const{ccclass:_,property:i}=a;n("XCT_LSF_CancelMask",_("XCT_LSF_CancelMask")(r=class extends e{onLoad(){this.node.on("click",this.onClick,this)}onClick(){(1!=o.Instance.playerData.currentDay||o.Instance.isTutorialEnd)&&c.Scene.emit(s.LSF_Cancel_All_Ingredients)}})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_CheckoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,n,i,a,l,r,o,s,u,c,d,h,b,p,C,f,y,g,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,l=t.Node,r=t._decorator,o=t.Color,s=t.Button},function(t){u=t.EventManager},function(t){c=t.ProjectEventManager,d=t.ProjectEvent},function(t){h=t.XCT_BasePanel,b=t.XCT_PanelAnimation},function(t){p=t.XCT_UILayer},function(t){C=t.XCT_UIManager},function(t){f=t.XCT_UIPanel},function(t){y=t.XCT_Events},function(t){g=t.XCT_LSF_DataManager},function(t){I=t.XCT_AudioManager}],execute:function(){var _,P,T,S,m,v,L,F,X,D,E,w,R,A,M,U,z,k,O,x,N;i._RF.push({},"c4aabjp1EROJZoUui8d89VI","XCT_LSF_CheckoutPanel",void 0);const{ccclass:K,property:j}=r;t("XCT_LSF_CheckoutPanel",(_=K("XCT_LSF_CheckoutPanel"),P=j(a),T=j(a),S=j(a),m=j(a),v=j(a),L=j(a),F=j(a),X=j(a),D=j(l),_((R=e((w=class extends h{constructor(...t){super(...t),this.defaultShowAnimation=b.NONE,this.defaultHideAnimation=b.NONE,this.defaultLayer=p.Pop2,this.animationDuration=.6,n(this,"lblDay",R,this),n(this,"lblTurnover",A,this),n(this,"lblTip",M,this),n(this,"lblRent",U,this),n(this,"lblRefund",z,this),n(this,"lblCost",k,this),n(this,"lblCatCost",O,this),n(this,"lblProfit",x,this),n(this,"btnOK",N,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.initUI()}initUI(){c.emit(d.弹出窗口,"小吃摊"),this.lblDay.string=""+g.Instance.playerData.currentDay,g.Instance.playerData.money-=g.Instance.Rent,g.Instance.playerData.isAdoptedCat&&(g.Instance.playerData.money-=10),u.Scene.emit(y.LSF_Update_Money),this.lblTurnover.string="+"+g.Instance.daySellingPrice.toFixed(1),this.lblTip.string="+"+g.Instance.daySellingAddTip.toFixed(1),this.lblRent.string="-"+g.Instance.Rent,this.lblRefund.string="-"+g.Instance.dayRefund.toFixed(1),this.lblCost.string="-"+g.Instance.dayCost.toFixed(1),this.lblCatCost.string="-10",this.lblCatCost.node.active=g.Instance.playerData.isAdoptedCat;let t=g.Instance.daySellingPrice+g.Instance.daySellingAddTip-g.Instance.dayCost-g.Instance.Rent-g.Instance.dayRefund;this.lblProfit.color=new o(t<0?"C53737":"5FC537"),this.lblProfit.string=""+t.toFixed(1)}onClickOK(){I.getInstance().playSound("点击"),g.Instance.isHadShowShop?C.Instance.hidePanel(f.LSF_CheckoutPanel):(g.Instance.isHadShowShop=!0,C.Instance.showPanel(f.LSF_ShopPanel,null,(()=>{C.Instance.showPanel(f.LSF_GameUI,null,null,b.NONE,p.GameUI2),C.Instance.hidePanel(f.LSF_CheckoutPanel)})))}addListener(){this.btnOK.on(s.EventType.CLICK,this.onClickOK,this)}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lblDay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(w.prototype,"lblTurnover",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(w.prototype,"lblTip",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(w.prototype,"lblRent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(w.prototype,"lblRefund",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(w.prototype,"lblCost",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(w.prototype,"lblCatCost",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(w.prototype,"lblProfit",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(w.prototype,"btnOK",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=w))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_Completed.ts",["cc","./EventManager.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts"],(function(e){var t,n,c,a,o,s;return{setters:[function(e){t=e.cclegacy,n=e.Component,c=e._decorator},function(e){a=e.EventManager},function(e){o=e.XCT_Events},function(e){s=e.XCT_LSF_DataManager}],execute:function(){var r;t._RF.push({},"7081dZnDENGrr9ex/jD5GJb","XCT_LSF_Completed",void 0);const{ccclass:i,property:d}=c;e("XCT_LSF_Completed",i("XCT_LSF_Completed")(r=class extends n{onLoad(){this.node.on("click",this.onClick,this)}onClick(){let e=!1,t=["酱","醋","盐","鸡精"];if(s.Instance.currentCookedSteps.forEach((n=>{e||t.includes(n)&&(e=!0)})),!e)return void a.Scene.emit(o.showTip,"请先调味！");let n=!1,c=["葱花","蒜蓉","青菜","小米辣","叉烧肉","咸鸭蛋","木耳","煎蛋","牛肉","腐竹","酸笋","酸豆角"];s.Instance.currentCookedSteps.forEach((e=>{n||c.includes(e)&&(n=!0)})),n?(1!=s.Instance.playerData.currentDay||s.Instance.isTutorialEnd||13===s.Instance.tutorialIdx)&&(a.Scene.emit(o.LSF_Cancel_All_Ingredients),s.Instance.currentCookedSteps.push("卷饼"),13==s.Instance.tutorialIdx&&(a.Scene.emit(o.HandAnimation_End),s.Instance.tutorialIdx++),a.Scene.emit(o.LSF_Completed)):a.Scene.emit(o.showTip,"要先撒上配料，才算制作完成哦！")}})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_BasePanel.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,s,r,a,o,h,u,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.JsonAsset,r=e._decorator,a=e.Component},function(e){o=e.EventManager},function(e){h=e.XCT_Events},function(e){u=e.XCT_UIManager},function(e){c=e.XCT_UIPanel},function(e){l=e.XCT_PanelAnimation},function(e){d=e.XCT_AudioManager}],execute:function(){var g,S,T,m,p,_,C,k,f,I;n._RF.push({},"37beau+4B9GOZszm4LUPabD","XCT_LSF_DataManager",void 0);const{ccclass:E,property:D}=r;let P=e("XCT_LSF_IngredientType",function(e){return e.SPICE="撒料类",e.SPREAD="涂抹类",e.EGG="鸡蛋类",e}({})),y=(e("XCT_LSF_ButtonAction",function(e){return e.START_MAKE="开始制作",e.NEXT_DIALOG="下一段对话",e.BUY_INGREDIENT="购买食材",e.REFUSE="拒绝",e.END_DIALOG="结束对话",e.LEAVE="离开",e.GET_TAKE_OUT="开展外卖业务",e.DELIVER_TAKE_OUT="送达",e.TAKE_DISH="递餐",e}({})),e("XCT_LSF_OrderStatus",function(e){return e[e.UNHANDLED=0]="UNHANDLED",e[e.TIMEOUT=1]="TIMEOUT",e[e.COOKED=2]="COOKED",e[e.DELIVERED=3]="DELIVERED",e[e.REFUSED=4]="REFUSED",e}({})));e("XCT_LSF_DataManager",(g=E("XCT_LSF_DataManager"),S=D(s),T=D(s),m=D(s),g(((I=class e extends a{constructor(...e){super(...e),this.STORAGE_KEY="XCT_LSF_PlayerData",i(this,"ingredientsConfigJson",C,this),i(this,"TipConfigJson",k,this),i(this,"TakeoutOrderConfigJson",f,this),this.ingredientsConfig=null,this.ingredientsConfigObject=null,this.tipConfig=null,this.takeoutOrderConfig=null,this.standardSpreadCount=300,this.playerData=null,this.isTutorialEnd=!1,this.isNeedShowDragTutorial=!1,this.tutorialIdx=0,this.isCooking=!1,this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.MINUTES_PER_HOUR=12,this.MINUTE_INTERVAL=15,this.isTimePause=!1,this.totalTime=0,this.isDayEnd=!1,this.currentSmile=100,this.startCookingTime=0,this.isTakeout=!1,this.dayCustomerCount=0,this.currentCustomerIndex=0,this.currentCustomer=null,this.missingStockIngredients=[],this.isEndingDialog=!1,this.isRefuse=!1,this.currentDayTakeoutConfig=[],this.currentTakeoutOrders=[],this.lastTakeoutOrderIds=[],this.currentTakeoutOrder=null,this.needShowTakeoutCome=!1,this.notes=[],this.takeoutNotes=[],this.currentDishes={},this.orderCheckResult=this.initOrderCheckResult(),this.currentEggIngredientType="白面团",this.eggIngredientTypeTransfer={},this.currentSauceType="调味酱",this.sauceTypeCount={},this.currentCookedSteps=[],this.currentSellingPrice=0,this.daySellingPrice=0,this.currentSellingAddTip=0,this.totalSellingTip=10,this.daySellingAddTip=0,this.refund=0,this.dayRefund=0,this.Rent=10,this.dayCost=0,this.isHadShowShop=!1,this.isShowingTakeoutPanel=!1,this.isShowingShopPanel=!1,this.isCatDriveAway=!1,this.isPause=!1}initOrderCheckResult(){return{extraIngredients:[],missingIngredients:[],lessCountIngredients:[],lessSpreadIngredients:[],moreSpreadIngredients:[],lessRotateIngredients:[],moreCountIngredients:[]}}onLoad(){this.addListener(),e.Instance=this,this.ingredientsConfig=this.ingredientsConfigJson.json,this.ingredientsConfigObject=this.ingredientsConfig.reduce(((e,t)=>(e[t.name]=t,e)),{}),this.tipConfig=this.TipConfigJson.json,this.takeoutOrderConfig=this.TakeoutOrderConfigJson.json,this.initData()}initData(){this.playerData=this.loadData(),this.resetDay()}loadData(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):{money:100,currentDay:1,stock:{"玉米排骨锅":1,"宽粉":1,"葱花":1,"咸鸭蛋":1,"酱":1,"盐":1},score:5,isTakeOutProjectSet:!1,isTakeOutProjectOpen:!1,isAdoptedCat:!1}}resetDay(){this.tutorialIdx=0,this.isTutorialEnd=!1,this.currentCustomerIndex=0,this.dayCustomerCount=0,this.isNeedShowDragTutorial=!1,this.orderCheckResult=this.initOrderCheckResult(),this.currentTime=0,this.currentHour=8,this.currentMinute=0,this.lastMinuteUpdate=0,this.lastHourUpdate=0,this.totalTime=24*this.MINUTES_PER_HOUR,this.isDayEnd=!1,this.daySellingPrice=0,this.daySellingAddTip=0,this.dayRefund=0,this.currentDayTakeoutConfig=this.generateRandomTakeoutOrders(),this.currentTakeoutOrders=[],this.needShowTakeoutCome=!1,this.isShowingTakeoutPanel=!1,this.isCatDriveAway=!1,this.isCooking=!1,this.isPause=!1,o.Scene.emit(h.LSF_Update_Money),o.Scene.emit(h.LSF_Update_Smile),o.Scene.emit(h.LSF_Update_Time),o.Scene.emit(h.LSF_Hide_New_Takeout_Order),o.Scene.emit(h.LSF_Start_NewDay_Dialog)}generateRandomTakeoutOrders(){const e=this.takeoutOrderConfig.find((e=>5===e.day));if(!e||0===e.takeoutOrders.length)return console.warn("第5天的外卖订单配置不存在或为空"),[];const t=[...e.takeoutOrders],i=[],n=Math.min(5,t.length);for(let e=0;e<n;e++){const e=Math.floor(Math.random()*t.length),n={...t[e]};i.push(n),t.splice(e,1)}const s=this.generateOrderTimes(n);return i.map(((e,t)=>{e.showTime=s[t];const i=s[t][0]+2;return e.expireTime=[i,s[t][1]],e}))}generateOrderTimes(e){const t=Array.from({length:9},((e,t)=>t+9)),i=[0,15,30,45],n=[];for(const e of t)for(const t of i)n.push([e,t]);for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}const s=n.slice(0,e);return s.sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:e[1]-t[1])),s}resetCustomer(e){this.currentCustomer=e,this.isRefuse=!1,this.missingStockIngredients=[],this.currentSellingPrice=0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.startCookingTime=this.currentTime,this.currentCookedSteps=[],this.notes=[],this.startCookingTime=this.currentTime,this.currentSmile=100,this.isPause=!1,o.Scene.emit(h.LSF_Update_Smile)}resetTakout(e){this.currentTakeoutOrder=e,this.takeoutNotes=[],this.isTakeout=!0,this.currentSellingAddTip=0,this.refund=0,this.currentDishes={},this.currentCookedSteps=[],this.isPause=!1}passDay(){this.playerData.currentDay++,this.saveData(),u.Instance.showPanel(c.LSF_GameUI,null,(()=>{u.Instance.showPanel(c.LSF_DialoguePanel,null,(()=>{u.Instance.showPanel(c.TipPanel),this.scheduleOnce((()=>{u.Instance.showPanel(c.LSF_GamePanel,null,null,l.PreLoad_at_Bottom),u.Instance.hidePanel(c.StartPanel),u.Instance.hidePanel(c.PassPanel),u.Instance.hidePanel(c.LoadingPanel,(()=>{u.Instance.hidePanel(c.TablePanel),o.Scene.emit(h.showTableItem),this.resetDay()}))}),.5)}),l.NONE)}),l.NONE)}startCooking(){this.isTakeout?(this.currentSellingPrice=this.calculateSellingPrice(this.currentTakeoutOrder.order),o.Scene.emit(h.LSF_Hide_smile)):(this.currentSellingPrice=this.calculateSellingPrice(this.currentCustomer.order),o.Scene.emit(h.LSF_Show_smile)),this.playerData.money+=this.currentSellingPrice,this.daySellingPrice+=this.currentSellingPrice,d.getInstance().playSound("收银"),o.Scene.emit(h.LSF_Update_Money),u.Instance.showPanel(c.LSF_GamePanel),1!=e.Instance.playerData.currentDay||e.Instance.isTutorialEnd||u.Instance.showPanel(c.LSF_TutorialPanel,null,null,l.SLIDE_FROM_BOTTOM),u.Instance.hidePanel(c.LSF_DialoguePanel),u.Instance.hidePanel(c.LSF_TakeoutPanel,null,l.SLIDE_TO_TOP),this.isCooking=!0,this.needShowTakeoutCome=!1,this.isPause=!1,o.Scene.emit(h.Game_Resume)}endCooking(e){this.pack(),this.isTakeout?(this.checkOrder(this.currentTakeoutOrder.order),o.Scene.emit(h.LSF_Hide_smile)):(this.checkOrder(this.currentCustomer.order),o.Scene.emit(h.LSF_Show_smile)),u.Instance.showPanel(c.LSF_DialoguePanel,!0,(()=>{o.Scene.emit(h.LSF_Show_Bowl,e),this.isTakeout?(o.Scene.emit(h.LSF_Show_Takeout_End_Dialog),o.Scene.emit(h.LSF_Show_Dish_Node)):(o.Scene.emit(h.LSF_Show_End_Dialog_Sp),o.Scene.emit(h.LSF_Show_Dish_Node)),this.isEndingDialog=!0,u.Instance.hidePanel(c.LSF_GamePanel)}),l.SLIDE_FROM_TOP),this.isCooking=!1,o.Scene.emit(h.Game_Resume)}checkoutCustomer(){if(this.calculateRefund(this.currentCustomer.order),this.refund>0)return this.playerData.money-=this.refund,o.Scene.emit(h.LSF_Update_Money),void(this.refund=0);this.calculateAddTip(),this.currentSellingAddTip>0&&(o.Scene.emit(h.LSF_Show_Add_Tip),this.playerData.money+=this.currentSellingAddTip,o.Scene.emit(h.LSF_Update_Money),this.currentSellingAddTip=0)}checkoutDay(){o.Scene.emit(h.hideTableItem),u.Instance.showPanel(c.TablePanel),u.Instance.showPanel(c.LoadingPanel,(()=>{u.Instance.showPanel(c.LSF_CheckoutPanel)}))}startNewDay(){}addOneHour(){this.currentTime+=this.MINUTES_PER_HOUR,this.updateLogic()}update(e){this.isPause||!this.isCooking||this.isDayEnd||this.isTakeout||(this.currentTime+=e,this.updateLogic())}updateLogic(){const e=this.currentTime/this.MINUTES_PER_HOUR,t=8+Math.floor(e);t!==this.currentHour&&e>=this.lastHourUpdate+1&&(this.currentHour=t,this.lastHourUpdate=Math.floor(e));const i=60*e,n=Math.floor(i/this.MINUTE_INTERVAL),s=n%4*this.MINUTE_INTERVAL;s!==this.currentMinute&&i>=this.lastMinuteUpdate+this.MINUTE_INTERVAL&&(this.currentMinute=s,this.lastMinuteUpdate=n*this.MINUTE_INTERVAL),this.currentHour>=19&&(this.currentTime=this.totalTime-13*this.MINUTES_PER_HOUR,this.currentHour=19,this.currentMinute=0,this.isDayEnd=!0),o.Scene.emit(h.LSF_Update_Time);for(let e=this.currentDayTakeoutConfig.length-1;e>=0;e--){const t=this.currentDayTakeoutConfig[e],[i,n]=t.showTime;if(this.currentHour>i||this.currentHour===i&&this.currentMinute>=n){const i={id:Date.now(),avatarName:t.avatarName,customerName:t.customerName,expireTime:t.expireTime,content:t.content,remark:t.remark,order:t.order,price:0,status:y.UNHANDLED,missingStockIngredients:[]};i.price=this.calculateSellingPrice(t.order),i.missingStockIngredients=this.checkTakeoutStock(t.order),this.currentTakeoutOrders.push(i),o.Scene.emit(h.LSF_ORDER_DATA_UPDATED),this.isCooking?this.needShowTakeoutCome=!0:o.Scene.emit(h.LSF_New_Takeout_Order),this.currentDayTakeoutConfig.splice(e,1)}}for(let e=0;e<this.currentTakeoutOrders.length;e++){const t=this.currentTakeoutOrders[e];if(t.status===y.UNHANDLED){const[e,i]=t.expireTime;(this.currentHour>e||this.currentHour===e&&this.currentMinute>=i)&&(t.status=y.TIMEOUT,o.Scene.emit(h.LSF_ORDER_DATA_UPDATED))}}if(!this.isTakeout){const e=60*((this.currentTime-this.startCookingTime)/this.MINUTES_PER_HOUR)/6;this.currentSmile=Math.max(0,100-Math.floor(e)),o.Scene.emit(h.LSF_Update_Smile)}}buyNewIngredient(e){this.playerData.stock[e]=1}resetOrderCheckResult(){this.orderCheckResult=this.initOrderCheckResult()}checkStock(e){return this.missingStockIngredients=[],Object.keys(e).forEach((t=>{if(1===e[t].need){void 0!==this.playerData.stock[t]&&this.playerData.stock[t]>0||this.missingStockIngredients.push(t)}})),0===this.missingStockIngredients.length}checkTakeoutStock(e){let t=[];return Object.keys(e).forEach((i=>{if(1===e[i].need){void 0!==this.playerData.stock[i]&&this.playerData.stock[i]>0||t.push(i)}})),t}calculateSellingPrice(e){let t=0;for(let i in e){let n=e[i];if(0==n.need)continue;const s=this.ingredientsConfigObject[i];if(!s){console.log(`LSF_DataManager: 未找到材料配置 ${i},订单：`,e);continue}let r=s.sellingPrice;n.type==P.SPICE?r=s.sellingPrice*n.count:n.type==P.SPREAD?r=s.sellingPrice*n.percentage:n.type==P.EGG&&(r=s.sellingPrice*n.count),t+=r}return t}pack(){Object.keys(this.sauceTypeCount).forEach((t=>{let i=0;this.sauceTypeCount[t].forEach((e=>{i+=e}));let n=i/this.standardSpreadCount;e.Instance.currentDishes[t]||(e.Instance.currentDishes[t]={type:P.SPREAD,need:1,count:1,percentage:0,rotateCount:0}),this.currentDishes[t].percentage=n}))}checkOrder(e){let t=this.currentDishes;this.resetOrderCheckResult();const i=this.orderCheckResult;Object.keys(t).forEach((t=>{e[t]&&0===e[t].need&&i.extraIngredients.push(t)})),Object.keys(e).forEach((n=>{1!==e[n].need||t[n]||i.missingIngredients.push(n)})),Object.keys(e).forEach((n=>{const s=e[n],r=t[n];if(1===s.need&&r)switch(s.type){case P.SPICE:this.checkSpiceIngredient(n,s,r,i);break;case P.SPREAD:this.checkSpreadIngredient(n,s,r,i);break;case P.EGG:this.checkEggIngredient(n,s,r,i)}}))}checkSpiceIngredient(e,t,i,n){void 0!==t.count&&(i.count<t.count?n.lessCountIngredients.push(e):i.count>t.count&&n.moreCountIngredients.push(e))}checkSpreadIngredient(e,t,i,n){void 0!==t.percentage&&(i.percentage<t.percentage?n.lessSpreadIngredients.push(e):i.percentage>t.percentage+50&&n.moreSpreadIngredients.push(e))}checkEggIngredient(e,t,i,n){void 0!==t.count&&void 0!==t.rotateCount&&(i.count<t.count?n.lessCountIngredients.push(e):i.count>t.count&&n.moreCountIngredients.push(e),i.rotateCount<t.rotateCount&&n.lessRotateIngredients.push(e))}calculateRefund(e){return this.refund=0,this.orderCheckResult.extraIngredients.length>0?(this.refund+=.8*this.currentSellingPrice,this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),void(this.dayRefund+=this.refund)):(this.orderCheckResult.missingIngredients.length>0&&this.orderCheckResult.missingIngredients.forEach((t=>{const i=e[t];switch(i.type){case P.SPICE:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count;break;case P.SPREAD:this.refund+=1*this.ingredientsConfigObject[t].sellingPrice;break;case P.EGG:this.refund+=this.ingredientsConfigObject[t].sellingPrice*i.count}})),this.orderCheckResult.lessCountIngredients.length>0&&this.orderCheckResult.lessCountIngredients.forEach((t=>{const i=this.currentDishes[t],n=e[t];this.refund+=this.ingredientsConfigObject[t].sellingPrice*(n.count-i.count)})),this.currentSmile<30&&(this.refund+=(30-this.currentSmile)/30*this.currentSellingPrice),this.refund>this.currentSellingPrice&&(this.refund=this.currentSellingPrice),this.dayRefund+=this.refund,this.refund)}calculateAddTip(){this.currentSellingAddTip=0,this.orderCheckResult.extraIngredients.length>0||this.orderCheckResult.missingIngredients.length>0||this.orderCheckResult.lessCountIngredients.length>0||this.orderCheckResult.lessSpreadIngredients.length>0||this.orderCheckResult.moreSpreadIngredients.length>0||this.orderCheckResult.lessRotateIngredients.length>0||(this.orderCheckResult.moreCountIngredients.length>0&&(this.currentSellingAddTip+=this.orderCheckResult.moreCountIngredients.length+2),this.currentSmile>60&&(this.currentSellingAddTip+=(this.currentSmile-60)/40*this.totalSellingTip),this.currentSellingAddTip>this.totalSellingTip&&(this.currentSellingAddTip=this.totalSellingTip),this.daySellingAddTip+=this.currentSellingAddTip)}onGamePause(){this.isPause=!0}onGameResume(){this.isPause=!1}saveData(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.playerData))}addListener(){o.on(h.Game_Pause,this.onGamePause,this),o.on(h.Game_Resume,this.onGameResume,this)}removeListener(){o.off(h.Game_Pause,this.onGamePause,this),o.off(h.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener()}}).Instance=void 0,C=t((_=I).prototype,"ingredientsConfigJson",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(_.prototype,"TipConfigJson",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(_.prototype,"TakeoutOrderConfigJson",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=_))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_DialogManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./Banner.ts","./XCT_LSF_DataManager.ts","./XCT_Events.ts","./XCT_AudioManager.ts"],(function(t){var e,n,s,i,a,r,o,l,c,u,h,g,d,m,C,I,p,D,f,S,y,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.JsonAsset,a=t.Node,r=t.Label,o=t.Button,l=t._decorator,c=t.Component,u=t.Graphics,h=t.Mask,g=t.instantiate,d=t.Layout,m=t.v3,C=t.tween},function(t){I=t.EventManager},function(t){p=t.default},function(t){D=t.XCT_LSF_DataManager,f=t.XCT_LSF_ButtonAction,S=t.XCT_LSF_OrderStatus},function(t){y=t.XCT_Events},function(t){T=t.XCT_AudioManager}],execute:function(){var k,_,b,E,v,x,w,L,P,A,N,R,B,M,F,G,O,X,K,j,z,U;s._RF.push({},"19c65KURwxLQIcHKZk1Y1bZ","XCT_LSF_DialogManager",void 0);const{ccclass:$,property:H}=l;t("XCT_LSF_DialogManager",(k=$("XCT_LSF_DialogManager"),_=H({type:i}),b=H({type:i}),E=H({type:i}),v=H(a),x=H(a),w=H(r),L=H(a),P=H(r),A=H(o),k(((U=class t extends c{constructor(...t){super(...t),n(this,"gameConfig",B,this),n(this,"specialDialogConfig",M,this),n(this,"endingDialogConfig",F,this),n(this,"dialogPanel",G,this),n(this,"customerNode",O,this),n(this,"dialogText",X,this),n(this,"buttonContainer",K,this),n(this,"missingTip",j,this),n(this,"buttonPrefab",z,this),this.dayConfigs=[],this.specialDialogConfigs={},this.endingDialogConfigs={},this.currentCustomers=[],this.currentCustomer=null,this.currentSegmentIndex=0,this.isStartDialog=!0,this.dialogConfig=[],this.dialogEndCallback=null,this.isAngry=!1,this.currentText="",this.tween=null,this.timers=[],this.nextTimerId=0,this.isAllTimersPaused=!1}onLoad(){this.addListener(),t.Instance=this,this.dialogPanel.active=!1,this.missingTip.node.active=!1,this.dayConfigs=this.gameConfig.json,this.specialDialogConfigs=this.specialDialogConfig.json,this.endingDialogConfigs=this.endingDialogConfig.json,this.dialogPanel.active=!1}startCustomerDialog(t,e=!0,n=!1){this.currentCustomer=t,this.isStartDialog=e,this.dialogConfig=e?t.startDialogs:t.endDialogs,(!e&&!this.dialogConfig||n)&&(this.dialogConfig=this.endingDialogConfigs[t.avatar]);let s=null;e?n?(this.currentSegmentIndex=9,this.isAngry=!0,this.currentSegmentIndex++):this.currentSegmentIndex=1:("外卖员"===t.avatar?this.currentSegmentIndex=0:D.Instance.currentSmile<30?(this.currentSegmentIndex=8,this.isAngry=!0):0!==D.Instance.orderCheckResult.extraIngredients.length?(this.currentSegmentIndex=1,this.isAngry=!0,s=D.Instance.orderCheckResult.extraIngredients.join("、")):0!==D.Instance.orderCheckResult.missingIngredients.length?(this.currentSegmentIndex=2,this.isAngry=!0,s=D.Instance.orderCheckResult.missingIngredients.join("、")):0!==D.Instance.orderCheckResult.lessCountIngredients.length?(this.currentSegmentIndex=3,this.isAngry=!0,s=D.Instance.orderCheckResult.lessCountIngredients.join("、")):0!==D.Instance.orderCheckResult.moreCountIngredients.length?(this.currentSegmentIndex=7,s=D.Instance.orderCheckResult.moreCountIngredients.join("、")):this.currentSegmentIndex=0,this.currentSegmentIndex++),this.loadSp(this.currentCustomer.avatar),this.dialogPanel.active=!0,this.showCurrentSegment(s)}showCurrentSegment(t=null){if(this.currentSegmentIndex>=this.dialogConfig.length+1)return void this.leave();const e=this.dialogConfig[this.currentSegmentIndex-1];if(e.checkStock){const t=D.Instance.checkStock(this.currentCustomer.order);this.updateStockTip(t)}else this.missingTip.node.active=!1;null!==t&&(e.text=e.text.replace("${}",t)),this.currentText=e.text,this.dialogText.string=e.text,this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!0,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!0,this.clearButtons(),this.createButtons(e),this.addTimer(.07,(()=>{this.dialogPanel.getChildByName("mask").getComponent(u).enabled=!1,this.dialogPanel.getChildByName("mask").getComponent(h).enabled=!1})),this.addTimer(2,(()=>{this.dialogEndCallback&&this.dialogEndCallback(),this.dialogEndCallback=null}))}createButtons(t){if(D.Instance.missingStockIngredients.length>0&&!D.Instance.isRefuse){const t=g(this.buttonPrefab.node);t.parent=this.buttonContainer;t.getComponentInChildren(r).string=`进货：${D.Instance.missingStockIngredients[0]}`,t.getChildByName("sign_video").active=!0,t.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),t.active=!0,t.on(o.EventType.CLICK,(()=>{T.getInstance().playSound("点击"),this.buyIngredient()}));const e=g(this.buttonPrefab.node);e.parent=this.buttonContainer;e.getComponentInChildren(r).string="不接待",e.getChildByName("sign_video").active=!1,e.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),e.active=!0,e.on(o.EventType.CLICK,(()=>{T.getInstance().playSound("点击"),this.refuse()}))}else t.buttons.forEach(((e,n)=>{if(e.action==f.LEAVE)this.dialogEndCallback=this.leave;else if(e.action==f.DELIVER_TAKE_OUT)this.dialogEndCallback=this.deliverTakeOut;else if(e.action==f.TAKE_DISH)this.dialogEndCallback=()=>{this.takeDish(e)};else{const s=g(this.buttonPrefab.node);s.parent=this.buttonContainer;s.getComponent(o);s.getComponentInChildren(r).string=this.getButtonText(e,n),D.Instance.missingStockIngredients.length>0&&0===n&&(s.getChildByName("sign_video").active=!0),s.getComponent(d).updateLayout(),this.buttonContainer.getComponent(d).updateLayout(),s.active=!0,s.on(o.EventType.CLICK,(()=>{T.getInstance().playSound("点击"),this.onButtonClick(e,t)}))}}))}getButtonText(t,e){return D.Instance.missingStockIngredients.length>0&&0===e?`进货：${D.Instance.missingStockIngredients[0]}`:t.text}onButtonClick(t,e){let n=t.action;switch(n===f.START_MAKE&&D.Instance.missingStockIngredients.length>0&&(n=f.BUY_INGREDIENT),n!==f.BUY_INGREDIENT&&D.Instance.notes.push([this.currentText,t.text]),n){case f.START_MAKE:this.startMaking();break;case f.NEXT_DIALOG:this.nextSegment(t);break;case f.BUY_INGREDIENT:this.buyIngredient();break;case f.GET_TAKE_OUT:this.getTakeOutProgect(t);break;case f.DELIVER_TAKE_OUT:this.deliverTakeOut();break;case f.TAKE_DISH:this.takeDish(t);break;case f.REFUSE:this.refuse();break;case f.END_DIALOG:this.leave()}}startMaking(){D.Instance.isTakeout=!1,D.Instance.startCooking()}buyIngredient(){if(D.Instance.missingStockIngredients.length>0){const t=D.Instance.missingStockIngredients.shift();console.log(`购买了食材：${t}`),p.Instance.ShowVideoAd((()=>{D.Instance.playerData.stock[t]?D.Instance.playerData.stock[t]++:D.Instance.playerData.stock[t]=1,0===D.Instance.missingStockIngredients.length?this.missingTip.node.active=!1:this.missingTip.string=`缺少配料：${D.Instance.missingStockIngredients[0]}`,this.showCurrentSegment()}))}}nextSegment(t){if(!t)return this.currentSegmentIndex++,void this.showCurrentSegment();t.nextSegment&&-1!==t.nextSegment?(this.currentSegmentIndex=t.nextSegment,this.showCurrentSegment()):(this.currentSegmentIndex++,this.showCurrentSegment())}getTakeOutProgect(t){D.Instance.playerData.isTakeOutProjectSet=!0,I.Scene.emit(y.showTableItem),t&&this.nextSegment(t)}deliverTakeOut(){this.dialogPanel.active=!1,this.clearButtons(),D.Instance.isEndingDialog=!1,this.move(!1,(()=>{D.Instance.currentTakeoutOrder.status=S.DELIVERED,D.Instance.isDayEnd?D.Instance.checkoutDay():this.addTimer(.5,(()=>{this.restartCurrentCustomerDialog()}))}))}takeDish(t){let e=()=>{this.dialogPanel.active=!0,this.nextSegment(t),I.off(y.Dish_Drag_End,e,this)};I.on(y.Dish_Drag_End,e,this)}refuse(){D.Instance.isRefuse=!0,this.startCustomerDialog(D.Instance.currentCustomer,!0,!0)}leave(){this.dialogPanel.active=!1,this.clearButtons(),this.isStartDialog||D.Instance.checkoutCustomer(),D.Instance.isEndingDialog=!1,this.move(!1,(()=>{6===D.Instance.dayCustomerCount&&(D.Instance.isDayEnd=!0),D.Instance.isDayEnd?D.Instance.checkoutDay():this.addTimer(.5,(()=>{this.nextCustomer()}))}))}enter(t){this.move(!0,(()=>{t&&t()}))}move(t,e){t?(this.customerNode.setScale(m(1,0,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1.1,.9,1)}).to(.2,{scale:m(1,1,1)}).call((()=>{e()})).start()):(this.customerNode.setScale(m(1,1,1)),this.tween=C(this.customerNode).to(.3,{scale:m(.8,1.1,1)}).to(.2,{scale:m(1,0,1)}).call((()=>{e()})).start())}clearButtons(){this.buttonContainer.children.forEach((t=>{t.destroy()}))}updateStockTip(t){!t&&D.Instance.missingStockIngredients.length>0?(this.missingTip.node.active=!0,this.missingTip.string=`缺少配料：${D.Instance.missingStockIngredients[0]}`):this.missingTip.node.active=!1}loadSp(t){this.customerNode.children.forEach((e=>{e.active=!1,e.name===t&&(e.active=!0,e.getChildByName("smile").active=!this.isAngry,e.getChildByName("angry").active=this.isAngry,this.isAngry=!1)}))}startNewDayDialog(){let t=D.Instance.playerData.currentDay>=9?9:D.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers,D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex=0,this.startNextCustomerDialog())}startNextCustomerDialog(){let t=D.Instance.playerData.currentDay>=9?9:D.Instance.playerData.currentDay;const e=this.dayConfigs.find((e=>e.day===t));e&&(this.currentCustomers=e.customers);let n=null;if(D.Instance.playerData.isTakeOutProjectSet)for(n=this.currentCustomers[D.Instance.currentCustomerIndex];"外卖员"==n.avatar;)D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,n=this.currentCustomers[D.Instance.currentCustomerIndex];else n=this.currentCustomers[D.Instance.currentCustomerIndex];n?(D.Instance.resetCustomer(n),this.loadSp(n.avatar),this.enter((()=>{this.startCustomerDialog(n)}))):console.log(`第${D.Instance.playerData.currentDay}天结束`)}restartCurrentCustomerDialog(){this.startNextCustomerDialog()}showTakeoutEndDialog(){D.Instance.isEndingDialog&&(D.Instance.isEndingDialog=!1,"外卖员"!==D.Instance.currentCustomer.avatar&&(D.Instance.checkoutCustomer(),D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,D.Instance.dayCustomerCount++)),D.Instance.missingStockIngredients=[],this.dialogPanel.active=!1,this.customerNode.setScale(m(1,0,1));const t=this.specialDialogConfigs["外卖员"];t&&(this.loadSp(t.avatar),this.enter((()=>{this.startCustomerDialog(t,!1)})))}nextCustomer(){D.Instance.playerData.currentDay>=9?D.Instance.currentCustomerIndex=Math.floor(Math.random()*(this.currentCustomers.length-1)):D.Instance.currentCustomerIndex++,D.Instance.dayCustomerCount++,D.Instance.addOneHour(),this.startNextCustomerDialog()}showEndDialogSp(){this.dialogPanel.active=!1,this.loadSp(D.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1))}continueCustomerDialog(){this.loadSp(D.Instance.currentCustomer.avatar),this.customerNode.setScale(m(1,1,1)),this.startCustomerDialog(D.Instance.currentCustomer,!1)}onGamePause(){this.tween&&this.tween.pause(),this.pauseAllTimers()}onGameResume(){this.tween&&this.tween.resume(),this.resumeAllTimers()}addListener(){I.on(y.LSF_Start_NewDay_Dialog,this.startNewDayDialog,this),I.on(y.LSF_Show_End_Dialog_Sp,this.showEndDialogSp,this),I.on(y.LSF_Continue_Customer_EndDialog,this.continueCustomerDialog,this),I.on(y.LSF_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),I.on(y.Game_Pause,this.onGamePause,this),I.on(y.Game_Resume,this.onGameResume,this)}removeListener(){I.off(y.LSF_Start_NewDay_Dialog,this.startNewDayDialog,this),I.off(y.LSF_Show_End_Dialog_Sp,this.showEndDialogSp,this),I.off(y.LSF_Continue_Customer_EndDialog,this.continueCustomerDialog,this),I.off(y.LSF_Show_Takeout_End_Dialog,this.showTakeoutEndDialog,this),I.off(y.Game_Pause,this.onGamePause,this),I.off(y.Game_Resume,this.onGameResume,this)}onDestroy(){this.removeListener(),this.clearAllTimers()}update(t){if(0!==this.timers.length)for(let e=this.timers.length-1;e>=0;e--){const n=this.timers[e];if(!n.isPaused&&!this.isAllTimersPaused&&(n.elapsed+=t,n.elapsed>=n.duration)){try{n.callback()}catch(t){console.error("Timer callback error:",t)}this.timers.splice(e,1)}}}addTimer(t,e){const n=this.nextTimerId++,s={id:n,duration:t,elapsed:0,callback:e,isPaused:!1};return this.timers.push(s),n}pauseTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!0,!0)}resumeTimer(t){const e=this.timers.find((e=>e.id===t));return!!e&&(e.isPaused=!1,!0)}removeTimer(t){const e=this.timers.findIndex((e=>e.id===t));return-1!==e&&(this.timers.splice(e,1),!0)}pauseAllTimers(){this.isAllTimersPaused=!0}resumeAllTimers(){this.isAllTimersPaused=!1}getTimerRemainingTime(t){const e=this.timers.find((e=>e.id===t));return e?Math.max(0,e.duration-e.elapsed):null}clearAllTimers(){this.timers=[],this.isAllTimersPaused=!1}}).Instance=void 0,B=e((R=U).prototype,"gameConfig",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(R.prototype,"specialDialogConfig",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(R.prototype,"endingDialogConfig",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(R.prototype,"dialogPanel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(R.prototype,"customerNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(R.prototype,"dialogText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(R.prototype,"buttonContainer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(R.prototype,"missingTip",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(R.prototype,"buttonPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=R))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_DialoguePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(t){var e,i,n,a,o,s,h,r,l,d,c,u,C,T,m,p,_,b,g,w,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,o=t._decorator,s=t.instantiate,h=t.v3,r=t.Label,l=t.UIOpacity,d=t.tween,c=t.Vec3,u=t.Animation,C=t.Button},function(t){T=t.EventManager},function(t){m=t.XCT_BasePanel,p=t.XCT_PanelAnimation},function(t){_=t.XCT_UILayer},function(t){b=t.XCT_UIManager},function(t){g=t.XCT_UIPanel},function(t){w=t.XCT_Events},function(t){y=t.XCT_LSF_DataManager},function(t){f=t.XCT_AudioManager}],execute:function(){var k,v,S,I,D,N,P,L,A,B,O,F,E,X,z,M,U,j,V,x,H;n._RF.push({},"235d9gIb/FLJIb6EyuGxKi0","XCT_LSF_DialoguePanel",void 0);const{ccclass:K,property:R}=o;t("XCT_LSF_DialoguePanel",(k=K("XCT_LSF_DialoguePanel"),v=R(a),S=R(a),I=R(a),D=R(a),N=R(a),P=R(a),L=R(a),A=R(a),B=R(a),k((E=e((F=class extends m{constructor(...t){super(...t),this.defaultShowAnimation=p.SLIDE_FROM_TOP,this.defaultHideAnimation=p.SLIDE_TO_TOP,this.defaultLayer=_.Dialog,this.animationDuration=.6,i(this,"tableItems",E,this),i(this,"moneyItem",X,this),i(this,"moneyContainer",z,this),i(this,"btnTakeout",M,this),i(this,"dishNode",U,this),i(this,"dishPos1",j,this),i(this,"dishPos2",V,this),i(this,"btnCat",x,this),i(this,"dargTurtrialAnim",H,this),this.isCatClicked=!1,this.needShowDish=!1,this.isAddedEvent=!1,this.takeoutTween=null,this.cb=null}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}onShowComplete(){this.cb&&this.cb(),this.cb=null}init(t=!0){this.dishNode.active=this.needShowDish,this.needShowDish=!1,this.dargTurtrialAnim.active=!1,t?this.onShowTableItem():this.hideTableItem(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,this.btnTakeout.getChildByName("nodeVideo").active=!1,y.Instance.needShowTakeoutCome&&this.showTakeoutCom(),this.isCatClicked=!1,y.Instance.isCatDriveAway=!1,1==y.Instance.playerData.currentDay||y.Instance.playerData.isAdoptedCat?this.btnCat.active=!1:this.btnCat.active=!0,this.btnCat.getChildByName("dialogue2").active=!1}hideTableItem(){this.tableItems.forEach((t=>{t.active=!1}))}onShowTableItem(){this.tableItems.forEach((t=>{t.active=!0})),this.btnTakeout.active=y.Instance.playerData.isTakeOutProjectSet,this.btnTakeout.getChildByName("nodeVideo").active=!y.Instance.playerData.isTakeOutProjectOpen}onShowAddTip(){this.moneyContainer.removeAllChildren();const t=s(this.moneyItem);t.parent=this.moneyContainer,t.setPosition(h(0,0,0)),t.getComponentInChildren(r).string="小费+"+y.Instance.currentSellingAddTip,t.setPosition(0,-200),t.getComponent(l).opacity=255,t.active=!0,d(t).to(1.5,{position:new c(0,200,0)},{easing:"sineIn"}).parallel(d(t.getComponent(l)).to(1.5,{opacity:0})).call((()=>{t.destroy()})).start()}onClickTakeout(){if(f.getInstance().playSound("点击"),y.Instance.playerData.isTakeOutProjectOpen){if(y.Instance.isEndingDialog)return void T.Scene.emit(w.showTip,"请先完成当前订单");this.takeoutTween&&this.takeoutTween.stop(),this.btnTakeout.getChildByName("nodeOrderCome").active=!1,b.Instance.showPanel(g.LSF_TakeoutPanel)}else b.Instance.showPanel(g.LSF_TipPanel,null,(()=>{T.Scene.emit(w.LSF_ShowTip_OpenTakeout)}))}showTakeoutCom(){if(y.Instance.playerData.isTakeOutProjectOpen){if(y.Instance.isShowingTakeoutPanel)return;this.btnTakeout.getChildByName("nodeOrderCome").active=!0,this.takeoutTween=d(this.btnTakeout.getChildByName("nodeOrderCome")).to(.3,{scale:new c(1.2,1.2,1.2)}).to(.3,{scale:new c(.9,.9,.9)}).union().repeatForever().start()}else this.btnTakeout.getChildByName("nodeVideo").active=!0}hideTakeoutCom(){this.btnTakeout.getChildByName("nodeOrderCome").active=!1}takeoutOpen(){this.btnTakeout.getChildByName("nodeVideo").active=!1}onCatClick(){f.getInstance().playSound("猫"),this.isCatClicked=!this.isCatClicked;let t=this.btnCat.getChildByName("dialogue2"),e=t.getChildByName("btnDriveAway"),i=t.getChildByName("btnAdopt");e.active=!0,i.active=!0,this.isCatClicked?(t.active=!0,e.off("click"),e.on("click",this.onBtnDriveAwayClick,this),i.off("click"),i.on("click",this.onBtnAdoptClick,this)):(t.active=!1,e.off("click"),i.off("click"))}onBtnDriveAwayClick(){y.Instance.isCatDriveAway=!0;let t=this.btnCat.getChildByName("dialogue2");t.getChildByName("heart").getChildByName("heart_1").active=!1,t.getChildByName("heart").getChildByName("heart_2").active=!0,t.getChildByName("btnDriveAway").active=!1,t.getChildByName("btnAdopt").active=!1,this.scheduleOnce((()=>{this.btnCat.active=!1}),1)}onBtnAdoptClick(){y.Instance.playerData.isAdoptedCat=!0,this.btnCat.active=!1}showDishNode(){this.cb=()=>{this.needShowDish=!0,this.dishNode.active=!0,this.dishNode.setWorldPosition(h(this.dishPos1.worldPosition.x,this.dishPos1.worldPosition.y-300,this.dishPos1.worldPosition.z)),d(this.dishNode).to(.5,{worldPosition:this.dishPos1.worldPosition}).call((()=>{y.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.active=!0,this.dargTurtrialAnim.getComponent(u).play())})).start()}}hideDishNode(){this.dishNode.active=!1}dishDragEnd(){y.Instance.isNeedShowDragTutorial&&(this.dargTurtrialAnim.getComponent(u).stop(),this.dargTurtrialAnim.active=!1,y.Instance.isNeedShowDragTutorial=!1),y.Instance.isTakeout||T.Scene.emit(w.LSF_Continue_Customer_EndDialog)}showBowl(t){t.setParent(this.dishNode),t.setPosition(h(0,0,0)),t.setScale(h(.7,.7,1)),t.active=!0}addListener(){T.on(w.showTableItem,this.onShowTableItem,this),T.on(w.hideTableItem,this.hideTableItem,this),T.on(w.LSF_Show_Add_Tip,this.onShowAddTip,this),T.on(w.LSF_Takeout_Open,this.takeoutOpen,this),T.on(w.LSF_New_Takeout_Order,this.showTakeoutCom,this),T.on(w.LSF_Hide_New_Takeout_Order,this.hideTakeoutCom,this),T.on(w.LSF_Show_Dish_Node,this.showDishNode,this),T.on(w.Dish_Drag_End,this.dishDragEnd,this),T.on(w.LSF_Show_Bowl,this.showBowl,this),this.btnTakeout.on(C.EventType.CLICK,this.onClickTakeout,this),this.btnCat.on(C.EventType.CLICK,this.onCatClick,this)}removeListener(){T.off(w.showTableItem,this.onShowTableItem,this),T.off(w.hideTableItem,this.hideTableItem,this),T.off(w.LSF_Show_Add_Tip,this.onShowAddTip,this),T.off(w.LSF_New_Takeout_Order,this.showTakeoutCom,this),T.off(w.LSF_Hide_New_Takeout_Order,this.hideTakeoutCom,this),T.off(w.LSF_Takeout_Open,this.takeoutOpen,this),T.off(w.LSF_Show_Dish_Node,this.showDishNode,this),T.off(w.Dish_Drag_End,this.dishDragEnd,this),T.off(w.LSF_Show_Bowl,this.showBowl,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tableItems",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=e(F.prototype,"moneyItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(F.prototype,"moneyContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(F.prototype,"btnTakeout",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(F.prototype,"dishNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(F.prototype,"dishPos1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"dishPos2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(F.prototype,"btnCat",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(F.prototype,"dargTurtrialAnim",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=F))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_GamePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,o,s,r,l,c,h,d,u,C,g,p,m,y,f,b,I,N,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,s=e.Widget,r=e.Layout,l=e.tween,c=e.Vec3,h=e.UITransform,d=e.instantiate,u=e.Label,C=e.v2},function(e){g=e.EventManager},function(e){p=e.XCT_BasePanel,m=e.XCT_PanelAnimation},function(e){y=e.XCT_UILayer},function(e){f=e.XCT_UIManager},function(e){b=e.XCT_UIPanel},function(e){I=e.XCT_Events},function(e){N=e.XCT_LSF_DataManager},function(e){_=e.XCT_AudioManager}],execute:function(){var w,P,k,v,T,B,A,S,E,L,D,X,F,z,M,U,G,R,O,H,W,x,j,V,Q,Y,Z,q,J,K,$,ee,te;i._RF.push({},"29365PXZg9CYoV0E2Lg5IcH","XCT_LSF_GamePanel",void 0);const{ccclass:ne,property:ie}=o;e("XCT_LSF_GamePanel",(w=ne("XCT_LSF_GamePanel"),P=ie(a),k=ie(a),v=ie(a),T=ie(a),B=ie(a),A=ie(a),S=ie(a),E=ie(a),L=ie(a),D=ie(a),X=ie(a),F=ie(a),z=ie(a),M=ie(a),U=ie(a),w((O=t((R=class extends p{constructor(...e){super(...e),this.defaultShowAnimation=m.SLIDE_FROM_BOTTOM,this.defaultHideAnimation=m.SLIDE_TO_BOTTOM,this.defaultLayer=y.Game,this.animationDuration=.6,n(this,"ingredientContainer",O,this),n(this,"spreadIngredientContainer",H,this),n(this,"noodleContainer",W,this),n(this,"soupContainer",x,this),n(this,"sauceContainer",j,this),n(this,"saltContainer",V,this),n(this,"btnNote1",Q,this),n(this,"btnNote2",Y,this),n(this,"NotePanel",Z,this),n(this,"NotePos1",q,this),n(this,"NotePos2",J,this),n(this,"btnNoteClose",K,this),n(this,"paws",$,this),n(this,"bowlNode",ee,this),n(this,"cookArea",te,this),this.isAddedEvent=!1,this.isArea2=!1,this.catIngredient=[],this.stealInterval=2,this.stealTimer=0,this.isPawPated=!1,this.tween=null}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.cookArea.children.forEach((e=>{e.getComponent(s).enabled=!0;let t=e.getComponent(s);t.updateAlignment(),t.enabled=!1})),this.cookArea.getComponent(r).enabled=!0,this.cookArea.getComponent(r).updateLayout(),this.cookArea.getComponent(r).enabled=!1,this.cookArea.getComponent(s).enabled=!1,this.NotePanel.active=!1,this.updateIngredientContainer(),this.isArea2=!1,this.paws.forEach((e=>{e.active=!1}))}changeCookArea(){l(this.cookArea).delay(.2).to(.5,{position:new c(-this.node.getComponent(h).width,0,0)}).call((()=>{g.Scene.emit(I.HandAnimation_End),this.isArea2=!0})).start()}onCompleted(){let e=d(this.bowlNode);N.Instance.endCooking(e)}updateIngredientContainer(){let e=0;this.catIngredient=[],this.ingredientContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++,this.catIngredient.push(t)):t.active=!1})),e<this.ingredientContainer.children.length-1&&(this.ingredientContainer.getChildByName("空_配料").active=!0,this.ingredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.spreadIngredientContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.spreadIngredientContainer.children.length-1&&(this.spreadIngredientContainer.getChildByName("空_配料").active=!0,this.spreadIngredientContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.noodleContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.noodleContainer.children.length-1&&(this.noodleContainer.getChildByName("空_配料").active=!0,this.noodleContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.soupContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e<this.soupContainer.children.length-1&&(this.soupContainer.getChildByName("空_配料").active=!0,this.soupContainer.getChildByName("空_配料").on("click",this.onClickEmptyIngredient,this)),e=0,this.saltContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1})),e=0,this.sauceContainer.children.forEach((t=>{N.Instance.playerData.stock[t.name]&&N.Instance.playerData.stock[t.name]>0?(t.active=!0,e++):t.active=!1}))}onClickEmptyIngredient(){g.Scene.emit(I.Hide_TutorialPanel),f.Instance.showPanel(b.LSF_ShopPanel,!0)}onClickNote(){_.getInstance().playSound("点击"),g.Scene.emit(I.Hide_TutorialPanel),this.NotePanel.active=!0;let e=this.NotePanel.getChildByName("noteNode"),t=this.NotePanel.getChildByName("takeoutNoteNode");e.active=!N.Instance.isTakeout,t.active=N.Instance.isTakeout;let n=N.Instance.isTakeout?"takeoutNoteNode":"noteNode",i=this.NotePanel.getChildByName(n),a=i.getChildByName("noteContainer"),o=N.Instance.isTakeout?N.Instance.takeoutNotes:N.Instance.notes;a.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1}));let s=a.children[0];o.forEach((e=>{let t=d(s);t.parent=a,t.getChildByName("lblQustion").getComponent(u).string=e[0],t.getChildByName("lblAnswer").getComponent(u).string=e[1],t.active=!0})),i.setWorldPosition(this.NotePos1.worldPosition),l(i).to(.3,{worldPosition:this.NotePos2.worldPosition}).start()}onClickCloseNote(){g.Scene.emit(I.Show_TutorialPanel),this.NotePanel.active=!1}update(e){if(!N.Instance.isPause&&this.isArea2&&!N.Instance.playerData.isAdoptedCat&&!N.Instance.isCatDriveAway&&1!=N.Instance.playerData.currentDay&&N.Instance.isCooking&&(this.stealTimer+=e,this.stealTimer>=this.stealInterval)){this.stealInterval=2*Math.random()+15,this.stealTimer=0;let e=Math.floor(Math.random()*this.paws.length),t=this.paws[e];if(0==e&&this.catIngredient.length<2)return;if(1==e&&this.catIngredient.length<4)return;if(2==e&&this.catIngredient.length<7)return;this.catSteal(t,e)}}catSteal(e,t){e.active=!0,e.getChildByName("button").off("click"),e.getChildByName("button").on("click",(()=>this.onPawClick(e)),this);let n=e.getChildByName("pawSp"),i=e.getChildByName("pawPos_0"),a=e.getChildByName("pawPos_1"),o=n.getChildByName("ingredientContainer");o.active=!1,e.getChildByName("nodePat").active=!1;let s=null;n.setWorldPosition(i.worldPosition),this.tween=l(n).to(1.5,{worldPosition:a.worldPosition}).delay(1).call((()=>{let t=e.getChildByName("pawPos").getWorldPosition();this.catIngredient.forEach((e=>{if(s)return;e.getComponent(h).getBoundingBoxToWorld().contains(C(t.x,t.y))&&(s=e.name)})),o.children.forEach((e=>{e.name!==s?e.active=!1:e.active=!0})),o.active=!0})).to(.2,{worldPosition:i.worldPosition}).call((()=>{e.active=!1;let t=N.Instance.ingredientsConfigObject[s].cost;N.Instance.playerData.money-=t,g.Scene.emit(I.LSF_Update_Money),this.tween=null})).start()}onPawClick(e){_.getInstance().playSound("猫2"),this.tween&&this.tween.stop();let t=e.getChildByName("pawSp"),n=e.getChildByName("pawPos_0");t.getChildByName("ingredientContainer").active=!1,e.getChildByName("nodePat").active=!0,this.tween=null,this.tween=l(t).to(.2,{worldPosition:n.worldPosition}).call((()=>{e.active=!1,this.tween=null})).start()}onPause(){this.tween&&this.tween.pause()}onResume(){this.tween&&this.tween.resume()}addListener(){g.on(I.LSF_Update_Ingredient,this.updateIngredientContainer,this),g.on(I.LSF_Change_CookArea,this.changeCookArea,this),g.on(I.LSF_Completed,this.onCompleted,this),g.on(I.Game_Pause,this.onPause,this),g.on(I.Game_Resume,this.onResume,this),this.btnNote1.on("click",this.onClickNote,this),this.btnNote2.on("click",this.onClickNote,this),this.btnNoteClose.on("click",this.onClickCloseNote,this)}removeListener(){g.off(I.LSF_Update_Ingredient,this.updateIngredientContainer,this),g.off(I.LSF_Change_CookArea,this.changeCookArea,this),g.off(I.LSF_Completed,this.onCompleted,this),g.off(I.Game_Pause,this.onPause,this),g.off(I.Game_Resume,this.onResume,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"ingredientContainer",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(R.prototype,"spreadIngredientContainer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(R.prototype,"noodleContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(R.prototype,"soupContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(R.prototype,"sauceContainer",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(R.prototype,"saltContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(R.prototype,"btnNote1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(R.prototype,"btnNote2",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(R.prototype,"NotePanel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(R.prototype,"NotePos1",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(R.prototype,"NotePos2",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(R.prototype,"btnNoteClose",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(R.prototype,"paws",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=t(R.prototype,"bowlNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(R.prototype,"cookArea",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=R))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,i,n,a,s,l,o,r,u,h,c,d,p,m,S,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,s=e.Label,l=e._decorator,o=e.Sprite},function(e){r=e.EventManager},function(e){u=e.XCT_BasePanel,h=e.XCT_PanelAnimation},function(e){c=e.XCT_UILayer},function(e){d=e.XCT_UIManager},function(e){p=e.XCT_UIPanel},function(e){m=e.XCT_Events},function(e){S=e.XCT_LSF_DataManager},function(e){_=e.XCT_AudioManager}],execute:function(){var b,f,T,y,g,L,I,F,w,C,M,U,X,v,D,A,P,E,N;n._RF.push({},"b85330gz2FKLJ66qJ7ptC73","XCT_LSF_GameUI",void 0);const{ccclass:k,property:z}=l;e("XCT_LSF_GameUI",(b=k("XCT_LSF_GameUI"),f=z(a),T=z(s),y=z(s),g=z(a),L=z(s),I=z(s),F=z(a),w=z(a),b((U=t((M=class extends u{constructor(...e){super(...e),this.defaultShowAnimation=h.NONE,this.defaultHideAnimation=h.NONE,this.defaultLayer=c.GameUI,this.animationDuration=.6,i(this,"spSun",U,this),i(this,"lblDay",X,this),i(this,"lblTime",v,this),i(this,"smileNode",D,this),i(this,"lblSmile",A,this),i(this,"lblMoney",P,this),i(this,"btnAdd",E,this),i(this,"btnShowTipBack",N,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){S.Instance.isDayEnd?this.smileNode.active=!1:this.smileNode.active=!0,this.updateUI()}updateUI(){this.lblDay.string="第"+S.Instance.playerData.currentDay+"天",this.updateTime(),this.updateSmile(),this.lblMoney.string=S.Instance.playerData.money.toFixed(1)}updateMoney(){this.lblMoney.string=S.Instance.playerData.money.toFixed(1)}updateTime(){const e=S.Instance.currentHour.toString().padStart(2,"0"),t=S.Instance.currentMinute.toString().padStart(2,"0");this.lblTime.string=`${e}:${t}`,this.spSun.getComponent(o).fillRange=-(S.Instance.currentTime+8*S.Instance.MINUTES_PER_HOUR)/S.Instance.totalTime}updateSmile(){this.lblSmile.string=S.Instance.currentSmile.toString()+"%"}onClickAdd(){_.getInstance().playSound("点击"),d.Instance.showPanel(p.LSF_TipPanel,null,(()=>{r.Scene.emit(m.LSF_ShowTip_NoMoney)}))}hideSmile(){this.smileNode.active=!1}showSmile(){this.smileNode.active=!0}showBackTipPanel(){_.getInstance().playSound("点击"),d.Instance.showPanel(p.LSF_TipPanel,null,(()=>{r.Scene.emit(m.LSF_ShowTip_Back)}))}addListener(){r.on(m.LSF_Update_Money,this.updateMoney,this),r.on(m.LSF_Update_Time,this.updateTime,this),r.on(m.LSF_Update_Smile,this.updateSmile,this),r.on(m.LSF_Hide_smile,this.hideSmile,this),r.on(m.LSF_Show_smile,this.showSmile,this),this.btnAdd.on("click",this.onClickAdd,this),this.btnShowTipBack.on("click",this.showBackTipPanel,this)}removeListener(){r.off(m.LSF_Update_Money,this.updateMoney,this),r.off(m.LSF_Update_Time,this.updateTime,this),r.off(m.LSF_Update_Smile,this.updateSmile,this),r.off(m.LSF_Hide_smile,this.hideSmile,this),r.off(m.LSF_Show_smile,this.showSmile,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"spSun",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(M.prototype,"lblDay",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(M.prototype,"lblTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(M.prototype,"smileNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(M.prototype,"lblSmile",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(M.prototype,"lblMoney",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(M.prototype,"btnAdd",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(M.prototype,"btnShowTipBack",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=M))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_Ingredient_Single.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts","./XCT_LSF_DataManager.ts"],(function(e){var t,n,i,a,o,s,r,l,c,h,d,u,f,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,s=e.Component,r=e.instantiate,l=e.v3,c=e.Vec3,h=e.UIOpacity,d=e.Tween},function(e){u=e.XCT_Events},function(e){f=e.EventManager},function(e){p=e.XCT_LSF_DataManager,g=e.XCT_LSF_IngredientType}],execute:function(){var m,y,b,C,I,_,S,T,v,L,P,N,w,k,B;i._RF.push({},"97931q3z1BGMJ3AohZDkFI0","XCT_LSF_Ingredient_Single",void 0);const{ccclass:E,property:x}=o;e("XCT_LSF_Ingredient_Single",(m=E("XCT_LSF_Ingredient_Single"),y=x(a),b=x(a),C=x(a),I=x(a),_=x(a),S=x(Number),m((L=t((v=class extends s{constructor(...e){super(...e),n(this,"beforeLayer",L,this),n(this,"afterLayer",P,this),n(this,"toolsLayer",N,this),n(this,"spoonPrefab",w,this),n(this,"bowl",k,this),n(this,"IngredientType",B,this),this.beforePrefab=null,this.afterPrefab=null,this.maskPrefab=null,this.bowlPrefab=null,this.spoonNode=null,this.count=0,this.tween=null}onLoad(){this.addListener(),this.beforePrefab=this.node.getChildByName("beforePrefab"),this.afterPrefab=this.node.getChildByName("afterPrefab"),this.maskPrefab=this.node.getChildByName("maskPrefab"),this.bowlPrefab=this.node.getChildByName("bowlPrefab"),this.maskPrefab.active=!1,this.afterPrefab.active=!1,this.beforePrefab.active=!1,this.bowlPrefab.active=!1,this.spoonPrefab.active=!1,this.spoonPrefab.getChildByName("spoonMask").active=!1,this.bowl.getChildByName("cookArea").active=!1,this.node.getChildByName("ingredient_suspended").active=!1,this.node.getChildByName("selected").active=!1}onTouchStart(e){1==p.Instance.tutorialIdx&&"玉米排骨锅"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++),3==p.Instance.tutorialIdx&&"宽粉"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++)}onTouchEnd(e){let t=r(this.beforePrefab);t.parent=this.beforeLayer.getChildByName("Contanter"),t.setPosition(l(0,0,0)),t.eulerAngles=new c(0,0,50*Math.random()-50),t.getComponent(h).opacity=255,0==this.IngredientType&&t.setSiblingIndex(0),t.active=!0;let n=r(this.afterPrefab);n.parent=this.afterLayer.getChildByName("Contanter"),n.setPosition(l(0,0,0)),n.eulerAngles=new c(0,0,50*Math.random()-50),n.getComponent(h).opacity=0,0==this.IngredientType?n.setSiblingIndex(0):n.name="Noodle",n.active=!0,this.count++,f.Scene.emit(u.LSF_Cancel_All_Ingredients);let i="";i=0==this.IngredientType?"layer_Soup":"layer_Noodle";let a=this.bowl.getChildByName("cookArea").getChildByName(i).getChildByName("Contanter");a.children.forEach((e=>{e.destroy()}));let o=r(this.bowlPrefab);o.parent=a,o.setPosition(l(0,0,0)),o.eulerAngles=new c(0,0,0),o.active=!0;let s=r(this.maskPrefab),d=this.spoonPrefab.getChildByName("spoonMask"),m=0==this.IngredientType?d.getChildByName("soupMaskContainer"):d.getChildByName("noodleMaskContainer");if(m.children.forEach((e=>{e.destroy()})),s.parent=m,s.setPosition(l(0,0,0)),s.active=!0,1==this.IngredientType){let e=r(this.spoonPrefab);e.parent=this.toolsLayer.getChildByName("Contanter"),e.setPosition(l(0,0,0)),e.getChildByName("spoonMask").active=!1,e.active=!0,this.spoonNode=e}p.Instance.currentCookedSteps.push(this.node.name),p.Instance.currentDishes[this.node.name]||(p.Instance.currentDishes[this.node.name]={type:g.SPICE,need:1,count:0,percentage:0,rotateCount:0}),p.Instance.currentDishes[this.node.name].count++,p.Instance.playerData.money-=p.Instance.ingredientsConfigObject[this.node.name].cost,p.Instance.dayCost+=p.Instance.ingredientsConfigObject[this.node.name].cost,f.Scene.emit(u.LSF_Update_Money)}onCancel_Click(){this.spoonNode&&this.spoonNode.destroy(),this.spoonNode=null,this.stopScaleSingleItem(),this.removeTouchListener()}onClick(){let e=["番茄锅","红油辣锅","玉米排骨锅","菌菇锅"],t=["碱面","方便面","宽粉","拉面","细粉"];if(1==this.IngredientType){let n=!1;if(p.Instance.currentCookedSteps.forEach((t=>{n||e.includes(t)&&(n=!0)})),!n)return void f.Scene.emit(u.showTip,"要先选择汤底，才可以加面哦！");let i=!1;if(p.Instance.currentCookedSteps.forEach((e=>{i||t.includes(e)&&(i=!0)})),i)return void f.Scene.emit(u.showTip,"一碗面只能加一块面饼哦")}else{let t=!1;if(p.Instance.currentCookedSteps.forEach((n=>{t||e.includes(n)&&(t=!0)})),t)return void f.Scene.emit(u.showTip,"一碗面只能选择一种面汤底哦！")}if(1==p.Instance.playerData.currentDay&&!p.Instance.isTutorialEnd){if(-1==[0,2].indexOf(p.Instance.tutorialIdx))return;if(0==p.Instance.tutorialIdx&&"玉米排骨锅"!==this.node.name)return;if(2==p.Instance.tutorialIdx&&"宽粉"!==this.node.name)return}0==p.Instance.tutorialIdx&&"玉米排骨锅"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++),2==p.Instance.tutorialIdx&&"宽粉"==this.node.name&&(f.Scene.emit(u.HandAnimation_End),p.Instance.tutorialIdx++),f.Scene.emit(u.LSF_Cancel_All_Ingredients),this.sacleSingeItem(),this.addTouchListener()}sacleSingeItem(){this.node.getChildByName("selected").active=!0;let e=this.node.getChildByName("ingredient_suspended");e.active=!0;const t=e.scale.clone();this.tween=new d(e).to(.5,{scale:new c(1.2*t.x,1.2*t.y,t.z)}).to(.5,{scale:t}).union().repeatForever().start()}stopScaleSingleItem(){this.node.getChildByName("selected").active=!1;let e=this.node.getChildByName("ingredient_suspended");e.active=!1,this.tween&&(this.tween.stop(),this.tween=null,e.scale=new c(1,1,1)),console.log("点击次数:",this.count)}addTouchListener(){this.afterLayer.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.afterLayer.on(a.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.afterLayer.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.afterLayer.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){f.on(u.LSF_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){f.off(u.LSF_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"beforeLayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(v.prototype,"afterLayer",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(v.prototype,"toolsLayer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"spoonPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(v.prototype,"bowl",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(v.prototype,"IngredientType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=v))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_Ingredient.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,s,o,r,d,c,h,l,u,g,m,I,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,o=e.Component,r=e.instantiate,d=e.v3,c=e.Vec3,h=e.UITransform,l=e.tween},function(e){u=e.EventManager},function(e){g=e.XCT_Events},function(e){m=e.XCT_LSF_DataManager,I=e.XCT_LSF_IngredientType},function(e){C=e.XCT_AudioManager}],execute:function(){var _,T,p,y,f;i._RF.push({},"f4b76omz29Ek4kwxEB/xLAD","XCT_LSF_Ingredient",void 0);const{ccclass:S,property:v}=s;e("XCT_LSF_Ingredient",(_=S("XCT_LSF_Ingredient"),T=v(a),_((f=t((y=class extends o{constructor(...e){super(...e),n(this,"targetArea",f,this),this.rainItem=null,this.rainContainer=null,this.rainTimer=0,this.isRaining=!1,this.ingredientPrefab=null,this.isTouching=!1,this.count=0}onLoad(){this.addListener(),this.ingredientPrefab=this.node.getChildByName("ingredient_sow"),this.rainItem=this.node.getChildByName("rainItem"),this.rainContainer=this.node.getChildByName("rainContainer"),this.node.getChildByName("ingredient_suspended").active=!1,this.node.getChildByName("selected").active=!1}onTouchStart(e){const t=e.getUILocation();let n=r(this.ingredientPrefab);n.parent=this.targetArea.getChildByName("Contanter"),n.setWorldPosition(d(t.x,t.y,0)),n.active=!0,n.eulerAngles=new c(0,0,10*Math.random()),this.count++,m.Instance.currentCookedSteps.push(this.node.name),10==m.Instance.tutorialIdx&&"葱花"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),12==m.Instance.tutorialIdx&&"咸鸭蛋"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),C.getInstance().playSound("放"),m.Instance.currentDishes[this.node.name]||(m.Instance.currentDishes[this.node.name]={type:I.SPICE,need:1,count:0,percentage:0,rotateCount:0}),m.Instance.currentDishes[this.node.name].count++,m.Instance.playerData.money-=m.Instance.ingredientsConfigObject[this.node.name].cost,m.Instance.dayCost+=m.Instance.ingredientsConfigObject[this.node.name].cost,u.Scene.emit(g.LSF_Update_Money)}onTouchEnd(e){}update(e){this.isRaining&&(this.rainTimer-=e,this.rainTimer<=0&&(this.createRainItem(),this.rainTimer=.3*Math.random()))}createRainItem(){const e=this.node.getChildByName("ingredient_suspended"),t=e.getWorldPosition(),n=e.getComponent(h).width,i=r(this.rainItem);i.parent=this.rainContainer;const a=t.x-n/2+Math.random()*n;i.setWorldPosition(d(a,t.y,0)),i.active=!0;let s=70+50*Math.random();const o=s/300;s=i.worldPosition.y-s;let c=i.worldPosition.x;l(i).to(o,{worldPosition:d(c,s,0)}).to(o,{scale:d(0,0,0)}).call((()=>i.destroy())).start()}onCancel_Click(){this.stopRainIngredient(),this.removeTouchListener()}onClick(){let e=!1,t=["酱","醋","盐","鸡精"];if(m.Instance.currentCookedSteps.forEach((n=>{e||t.includes(n)&&(e=!0)})),e){if(1==m.Instance.playerData.currentDay&&!m.Instance.isTutorialEnd){if(-1==[9,11].indexOf(m.Instance.tutorialIdx))return;if(9==m.Instance.tutorialIdx&&"葱花"!==this.node.name)return;if(11==m.Instance.tutorialIdx&&"咸鸭蛋"!==this.node.name)return}9==m.Instance.tutorialIdx&&"葱花"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),11==m.Instance.tutorialIdx&&"咸鸭蛋"==this.node.name&&(u.Scene.emit(g.HandAnimation_End),m.Instance.tutorialIdx++),u.Scene.emit(g.LSF_Cancel_All_Ingredients),this.node.getChildByName("ingredient_suspended").active=!0,this.rainIngredient(),this.addTouchListener()}else u.Scene.emit(g.showTip,"请先调味！")}rainIngredient(){this.node.getChildByName("selected").active=!0,this.node.getChildByName("ingredient_suspended").active=!0,this.isRaining=!0,this.rainTimer=0}stopRainIngredient(){this.node.getChildByName("selected").active=!1,this.node.getChildByName("ingredient_suspended").active=!1,this.isRaining=!1}addTouchListener(){this.targetArea.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.on(a.EventType.TOUCH_END,this.onTouchEnd,this)}removeTouchListener(){this.targetArea.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.targetArea.off(a.EventType.TOUCH_END,this.onTouchEnd,this)}addListener(){u.on(g.LSF_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){u.off(g.LSF_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"targetArea",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=y))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_Salt.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,s,o,c,r,l,d,u,h,C,p,y,_,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,o=e.Component,c=e.Button,r=e.instantiate,l=e.Animation,d=e.v3,u=e.tween,h=e.UIOpacity},function(e){C=e.XCT_Events},function(e){p=e.EventManager},function(e){y=e.XCT_LSF_DataManager,_=e.XCT_LSF_IngredientType},function(e){g=e.XCT_AudioManager}],execute:function(){var m,f,S,I,b,N,L,k,v;i._RF.push({},"554f83Om/lPdZtOhzD12CZQ","XCT_LSF_Salt",void 0);const{ccclass:P,property:T}=s;e("XCT_LSF_Salt",(m=P("XCT_LSF_Salt"),f=T(a),S=T(Number),I=T(a),m((L=t((N=class extends o{constructor(...e){super(...e),n(this,"toolsLayer",L,this),n(this,"sauceType",k,this),n(this,"ingredientLayer",v,this),this.saucePrefab=null,this.sauceMaskPrefab=null,this.sauceNode=null,this.count=0,this.tween=null,this.isCancel=!1}onLoad(){this.addListener(),this.saucePrefab=this.node.getChildByName("saucePrefab"),this.saucePrefab.active=!1,this.sauceMaskPrefab=this.node.getChildByName("sauceMaskPrefab"),this.sauceMaskPrefab.active=!1}onCancel_Click(){this.isCancel=!0,this.destorySauceNode()}onClick(){if(1==y.Instance.playerData.currentDay&&!y.Instance.isTutorialEnd){if(-1==[7].indexOf(y.Instance.tutorialIdx))return;if(7==y.Instance.tutorialIdx&&"盐"!==this.node.name)return}7==y.Instance.tutorialIdx&&"盐"==this.node.name&&(p.Scene.emit(C.HandAnimation_End),y.Instance.tutorialIdx++),p.Scene.emit(C.LSF_Cancel_All_Ingredients),this.createSauceNode(),this.node.getComponent(c).enabled=!1}createSauceNode(){this.isCancel=!1,this.node.getChildByName("icon").active=!1;let e=r(this.saucePrefab),t=this.node.getWorldPosition();e.parent=this.toolsLayer,e.setWorldPosition(t),e.active=!0,this.sauceNode=e;let n=e.getComponent(l);0==this.sauceType?n.play("yan_1"):n.play("jijing_1"),this.scheduleOnce((()=>{this.isCancel?this.isCancel=!1:e&&e.isValid&&e.on("click",this.onSauceNodeClick,this)}),.17)}onSauceNodeClick(){y.Instance.currentCookedSteps.push(this.node.name),8==y.Instance.tutorialIdx&&"盐"==this.node.name&&(p.Scene.emit(C.HandAnimation_End),y.Instance.tutorialIdx++);let e=r(this.sauceMaskPrefab);e.parent=this.ingredientLayer.getChildByName("Contanter"),e.setPosition(d(0,0,0)),e.setScale(d(1,1,1)),e.active=!0,g.getInstance().playSound("盐"),u(e.getComponent(h)).to(1,{opacity:0}).call((()=>{e.destroy()})).start(),y.Instance.currentDishes[this.node.name]||(y.Instance.currentDishes[this.node.name]={type:_.SPICE,need:1,count:0,percentage:0,rotateCount:0}),y.Instance.currentDishes[this.node.name].count++,y.Instance.playerData.money-=y.Instance.ingredientsConfigObject[this.node.name].cost,y.Instance.dayCost+=y.Instance.ingredientsConfigObject[this.node.name].cost,p.Scene.emit(C.LSF_Update_Money)}destorySauceNode(){if(this.sauceNode){this.sauceNode.off("click",this.onSauceNodeClick,this);let e=this.sauceNode.getComponent(l);0==this.sauceType?e.play("yan_2"):e.play("jijing_2"),this.scheduleOnce((()=>{this.sauceNode&&this.sauceNode.isValid&&this.sauceNode.destroy(),this.sauceNode=null,this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}),.17)}else this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}addListener(){p.on(C.LSF_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){p.off(C.LSF_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"toolsLayer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(N.prototype,"sauceType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=t(N.prototype,"ingredientLayer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=N))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_Sauce.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_Events.ts","./EventManager.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,s,o,c,r,l,u,d,h,p,C,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,s=e._decorator,o=e.Component,c=e.Button,r=e.instantiate,l=e.Animation,u=e.v3},function(e){d=e.XCT_Events},function(e){h=e.EventManager},function(e){p=e.XCT_LSF_DataManager,C=e.XCT_LSF_IngredientType},function(e){y=e.XCT_AudioManager}],execute:function(){var _,g,m,f,S,I,b,N,L;i._RF.push({},"de238uk9npBaagJpoMMBWY6","XCT_LSF_Sauce",void 0);const{ccclass:k,property:v}=s;e("XCT_LSF_Sauce",(_=k("XCT_LSF_Sauce"),g=v(a),m=v(Number),f=v(a),_((b=t((I=class extends o{constructor(...e){super(...e),n(this,"toolsLayer",b,this),n(this,"sauceType",N,this),n(this,"soupLayer",L,this),this.saucePrefab=null,this.sauceMaskPrefab=null,this.sauceNode=null,this.count=0,this.tween=null,this.isCancel=!1}onLoad(){this.addListener(),this.saucePrefab=this.node.getChildByName("saucePrefab"),this.saucePrefab.active=!1,this.sauceMaskPrefab=this.node.getChildByName("sauceMaskPrefab"),this.sauceMaskPrefab.active=!1}onCancel_Click(){this.isCancel=!0,this.destorySauceNode()}onClick(){if(1==p.Instance.playerData.currentDay&&!p.Instance.isTutorialEnd){if(-1==[5].indexOf(p.Instance.tutorialIdx))return;if(5==p.Instance.tutorialIdx&&"酱"!==this.node.name)return}5==p.Instance.tutorialIdx&&"酱"==this.node.name&&(h.Scene.emit(d.HandAnimation_End),p.Instance.tutorialIdx++),h.Scene.emit(d.LSF_Cancel_All_Ingredients),this.createSauceNode(),this.node.getComponent(c).enabled=!1}createSauceNode(){this.isCancel=!1,this.node.getChildByName("icon").active=!1;let e=r(this.saucePrefab),t=this.node.getWorldPosition();e.parent=this.toolsLayer,e.setWorldPosition(t),e.active=!0,this.sauceNode=e;let n=e.getComponent(l);0==this.sauceType?n.play("jiang_1"):n.play("cu_1"),this.scheduleOnce((()=>{this.isCancel?this.isCancel=!1:e&&e.isValid&&e.on("click",this.onSauceNodeClick,this)}),.17)}onSauceNodeClick(){p.Instance.currentCookedSteps.push(this.node.name),6==p.Instance.tutorialIdx&&"酱"==this.node.name&&(h.Scene.emit(d.HandAnimation_End),p.Instance.tutorialIdx++),this.sauceNode.getComponent(l).play("drop"),y.getInstance().playSound("水滴"),this.scheduleOnce((()=>{let e=r(this.sauceMaskPrefab);e.parent=this.soupLayer.getChildByName("Contanter"),e.setPosition(u(0,0,0)),e.setScale(u(1,1,1)),e.active=!0}),.42),p.Instance.currentDishes[this.node.name]||(p.Instance.currentDishes[this.node.name]={type:C.SPICE,need:1,count:0,percentage:0,rotateCount:0}),p.Instance.currentDishes[this.node.name].count++,p.Instance.playerData.money-=p.Instance.ingredientsConfigObject[this.node.name].cost,p.Instance.dayCost+=p.Instance.ingredientsConfigObject[this.node.name].cost,h.Scene.emit(d.LSF_Update_Money)}destorySauceNode(){if(this.sauceNode){this.sauceNode.off("click",this.onSauceNodeClick,this);let e=this.sauceNode.getComponent(l);0==this.sauceType?e.play("jiang_2"):e.play("cu_2"),this.scheduleOnce((()=>{this.sauceNode&&this.sauceNode.isValid&&this.sauceNode.destroy(),this.sauceNode=null,this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}),.17)}else this.node.getChildByName("icon").active=!0,this.node.getComponent(c).enabled=!0}addListener(){h.on(d.LSF_Cancel_All_Ingredients,this.onCancel_Click,this),this.node.on("click",this.onClick,this)}removeListener(){h.off(d.LSF_Cancel_All_Ingredients,this.onCancel_Click,this)}onDestroy(){this.removeListener()}}).prototype,"toolsLayer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(I.prototype,"sauceType",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=t(I.prototype,"soupLayer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=I))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_ShopPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,o,s,r,c,l,h,p,u,C,y,d,m,g,I,S,_,b,P,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e.SpriteFrame,s=e._decorator,r=e.instantiate,c=e.Sprite,l=e.v3,h=e.Label,p=e.Color,u=e.Button},function(e){C=e.EventManager},function(e){y=e.ProjectEventManager,d=e.ProjectEvent},function(e){m=e.XCT_BasePanel,g=e.XCT_PanelAnimation},function(e){I=e.XCT_UILayer},function(e){S=e.XCT_UIManager},function(e){_=e.XCT_UIPanel},function(e){b=e.XCT_Events},function(e){P=e.XCT_LSF_DataManager},function(e){f=e.XCT_AudioManager}],execute:function(){var D,v,L,N,T,B,E,k,F,X,w,M,R;i._RF.push({},"4b577k7Df5AI7AisPRYjdw6","XCT_LSF_ShopPanel",void 0);const{ccclass:A,property:U}=s;e("XCT_LSF_ShopPanel",(D=A("XCT_LSF_ShopPanel"),v=U(a),L=U(o),N=U(a),T=U(a),B=U(a),D((F=t((k=class extends m{constructor(...e){super(...e),this.defaultShowAnimation=g.NONE,this.defaultHideAnimation=g.NONE,this.defaultLayer=I.Pop2,this.animationDuration=.6,n(this,"shopItemContainer",F,this),n(this,"ingredientSpes",X,this),n(this,"btnCheckoutPanel",w,this),n(this,"btnNextDay",M,this),n(this,"btnReturn",R,this),this.currentData=new Map,this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(e=!1){y.emit(d.弹出窗口,"小吃摊"),P.Instance.isShowingShopPanel=!0,C.Scene.emit(b.Game_Pause),this.initShopItem(),e?(this.btnCheckoutPanel.active=!1,this.btnNextDay.active=!1,this.btnReturn.active=!0):(this.btnCheckoutPanel.active=!0,this.btnNextDay.active=!0,this.btnReturn.active=!1)}initShopItem(){this.shopItemContainer.children.forEach(((e,t)=>{0!==t?e.destroy():e.active=!1})),P.Instance.ingredientsConfig.forEach(((e,t)=>{let n=e.name;if(!(void 0!==P.Instance.playerData.stock[n]&&P.Instance.playerData.stock[n]>0)){let i=this.shopItemContainer.children[0],a=r(i);a.parent=this.shopItemContainer,a.name=n,a.getChildByName("icon").getComponent(c).spriteFrame=this.ingredientSpes[t],"土豆面"!==n&&"白面团"!==n||a.getChildByName("icon").setScale(l(.65,.65,.65)),"油条"===n&&a.getChildByName("icon").setScale(l(.9,.9,.9)),"鸡精"===n&&a.getChildByName("icon").setPosition(a.getChildByName("icon").position.x+50,a.getChildByName("icon").position.y),a.getChildByName("lblName").getComponent(h).string=n,a.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).string=e.price.toString();let o=P.Instance.playerData.money>=e.price?p.WHITE:p.RED;a.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=o,this.currentData.set(n,e.price),a.active=!0,a.getChildByName("btnBuy").on(u.EventType.CLICK,(()=>{this.onClickBuy(n)}),this)}}))}onClickBuy(e){f.getInstance().playSound("点击"),P.Instance.playerData.money<P.Instance.ingredientsConfigObject[e].price?S.Instance.showPanel(_.LSF_TipPanel,null,(()=>{C.Scene.emit(b.LSF_ShowTip_NoMoney)})):(P.Instance.playerData.stock[e]?P.Instance.playerData.stock[e]++:P.Instance.playerData.stock[e]=1,P.Instance.playerData.money-=P.Instance.ingredientsConfigObject[e].price,C.Scene.emit(b.LSF_Update_Money),C.Scene.emit(b.LSF_Update_Ingredient),this.shopItemContainer.getChildByName(e).destroy(),this.currentData.delete(e))}updateShopItem(){this.shopItemContainer.children.forEach((e=>{let t=P.Instance.playerData.money>=this.currentData.get(e.name)?p.WHITE:p.RED;e.getChildByName("btnBuy").getChildByName("lblPrice").getComponent(h).color=t}))}onClickCheckout(){f.getInstance().playSound("点击"),S.Instance.showPanel(_.LSF_CheckoutPanel)}onClickNextDay(){f.getInstance().playSound("点击"),S.Instance.showPanel(_.PassPanel,{tipConfig:P.Instance.tipConfig,currentDay:P.Instance.playerData.currentDay,passDayCb:()=>{P.Instance.passDay()}},(()=>{S.Instance.hidePanel(_.LSF_ShopPanel),S.Instance.hidePanel(_.LSF_GameUI)})),P.Instance.isHadShowShop=!1}onClickReturn(){f.getInstance().playSound("点击"),C.Scene.emit(b.Show_TutorialPanel),S.Instance.hidePanel(_.LSF_ShopPanel),C.Scene.emit(b.Game_Resume),P.Instance.isShowingShopPanel=!1}addListener(){C.on(b.LSF_Update_Money,this.updateShopItem,this),this.btnCheckoutPanel.on(u.EventType.CLICK,this.onClickCheckout,this),this.btnNextDay.on(u.EventType.CLICK,this.onClickNextDay,this),this.btnReturn.on(u.EventType.CLICK,this.onClickReturn,this)}removeListener(){C.off(b.LSF_Update_Money,this.updateShopItem,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"shopItemContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(k.prototype,"ingredientSpes",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(k.prototype,"btnCheckoutPanel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(k.prototype,"btnNextDay",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(k.prototype,"btnReturn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=k))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_Spoon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts"],(function(t){var e,n,o,i,a,s,r,h,l,c,p,d,u,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,a=t._decorator,s=t.Component,r=t.Vec2,h=t.UIOpacity,l=t.Vec3,c=t.v3,p=t.Animation},function(t){d=t.EventManager},function(t){u=t.XCT_Events},function(t){y=t.XCT_LSF_DataManager}],execute:function(){var C,g,f,T,m,L,E,_,v,A,S,b,M;o._RF.push({},"a29eaRQIt1EZaTGVDy2k1yh","XCT_LSF_Spoon",void 0);const{ccclass:I,property:w}=a;t("XCT_LSF_Spoon",(C=I("XCT_LSF_Spoon"),g=w(i),f=w(i),T=w(i),m=w(i),L=w(i),C((v=e((_=class extends s{constructor(...t){super(...t),n(this,"pan",v,this),n(this,"beforeLayer",A,this),n(this,"afterLayer",S,this),n(this,"water",b,this),n(this,"toolLayer2",M,this),this.panCenter=r.ZERO,this.startAngle=0,this.endAngle=0,this.currentTransfer=0,this.totalAngle=0,this.touchIndex=-1,this.nodeIndex=0,this.touchAngles=[],this.lastAngle=0}onLoad(){this.addListener(),this.beforeLayer.getChildByName("Contanter").children.forEach((t=>{t.getComponent(h).opacity=255})),this.afterLayer.getChildByName("Contanter").children.forEach((t=>{t.getComponent(h).opacity=0})),this.water.getComponent(h).opacity=255,this.panCenter=new r(this.pan.worldPosition.x,this.pan.worldPosition.y),this.initSpoon()}onTouchStart(t){if(1==y.Instance.playerData.currentDay&&!y.Instance.isTutorialEnd){if(-1==[4].indexOf(y.Instance.tutorialIdx))return}const e=t.getUILocation();this.node.setWorldPosition(new l(e.x,e.y,0));const n=this.calcAngleRatio(e);this.lastAngle=n}onTouchMove(t){const e=t.getUILocation();this.node.setWorldPosition(new l(e.x,e.y,0));const n=this.calcAngleRatio(e),o=n*Math.PI*2;[...this.beforeLayer.getChildByName("Contanter").children,...this.afterLayer.getChildByName("Contanter").children,this.water].forEach((t=>{t.eulerAngles=new l(0,0,180*o/Math.PI)}));let i=n-this.lastAngle;if(Math.abs(i)>.5){if(i>0){i=1-n+this.lastAngle}else{i=1-this.lastAngle+n}}let a=Math.floor(255*Math.abs(i)/2);this.beforeLayer.getChildByName("Contanter").children.forEach((t=>{let e=t.getComponent(h),n=e.opacity;e.opacity=Math.max(0,n-a)})),this.afterLayer.getChildByName("Contanter").children.forEach((t=>{let e=t.getComponent(h),n=e.opacity;e.opacity=Math.min(255,n+a)})),this.water.getComponent(h).opacity=Math.max(0,this.water.getComponent(h).opacity-a),this.lastAngle=n}onTouchEnd(){if(0==this.water.getComponent(h).opacity){this.afterLayer.getChildByName("Contanter").getChildByName("Noodle").active=!1,this.node.setParent(this.toolLayer2.getChildByName("Contanter")),this.node.getChildByName("spoonMask").active=!0,this.playSpoonAnimation(),4==y.Instance.tutorialIdx&&(d.Scene.emit(u.HandAnimation_Start),y.Instance.tutorialIdx++)}else this.node.active=!0,this.node.setPosition(c(0,0,0))}playSpoonAnimation(){this.node.getComponent(p).play("spoon_1"),this.scheduleOnce((()=>{this.node.getChildByName("spoonMask").active=!1,d.Scene.emit(u.LSF_Change_CookArea),this.node.getComponent(p).play("spoon_2")}),.27)}calcAngleRatio(t){const e=new r(t.x-this.panCenter.x,t.y-this.panCenter.y);let n=Math.atan2(e.y,e.x);return n<0&&(n+=2*Math.PI),n/(2*Math.PI)}initSpoon(){this.node.active=!0,this.touchAngles=[],this.touchIndex=-1,this.nodeIndex=0,this.currentTransfer=0,this.totalAngle=0,this.addTouchListener()}addTouchListener(){this.node.on(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}removeTouchListener(){this.node.off(i.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(i.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(i.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(i.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}addListener(){}removeListener(){}onDestroy(){this.removeListener()}}).prototype,"pan",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(_.prototype,"beforeLayer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(_.prototype,"afterLayer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(_.prototype,"water",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(_.prototype,"toolLayer2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=_))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_TakeoutPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./EventManager.ts","./Banner.ts","./XCT_AudioManager.ts"],(function(e){var t,n,i,a,r,s,o,l,d,c,h,u,g,p,C,m,f,T,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,r=e.Node,s=e._decorator,o=e.instantiate,l=e.Button},function(e){d=e.XCT_BasePanel,c=e.XCT_PanelAnimation},function(e){h=e.XCT_UILayer},function(e){u=e.XCT_UIManager},function(e){g=e.XCT_UIPanel},function(e){p=e.XCT_Events},function(e){C=e.XCT_LSF_DataManager,m=e.XCT_LSF_OrderStatus},function(e){f=e.EventManager},function(e){T=e.default},function(e){I=e.XCT_AudioManager}],execute:function(){var y,v,S,_,N,b,E,k,L,P,D,B,O;i._RF.push({},"c8f67WL0SdAOqWCTw8mYdzr","XCT_LSF_TakeoutPanel",void 0);const{ccclass:A,property:X}=s;e("XCT_LSF_TakeoutPanel",(y=A("XCT_LSF_TakeoutPanel"),v=X({type:a}),S=X({type:r}),_=X({type:r}),N=X(r),b=X(r),y((L=t((k=class extends d{constructor(...e){super(...e),this.defaultShowAnimation=c.NONE,this.defaultHideAnimation=c.NONE,this.defaultLayer=h.Pop2,this.animationDuration=.6,n(this,"lbCurrentTime",L,this),n(this,"starContainer",P,this),n(this,"shopItemContainer",D,this),n(this,"btnReturn",B,this),n(this,"nodeNoOrder",O,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){C.Instance.isShowingTakeoutPanel=!0,super.init(),this.refreshPanel(),f.Scene.emit(p.Game_Pause)}refreshPanel(){const e=C.Instance.currentHour.toString().padStart(2,"0"),t=C.Instance.currentMinute.toString().padStart(2,"0");this.lbCurrentTime.string=`${e}:${t}`,this.updateStars(C.Instance.playerData.score);const n=C.Instance.currentTakeoutOrders;this.nodeNoOrder.active=0===n.length;const i=[];for(let e=n.length-1;e>=0;e--)i.push(n[e]);this.refreshOrderList(i)}updateStars(e){this.starContainer.children.forEach(((t,n)=>{t.active=n<e}))}refreshOrderList(e){for(let e=0;e<this.shopItemContainer.children.length;e++)0!==e?this.shopItemContainer.children[e].destroy():this.shopItemContainer.children[e].active=!1;let t=this.shopItemContainer.children[0];e.forEach((e=>{const n=o(t);n.parent=this.shopItemContainer,n.active=!0,this.updateOrderItem(n,e)})),C.Instance.lastTakeoutOrderIds=C.Instance.currentTakeoutOrders.map((e=>e.id))}updateOrderItem(e,t){C.Instance.lastTakeoutOrderIds.includes(t.id)?e.getChildByName("nodeNew").active=!1:e.getChildByName("nodeNew").active=!0,e.getChildByName("spAvatar").children.forEach((e=>{e.name===t.avatarName?e.active=!0:e.active=!1})),e.getChildByName("lblName").getComponent(a).string=t.customerName,e.getChildByName("lblExpirationTime").getComponent(a).string=`过期时间: ${t.expireTime[0].toString().padStart(2,"0")}:${t.expireTime[1].toString().padStart(2,"0")}`,e.getChildByName("lblContent").getComponent(a).string=t.content,e.getChildByName("lblNote").getComponent(a).string=`备注: ${t.remark}`,e.getChildByName("lblPrice").getComponent(a).string=t.price.toFixed(1),t.missingStockIngredients.length>0?(e.getChildByName("lblMissing").getComponent(a).string=`缺少配料：${t.missingStockIngredients[0]}`,e.getChildByName("lblMissing").active=!0):e.getChildByName("lblMissing").active=!1;const n=e.getChildByName("btnAccept").getComponent(l),i=e.getChildByName("btnVideo").getComponent(l),r=e.getChildByName("btnRefuse").getComponent(l),s=e.getChildByName("NodeTimeout"),o=e.getChildByName("NodeCookEnd"),d=e.getChildByName("NodeDelivered"),c=e.getChildByName("NodeRefused");switch(n.node.active=!1,i.node.active=!1,r.node.active=!1,s.active=!1,o.active=!1,d.active=!1,c.active=!1,t.status){case m.UNHANDLED:t.missingStockIngredients.length>0?(i.node.active=!0,i.node.off(l.EventType.CLICK),i.node.on(l.EventType.CLICK,(()=>this.handleVideo(t,e.getChildByName("lblMissing"))),this)):(n.node.active=!0,n.node.off(l.EventType.CLICK),n.node.on(l.EventType.CLICK,(()=>this.handleAcceptOrder(t)),this)),r.node.active=!0,r.node.off(l.EventType.CLICK),r.node.on(l.EventType.CLICK,(()=>this.handleRefuseOrder(t)),this);break;case m.TIMEOUT:s.active=!0;break;case m.COOKED:o.active=!0;break;case m.DELIVERED:d.active=!0;break;case m.REFUSED:c.active=!0}}handleVideo(e,t){I.getInstance().playSound("点击"),T.Instance.ShowVideoAd((()=>{C.Instance.playerData.stock[e.missingStockIngredients[0]]?C.Instance.playerData.stock[e.missingStockIngredients[0]]++:C.Instance.playerData.stock[e.missingStockIngredients[0]]=1,e.missingStockIngredients.splice(0,1),this.refreshPanel()}))}handleAcceptOrder(e){I.getInstance().playSound("点击"),C.Instance.resetTakout(e),C.Instance.takeoutNotes.push([e.content,`备注: ${e.remark}`]),C.Instance.startCooking(),this.refreshPanel()}handleRefuseOrder(e){I.getInstance().playSound("点击"),e.status=m.REFUSED,this.refreshPanel()}onClickReturn(){I.getInstance().playSound("点击"),C.Instance.isShowingTakeoutPanel=!1,u.Instance.hidePanel(g.LSF_TakeoutPanel)}onHideComplete(){f.Scene.emit(p.Game_Resume)}addListener(){super.addListener(),this.btnReturn.on(l.EventType.CLICK,this.onClickReturn,this),f.on(p.LSF_ORDER_DATA_UPDATED,this.refreshPanel,this),f.on(p.LSF_Update_Time,this.refreshPanel,this)}removeListener(){f.off(p.LSF_ORDER_DATA_UPDATED,this.refreshPanel,this),f.off(p.LSF_Update_Time,this.refreshPanel,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"lbCurrentTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(k.prototype,"starContainer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"shopItemContainer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"btnReturn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(k.prototype,"nodeNoOrder",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=k))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_TipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./ProjectEventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts","./Banner.ts","./XCT_AudioManager.ts","./XCT_GameManager.ts","./UIManager.ts","./GameManager.ts"],(function(e){var n,a,t,i,o,l,s,c,h,P,p,u,d,r,T,_,S,m,k,I,y;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){t=e.cclegacy,i=e.Node,o=e._decorator},function(e){l=e.EventManager},function(e){s=e.ProjectEventManager,c=e.ProjectEvent},function(e){h=e.XCT_BasePanel,P=e.XCT_PanelAnimation},function(e){p=e.XCT_UILayer},function(e){u=e.XCT_UIManager},function(e){d=e.XCT_UIPanel},function(e){r=e.XCT_Events},function(e){T=e.XCT_LSF_DataManager},function(e){_=e.default},function(e){S=e.XCT_AudioManager},function(e){m=e.XCT_GameManager},function(e){k=e.UIManager,I=e.Panel},function(e){y=e.GameManager}],execute:function(){var g,L,f,C,M,F,B,w,N;t._RF.push({},"14771BKOlZPvY7dXiBfn9Kl","XCT_LSF_TipPanel",void 0);const{ccclass:v,property:O}=o;e("XCT_LSF_TipPanel",(g=v("XCT_LSF_TipPanel"),L=O(i),f=O(i),C=O(i),g((B=n((F=class extends h{constructor(...e){super(...e),this.defaultShowAnimation=P.NONE,this.defaultHideAnimation=P.NONE,this.defaultLayer=p.Pop2,this.animationDuration=.6,a(this,"tipNoMoneyPanel",B,this),a(this,"tipBackPanel",w,this),a(this,"tipOpenTakeoutPanel",N,this),this.isAddedEvent=!1}onLoad(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.hideTipPanel()}hideTipPanel(){this.tipNoMoneyPanel.active=!1,this.tipBackPanel.active=!1,this.tipOpenTakeoutPanel.active=!1}showBackTipPanel(){l.Scene.emit(r.Game_Pause),this.tipBackPanel.active=!0,this.tipBackPanel.getChildByName("btnContinue").on("click",this.hideBackTipPanel,this),this.tipBackPanel.getChildByName("btnExit").on("click",this.onBtnExit,this)}onBtnExit(){S.getInstance().playSound("点击"),m.Instance.hasStartPanel?(u.Instance.hidePanel(d.LSF_TipPanel),l.Scene.emit(r.hideTableItem),u.Instance.showPanel(d.TablePanel,null,(()=>{u.Instance.showPanel(d.LoadingPanel,(()=>{u.Instance.showPanel(d.StartPanel,null,(()=>{u.Instance.hidePanel(d.LSF_DialoguePanel),u.Instance.hidePanel(d.LSF_GameUI),u.Instance.hidePanel(d.LSF_TutorialPanel),u.Instance.hidePanel(d.LSF_GamePanel,null,P.NONE),u.Instance.hidePanel(d.TipPanel),this.scheduleOnce((()=>{u.Instance.hidePanel(d.LoadingPanel,(()=>{s.emit(c.游戏结束,"小吃摊")}))}),.5)}))}),(()=>{u.Instance.hidePanel(d.LSF_ShopPanel),u.Instance.hidePanel(d.LSF_CheckoutPanel),u.Instance.hidePanel(d.LSF_TakeoutPanel)}))}))):s.emit(c.返回主页按钮事件,(()=>{k.ShowPanel(I.LoadingPanel,y.StartScene,(()=>{s.emit(c.返回主页,"小吃摊")}))}))}hideBackTipPanel(){l.Scene.emit(r.Game_Resume),S.getInstance().playSound("点击"),u.Instance.hidePanel(d.LSF_TipPanel)}showNoMoneyTipPanel(){l.Scene.emit(r.Game_Pause),this.tipNoMoneyPanel.active=!0,this.tipNoMoneyPanel.getChildByName("btnBack").on("click",this.hideNoMoneyTipPanel,this),this.tipNoMoneyPanel.getChildByName("btnVideo").on("click",this.btnVideoClick,this)}hideNoMoneyTipPanel(){T.Instance.isShowingShopPanel||l.Scene.emit(r.Game_Resume),S.getInstance().playSound("点击"),u.Instance.hidePanel(d.LSF_TipPanel)}btnVideoClick(){S.getInstance().playSound("点击"),_.Instance.ShowVideoAd((()=>{T.Instance.playerData.money+=200,l.Scene.emit(r.LSF_Update_Money),u.Instance.hidePanel(d.LSF_TipPanel),T.Instance.isShowingShopPanel||l.Scene.emit(r.Game_Resume)}))}showOpenTakeoutPanel(){l.Scene.emit(r.Game_Pause),this.tipOpenTakeoutPanel.active=!0,this.tipOpenTakeoutPanel.getChildByName("btnBack").on("click",this.hideOpenTakeoutPanel,this),this.tipOpenTakeoutPanel.getChildByName("btnVideo").on("click",this.btnVideoOpenTakeoutClick,this)}hideOpenTakeoutPanel(){l.Scene.emit(r.Game_Resume),S.getInstance().playSound("点击"),u.Instance.hidePanel(d.LSF_TipPanel)}btnVideoOpenTakeoutClick(){S.getInstance().playSound("点击"),_.Instance.ShowVideoAd((()=>{T.Instance.playerData.isTakeOutProjectOpen=!0,l.Scene.emit(r.LSF_Takeout_Open),u.Instance.showPanel(d.LSF_TakeoutPanel,null,(()=>{u.Instance.hidePanel(d.LSF_TipPanel)}))}))}addListener(){l.on(r.LSF_ShowTip_Back,this.showBackTipPanel,this),l.on(r.LSF_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),l.on(r.LSF_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this)}removeListener(){l.off(r.LSF_ShowTip_Back,this.showBackTipPanel,this),l.off(r.LSF_ShowTip_NoMoney,this.showNoMoneyTipPanel,this),l.off(r.LSF_ShowTip_OpenTakeout,this.showOpenTakeoutPanel,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"tipNoMoneyPanel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(F.prototype,"tipBackPanel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(F.prototype,"tipOpenTakeoutPanel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=F))||M));t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_LSF_TutorialPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_Events.ts","./XCT_LSF_DataManager.ts"],(function(t){var e,i,n,r,a,s,o,h,u,d,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,a=t._decorator,s=t.Animation},function(t){o=t.EventManager},function(t){h=t.XCT_BasePanel,u=t.XCT_PanelAnimation},function(t){d=t.XCT_UILayer},function(t){l=t.XCT_Events},function(t){c=t.XCT_LSF_DataManager}],execute:function(){var p,T,C,_,x;n._RF.push({},"37b15zGRkpGBIVah4sY/Q6x","XCT_LSF_TutorialPanel",void 0);const{ccclass:S,property:f}=a;t("XCT_LSF_TutorialPanel",(p=S("XCT_LSF_TutorialPanel"),T=f(r),p((x=e((_=class extends h{constructor(...t){super(...t),this.defaultShowAnimation=u.NONE,this.defaultHideAnimation=u.NONE,this.defaultLayer=d.Tutorial,this.animationDuration=.6,i(this,"arrowContainer",x,this),this.currentTutorialIdx=0,this.isCompleted=!1,this.tutorialDatas=[],this.currentStepIdx=0,this.data=[{idx:0,stepCount:2},{idx:1,stepCount:3},{idx:2,stepCount:2},{idx:3,stepCount:2},{idx:4,stepCount:2},{idx:5,stepCount:2},{idx:6,stepCount:1}],this.isAddedEvent=!1}start(){}init(){1!==c.Instance.playerData.currentDay||c.Instance.isTutorialEnd||(this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0),this.node.active=!1,this.startTutorial())}startTutorial(){this.tutorialDatas=this.data,this.currentTutorialIdx=0,this.currentStepIdx=0,this.isCompleted=!1,this.node.active=!0,this.showStep(this.currentTutorialIdx,this.currentStepIdx)}showStep(t,e){t>=this.tutorialDatas.length?this.completeTutorial():(this.currentTutorialIdx=t,this.updateArrow(t,e))}updateArrow(t,e){this.arrowContainer.children.forEach((i=>{i.getComponent(s).stop(),i.active=!1;let n=i.name.split("_"),r=parseInt(n[0]),a=parseInt(n[1]);r==t&&a==e&&(i.active=!0,i.getComponent(s).play())}))}completeTutorial(){this.hideArrow(),this.isCompleted=!0,c.Instance.isTutorialEnd=!0,c.Instance.isNeedShowDragTutorial=!0}onNextStep(){if(this.isCompleted)return;this.currentStepIdx++;let t=this.tutorialDatas[this.currentTutorialIdx].stepCount;if(this.currentStepIdx>t-1)return this.currentStepIdx=0,this.currentTutorialIdx++,void this.showStep(this.currentTutorialIdx,this.currentStepIdx);this.showStep(this.currentTutorialIdx,this.currentStepIdx)}hideArrow(){this.arrowContainer.children.forEach((t=>{t.getComponent(s).stop(),t.active=!1}))}hidePanel(){this.arrowContainer.active=!1}showPanel(){this.arrowContainer.active=!0}addListener(){o.on(l.Hide_TutorialPanel,this.hidePanel,this),o.on(l.Show_TutorialPanel,this.showPanel,this),o.on(l.HandAnimation_Start,this.hideArrow,this),o.on(l.HandAnimation_End,this.onNextStep,this)}removeListener(){o.off(l.Hide_TutorialPanel,this.hidePanel,this),o.off(l.Show_TutorialPanel,this.showPanel,this),o.off(l.HandAnimation_Start,this.hideArrow,this),o.off(l.HandAnimation_End,this.onNextStep,this)}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"arrowContainer",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=_))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_PassPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_BasePanel.ts","./XCT_UILayer.ts"],(function(t){var e,i,s,n,a,l,o,r,h,b,d,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Label,a=t._decorator,l=t.v3,o=t.UIOpacity,r=t.Vec3,h=t.tween},function(t){b=t.XCT_BasePanel,d=t.XCT_PanelAnimation},function(t){c=t.XCT_UILayer}],execute:function(){var u,p,y,w,P,D,m,f,g,v,C,T,_;s._RF.push({},"f50a6b3B2lNhYK08bQqG1dE","XCT_PassPanel",void 0);const{ccclass:A,property:L}=a;t("XCT_PassPanel",(u=A("XCT_PassPanel"),p=L(n),y=L(n),w=L(n),P=L(n),D=L(n),u((g=e((f=class extends b{constructor(...t){super(...t),this.defaultShowAnimation=d.NONE,this.defaultHideAnimation=d.NONE,this.defaultLayer=c.Pass,this.animationDuration=.6,this.isAddedEvent=!1,i(this,"label1",g,this),i(this,"label2",v,this),i(this,"label3",C,this),i(this,"label4",T,this),i(this,"labelTip",_,this),this.labels=[],this.currentDay=1,this.isAnimating=!1,this.moveDistance=0,this.passDayCb=null}onLoad(){this.labels=[this.label1,this.label2,this.label3,this.label4],this.moveDistance=this.label2.node.worldPosition.x-this.label1.node.worldPosition.x,this.label4.node.setWorldPosition(l(this.label3.node.worldPosition.x+this.moveDistance,this.label3.node.worldPosition.y))}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(t){this.passDayCb=t.passDayCb,t.currentDay<10?this.labelTip.string=t.tipConfig[t.currentDay.toString()]:this.labelTip.string=t.tipConfig[Math.floor(10*Math.random()).toString()],this.updateDay(t.currentDay),this.scheduleOnce(this.startAnimation,1)}updateDay(t){this.currentDay=t,this.label1.string=`第${this.currentDay-1}天`,this.label2.string=`第${this.currentDay}天`,this.label3.string=`第${this.currentDay+1}天`,this.label4.string=`第${this.currentDay+2}天`,this.currentDay<=1?this.label1.node.active=!1:2===this.currentDay?this.label1.node.active=!0:(this.label1.node.active=!0,this.label2.node.active=!0),this.resetLabelsState()}resetLabelsState(){this.labels.forEach(((t,e)=>{const i=t.getComponent(o);1===e?(i.opacity=255,t.node.setScale(new r(1,1))):(i.opacity=204,t.node.setScale(new r(.8,.8)))}))}startAnimation(){if(this.isAnimating)return;this.isAnimating=!0;this.labels.map((t=>t.node.position.clone()));h(this.label1.node).to(.5,{worldPosition:new r(this.label1.node.worldPosition.x-this.moveDistance,this.label1.node.worldPosition.y)}).start(),h(this.label2.node).to(.5,{worldPosition:new r(this.label2.node.worldPosition.x-this.moveDistance,this.label2.node.worldPosition.y)}).start(),h(this.label2.node).to(.5,{scale:new r(.8,.8)}).start(),h(this.label2.getComponent(o)).to(.5,{opacity:204}).start(),h(this.label3.node).to(.5,{worldPosition:new r(this.label3.node.worldPosition.x-this.moveDistance,this.label3.node.worldPosition.y)}).start(),h(this.label3.node).to(.5,{scale:new r(1,1)}).start(),h(this.label3.getComponent(o)).to(.5,{opacity:255}).start(),h(this.label4.node).to(.5,{worldPosition:new r(this.label4.node.worldPosition.x-this.moveDistance,this.label4.node.worldPosition.y)}).start(),this.scheduleOnce((()=>{this.passDayCb&&this.passDayCb()}),1.5)}addListener(){}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"label1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(f.prototype,"label2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(f.prototype,"label3",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(f.prototype,"label4",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(f.prototype,"labelTip",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=f))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_StartPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_BasePanel.ts","./XCT_UILayer.ts","./XCT_UIManager.ts","./XCT_UIPanel.ts","./EventManager.ts","./XCT_Events.ts","./XCT_JBT_DataManager.ts","./XCT_HJM_DataManager.ts","./XCT_KLM_DataManager.ts","./XCT_LSF_DataManager.ts","./XCT_JP_DataManager.ts","./XCT_AudioManager.ts","./ProjectEventManager.ts","./UIManager.ts","./GameManager.ts"],(function(n){var e,a,t,l,i,s,o,r,c,u,P,h,I,d,_,T,L,g,C,m,b,M,p,w;return{setters:[function(n){e=n.applyDecoratedDescriptor,a=n.initializerDefineProperty},function(n){t=n.cclegacy,l=n.Node,i=n._decorator,s=n.Button},function(n){o=n.XCT_BasePanel,r=n.XCT_PanelAnimation},function(n){c=n.XCT_UILayer},function(n){u=n.XCT_UIManager},function(n){P=n.XCT_UIPanel},function(n){h=n.EventManager},function(n){I=n.XCT_Events},function(n){d=n.XCT_JBT_DataManager},function(n){_=n.XCT_HJM_DataManager},function(n){T=n.XCT_KLM_DataManager},function(n){L=n.XCT_LSF_DataManager},function(n){g=n.XCT_JP_DataManager},function(n){C=n.XCT_AudioManager},function(n){m=n.ProjectEventManager,b=n.ProjectEvent},function(n){M=n.UIManager,p=n.Panel},function(n){w=n.GameManager}],execute:function(){var y,S,f,D,E,J,X,v,N,B,K,O,H,k,F;t._RF.push({},"7c306eL9hNHjLKe4t/UMc8O","XCT_StartPanel",void 0);const{ccclass:U,property:G}=i;n("XCT_StartPanel",(y=U("XCT_StartPanel"),S=G(l),f=G(l),D=G(l),E=G(l),J=G(l),X=G(l),y((B=e((N=class extends o{constructor(...n){super(...n),this.defaultHideAnimation=r.NONE,this.defaultShowAnimation=r.NONE,this.defaultLayer=c.Start,a(this,"btnJBT",B,this),a(this,"btnHJM",K,this),a(this,"btnKLM",O,this),a(this,"btnLSF",H,this),a(this,"btnJP",k,this),a(this,"btnReturn",F,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){}onClickJBT(){C.getInstance().playSound("点击"),d.Instance.initData(),u.Instance.showPanel(P.LoadingPanel,(()=>{u.Instance.showPanel(P.JBT_GameUI,null,(()=>{u.Instance.showPanel(P.JBT_DialoguePanel,null,(()=>{u.Instance.showPanel(P.TipPanel);let n=!1,e=!1,a=()=>{1!=d.Instance.playerData.currentDay||d.Instance.isTutorialEnd||u.Instance.showPanel(P.JBT_TutorialPanel,null,null,r.PreLoad_at_Bottom),u.Instance.hidePanel(P.StartPanel),u.Instance.hidePanel(P.LoadingPanel,(()=>{u.Instance.hidePanel(P.TablePanel),h.Scene.emit(I.showTableItem),d.Instance.resetDay(),m.emit(b.游戏开始,"小吃摊")}))};u.Instance.showPanel(P.JBT_GamePanel,null,(()=>{n=!0,e&&n&&a()}),r.PreLoad_at_Bottom),this.scheduleOnce((()=>{e=!0,e&&n&&a()}),.5)}),r.NONE)}),r.NONE)}))}onClickHJM(){C.getInstance().playSound("点击"),_.Instance.initData(),u.Instance.showPanel(P.LoadingPanel,(()=>{u.Instance.showPanel(P.HJM_GameUI,null,(()=>{u.Instance.showPanel(P.HJM_DialoguePanel,null,(()=>{u.Instance.showPanel(P.TipPanel);let n=!1,e=!1,a=()=>{1!=_.Instance.playerData.currentDay||_.Instance.isTutorialEnd||u.Instance.showPanel(P.HJM_TutorialPanel,null,null,r.PreLoad_at_Bottom),u.Instance.hidePanel(P.StartPanel),u.Instance.hidePanel(P.LoadingPanel,(()=>{u.Instance.hidePanel(P.TablePanel),h.Scene.emit(I.showTableItem),_.Instance.resetDay(),m.emit(b.游戏开始,"小吃摊")}))};u.Instance.showPanel(P.HJM_GamePanel,null,(()=>{n=!0,e&&n&&a()}),r.PreLoad_at_Bottom),this.scheduleOnce((()=>{e=!0,e&&n&&a()}),.5)}),r.NONE)}),r.NONE)}))}onClickKLM(){C.getInstance().playSound("点击"),T.Instance.initData(),u.Instance.showPanel(P.LoadingPanel,(()=>{u.Instance.showPanel(P.KLM_GameUI,null,(()=>{u.Instance.showPanel(P.KLM_DialoguePanel,null,(()=>{u.Instance.showPanel(P.TipPanel);let n=!1,e=!1,a=()=>{1!=T.Instance.playerData.currentDay||T.Instance.isTutorialEnd||u.Instance.showPanel(P.KLM_TutorialPanel,null,null,r.PreLoad_at_Bottom),u.Instance.hidePanel(P.StartPanel),u.Instance.hidePanel(P.LoadingPanel,(()=>{u.Instance.hidePanel(P.TablePanel),h.Scene.emit(I.showTableItem),T.Instance.resetDay(),m.emit(b.游戏开始,"小吃摊")}))};u.Instance.showPanel(P.KLM_GamePanel,null,(()=>{n=!0,e&&n&&a()}),r.PreLoad_at_Bottom),this.scheduleOnce((()=>{e=!0,e&&n&&a()}),.5)}),r.NONE)}),r.NONE)}))}onClickLSF(){C.getInstance().playSound("点击"),L.Instance.initData(),u.Instance.showPanel(P.LoadingPanel,(()=>{u.Instance.showPanel(P.LSF_GameUI,null,(()=>{u.Instance.showPanel(P.LSF_DialoguePanel,null,(()=>{u.Instance.showPanel(P.TipPanel);let n=!1,e=!1,a=()=>{1!=L.Instance.playerData.currentDay||L.Instance.isTutorialEnd||u.Instance.showPanel(P.LSF_TutorialPanel,null,null,r.PreLoad_at_Bottom),u.Instance.hidePanel(P.StartPanel),u.Instance.hidePanel(P.LoadingPanel,(()=>{u.Instance.hidePanel(P.TablePanel),h.Scene.emit(I.showTableItem),L.Instance.resetDay(),m.emit(b.游戏开始,"小吃摊")}))};u.Instance.showPanel(P.LSF_GamePanel,null,(()=>{n=!0,e&&n&&a()}),r.PreLoad_at_Bottom),this.scheduleOnce((()=>{e=!0,e&&n&&a()}),.5)}),r.NONE)}),r.NONE)}))}onClickJP(){C.getInstance().playSound("点击"),u.Instance.showPanel(P.LoadingPanel,(()=>{u.Instance.showPanel(P.TipPanel),g.Instance.resetLevelData(),u.Instance.showPanel(P.JP_GamePanel,null,(()=>{this.scheduleOnce((()=>{u.Instance.hidePanel(P.StartPanel),u.Instance.hidePanel(P.LoadingPanel,(()=>{u.Instance.hidePanel(P.TablePanel),h.Scene.emit(I.showTableItem),m.emit(b.游戏开始,"小吃摊")}))}),.5)}),r.NONE)}))}onReturnClick(){m.emit(b.返回主页按钮事件,(()=>{M.ShowPanel(p.LoadingPanel,w.StartScene,(()=>{m.emit(b.返回主页,"小吃摊")}))}))}addListener(){this.btnJBT.on(s.EventType.CLICK,this.onClickJBT,this),this.btnHJM.on(s.EventType.CLICK,this.onClickHJM,this),this.btnKLM.on(s.EventType.CLICK,this.onClickKLM,this),this.btnLSF.on(s.EventType.CLICK,this.onClickLSF,this),this.btnJP.on(s.EventType.CLICK,this.onClickJP,this),this.btnReturn.on(s.EventType.CLICK,this.onReturnClick,this)}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}}).prototype,"btnJBT",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(N.prototype,"btnHJM",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(N.prototype,"btnKLM",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(N.prototype,"btnLSF",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(N.prototype,"btnJP",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(N.prototype,"btnReturn",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=N))||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_TablePanel.ts",["cc","./XCT_BasePanel.ts","./XCT_UILayer.ts"],(function(e){var t,n,i,s,a;return{setters:[function(e){t=e.cclegacy,n=e._decorator},function(e){i=e.XCT_BasePanel,s=e.XCT_PanelAnimation},function(e){a=e.XCT_UILayer}],execute:function(){var r;t._RF.push({},"ac72fVK3VBOgLMVQhCUipRt","XCT_TablePanel",void 0);const{ccclass:o,property:d}=n;e("XCT_TablePanel",o("XCT_TablePanel")(r=class extends i{constructor(...e){super(...e),this.defaultShowAnimation=s.NONE,this.defaultHideAnimation=s.NONE,this.defaultLayer=a.Table,this.animationDuration=0,this.isAddedEvent=!1}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){}onShowComplete(){}addListener(){}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_Timer.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"ed73aCXpAZOSZ8WAScofGBv","XCT_Timer",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_TipPanel.ts",["cc","./XCT_BasePanel.ts","./XCT_UILayer.ts","./EventManager.ts","./XCT_Events.ts"],(function(t){var e,i,n,s,a,o,r,c,p,h,d,l;return{setters:[function(t){e=t.cclegacy,i=t.instantiate,n=t.Label,s=t.UIOpacity,a=t.tween,o=t.Vec3,r=t._decorator},function(t){c=t.XCT_BasePanel,p=t.XCT_PanelAnimation},function(t){h=t.XCT_UILayer},function(t){d=t.EventManager},function(t){l=t.XCT_Events}],execute:function(){var m;e._RF.push({},"9e87aNjprJMgZ/hOq5AoBz4","XCT_TipPanel",void 0);const{ccclass:C,property:u}=r;t("XCT_TipPanel",C("XCT_TipPanel")(m=class extends c{constructor(...t){super(...t),this.defaultShowAnimation=p.NONE,this.defaultHideAnimation=p.NONE,this.defaultLayer=h.Tip,this.animationDuration=0,this.isAddedEvent=!1,this.tipItemPrefab=null,this.tipItemsContainer=null}start(){this.isAddedEvent||(this.addListener(),this.isAddedEvent=!0)}init(){this.tipItemPrefab=this.node.getChildByName("tipitem"),this.tipItemsContainer=this.node.getChildByName("container"),this.tipItemPrefab.active=!1,this.tipItemsContainer.removeAllChildren()}createTipItem(t){const e=i(this.tipItemPrefab);e.parent=this.tipItemsContainer;e.getComponentsInChildren(n).forEach((e=>{e.string=t})),e.active=!0,e.setPosition(0,-100),e.getComponent(s).opacity=0,a(e).to(.5,{position:o.ZERO},{easing:"sineOut"}).delay(1).to(.5,{position:new o(0,100,0)},{easing:"sineIn"}).call((()=>{e.destroy()})).start(),a(e.getComponent(s)).to(.5,{opacity:255}).delay(1).to(.5,{opacity:0}).start()}onShowComplete(){}addListener(){d.on(l.showTip,this.createTipItem,this)}removeListener(){}onDestroy(){this.removeListener(),this.isAddedEvent=!1}})||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_UILayer.ts",["cc"],(function(a){var e;return{setters:[function(a){e=a.cclegacy}],execute:function(){e._RF.push({},"5a76bpdHalBUowih5yUfydI","XCT_UILayer",void 0);a("XCT_UILayer",function(a){return a.Game="layer_game",a.Dialog="layer_dialog",a.Pop="layer_pop",a.GameUI="layer_gameUI",a.Tutorial="layer_tutorial",a.Start="layer_start",a.Loading="layer_loading",a.Table="layer_table",a.Pop2="layer_pop2",a.GameUI2="layer_gameUI2",a.Tip="layer_tip",a.Pass="layer_pass",a}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XCT_BasePanel.ts","./BundleManager.ts","./GameManager.ts"],(function(e){var t,a,i,n,o,s,r,l,u,d,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,o=e.Prefab,s=e._decorator,r=e.Component,l=e.instantiate,u=e.Widget},function(e){d=e.XCT_BasePanel},function(e){h=e.BundleManager},function(e){p=e.GameManager}],execute:function(){var c,f,M,g,m,b,P,N;i._RF.push({},"0369a2anV9HhI+2HUf0+nz1","XCT_UIManager",void 0);const{ccclass:I,property:y}=s;e("XCT_UIManager",(c=I("XCT_UIManager"),f=y(n),M=y(o),c(((N=class e extends r{constructor(...e){super(...e),a(this,"uiRoot",b,this),a(this,"commonUIPrefab",P,this),this.uiPrefabMap=void 0,this.uiNodeMap=void 0}onLoad(){e.Instance=this,this.uiPrefabMap=new Map,this.uiNodeMap=new Map;for(let e of this.commonUIPrefab){let t=e.name;this.uiPrefabMap.set(t,e)}}showPanel(e,t,a,i,n){let o=e.split("/")[e.split("/").length-1];for(;this.uiNodeMap.has(o);){const e=this.uiNodeMap.get(o);this.uiNodeMap.delete(o),e.destroy()}let s=e=>{const s=l(e);this.uiNodeMap.set(o,s);let r=s.getComponent(d),h=n||(null==r?void 0:r.defaultLayer);this.uiRoot.getChildByName(h).addChild(s);let p=s.getComponent(u);p&&(p.enabled=!0,p.updateAlignment()),p.enabled=!1,null==r||r.show(t,i),a&&a(s)};if(this.uiPrefabMap.has(o)){const e=this.uiPrefabMap.get(o);s(e)}else h.LoadPrefab(p.GameData.DefaultBundle,`UI/${e}`).then((e=>{this.uiPrefabMap.set(o,e),s(e)}))}hidePanel(e,t,a){let i=e.split("/")[e.split("/").length-1],n=!1;for(;this.uiNodeMap.has(i);){const e=this.uiNodeMap.get(i);if(!n){let o=e.getComponent(d);null==o||o.hide((()=>{this.uiNodeMap.delete(i),e.destroy(),t&&t(e)}),a),n=!0}return}}hideAllUI(){this.uiNodeMap.forEach((e=>{this.uiNodeMap.delete(e.name),e.destroy()}))}hideAllOtherUI(e){this.uiNodeMap.forEach(((t,a)=>{a!==e&&(this.uiNodeMap.delete(t.name),t.destroy())}))}getUI(e){return this.uiNodeMap.get(e)||null}}).Instance=void 0,b=t((m=N).prototype,"uiRoot",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(m.prototype,"commonUIPrefab",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/XCT_UIPanel.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"d85b6tjILVI4r+l98+gOKZ0","XCT_UIPanel",void 0);e("XCT_UIPanel",function(e){return e.TablePanel="Common/TablePanel",e.StartPanel="Common/StartPanel",e.LoadingPanel="Common/LoadingPanel",e.TipPanel="Common/TipPanel",e.PassPanel="Common/PassPanel",e.JBT_GamePanel="JBT/JBT_GamePanel",e.JBT_DialoguePanel="JBT/JBT_DialoguePanel",e.JBT_ShopPanel="JBT/JBT_ShopPanel",e.JBT_TakeoutPanel="JBT/JBT_TakeoutPanel",e.JBT_CheckoutPanel="JBT/JBT_CheckoutPanel",e.JBT_TutorialPanel="JBT/JBT_TutorialPanel",e.JBT_GameUI="JBT/JBT_GameUI",e.JBT_TipPanel="JBT/JBT_TipPanel",e.HJM_GamePanel="HJM/HJM_GamePanel",e.HJM_DialoguePanel="HJM/HJM_DialoguePanel",e.HJM_GameUI="HJM/HJM_GameUI",e.HJM_TutorialPanel="HJM/HJM_TutorialPanel",e.HJM_TakeoutPanel="HJM/HJM_TakeoutPanel",e.HJM_ShopPanel="HJM/HJM_ShopPanel",e.HJM_CheckoutPanel="HJM/HJM_CheckoutPanel",e.HJM_TipPanel="HJM/HJM_TipPanel",e.LSF_GamePanel="LSF/LSF_GamePanel",e.LSF_DialoguePanel="LSF/LSF_DialoguePanel",e.LSF_GameUI="LSF/LSF_GameUI",e.LSF_TutorialPanel="LSF/LSF_TutorialPanel",e.LSF_TakeoutPanel="LSF/LSF_TakeoutPanel",e.LSF_ShopPanel="LSF/LSF_ShopPanel",e.LSF_CheckoutPanel="LSF/LSF_CheckoutPanel",e.LSF_TipPanel="LSF/LSF_TipPanel",e.KLM_GamePanel="KLM/KLM_GamePanel",e.KLM_DialoguePanel="KLM/KLM_DialoguePanel",e.KLM_GameUI="KLM/KLM_GameUI",e.KLM_TutorialPanel="KLM/KLM_TutorialPanel",e.KLM_TakeoutPanel="KLM/KLM_TakeoutPanel",e.KLM_ShopPanel="KLM/KLM_ShopPanel",e.KLM_CheckoutPanel="KLM/KLM_CheckoutPanel",e.KLM_TipPanel="KLM/KLM_TipPanel",e.JP_GamePanel="JP/JP_GamePanel",e[e.GAME=3]="GAME",e}({}));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/46_XCT_Bundle', 'chunks:///_virtual/46_XCT_Bundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});