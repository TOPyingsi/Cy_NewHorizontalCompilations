System.register("chunks:///_virtual/44_WBSRL_Bundle",["./WBSRL_BathRoom.ts","./WBSRL_CameraController.ts","./WBSRL_Constant.ts","./WBSRL_Curtain.ts","./WBSRL_Door.ts","./WBSRL_GameManager.ts","./WBSRL_GateRoom.ts","./WBSRL_GunController.ts","./WBSRL_Joystick.ts","./WBSRL_Monologue.ts","./WBSRL_PlayerController.ts","./WBSRL_Plot.ts","./WBSRL_PlotInRoom.ts","./WBSRL_Room.ts","./WBSRL_TV.ts","./WBSRL_TVController.ts","./WBSRL_Window.ts","./WBSRL_WindowGlass.ts","./WBSRL_WindowPanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/WBSRL_BathRoom.ts",["cc","./WBSRL_Room.ts","./WBSRL_GameManager.ts"],(function(o){var e,n,a,c;return{setters:[function(o){e=o.cclegacy,n=o._decorator},function(o){a=o.WBSRL_Room},function(o){c=o.WBSRL_GameManager}],execute:function(){var t;e._RF.push({},"7758bObcclAVLMjUMSusSV/","WBSRL_BathRoom",void 0);const{ccclass:s}=n;o("WBSRL_BathRoom",s("WBSRL_BathRoom")(t=class extends a{OpenRoom(){super.OpenRoom(),c.Instance.HouseMain.children.forEach((o=>{o.active="门2"==o.name}))}CloseRoom(){super.CloseRoom(),c.Instance.HouseMain.children.forEach((o=>{o.active="窗户木板"!=o.name&&"毯子2"!=o.name}))}})||t);e._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_CameraController.ts",["cc"],(function(t){var i,s,e,o,n,r;return{setters:[function(t){i=t.cclegacy,s=t.v3,e=t.Quat,o=t.Component,n=t.Vec3,r=t._decorator}],execute:function(){var a;i._RF.push({},"88edb4q/7FFhbiDzCzUDlYD","WBSRL_CameraController",void 0);const{ccclass:h,property:l}=r,g=s(),c=s(),m=new e;t("WBSRL_CameraController",h("WBSRL_CameraController")(a=class extends o{constructor(...t){super(...t),this._targetAngles=s(),this._target=null,this._rotationToEnemy=!1,this.shakeDuration=.12,this.shakeIntensity=.3,this.originalPosition=new n,this.shakeTime=0,this.isShaking=!1,this.isUnlock=!1,this.Isthirdperson=!1}start(){this.originalPosition.set(this.node.position)}onDestroy(){}LookAtTarget(t){this._rotationToEnemy=!0,this._target=t}Reset(){this._target=null,this._rotationToEnemy=!1}SetTargetAngle(t,i,s){this._targetAngles.set(t,i,s)}Shake(t,i){this.isShaking||(this.shakeIntensity=t,this.shakeDuration=i,this.isShaking=!0,this.shakeTime=0)}update(t){if(!this.isShaking)return;if(this.shakeTime+=t,this.shakeTime>=this.shakeDuration)return this.isShaking=!1,void(this.node.position=this.originalPosition);const i=2*(Math.random()-.5)*this.shakeIntensity,s=2*Math.random()*this.shakeIntensity;this.node.position=new n(this.originalPosition.x+i,this.originalPosition.y+s,this.originalPosition.z)}lateUpdate(t){this.isUnlock||(this._rotationToEnemy&&this._target&&(n.subtract(c,this._target.worldPosition,this.node.worldPosition),e.fromViewUp(m,c.normalize()),e.rotateY(m,m,Math.PI),e.lerp(m,this.node.rotation,m,.1),this.node.setRotation(m)),this.Isthirdperson?(g.set(this.node.parent.eulerAngles),n.lerp(g,g,this._targetAngles,.5),this.SetCameraPos()):(g.set(this.node.eulerAngles),n.lerp(g,g,this._targetAngles,.5),g.set(s(g.x%360,g.y%360,g.z%360)),this.SetCameraPos1()))}SetCameraPos(){this.node.parent.setRotationFromEuler(g)}SetCameraPos1(){this.node.setRotationFromEuler(g)}KeepTime(t){this.isUnlock=!0,this.scheduleOnce((()=>{this.isUnlock=!1}),t)}})||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Constant.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"6fe00bx1JJCvrSStAoKy8Ki","WBSRL_Constant",void 0);t("WBSRL_ROOM",function(t){return t[t["浴室"]=0]="浴室",t[t["储物间"]=1]="储物间",t[t["厨房"]=2]="厨房",t[t["客厅1"]=3]="客厅1",t[t["客厅2"]=4]="客厅2",t}({}));t("WBSRL_Monologues_Window",[[[],[],[]],[["远处是邻居家。邻居现在正在拜访你。","窗户上的灯亮着，家人似乎在等他离开你回家吃晚饭。"],["你可以看到几个青少年在窗外的田野里消磨时间。","他们坐在那里兴奋地聊天，没有注意到你。"],["外面一片死寂。","没有人在那里。","即使是酒鬼，出于某种未知的原因，也决定不出现在街上。","他们害怕别人吗?"]],[["窗外站着一位邻居和他的女儿。","他们一起快乐地玩耍，忘记了正在发生的恐怖。","就一会儿。","看着这一切，你会想起你的童年，并给你一种温暖的怀旧感。"],["地上有青少年的尸体。","有人杀了他们","这似乎是最近的事，因为血液还没有干涸。","这张照片让你起鸡皮疙瘩，让你感到有点不安。"],["路上站着一个脸色苍白的人。","他的皮肤上有奇怪的褶皱。","这皮肤对他来说似乎太大了。","从这里你看不到他的眼睛，但你可以感觉到他用目光在折磨你。","你感到恐惧，并向上帝祈祷，让这个令人毛骨悚然的访客避开这所房子。"]],[["一小群联邦紧急事务管理局的工作人员站在邻居家外面。","我想知道他们在说什么?","也许他们正在采集土壤样本?","还是他们在找一个地方建立基地?","想到有人试图理解这场噩梦，你会感觉好一点。"],["青少年的尸体在地上被烧死。","他们似乎整天都躺在这里。","两名急救人员站在尸体旁边，写下了一些东西。","有人能移走尸体，这很好。","想象一下，如果不把腐烂的尸体从街上移走，会出现什么样的传染病，这很可怕。"],["窗外有一群武装士兵。","显然，个他们是从城市派来的一个小单位，为人门提供安全保障。","你只能听到关于一个赤裸躯干的苍白男人的零碎短语。","也许他们想追踪那个令人毛骨悚然的陌生人 ? ","你感到宽慰的是，有人准备在街上对付一个危险的客人。"]],[[],[],[]],[[],[],[]]]);n._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Curtain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_Joystick.ts","./WBSRL_PlayerController.ts","./WBSRL_GameManager.ts"],(function(e){var t,n,o,i,s,r,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e._decorator,s=e.Component,r=e.director,a=e.tween},function(e){c=e.WBSRL_Joystick},function(e){l=e.WBSRL_PlayerController},function(e){u=e.WBSRL_GameManager}],execute:function(){var W,S,h;o._RF.push({},"67cd7ghndhHhJYIHTMzG4m+","WBSRL_Curtain",void 0);const{ccclass:_,property:p}=i;e("WBSRL_Curtain",_("WBSRL_Curtain")((h=t((S=class extends s{constructor(...e){super(...e),n(this,"IsLeft",h,this)}OpenWindow(){const e=this.IsLeft?-.6:.6;r.getScene().emit("WBSRL_OpenWindow_2"),a(this.node).by(1,{z:e},{easing:"smooth"}).start()}CloseWindow(){const e=this.IsLeft?.6:-.6;a(this.node).by(1,{z:e},{easing:"smooth"}).call((()=>{c.Instance.ShowInteractButton(!0),l.Instance.removeCameraTargetTexture(),u.Instance.CloseWindowPanel(),r.getScene().emit("WBSRL_CloseWindow_2")})).start()}onEnable(){r.getScene().on("WBSRL_OpenCurtain",this.OpenWindow,this),r.getScene().on("WBSRL_CloseCurtain",this.CloseWindow,this)}onDisable(){r.getScene().off("WBSRL_OpenCurtain",this.OpenWindow,this),r.getScene().off("WBSRL_CloseCurtain",this.CloseWindow,this)}}).prototype,"IsLeft",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=S))||W);o._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Door.ts",["cc","./WBSRL_Joystick.ts","./WBSRL_PlayerController.ts","./WBSRL_GameManager.ts"],(function(o){var e,t,n,r,s,c,a,i,l;return{setters:[function(o){e=o.cclegacy,t=o.Component,n=o.tween,r=o.v3,s=o.director,c=o._decorator},function(o){a=o.WBSRL_Joystick},function(o){i=o.WBSRL_PlayerController},function(o){l=o.WBSRL_GameManager}],execute:function(){var S;e._RF.push({},"dd470rXQ9xLuoM9N4uLtJYK","WBSRL_Door",void 0);const{ccclass:_,property:u}=c;o("WBSHRL_Door",_("WBSHRL_Door")(S=class extends t{OpenDoor(){n(this.node).by(1,{eulerAngles:r(0,80,0)},{easing:"smooth"}).start()}CloseDoor(){n(this.node).by(1,{eulerAngles:r(0,-80,0)},{easing:"smooth"}).call((()=>{a.Instance.ShowInteractButton(!0),i.Instance.removeCameraTargetTexture(),l.Instance.CloseRoom()})).start()}onEnable(){s.getScene().on("WBSRL_OpenDoor",this.OpenDoor,this),s.getScene().on("WBSRL_CloseDoor",this.CloseDoor,this)}onDisable(){s.getScene().off("WBSRL_OpenDoor",this.OpenDoor,this),s.getScene().off("WBSRL_CloseDoor",this.CloseDoor,this)}})||S);e._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_Monologue.ts","./WBSRL_WindowPanel.ts","./WBSRL_Joystick.ts","./WBSRL_Constant.ts","./WBSRL_Room.ts","./WBSRL_TVController.ts","./WBSRL_GunController.ts","./WBSRL_PlotInRoom.ts","./ProjectEventManager.ts","./Banner.ts"],(function(t){var e,i,o,n,a,s,r,l,h,u,c,m,p,g,w,b,d,R,f,P,y,v,C,T,M,W,k,L,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.Node,a=t.Material,s=t.RenderTexture,r=t.Label,l=t.Animation,h=t.Prefab,u=t.UIOpacity,c=t._decorator,m=t.Component,p=t.find,g=t.director,w=t.instantiate,b=t.tween,d=t.Tween},function(t){R=t.WBSRL_Monologue},function(t){f=t.WBSRL_WindowPanel},function(t){P=t.WBSRL_Joystick},function(t){y=t.WBSRL_Monologues_Window,v=t.WBSRL_ROOM},function(t){C=t.WBSRL_Room},function(t){T=t.WBSRL_TVController},function(t){M=t.WBSRL_GunController},function(t){W=t.WBSRL_PlotInRoom},function(t){k=t.ProjectEventManager,L=t.ProjectEvent},function(t){S=t.default}],execute:function(){var B,N,I,G,O,_,z,A,E,D,H,x,V,U,X,j,F,K,Y,J,q,Q,Z,$,tt,et,it,ot,nt,at,st,rt,lt,ht,ut,ct,mt,pt,gt,wt,bt,dt,Rt,ft,Pt,yt,vt,Ct;o._RF.push({},"0c7d76tziFN2Ix6vRxMLCoG","WBSRL_GameManager",void 0);const{ccclass:Tt,property:Mt}=c;var Wt=function(t){return t[t.NON=0]="NON",t[t.PLAYING=1]="PLAYING",t[t.NEXT=2]="NEXT",t[t.OVER=3]="OVER",t}(Wt||{});t("WBSRL_GameManager",(B=Tt("WBSRL_GameManager"),N=Mt(n),I=Mt(n),G=Mt(a),O=Mt(a),_=Mt(a),z=Mt(n),A=Mt(s),E=Mt(n),D=Mt(R),H=Mt(f),x=Mt(f),V=Mt(f),U=Mt(n),X=Mt(r),j=Mt(l),F=Mt(n),K=Mt(h),Y=Mt(h),J=Mt(u),q=Mt(T),Q=Mt(M),Z=Mt(R),B(((Ct=class t extends m{constructor(...t){super(...t),i(this,"Light",et,this),i(this,"Canvas",it,this),i(this,"TransparentMaterial",ot,this),i(this,"WindowMaterial",nt,this),i(this,"WindowGlassMaterial",at,this),i(this,"Players",st,this),i(this,"RenderTexture",rt,this),i(this,"HouseMain",lt,this),i(this,"Monologue",ht,this),i(this,"Window1",ut,this),i(this,"Window2",ct,this),i(this,"Window3",mt,this),i(this,"Tips",pt,this),i(this,"TipsLabel",gt,this),i(this,"DrinkAnimation",wt,this),i(this,"PowerParent",bt,this),i(this,"PowerPrefab",dt,this),i(this,"VideoPrefab",Rt,this),i(this,"Mask",ft,this),i(this,"TVController",Pt,this),i(this,"GunController",yt,this),i(this,"Over1",vt,this),this.GateRoom=null,this.BathRoom=null,this.UtilityRoom=null,this.KitchenRoom=null,this.Livin1Room=null,this.Livin2Room=null,this.BedRoom=null,this.MapPlot=new Map,this.Plots=[],this.ArrRemoveName=[],this.CurDay=0,this.Power=3,this.IsNight=!0,this.TargetWindowPanel=null,this.TargetRoom=null,this.NextPower=3,this.IsClickBX=!1,this.CurCorpse=null,this.sleeping=!1}onLoad(){t.Instance=this,k.emit(L.游戏开始,"我不是人类"),this.GateRoom=p("门口",this.Canvas).getComponent(C),this.BathRoom=p("浴室",this.Canvas).getComponent(C),this.UtilityRoom=p("储物间",this.Canvas).getComponent(C),this.KitchenRoom=p("厨房",this.Canvas).getComponent(C),this.Livin1Room=p("客厅1",this.Canvas).getComponent(C),this.Livin2Room=p("客厅2",this.Canvas).getComponent(C),this.BedRoom=p("卧室",this.Canvas).getComponent(C)}start(){this.InitWindowMonologue(),this.InitGate()}GetPlayerByName(t){return this.Players.getChildByName(t)}ShowMonologue(t){this.Monologue.node.active||(this.Monologue.node.active=!0),this.Monologue.playText(t)}InitWindowMonologue(){this.Window1.Monologues=y[this.CurDay][0],this.Window2.Monologues=y[this.CurDay][1],this.Window3.Monologues=y[this.CurDay][2]}ShowWindowPanel(t){switch(t){case"窗户1":this.TargetWindowPanel=this.Window1;break;case"窗户2":this.TargetWindowPanel=this.Window2;break;case"窗户3":this.TargetWindowPanel=this.Window3}this.TargetWindowPanel&&(this.TargetWindowPanel.OpenWindow(),this.scheduleOnce((()=>{this.ClickMonologue()}),1))}CloseWindowPanel(){this.TargetWindowPanel&&(this.TargetWindowPanel.CloseWindow(),this.TargetWindowPanel=null)}Check(){return this.TargetWindowPanel?this.Monologue.IsPlaying?Wt.PLAYING:this.TargetWindowPanel.Monologues.length>0?Wt.NEXT:Wt.OVER:Wt.NON}ClickMonologue(){switch(this.Check()){case Wt.NON:this.Monologue.node.active=!1,P.Instance.ShowExitButton(!0);break;case Wt.PLAYING:break;case Wt.NEXT:this.ShowMonologue(this.TargetWindowPanel.Monologues.shift());break;case Wt.OVER:this.Monologue.node.active=!1,P.Instance.ShowExitButton(!0)}}InitGate(){this.GateRoom.Init()}OpenRoomByName(t){switch(t){case"门1":this.TargetRoom=this.GateRoom;break;case"门2":this.TargetRoom=this.BathRoom;break;case"门3":this.TargetRoom=this.UtilityRoom;break;case"门4":this.TargetRoom=this.KitchenRoom;break;case"门5":this.TargetRoom=this.Livin2Room;break;case"门6":this.TargetRoom=this.Livin1Room;break;case"门7":this.TargetRoom=this.BedRoom}this.TargetRoom&&this.TargetRoom.OpenRoom()}CloseRoom(){this.TargetRoom&&(this.TargetRoom.CloseRoom(),this.TargetRoom=null)}ShowTips(t){this.Tips.active=!0,this.TipsLabel.string=t,this.scheduleOnce((()=>{this.Tips.active=!1}),2)}AddGuest(t,e){let i=null;switch(t){case v.浴室:i=this.BathRoom;break;case v.储物间:i=this.UtilityRoom;break;case v.厨房:i=this.KitchenRoom;break;case v.客厅1:i=this.Livin1Room;break;case v.客厅2:i=this.Livin2Room}i&&e&&i.AddItemByPrefab(e)}OnButtonClick(t){switch(t.getCurrentTarget().name){case"床":if(this.sleeping)return;if(!this.IsNight&&this.Power>0)return void this.ShowTips("还有体力，现在还不困！");if(this.IsNight&&this.Plots.length>0)return void this.ShowTips("我还不能睡！还有客人需要帮助怎们办。");this.Sleep();break;case"冰箱":if(!this.IsClickBX)return;this.DrinkAnimation.node.active=!0,P.Instance.node.active=!1,this.DrinkAnimation.play();break;case"返回首页":g.loadScene("Start")}}ShowPower(t=!0){if(t||(this.PowerParent.active=!1),this.PowerParent.active=!0,this.PowerParent.removeAllChildren(),this.Power>0)for(let t=0;t<this.Power;t++){w(this.PowerPrefab).parent=this.PowerParent}const e=w(this.VideoPrefab);e.parent=this.PowerParent,e.on(n.EventType.TOUCH_END,(()=>{S.Instance.ShowVideoAd((()=>{this.Power++,this.ShowPower()}))}),this)}AddPower(){}Sleep(t){this.sleeping=!0,b(this.Mask).to(.3,{opacity:100},{easing:"smooth"}).to(.1,{opacity:80},{easing:"smooth"}).to(.3,{opacity:130},{easing:"smooth"}).to(.1,{opacity:100},{easing:"smooth"}).to(.5,{opacity:250},{easing:"smooth"}).delay(1).call((()=>{if(this.IsNight=!this.IsNight,this.CurCorpse&&(this.CurCorpse.active=!1,this.CurCorpse=null),!this.IsNight){if(this.CurDay>3)return void this.GameOver3();if(this.GetHumanCount()>0&&this.GetNoHumanCount()>0&&this.CurDay>1)this.RandRemoveHuman(),this.CurCorpse.active=!0,this.ShowTips("今天晚上有人消失了，家里似乎进入了不干净的客人！");else if(0==this.GetHumanCount()&&this.GetNoHumanCount()>0)return void this.GameOver2();this.TVController.ShowTV(),this.Power=this.NextPower,this.ShowPower()}this.RemovePlot()})).to(.5,{opacity:100},{easing:"smooth"}).to(.2,{opacity:130},{easing:"smooth"}).to(.2,{opacity:100},{easing:"smooth"}).to(.2,{opacity:130},{easing:"smooth"}).to(.5,{opacity:0},{easing:"smooth"}).call((()=>{t&&t(),this.sleeping=!1,this.PowerParent.active=!this.IsNight,this.Light.active=!this.IsNight,this.IsNight&&(this.CurDay++,this.InitGate(),this.InitWindowMonologue()),k.emit(L.弹出窗口,"我不是人类")})).start()}RemovePlot(){for(;this.ArrRemoveName.length>0;){const t=this.ArrRemoveName.shift();this.MapPlot.has(t)&&(this.MapPlot.get(t).destroy(),this.MapPlot.delete(t))}}GetHumanCount(){let t=0;return this.MapPlot.forEach((e=>{e.getComponent(W).IsHuman&&t++})),t}GetNoHumanCount(){let t=0;return this.MapPlot.forEach((e=>{e.getComponent(W).IsHuman||t++})),t}RandRemoveHuman(){this.MapPlot.forEach((t=>{t.getComponent(W).IsHuman&&(this.ArrRemoveName.push(t.name),this.CurCorpse=t.parent.parent.getComponent(C).Corpse)}))}GameOver1(){b(this.Mask).to(2,{opacity:250},{easing:"smooth"}).call((()=>{this.Mask.opacity=0,this.Over1.node.active=!0,this.Over1.playText("你被杀了，请重新开始解锁不一样的结局吧！"),k.emit(L.游戏结束,"我不是人类")})).start()}GameOver2(){d.stopAllByTarget(this.Mask),b(this.Mask).to(2,{opacity:250},{easing:"smooth"}).call((()=>{this.Mask.opacity=0,this.Over1.node.active=!0,this.Over1.playText("家里只有伪人,你被杀了，请重新开始解锁不一样的结局吧！"),k.emit(L.游戏结束,"我不是人类")})).start()}GameOver3(){d.stopAllByTarget(this.Mask),b(this.Mask).to(2,{opacity:250},{easing:"smooth"}).call((()=>{this.Mask.opacity=0,this.Over1.node.active=!0,this.Over1.playText("你成功坚持到了最后！请重新开始解锁不一样的结局吧！"),k.emit(L.游戏结束,"我不是人类")})).start()}onEnable(){this.DrinkAnimation.on(l.EventType.FINISHED,(()=>{this.Power=0,this.ShowTips("啊，啤酒让我感到昏昏欲睡。现在最应该做的就是去睡觉。"),P.Instance.node.active=!0,this.DrinkAnimation.node.active=!1,this.ShowPower()}))}}).Instance=null,et=e((tt=Ct).prototype,"Light",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(tt.prototype,"Canvas",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(tt.prototype,"TransparentMaterial",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(tt.prototype,"WindowMaterial",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(tt.prototype,"WindowGlassMaterial",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(tt.prototype,"Players",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(tt.prototype,"RenderTexture",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(tt.prototype,"HouseMain",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(tt.prototype,"Monologue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(tt.prototype,"Window1",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(tt.prototype,"Window2",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(tt.prototype,"Window3",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(tt.prototype,"Tips",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(tt.prototype,"TipsLabel",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(tt.prototype,"DrinkAnimation",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(tt.prototype,"PowerParent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(tt.prototype,"PowerPrefab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(tt.prototype,"VideoPrefab",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(tt.prototype,"Mask",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(tt.prototype,"TVController",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(tt.prototype,"GunController",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(tt.prototype,"Over1",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=tt))||$));o._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_GateRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_Room.ts","./WBSRL_Monologue.ts","./WBSRL_Plot.ts","./WBSRL_GameManager.ts","./WBSRL_Joystick.ts"],(function(t){var e,i,n,o,s,r,l,a,c,u,h,C,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,s=t.Label,r=t.Prefab,l=t._decorator,a=t.instantiate,c=t.Vec3},function(t){u=t.WBSRL_Room},function(t){h=t.WBSRL_Monologue},function(t){C=t.WBSRL_Pot},function(t){p=t.WBSRL_GameManager},function(t){f=t.WBSRL_Joystick}],execute:function(){var g,y,I,d,m,b,S,v,R,k,P,D,L,_,B,M,N,w,W,z,G,O,x;n._RF.push({},"34c2dKHwlJK9K4yPfAAIwKU","WBSRL_GateRoom",void 0);const{ccclass:H,property:K}=l;t("WBSRL_GateRoom",(g=H("WBSRL_GateRoom"),y=K(h),I=K(o),d=K(s),m=K(s),b=K(o),S=K(o),v=K(r),R=K(r),k=K(r),P=K(r),g((_=e((L=class extends u{constructor(...t){super(...t),i(this,"Monologue",_,this),i(this,"SelectNode",B,this),i(this,"Select1",M,this),i(this,"Select2",N,this),i(this,"ISComeIn",w,this),i(this,"CheCkNode",W,this),i(this,"Day1",z,this),i(this,"Day2",G,this),i(this,"Day3",O,this),i(this,"Day4",x,this),this.Curlot=null,this.isClick=!1,this.isOver=!1}Init(){super.Init(),0==p.Instance.CurDay?p.Instance.Plots=this.Day1:1==p.Instance.CurDay?p.Instance.Plots=this.Day2:2==p.Instance.CurDay?p.Instance.Plots=this.Day3:3==p.Instance.CurDay&&(p.Instance.Plots=this.Day4)}OpenRoom(){super.OpenRoom(),p.Instance.HouseMain.children.forEach((t=>t.active=!1)),this.NextPlot()}CloseRoom(){super.CloseRoom(),p.Instance.HouseMain.children.forEach((t=>t.active=!0)),p.Instance.Plots.length<=0&&p.Instance.ShowTips("看来今天是没什么人了！")}NextPlot(){if(p.Instance.Plots.length<=0)return;const t=p.Instance.Plots.shift(),e=a(t);e.parent=this.PlotParent,e.setPosition(c.ZERO),this.Curlot=e.getComponent(C),this.isClick=!0,f.Instance.node.active=!1,this.Click()}Click(){if(!this.isClick)return;if(!this.Curlot)return;if(this.Monologue.IsPlaying)return;this.SelectNode.active&&(this.SelectNode.active=!1),this.Monologue.node.active||(this.Monologue.node.active=!0);const t=this.Curlot.GetNext();if(""==t[0]&&""==t[2]&&""==t[1])if(this.Curlot.BedNPC){if(this.isOver)return void this.Leave();this.CheCkNode.active=!0}else this.Curlot.NPC?this.Leave():this.Curlot.ComeIn?this.ComeIn():(this.ISComeIn.active=!0,this.isClick=!1,this.Monologue.node.active=!1);else""==t[0]&&""!=t[1]&&""!=t[2]?(this.SelectNode.active=!0,this.Select1.string=t[1],this.Select2.string=t[2],this.isClick=!1):this.Monologue.playText(t[0])}OnClick(){this.isClick=!0,this.Click()}ComeIn(){this.ISComeIn.active=!1,p.Instance.AddGuest(this.Curlot.Room,this.Curlot.PrefabInRoom),this.isClick=!1,this.Monologue.node.active=!1,this.Curlot.node.destroy(),this.Curlot=null,f.Instance.node.active=!0}Leave(){this.ISComeIn.active=!1,this.isClick=!1,this.Monologue.node.active=!1,this.Curlot.node.destroy(),this.Curlot=null,f.Instance.node.active=!0}OnButtonClick(t){switch(t.getCurrentTarget().name){case"不是一个人":this.isOver=!0,this.Curlot.String.push("你今晚很幸运。"),this.Curlot.String.push("我能听见有人在你房间里窃窃私语。"),this.Curlot.String.push("但谁知道明天会发生什。"),this.CheCkNode.active=!1,this.Click();break;case"一个人":this.CheCkNode.active=!1,this.Monologue.node.active=!1,p.Instance.GameOver1()}}}).prototype,"Monologue",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(L.prototype,"SelectNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(L.prototype,"Select1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(L.prototype,"Select2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(L.prototype,"ISComeIn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(L.prototype,"CheCkNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(L.prototype,"Day1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(L.prototype,"Day2",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=e(L.prototype,"Day3",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=e(L.prototype,"Day4",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=L))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_GunController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,i,e,o,r,l;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.initializerDefineProperty},function(n){e=n.cclegacy,o=n.Animation,r=n._decorator,l=n.Component}],execute:function(){var s,a,c,u,h;e._RF.push({},"42cdcRTllNMTreMcOmMDFv9","WBSRL_GunController",void 0);const{ccclass:p,property:d}=r;n("WBSRL_GunController",(s=p("WBSRL_GunController"),a=d(o),s((h=t((u=class extends l{constructor(...n){super(...n),i(this,"Animation",h,this),this.cb=null,this.aniName=""}onLoad(){this.Animation.on(o.EventType.FINISHED,(()=>{this.cb&&this.cb()}),this)}DrawGun(n){this.node.active=!0,this.PlayAni("GunDraw",(()=>{n&&n(),this.PlayAni("GunIdle")}))}ShotGun(n){this.PlayAni("GunShot",(()=>{n&&n(),this.node.active=!1}))}ClosedGun(n){this.PlayAni("GunClosed",(()=>{n&&n(),this.node.active=!1}))}PlayAni(n,t=null){this.aniName!==n&&(this.aniName=n,this.Animation.play(n),this.cb=t)}}).prototype,"Animation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c));e._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Joystick.ts",["cc"],(function(t){var e,i,s,o,h,n,c,a,r,_,y,l;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.Component,o=t.Vec3,h=t.Vec2,n=t.v2,c=t.Node,a=t.input,r=t.Input,_=t.UITransform,y=t.director,l=t.KeyCode}],execute:function(){var d,u;e._RF.push({},"9a095IYoCBHJ4HxB3pCWQbK","WBSRL_Joystick",void 0);const{ccclass:C,property:m}=i;let T=t("KEYCODE",function(t){return t[t.A=0]="A",t[t.D=1]="D",t[t.W=2]="W",t[t.S=3]="S",t}({}));t("WBSRL_Joystick",C("WBSRL_Joystick")(((u=class t extends s{constructor(...t){super(...t),this._joystickBase=null,this._joystickDot=null,this._attack=null,this._attackDot=null,this._movementTouch=null,this._cameraMovementTouch=null,this._load=null,this._fire=null,this._joystickBaseNormalPos=o.ZERO,this._cameraPrePos=new h,this._interact=null,this._exit=null,this._cbStart=null,this._cbEnd=null,this.joystickArea=null,this.cameraArea=null,this.lastLocation=n(0,0),this.CameraTouchID=0,this.dis=n(0,0),this._dir=new h(0,0),this.ArrRowKeyCode=[],this.ArrCloKeyCode=[]}onLoad(){t.Instance=this,this.joystickArea=this.node.getChildByName("JoystickArea"),this.joystickArea.on(c.EventType.TOUCH_START,this.OnTouchStart,this),this.joystickArea.on(c.EventType.TOUCH_MOVE,this.OnTouchMove,this),this.joystickArea.on(c.EventType.TOUCH_END,this.OnTouchEnd,this),this.joystickArea.on(c.EventType.TOUCH_CANCEL,this.OnTouchEnd,this),this._joystickBase=this.node.getChildByName("JoystickBase"),this._joystickDot=this._joystickBase.getChildByName("JoystickDot"),this._joystickBaseNormalPos=this._joystickBase.getPosition().clone(),this.cameraArea=this.node.getChildByName("CameraArea"),this.cameraArea.on(c.EventType.TOUCH_START,this.OnCameraTouchStart,this),this.cameraArea.on(c.EventType.TOUCH_MOVE,this.OnCameraTouchMove,this),this._interact=this.node.getChildByName("交互按钮"),this._interact.on(c.EventType.TOUCH_END,this.OnInteractTouchEnd,this),this._exit=this.node.getChildByName("退出"),this._exit.on(c.EventType.TOUCH_END,this.OnExitTouchEnd,this)}start(){a.on(r.EventType.KEY_DOWN,this.onKeyDown,this),a.on(r.EventType.KEY_UP,this.onKeyUp,this)}OnTouchStart(t){let e=t.getTouches();for(let t=0;t<e.length;++t){let i=e[t],s=i.getUILocationX(),o=i.getUILocationY();this._movementTouch||(this._joystickBase.setPosition(s-this.node.getComponent(_).width/2,o-this.node.getComponent(_).height/2,0),this._joystickDot.setPosition(0,0,0),this._movementTouch=i)}}OnTouchMove(t){let e=t.getTouches();for(let t=0;t<e.length;++t){let i=e[t];if(this._movementTouch&&i.getID()==this._movementTouch.getID()){let t=i.getUILocationX(),e=i.getUILocationY(),s=this._joystickBase.position,o=t-this.node.getComponent(_).width/2-s.x,h=e-this.node.getComponent(_).height/2-s.y,n=Math.sqrt(o*o+h*h);if(n<=0)return;let c=o/n,a=h/n,r=this._joystickBase.getComponent(_).width/2;n>r&&(n=r,o=c*r,h=a*r),this._joystickDot.setPosition(o,h,0),y.getScene().emit("WBHRL_Move",c,a,n/r)}}}OnTouchEnd(t){let e=t.getTouches();for(let t=0;t<e.length;++t){let i=e[t];this._movementTouch&&i.getID()==this._movementTouch.getID()&&(y.getScene().emit("WBHRL_Move",0,0,0),this._movementTouch=null,this._joystickBase.setPosition(this._joystickBaseNormalPos),this._joystickDot.setPosition(o.ZERO))}}OnCameraTouchStart(t){this.lastLocation.set(t.getLocation()),this.CameraTouchID=t.getID()}OnCameraTouchMove(t){if(t.getID()!=this.CameraTouchID)return;h.subtract(this.dis,t.getLocation(),this.lastLocation);let e=.025*this.dis.y,i=.025*-this.dis.x;y.getScene().emit("WBSRL_CameraPlayer",e,i),this.lastLocation.set(t.getLocation())}onReloadTouchEnd(t){}onKeyDown(t){switch(t.keyCode){case l.KEY_A:this.pushKeyCode(this.ArrRowKeyCode,T.A);break;case l.KEY_D:this.pushKeyCode(this.ArrRowKeyCode,T.D);break;case l.KEY_W:this.pushKeyCode(this.ArrCloKeyCode,T.W);break;case l.KEY_S:this.pushKeyCode(this.ArrCloKeyCode,T.S);break;case l.SPACE:return}this.updateDir()}onKeyUp(t){switch(t.keyCode){case l.KEY_A:this.removeKeyCode(this.ArrRowKeyCode,T.A);break;case l.KEY_D:this.removeKeyCode(this.ArrRowKeyCode,T.D);break;case l.KEY_W:this.removeKeyCode(this.ArrCloKeyCode,T.W);break;case l.KEY_S:this.removeKeyCode(this.ArrCloKeyCode,T.S);break;case l.SPACE:return}this.updateDir()}pushKeyCode(t,e){-1==t.findIndex((t=>t==e))&&t.push(e)}removeKeyCode(t,e){const i=t.findIndex((t=>t==e));-1!=i&&t.splice(i,1)}getKeyCode(t){return 0==t.length?-1:t[t.length-1]}updateDir(){const t=this.getKeyCode(this.ArrRowKeyCode);t==T.A?this._dir.x=-1:t==T.D?this._dir.x=1:this._dir.x=0;const e=this.getKeyCode(this.ArrCloKeyCode);e==T.S?this._dir.y=-1:e==T.W?this._dir.y=1:this._dir.y=0,y.getScene().emit("WBHRL_Move",this._dir.x,this._dir.y,1)}OnInteractTouchEnd(t){this.ShowInteractButton(!1),this._cbStart&&this._cbStart()}addInteract(t=null,e=null){this._interact.active=!0,this._cbStart=t,this._cbEnd=e}reomveInteract(){this._interact.active=!1,this.Close(),this._cbStart=null}OnExitTouchEnd(t){this.ShowExitButton(!1),this._cbEnd&&this._cbEnd()}ShowInteractButton(t){this._interact.active=t,this._joystickBase.active=t}ShowExitButton(t){this._exit.active=t}OpenDoor(){this.cameraArea.active=!1,this.joystickArea.active=!1}CloseDoor(){this.cameraArea.active=!0,this.joystickArea.active=!0}Close(){y.getScene().emit("WBHRL_Move",0,0,0),this._movementTouch=null,this._joystickBase.setPosition(this._joystickBaseNormalPos),this._joystickDot.setPosition(o.ZERO)}}).Instance=null,d=u))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Monologue.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,l,n,r;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,l=t.Label,n=t._decorator,r=t.Component}],execute:function(){var u,o,h,c,a,p;s._RF.push({},"8dd3c1gkWBBbZhzSZvkrbsc","WBSRL_Monologue",void 0);const{ccclass:_,property:g}=n;t("WBSRL_Monologue",(u=_("WBSRL_Monologue"),o=g(l),u((a=e((c=class extends r{constructor(...t){super(...t),i(this,"label",a,this),i(this,"typingSpeed",p,this),this._fullText="",this._curIndex=0,this._isPlaying=!1}get IsPlaying(){return this._isPlaying}playText(t){this._fullText=t,this._curIndex=0,this._isPlaying=!0,this.label.string="",this.schedule(this._typeWriter,this.typingSpeed)}_typeWriter(){this._isPlaying&&(this._curIndex++,this.label.string=this._fullText.slice(0,this._curIndex),this._curIndex>=this._fullText.length&&(this.unschedule(this._typeWriter),this._isPlaying=!1))}showAll(){this.unschedule(this._typeWriter),this.label.string=this._fullText,this._isPlaying=!1}}).prototype,"label",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=e(c.prototype,"typingSpeed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),h=c))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_Joystick.ts","./WBSRL_GameManager.ts","./ProjectEventManager.ts","./WBSRL_CameraController.ts"],(function(e){var t,n,r,a,i,o,s,l,c,h,m,d,g,I,u,S,y,C,p,f,R,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e.Node,i=e._decorator,o=e.Component,s=e.Vec2,l=e.v3,c=e.RigidBody,h=e.Vec3,m=e.v2,d=e.math,g=e.geometry,I=e.PhysicsSystem,u=e.director,S=e.Camera,y=e.tween},function(e){C=e.WBSRL_Joystick},function(e){p=e.WBSRL_GameManager},function(e){f=e.ProjectEventManager,R=e.ProjectEvent},function(e){B=e.WBSRL_CameraController}],execute:function(){var _,w,T,v,W,L,x,b,P,M,A,O,D;r._RF.push({},"508dbCPRj5KXom+KVOXaf8C","WBSRL_PlayerController",void 0);const{ccclass:N,property:z}=i;e("WBSRL_PlayerController",(_=N("WBSRL_PlayerController"),w=z(a),T=z(B),_(((D=class e extends o{constructor(...e){super(...e),n(this,"Camera",L,this),n(this,"MaxSpeed",x,this),n(this,"rotationSensitivity",b,this),n(this,"verticalAngleLimit",P,this),n(this,"ShakMin",M,this),n(this,"MaxDistance",A,this),n(this,"cameraController",O,this),this.IsInteracting=!1,this.IsShowInteracting=!1,this.RigidBody=null,this._verticalAngle=0,this._dir=new s,this._curSpeed=0,this.v3_move=l(0,0,0)}onLoad(){e.Instance=this,this.RigidBody=this.getComponent(c)}update(e){if(!this.IsInteracting){if(this.RigidBody&&this._dir.length()>0){const t=this.node.eulerAngles.y*Math.PI/180,n=this._dir.x*Math.cos(t)-this._dir.y*Math.sin(t),r=this._dir.x*Math.sin(t)+this._dir.y*Math.cos(t);let a=l(n,0,-r).normalize(),i=h.angle(h.FORWARD,l(this.cameraController.node.forward.x,0,this.cameraController.node.forward.z).normalize());this.cameraController.node.eulerAngles.y<0&&(i=this.cameraController.node.eulerAngles.y%360>=-180?-i:i),this.cameraController.node.eulerAngles.y>0&&(i=this.cameraController.node.eulerAngles.y%360>=180?-i:i),h.rotateY(this.v3_move,a,h.ZERO,i),this.RigidBody.setLinearVelocity(this.v3_move.multiplyScalar(this._curSpeed*e))}else this.RigidBody.setLinearVelocity(h.ZERO);this.performRaycast()}}SetMove(e,t,n){this._dir=m(e,t),this._curSpeed=this.MaxSpeed*n}onCameraRotation(e,t){if(this.IsInteracting)return;let n=this.cameraController.node.eulerAngles;this.cameraController.SetTargetAngle(d.clamp(n.x+e*this.rotationSensitivity,-80,80),n.y+t*this.rotationSensitivity,n.z)}performRaycast(){if(this.IsInteracting)return;if(!this.Camera)return;const t=this.Camera.worldPosition,n=h.FORWARD.clone();h.transformQuat(n,n,this.Camera.worldRotation);const r=new g.Ray;if(r.o.set(t),r.d.set(n),I.instance.raycast(r,-1,this.MaxDistance,!0)){if(this.IsShowInteracting)return;const t=I.instance.raycastResults;for(let n=0;n<t.length;n++){const r=t[n];if("窗户1"==r.collider.node.name){if(!p.Instance.IsNight)return;this.IsShowInteracting=!0;const e=p.Instance.GetPlayerByName(r.collider.node.name);e&&C.Instance.addInteract((()=>{this.IsInteracting=!0,this.moveToTarget(e,(()=>{u.getScene().emit("WBSRL_OpenWindow"),p.Instance.ShowWindowPanel("窗户1"),this.addCameraTargetTexture()}))}),(()=>{this.IsInteracting=!1,u.getScene().emit("WBSRL_CloseWindow")}))}else if("窗户2"==r.collider.node.name){if(!p.Instance.IsNight)return;this.IsShowInteracting=!0;const e=p.Instance.GetPlayerByName(r.collider.node.name);e&&C.Instance.addInteract((()=>{this.IsInteracting=!0,this.moveToTarget(e,(()=>{u.getScene().emit("WBSRL_OpenWindow"),p.Instance.ShowWindowPanel("窗户2"),this.addCameraTargetTexture()}))}),(()=>{this.IsInteracting=!1,u.getScene().emit("WBSRL_CloseWindow")}))}else if("窗户3"==r.collider.node.name){if(!p.Instance.IsNight)return;this.IsShowInteracting=!0;const e=p.Instance.GetPlayerByName(r.collider.node.name);e&&C.Instance.addInteract((()=>{this.IsInteracting=!0,this.moveToTarget(e,(()=>{u.getScene().emit("WBSRL_OpenCurtain"),p.Instance.ShowWindowPanel("窗户3"),this.addCameraTargetTexture()}))}),(()=>{this.IsInteracting=!1,u.getScene().emit("WBSRL_CloseCurtain")}))}else if("门1"==r.collider.node.name){if(!p.Instance.IsNight)return;this.IsShowInteracting=!0;const t=p.Instance.GetPlayerByName(r.collider.node.name);t&&C.Instance.addInteract((()=>{this.IsInteracting=!0,this.moveToTarget(t,(()=>{f.emit(R.弹出窗口,"我不是人类"),p.Instance.OpenRoomByName(t.name),this.addCameraTargetTexture(),this.scheduleOnce((()=>{C.Instance.ShowExitButton(!0)}),1)}))}),(()=>{this.IsInteracting=!1,C.Instance.ShowInteractButton(!0),e.Instance.removeCameraTargetTexture(),p.Instance.CloseRoom()}))}else if("门7"==r.collider.node.name){this.IsShowInteracting=!0;const e=p.Instance.GetPlayerByName(r.collider.node.name);e&&C.Instance.addInteract((()=>{this.IsInteracting=!0,this.moveToTarget(e,(()=>{p.Instance.OpenRoomByName(e.name),u.getScene().emit("WBSRL_OpenDoor"),this.addCameraTargetTexture(),this.scheduleOnce((()=>{C.Instance.ShowExitButton(!0)}),1),C.Instance.OpenDoor()}))}),(()=>{this.IsInteracting=!1,u.getScene().emit("WBSRL_CloseDoor"),C.Instance.CloseDoor()}))}else if("门"==r.collider.node.name[0]){if(p.Instance.IsNight)return;this.IsShowInteracting=!0;const e=p.Instance.GetPlayerByName(r.collider.node.name);e&&C.Instance.addInteract((()=>{this.IsInteracting=!0,this.moveToTarget(e,(()=>{p.Instance.OpenRoomByName(e.name),u.getScene().emit("WBSRL_OpenDoor"),this.addCameraTargetTexture(),this.scheduleOnce((()=>{C.Instance.ShowExitButton(!0)}),1),C.Instance.OpenDoor()}))}),(()=>{this.IsInteracting=!1,u.getScene().emit("WBSRL_CloseDoor"),C.Instance.CloseDoor()}))}}}else this.IsShowInteracting&&(this.IsShowInteracting=!1,C.Instance.reomveInteract())}addCameraTargetTexture(){this.Camera.getComponent(S).targetTexture=p.Instance.RenderTexture}removeCameraTargetTexture(){this.Camera.getComponent(S).targetTexture=null}moveToTarget(e,t){if(!e)return;const n=e.worldPosition.clone();let r=e.eulerAngles.clone();y(this.node).to(1,{worldPosition:n},{easing:"smooth",onComplete:()=>{t&&t()}}).start(),Math.abs(this.cameraController.node.eulerAngles.y-r.y)>180&&(this.cameraController.node.eulerAngles.y>0?r.y=d.clamp((r.y+360)%361,-359,359):r.y=d.clamp((r.y-360)%361,-359,359));const a={progress:0};y(a).to(1,{progress:1},{easing:"smooth",onUpdate:()=>{let e=this.cameraController.node.eulerAngles;h.slerp(e,e,r,a.progress),this.cameraController.SetTargetAngle(d.clamp(e.x,-80,80),e.y,e.z)},onComplete:()=>{this.cameraController.SetTargetAngle(d.clamp(r.x,-80,80),r.y,r.z)}}).start()}onEnable(){u.getScene().on("WBHRL_Move",this.SetMove,this),u.getScene().on("WBSRL_CameraPlayer",this.onCameraRotation,this)}onDisable(){u.getScene().off("WBHRL_Move",this.SetMove,this),u.getScene().off("WBSRL_CameraPlayer",this.onCameraRotation,this)}}).Instance=null,L=t((W=D).prototype,"Camera",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(W.prototype,"MaxSpeed",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),b=t(W.prototype,"rotationSensitivity",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),P=t(W.prototype,"verticalAngleLimit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),M=t(W.prototype,"ShakMin",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),A=t(W.prototype,"MaxDistance",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),O=t(W.prototype,"cameraController",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=W))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Plot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_Constant.ts"],(function(t){var e,i,r,n,o,l,u,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.Enum,o=t.Prefab,l=t._decorator,u=t.Component},function(t){a=t.WBSRL_ROOM}],execute:function(){var c,s,p,b,f,h,g,S,m,y,R,P,_,z;r._RF.push({},"12b3ahR6ZlPv5E9lzaR41yn","WBSRL_Plot",void 0);const{ccclass:B,property:C}=l;t("WBSRL_Pot",(c=B("WBSRL_Pot"),s=C({type:String}),p=C({type:String}),b=C({type:n(a)}),f=C(o),c((S=e((g=class extends u{constructor(...t){super(...t),i(this,"String",S,this),i(this,"Select",m,this),i(this,"ComeIn",y,this),i(this,"Room",R,this),i(this,"PrefabInRoom",P,this),i(this,"NPC",_,this),i(this,"BedNPC",z,this)}GetNext(){if(this.String.length<=0)return["","",""];const t=this.String.shift().toString();return"_"==t[0]?["",this.Select[Number(t[1])].toString(),this.Select[Number(t[3])].toString()]:[t,"",""]}}).prototype,"String",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=e(g.prototype,"Select",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=e(g.prototype,"ComeIn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=e(g.prototype,"Room",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.储物间}}),P=e(g.prototype,"PrefabInRoom",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(g.prototype,"NPC",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=e(g.prototype,"BedNPC",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=g))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_PlotInRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_Monologue.ts","./WBSRL_Joystick.ts","./WBSRL_GameManager.ts"],(function(e){var t,i,n,r,s,o,c,a,h,l,u,d,g,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Node,s=e.Label,o=e.SpriteFrame,c=e.Sprite,a=e._decorator,h=e.Component,l=e.UITransform,u=e.tween},function(e){d=e.WBSRL_Monologue},function(e){g=e.WBSRL_Joystick},function(e){S=e.WBSRL_GameManager}],execute:function(){var b,C,p,k,f,v,m,I,y,N,w,z,M,R,F,D,_,G,H,B,L,P,W,J,E,x,O,T,A,V,j,U,X,q,K,Q,Y,Z,$,ee,te,ie,ne;n._RF.push({},"cb830oWudVPMbhDIOAEwtzV","WBSRL_PlotInRoom",void 0);const{ccclass:re,property:se}=a;e("WBSRL_PlotInRoom",(b=re("WBSRL_PlotInRoom"),C=se({type:String}),p=se({type:String}),k=se({type:String}),f=se({type:String}),v=se(d),m=se(r),I=se(s),y=se(s),N=se(r),w=se(r),z=se(r),M=se(r),R=se(r),F=se(r),D=se(o),_=se(o),G=se(c),H=se(r),B=se(r),b((W=t((P=class extends h{constructor(...e){super(...e),i(this,"String",W,this),i(this,"Select",J,this),i(this,"StringSelect1",E,this),i(this,"StringSelect2",x,this),i(this,"Monologue",O,this),i(this,"SelectNode",T,this),i(this,"Select1",A,this),i(this,"Select2",V,this),i(this,"Icons",j,this),i(this,"CheckNode",U,this),i(this,"Judgment",X,this),i(this,"CheckedNode",q,this),i(this,"Hand",K,this),i(this,"HandIcon",Q,this),i(this,"DieSF",Y,this),i(this,"SFs",Z,this),i(this,"Sprites",$,this),i(this,"Mouth",ee,this),i(this,"Eyes",te,this),i(this,"IsFirst",ie,this),i(this,"IsHuman",ne,this),this.CurString=[],this.isClick=!1,this.isCheck=!1,this.isDie=!1}Init(){if(this.Sprites.length==this.SFs.length)for(let e=0;e<this.Sprites.length;e++)this.Sprites[e].spriteFrame=this.SFs[e]}GetNext(){if(this.CurString.length<=0)return["","",""];const e=this.CurString.shift().toString();return"_"==e[0]?["",this.Select[Number(e[1])].toString(),this.Select[Number(e[3])].toString()]:[e,"",""]}Click(){if(!this.isClick)return;if(this.Monologue.IsPlaying)return;this.SelectNode.active&&(this.SelectNode.active=!1),this.Monologue.node.active||(this.Monologue.node.active=!0);const e=this.GetNext();if(""==e[0]&&""==e[2]&&""==e[1]){if(this.isCheck)return void this.ShowCheck();this.isClick=!1,this.Monologue.node.active=!1,this.Icons[0].active=!0,this.Icons[1].active=!1,g.Instance.node.active=!0}else""==e[0]&&""!=e[1]&&""!=e[2]?(this.SelectNode.active=!0,this.Select1.string=e[1],this.Select2.string=e[2]):this.Monologue.playText(e[0])}ClickIcon(){this.isDie||(this.IsFirst&&(this.IsFirst=!1,S.Instance.IsClickBX=!0,S.Instance.ArrRemoveName.push(this.node.name)),S.Instance.Power<=0?S.Instance.ShowTips("没有体力了！"):(S.Instance.Power--,S.Instance.ShowPower(),this.Icons[0].active=!1,this.Icons[1].active=!0,this.isClick=!0,this.CurString=this.CloneString(this.String),this.Click(),g.Instance.node.active=!1))}CloneString(e){const t=[];return e.forEach((e=>t.push(e))),t}OnButtonClick(e){switch(e.getCurrentTarget().name){case"Select1":this.CurString=this.CloneString(this.StringSelect1),this.Click();break;case"Select2":this.CurString=this.CloneString(this.StringSelect2),this.Click();break;case"Select3":this.CurString=["你想检查什么？"],this.isCheck=!0,this.Click();break;case"Check1":this.CheckMouth();break;case"Check2":this.CheCkHand();break;case"Check3":this.CheckEyes();break;case"放过":S.Instance.GunController.ClosedGun((()=>{this.Judgment.active=!1,this.Icons[0].active=!0,this.Icons[1].active=!1,g.Instance.node.active=!0}));break;case"开枪":S.Instance.GunController.ShotGun((()=>{this.isDie=!0,this.Judgment.active=!1,this.Icons[1].active=!1,this.Icons[0].getComponent(c).spriteFrame=this.DieSF,this.Icons[0].active=!0,S.Instance.ArrRemoveName.push(this.node.name),g.Instance.node.active=!0}))}}ShowCheck(){this.CheckNode.active=!0,1==S.Instance.CurDay?(this.CheckNode.children[0].active=!0,this.CheckNode.children[1].active=!1,this.CheckNode.children[2].active=!1):2==S.Instance.CurDay?(this.CheckNode.children[0].active=!0,this.CheckNode.children[1].active=!0,this.CheckNode.children[2].active=!1):(this.CheckNode.children[0].active=!0,this.CheckNode.children[1].active=!0,this.CheckNode.children[2].active=!0)}CheckMouth(){this.Monologue.node.active=!1,this.CheckNode.active=!1,this.isClick=!1,this.CheckedNode.active=!0,this.Mouth.active=!0,this.scheduleOnce((()=>{this.Mouth.active=!1,this.CheckedNode.active=!1,S.Instance.GunController.DrawGun((()=>{this.Judgment.active=!0}))}),4)}CheCkHand(){if(this.Monologue.node.active=!1,this.CheckNode.active=!1,this.isClick=!1,this.CheckedNode.active=!0,this.Hand.active=!0,this.HandIcon){const e=this.HandIcon.getComponent(l).height;u(this.HandIcon).by(1,{y:e},{easing:"smooth"}).delay(2).by(1,{y:-e},{easing:"smooth"}).call((()=>{this.Hand.active=!1,this.CheckedNode.active=!1,S.Instance.GunController.DrawGun((()=>{this.Judgment.active=!0}))})).start()}}CheckEyes(){this.Monologue.node.active=!1,this.CheckNode.active=!1,this.isClick=!1,this.CheckedNode.active=!0,this.Eyes.active=!0,this.scheduleOnce((()=>{this.Eyes.active=!1,this.CheckedNode.active=!1,S.Instance.GunController.DrawGun((()=>{this.Judgment.active=!0}))}),4)}}).prototype,"String",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=t(P.prototype,"Select",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(P.prototype,"StringSelect1",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(P.prototype,"StringSelect2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(P.prototype,"Monologue",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(P.prototype,"SelectNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(P.prototype,"Select1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(P.prototype,"Select2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(P.prototype,"Icons",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=t(P.prototype,"CheckNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(P.prototype,"Judgment",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(P.prototype,"CheckedNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(P.prototype,"Hand",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(P.prototype,"HandIcon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(P.prototype,"DieSF",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(P.prototype,"SFs",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$=t(P.prototype,"Sprites",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=t(P.prototype,"Mouth",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(P.prototype,"Eyes",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(P.prototype,"IsFirst",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ne=t(P.prototype,"IsHuman",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=P))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Room.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_GameManager.ts","./WBSRL_PlotInRoom.ts"],(function(t){var e,o,n,r,i,a,s,c,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,i=t._decorator,a=t.Component,s=t.instantiate,c=t.Vec3},function(t){l=t.WBSRL_GameManager},function(t){u=t.WBSRL_PlotInRoom}],execute:function(){var p,R,m,P,f,_,d;n._RF.push({},"e590b3CXUpIGrclx5Mjsusc","WBSRL_Room",void 0);const{ccclass:B,property:b}=i;t("WBSRL_Room",(p=B("WBSRL_Room"),R=b(r),m=b(r),p((_=e((f=class extends a{constructor(...t){super(...t),o(this,"PlotParent",_,this),o(this,"Corpse",d,this)}Init(){}OpenRoom(){this.node.active=!0}CloseRoom(){this.node.active=!1}AddItemByPrefab(t){var e;const o=s(t);o.parent=this.PlotParent,o.setPosition(c.ZERO),null==(e=o.getComponent(u))||e.Init(),l.Instance.MapPlot.set(o.name,o)}}).prototype,"PlotParent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=e(f.prototype,"Corpse",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=f))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_TV.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.SpriteFrame,o=e._decorator,c=e.Component}],execute:function(){var s,u,l,a,p,f,g;i._RF.push({},"64067Lz9gtBfqxMdrPCnzoL","WBSRL_TV",void 0);const{ccclass:S,property:_}=o;e("WBSRL_TV",(s=S("WBSRL_TV"),u=_(String),l=_(n),s((f=t((p=class extends c{constructor(...e){super(...e),r(this,"string",f,this),r(this,"SF",g,this)}}).prototype,"string",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(p.prototype,"SF",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=p))||a));i._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_TVController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_Monologue.ts","./WBSRL_TV.ts"],(function(t){var e,i,n,o,r,s,l,u,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Prefab,r=t.Sprite,s=t._decorator,l=t.Component,u=t.instantiate},function(t){c=t.WBSRL_Monologue},function(t){a=t.WBSRL_TV}],execute:function(){var h,p,g,f,T,V,S,C,_;n._RF.push({},"e5315c/E99LSYrZf0BdS1On","WBSRL_TVController",void 0);const{ccclass:b,property:y}=s;t("WBSRL_TVController",(h=b("WBSRL_TVController"),p=y(o),g=y(r),f=y(c),h((S=e((V=class extends l{constructor(...t){super(...t),i(this,"TVs",S,this),i(this,"Icon",C,this),i(this,"Monologue",_,this),this.CurTV=null}ShowTV(){if(this.TVs.length<=0)return;this.node.active=!0;const t=u(this.TVs.shift());this.CurTV=t.getComponent(a),this.Icon.spriteFrame=this.CurTV.SF,this.Click()}Click(){this.Monologue.IsPlaying||(this.CurTV.string.length<=0?this.node.active=!1:this.Monologue.playText(this.CurTV.string.shift().toString()))}}).prototype,"TVs",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=e(V.prototype,"Icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(V.prototype,"Monologue",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=V))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_Window.ts",["cc","./WBSRL_GameManager.ts","./WBSRL_Joystick.ts","./WBSRL_PlayerController.ts"],(function(e){var n,t,o,s,i,a,r,c,l,W,d;return{setters:[function(e){n=e.cclegacy,t=e.Component,o=e.MeshRenderer,s=e.director,i=e.tween,a=e.Vec3,r=e.Tween,c=e._decorator},function(e){l=e.WBSRL_GameManager},function(e){W=e.WBSRL_Joystick},function(e){d=e.WBSRL_PlayerController}],execute:function(){var h;n._RF.push({},"118586my4dM+4kDkElFNaN7","WBSRL_Window",void 0);const{ccclass:S,property:w}=c;e("WBSRL_Window",S("WBSRL_Window")(h=class extends t{constructor(...e){super(...e),this.Mesh=null}onLoad(){this.Mesh=this.getComponent(o)}OpenWindow(){s.getScene().emit("WBSRL_OpenWindow_2"),i(this.node).by(1,{eulerAngles:new a(70,0,0)},{easing:"sineOut"}).call((()=>{this.Mesh.material=l.Instance.TransparentMaterial})).start()}CloseWindow(){r.stopAllByTarget(this.node),this.Mesh.material=l.Instance.WindowMaterial,i(this.node).by(1,{eulerAngles:new a(-70,0,0)},{easing:"sineOut"}).call((()=>{W.Instance.ShowInteractButton(!0),d.Instance.removeCameraTargetTexture(),l.Instance.CloseWindowPanel(),s.getScene().emit("WBSRL_CloseWindow_2")})).start()}onEnable(){s.getScene().on("WBSRL_OpenWindow",this.OpenWindow,this),s.getScene().on("WBSRL_CloseWindow",this.CloseWindow,this)}onDisable(){s.getScene().off("WBSRL_OpenWindow",this.OpenWindow,this),s.getScene().off("WBSRL_CloseWindow",this.CloseWindow,this)}})||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_WindowGlass.ts",["cc","./WBSRL_GameManager.ts"],(function(e){var n,s,t,a,o,r;return{setters:[function(e){n=e.cclegacy,s=e.Component,t=e.MeshRenderer,a=e.director,o=e._decorator},function(e){r=e.WBSRL_GameManager}],execute:function(){var i;n._RF.push({},"9e47cspwkRGdKNyfXpNpfVL","WBSRL_WindowGlass",void 0);const{ccclass:c,property:h}=o;e("WBSRL_WindowGlass",c("WBSRL_WindowGlass")(i=class extends s{constructor(...e){super(...e),this.Mesh=null}onLoad(){this.Mesh=this.getComponent(t)}ChangeTransparent(){this.Mesh.material=r.Instance.TransparentMaterial}ChangeNoTransparent(){this.Mesh.material=r.Instance.WindowGlassMaterial}onEnable(){a.getScene().on("WBSRL_OpenWindow_2",this.ChangeTransparent,this),a.getScene().on("WBSRL_CloseWindow_2",this.ChangeNoTransparent,this)}onDisable(){a.getScene().off("WBSRL_OpenWindow_2",this.ChangeTransparent,this),a.getScene().off("WBSRL_CloseWindow_2",this.ChangeNoTransparent,this)}})||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/WBSRL_WindowPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WBSRL_GameManager.ts"],(function(e){var n,o,t,i,c,r,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){t=e.cclegacy,i=e.Node,c=e._decorator,r=e.Component},function(e){s=e.WBSRL_GameManager}],execute:function(){var a,l,u,p,d;t._RF.push({},"de885Paef9BG4TxTmVElUZv","WBSRL_WindowPanel",void 0);const{ccclass:h,property:W}=c;e("WBSRL_WindowPanel",(a=h("WBSRL_WindowPanel"),l=W(i),a((d=n((p=class extends r{constructor(...e){super(...e),o(this,"Icons",d,this),this.Monologues=[]}OpenWindow(){this.node.active=!0,this.ShowIcon()}CloseWindow(){this.node.active=!1}ShowIcon(){for(let e=0;e<this.Icons.length;e++)this.Icons[e].active=s.Instance.CurDay==e}}).prototype,"Icons",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=p))||u));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/44_WBSRL_Bundle', 'chunks:///_virtual/44_WBSRL_Bundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});