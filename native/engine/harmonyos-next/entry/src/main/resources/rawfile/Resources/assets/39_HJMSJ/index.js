System.register("chunks:///_virtual/39_HJMSJ",["./HJMSJ_AICtrl.ts","./HJMSJ_AIPlayer.ts","./HJMSJ_BOSSMgr.ts","./HJMSJ_Boss1.ts","./HJMSJ_Boss2.ts","./HJMSJ_Boss3.ts","./HJMSJ_Boss4.ts","./HJMSJ_IceBall.ts","./HJMSJ_SnowBall.ts","./HJMSJ_SnowMan.ts","./HJMSJ_Armor.ts","./HJMSJ_BagMgr.ts","./HJMSJ_BagProp.ts","./HJMSJ_BottomProp.ts","./HJMSJ_Prop.ts","./HJMSJ_AudioManager.ts","./HJMSJ_Constant.ts","./HJMSJ_GameData.ts","./HJMSJ_GameMgr.ts","./HJMSJ_Incident.ts","./HJMSJ_MapCtrl.ts","./HJMSJ_NewCourse.ts","./HJMSJ_SnowEffect.ts","./HJMSJ_Start.ts","./HJMSJ_UIGame.ts","./HJMSJ_ValueMgr.ts","./HJMSJ_Block.ts","./HJMSJ_Composition.ts","./HJMSJ_Work.ts","./HJMSJ_BOSSBtn.ts","./HJMSJ_BOSSMap.ts","./HJMSJ_BuyProp.ts","./HJMSJ_LevelProp.ts","./HJMSJ_Music.ts","./HJMSJ_NPC.ts","./HJMSJ_Reward.ts","./HJMSJ_Role.ts","./HJMSJ_SkinStore.ts","./HJMSJ_Store.ts","./HJMSJ_SwitchMusic.ts","./HJMSJ_WorldBtn.ts","./HJMSJ_WorldMap.ts","./HJMSJ_ATKBox.ts","./HJMSJ_ATKJoyStick.ts","./HJMSJ_Body.ts","./HJMSJ_ExpBall.ts","./HJMSJ_JoyStick.ts","./HJMSJ_Player.ts","./HJMSJ_Shift.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/HJMSJ_AICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,a,s,o,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Prefab,a=t._decorator,s=t.Component,o=t.v3,l=t.instantiate}],execute:function(){var c,h,d,u,A;i._RF.push({},"b89dddlj+dOkqp4O9/ndbfY","HJMSJ_AICtrl",void 0);const{ccclass:I,property:p}=a;t("HJMSJ_AICtrl",(c=I("HJMSJ_AICtrl"),h=p(n),c((A=e((u=class extends s{constructor(...t){super(...t),r(this,"AIPrefab",A,this),this.AINum=5,this.AIStartPos=[],this.AIParent=null}start(){this.AIStartPos=this.node.getChildByName("AIStartPos").children,this.AIParent=this.node.getChildByName("AIParent"),this.creatAI()}update(t){}creatAI(){let t=o(50*Math.random(),50*Math.random(),0),e=0;for(let r=0;r<this.AINum;r++){let r=l(this.AIPrefab);r.parent=this.AIParent,r.worldPosition=this.AIStartPos[e++].worldPosition.clone().add(t),e>=this.AIStartPos.length&&(e=0)}}}).prototype,"AIPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=u))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_AIPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_GameMgr.ts","./HJMSJ_Player.ts","./HJMSJ_Incident.ts","./HJMSJ_Prop.ts","./HJMSJ_AudioManager.ts"],(function(e){var t,i,o,n,r,s,a,h,l,c,p,d,m,u,g,y,P,f,b,v,D,S,M,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e.Prefab,r=e._decorator,s=e.Component,a=e.v3,h=e.Vec3,l=e.ParticleSystem2D,c=e.Collider2D,p=e.Contact2DType,d=e.director,m=e.Sprite,u=e.Color,g=e.tween,y=e.RigidBody2D,P=e.math,f=e.instantiate,b=e.Label},function(e){v=e.HJMSJ_GameMgr},function(e){D=e.HJMSJ_Player},function(e){S=e.HJMSJ_Incident},function(e){M=e.HJMSJ_Prop},function(e){N=e.HJMSJ_AudioManager}],execute:function(){var C,A,J,w,x,B,H,_,I,T,R,E,k,z,O,G,F,j,K,L,V;o._RF.push({},"498a50rjadHPINVISfhyvjJ","HJMSJ_AIPlayer",void 0);const{ccclass:X,property:W}=r;e("HJMSJ_AIPlayer",(C=X("HJMSJ_AIPlayer"),A=W(n),J=W(n),w=W(),x=W(),B=W(),H=W(),_=W(),I=W(),T=W(),C((k=t((E=class extends s{constructor(...e){super(...e),i(this,"dropProp",k,this),i(this,"ExpPrefab",z,this),i(this,"ExpNum",O,this),i(this,"repelTime",G,this),i(this,"moveSpeed",F,this),i(this,"maxHealth",j,this),i(this,"MinDistance",K,this),i(this,"ATK",L,this),i(this,"isBossMap",V,this),this.DropPropArr=[{Name:"绿宝石",Num:1,Percent:1}],this.playerNode=null,this.handRoot=null,this.handProp=null,this.Model=null,this.searchBox=null,this.chasePlayer=!1,this.curHealth=0,this.particle=null,this.isDie=!1,this.attackInterval=.5,this.timer=0,this.moveTimer=0,this._dir=a(0,0,0),this.forwardDir=-1,this.isAttacking=!1,this.sign=1,this.moveSelf=!1,this.moveInterval=4,this.moveOffset=new h(0,0,0)}start(){this.Model=this.node.getChildByName("Model"),this.playerNode=v.instance.playerNode,this.particle=this.Model.getChildByName("受击").getComponent(l),this.searchBox=this.node.getChildByName("SearchBox").getComponent(c),this.handRoot=this.node.getChildByName("handRoot"),this.handProp=this.handRoot.children[0],this.searchBox.on(p.BEGIN_CONTACT,this.searchPlayer,this),this.searchBox.on(p.END_CONTACT,this.onExitContact,this),this.curHealth=this.maxHealth,this.schedule(this.randomMove,this.moveInterval),this.shake()}update(e){if(this.handRoot.position=a(0,0,0),this.searchBox.node.position=a(0,0,0),!v.instance.isGamePause){if(v.instance.isGameOver)return console.log("游戏结束"),void this.unschedule(this.randomMove);if(!this.isDie){if(this.handRoot&&this.onMove(this.getPlayerDir()),this.chasePlayer){if(this.getPlayerDistance().length()<this.MinDistance)this.timer+=e,this.timer>this.attackInterval&&(this.Attack(),this.timer=0);else{this.timer=0;let e=this.getPlayerDir();this.node.worldPosition=this.node.worldPosition.clone().add(e.multiplyScalar(this.moveSpeed))}}if(this.moveSelf)if(this.moveTimer+=e,this.moveTimer<2){let e=this.node.worldPosition.clone().add(this.moveOffset.clone()).subtract(this.node.worldPosition.clone()).clone().normalize().negative();this.node.worldPosition=this.node.worldPosition.clone().add(e.multiplyScalar(this.moveSpeed))}else this.moveTimer=0,this.moveSelf=!1}}}onMove(e){}searchPlayer(e,t,i){"Player"===t.node.name&&(this.chasePlayer=!0,this.playerNode=t.node)}onExitContact(e,t,i){"Player"===t.node.name&&(this.chasePlayer=!1)}Attack(){this.isAttacking||(this.isAttacking=!0,this.scheduleOnce((()=>{let e=this.playerNode.getComponent(D);if(this.getPlayerDistance().length()<this.MinDistance){let t=this.getPlayerDir();e.onAttack(-this.ATK,t),e.Shake(5,.2)}this.isAttacking=!1}),.5))}onAttack(e){this.isDie||(this.curHealth-=e,N.instance.playSFX(this.node.name+"叫"),this.Repel(),this.curHealth<=0&&(this.curHealth=0,this.isDie=!0,N.instance.playSFX(this.node.name+"死亡"),this.isBossMap&&d.getScene().emit("哈基米世界_Boss胜利"),this.DieAni()),this.getComponentInChildren(m).color=u.RED,this.scheduleOnce((()=>{this.getComponentInChildren(m).color=u.WHITE}),.1))}Repel(){this.particle.resetSystem();let e=this.getPlayerDir().negative();g(this.node).by(this.repelTime,{worldPosition:e.multiplyScalar(100)}).start()}DieAni(){this.DropExp(),this.DropProp(),this.unschedule(this.randomMove),this.searchBox.off(p.BEGIN_CONTACT,this.searchPlayer),this.searchBox.off(p.END_CONTACT,this.onExitContact),this.searchBox.enabled=!1,this.searchBox.getComponent(y).enabled=!1;let e=50*P.randomRange(-1,1);g(this.node).by(2,{eulerAngles:a(0,0,2160)}).start(),g(this.node).by(.5,{position:a(e,50,0)},{easing:"backInOut"}).by(1,{position:a(0,-3500,0)},{easing:"circIn"}).call((()=>{this.node.destroy()})).start()}DropExp(){for(let e=0;e<this.ExpNum;e++){let e=f(this.ExpPrefab);e.parent=v.instance.mapNode.children[0];let t=100*P.randomRange(-1,1);e.worldPosition=this.node.worldPosition.clone().add(a(t,t,0))}}DropProp(){for(let e=0;e<this.DropPropArr.length;e++){if(1!==this.DropPropArr[e].Percent){if(P.randomRange(0,1)>this.DropPropArr[e].Percent)continue}let t=f(this.dropProp);t.parent=this.node.parent;let i=this.node.worldPosition.clone(),o=150*P.randomRange(-1,1);t.worldPosition=i.clone().add(a(o,o,0));let n=t.getComponent(M);n.propName=this.DropPropArr[e].Name,n.propNum=this.DropPropArr[e].Num,console.log("AI掉落物品:"+n.propName),S.LoadSprite("Sprites/物品/"+n.propName).then((e=>{t.getChildByName("propSprite").getComponent(m).spriteFrame=e,t.getChildByName("propNum").getComponent(b).string=n.propNum.toString()}))}}shake(){g(this.node.getChildByName("Model")).by(1,{eulerAngles:a(0,0,10*this.sign)}).call((()=>{this.sign=-this.sign,this.shake()})).start()}randomMove(){this.chasePlayer||(this.moveSelf=!0,this.moveOffset=a(200*P.randomRange(-1,1),200*P.randomRange(-1,1),0),this.moveInterval=P.randomRange(2,7))}getPlayerDistance(){return this.node.worldPosition.clone().subtract(this.playerNode.worldPosition.clone())}getPlayerDir(){return this.node.worldPosition.clone().subtract(this.playerNode.worldPosition.clone()).clone().normalize().negative()}}).prototype,"dropProp",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"ExpPrefab",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"ExpNum",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 6}}),G=t(E.prototype,"repelTime",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),F=t(E.prototype,"moveSpeed",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),j=t(E.prototype,"maxHealth",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),K=t(E.prototype,"MinDistance",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),L=t(E.prototype,"ATK",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=t(E.prototype,"isBossMap",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=E))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Armor.ts",["cc","./HJMSJ_Incident.ts","./HJMSJ_GameData.ts"],(function(r){var t,e,a,n,o,s,i;return{setters:[function(r){t=r.cclegacy,e=r.Component,a=r.Sprite,n=r.director,o=r._decorator},function(r){s=r.HJMSJ_Incident},function(r){i=r.HJMSJ_GameData}],execute:function(){var c;t._RF.push({},"7c004CKc8pKHrSi5S1+L/hh","HJMSJ_Armor",void 0);const{ccclass:m,property:S}=o;r("HJMSJ_Armor",m("HJMSJ_Armor")(c=class extends e{constructor(...r){super(...r),this.armorSprite=null}start(){this.armorSprite=this.node.getChildByName("armorSprite").getComponent(a);let r=i.Instance.getArmorDataByPart(this.node.name);r&&""!==r.Name&&this.refreshArmor(r.Part,r.Name),n.getScene().on("哈基米世界_刷新防具",((r,t)=>{this.refreshArmor(r,t)}))}resetData(){this.armorSprite.spriteFrame=null}refreshArmor(r,t){i.Instance.refreshArmorData(r,t),r===this.node.name&&s.LoadSprite("Sprites/物品/"+t).then((r=>{this.armorSprite.spriteFrame=r}))}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_ATKBox.ts",["cc"],(function(t){var o,e,s,n,c,r;return{setters:[function(t){o=t.cclegacy,e=t.Component,s=t.Collider2D,n=t.Contact2DType,c=t.v2,r=t._decorator}],execute:function(){var a;o._RF.push({},"6abcafvLsRE+J2arU8pLSo+","HJMSJ_ATKBox",void 0);const{ccclass:i,property:h}=r;t("HJMSJ_ATKBox",i("HJMSJ_ATKBox")(a=class extends e{constructor(...t){super(...t),this.Attack=0,this.Attacknode=null,this.boxPos=[]}onEnable(){}start(){this.node.getComponents(s).forEach((t=>{this.boxPos.push(t.offset.clone())})),this.node.getComponents(s).forEach((t=>{t.on(n.BEGIN_CONTACT,this.AttackHurt,this)}))}AttackHurt(t,o,e){let s=o.node;o&&s.name}Show(){var t,o;0===(null==(t=this.node.parent)?void 0:t.children[0].eulerAngles.y)?this.node.getComponents(s).forEach(((t,o)=>{t.offset=c(-this.boxPos[o].x,this.boxPos[o].y),t.apply()})):180===(null==(o=this.node.parent)?void 0:o.children[0].eulerAngles.y)&&this.node.getComponents(s).forEach(((t,o)=>{t.offset=c(this.boxPos[o].x,this.boxPos[o].y),t.apply()}))}})||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_ATKJoyStick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Player.ts","./HJMSJ_GameMgr.ts","./HJMSJ_Incident.ts","./HJMSJ_GameData.ts"],(function(t){var e,i,a,r,s,n,o,h,c,l,p,g,d,y,u,T,J;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,r=t.Camera,s=t.ProgressBar,n=t._decorator,o=t.Component,h=t.UITransform,c=t.Node,l=t.v3,p=t.director,g=t.Sprite,d=t.instantiate},function(t){y=t.HJMSJ_Player},function(t){u=t.HJMSJ_GameMgr},function(t){T=t.HJMSJ_Incident},function(t){J=t.HJMSJ_GameData}],execute:function(){var m,S,_,f,k,B,C;a._RF.push({},"6400f8QeuFIYriCPbb3yJtX","HJMSJ_ATKJoyStick",void 0);const{ccclass:M,property:H}=n;t("HJMSJ_ATKJoyStick",(m=M("HJMSJ_ATKJoyStick"),S=H(r),_=H(s),m((B=e((k=class extends o{constructor(...t){super(...t),i(this,"mapCamera",B,this),i(this,"chargeBar",C,this),this.playerTs=null,this.JoyStickHandle=null,this.JoyStickBg=null,this.chargeTime=0,this.chargeMax=3,this.startCharge=!1,this.s=void 0}start(){this.playerTs=u.instance.playerNode.getComponent(y),this.JoyStickBg=this.node.getChildByName("JoyStickBg").getComponent(h),this.JoyStickHandle=this.node.getChildByName("JoyStickHandle"),this.JoyStickBg.node.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.JoyStickBg.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.JoyStickBg.node.on(c.EventType.TOUCH_END,this.onTouchEnd,this),this.JoyStickBg.node.on(c.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}update(t){this.startCharge&&(this.chargeTime+=t,this.chargeTime>=.5&&(this.chargeBar.node.active=!0),this.chargeBar.progress=this.chargeTime/this.chargeMax,this.chargeBar.progress)}onTouchStart(t){switch(this.playerTs.handPropType){case"武器":this.startCharge=!0}}onTouchMove(t){}onTouchEnd(t){switch(this.playerTs.handPropType){case"武器":this.attack();break;case"方块":let t=this.playerTs.forwardDir,e=this.playerTs.handPos.add(l(-120*t,0,0));this.setBlock(this.playerTs.handPropName,e)}}attack(){this.startCharge=!1,this.chargeBar.node.active=!1,this.chargeTime>.5?p.getScene().emit("哈基米世界_蓄力攻击"):p.getScene().emit("哈基米世界_普通攻击"),this.chargeTime=0}setBlock(t,e){let i=this.playerTs.mapUITransform.node,a=this.getGrassNode(i,e),r=u.instance.BagMgrTs;if(J.Instance.SubKnapsackData(t,1)){J.Instance.GetPropNum(t)<=0&&(this.playerTs.handProp.getComponent(g).spriteFrame=null,this.playerTs.handPropName="",this.playerTs.handPropType=""),r.subPropByName(t,1),console.log("移除"+t)}a&&T.Loadprefab("Prefabs/方块/"+t).then((t=>{let e=d(t);e.parent=a.parent,e.position=a.position}))}getGrassNode(t,e){let i=null;for(let a=0;a<t.children[0].children.length;a++){let r=t.children[0].children[a],s=r.getComponent(h),n=r.worldPosition.x-s.width/2,o=r.worldPosition.y-s.height/2;e.x>n&&e.y>o&&e.x<n+s.width&&e.y<o+s.height&&(r.name.startsWith("grass")?i=r:console.log("土地上已经有方块"))}return i||(console.log("没有找到符合条件的土地"),null)}}).prototype,"mapCamera",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(k.prototype,"chargeBar",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=k))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var e,t,o,n,r,s,l,a;return{setters:[function(i){e=i.applyDecoratedDescriptor,t=i.initializerDefineProperty},function(i){o=i.cclegacy,n=i.Node,r=i.AudioClip,s=i._decorator,l=i.Component,a=i.AudioSource}],execute:function(){var u,c,p,g,m,h,d,f,b,y;o._RF.push({},"2432fHByclFgLc3x0HmLClO","HJMSJ_AudioManager",void 0);const{ccclass:A,property:C}=s;i("HJMSJ_AudioManager",(u=A("HJMSJ_AudioManager"),c=C(n),p=C({type:[r]}),g=C({type:[r]}),u(((y=class i extends l{constructor(...i){super(...i),t(this,"musicMgr",d,this),t(this,"bgmClips",f,this),t(this,"sfxClips",b,this),this.bgmAudio=null,this.sfxAudio=null,this.bgmNameArr=["哈基米音乐-起床歌","哈基米音乐-山歌","哈基米音乐-舌尖上的中国","哈基米音乐-way back home","哈基米音乐-不在曼波","哈基米音乐-不潮不用花钱","哈基米音乐-出山","哈基米音乐-大东北我的家","哈基米音乐-桃花朵朵开","哈基米音乐-蓝莲花","哈基米音乐-跳楼机"]}start(){i.instance=this,this.bgmAudio=this.node.getChildByName("背景音乐").getComponent(a),this.sfxAudio=this.node.getChildByName("音效").getComponent(a)}playBGM(i){this.bgmAudio.stop();for(let e of this.bgmClips)e.name===i&&(this.bgmAudio.clip=e,this.bgmAudio.play())}playSFX(i){for(let e of this.sfxClips)e.name===i&&this.sfxAudio.playOneShot(e)}}).bgmName="哈基米-起床歌",y.instance=null,d=e((h=y).prototype,"musicMgr",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(h.prototype,"bgmClips",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=e(h.prototype,"sfxClips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=h))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_BagMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_GameData.ts","./HJMSJ_Constant.ts","./HJMSJ_Incident.ts","./HJMSJ_BagProp.ts","./HJMSJ_BottomProp.ts","./HJMSJ_Armor.ts"],(function(t){var e,i,r,o,n,c,s,a,l,h,g,p,d,m,B,u,k,f,A,b,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t.Prefab,n=t.Button,c=t.Node,s=t._decorator,a=t.Component,l=t.NodeEventType,h=t.instantiate,g=t.director,p=t.tween,d=t.Sprite,m=t.UIOpacity,B=t.v3},function(t){u=t.HJMSJ_GameData},function(t){k=t.HJMSJ_Constant},function(t){f=t.HJMSJ_Incident},function(t){A=t.HJMSJ_BagProp},function(t){b=t.HJMSJ_BottomProp},function(t){I=t.HJMSJ_Armor}],execute:function(){var P,D,S,N,y,x,M,J,C,_,v,w,H,K,z,G,E,F;r._RF.push({},"31aa2KvhrhACbIlVnZbeJKH","HJMSJ_BagMgr",void 0);const{ccclass:T,property:L}=s;t("HJMSJ_BagMgr",(P=T("HJMSJ_BagMgr"),D=L(o),S=L(n),N=L(n),y=L(c),x=L(c),M=L({type:[c]}),J=L(c),P(((F=class t extends a{constructor(...t){super(...t),i(this,"BagPropPrefab",v,this),i(this,"openBtn",w,this),i(this,"closeBtn",H,this),i(this,"SelectBox",K,this),i(this,"SelectBoxBottom",z,this),i(this,"ArmorNode",G,this),i(this,"propDetail",E,this),this.BagMgrNode=null,this.bottomBag=null,this.clickArr=[],this.clickIndex=[]}start(){this.bottomBag=this.node.getChildByName("PropBag"),this.BagMgrNode=this.node.getChildByName("BagMgr").getChildByName("背包");for(let t=0;t<this.ArmorNode.length;t++)this.ArmorNode[t].on(l.TOUCH_END,(()=>{this.clickProp(-t-1)}),this);for(let t=0;t<36;t++){let e=h(this.BagPropPrefab);e.setParent(this.BagMgrNode),e.getComponent(A).boxID=t}for(let t=0;t<u.Instance.KnapsackData.length;t++){if(u.Instance.KnapsackData[t].Num<=0)continue;let e=u.Instance.KnapsackData[t];this.creatProp(e)}console.log(u.Instance.KnapsackData),g.getScene().on("哈基米世界_点击道具",(t=>{this.clickProp(t)}),this),g.getScene().on("哈基米世界_点击底部道具",(t=>{this.clickBottomProp(t)}),this)}clickProp(t){if(t<0&&0===this.clickArr.length)return this.SelectBox.active=!0,this.SelectBox.worldPosition=this.ArmorNode[-t-1].worldPosition,void this.clickArr.push(this.ArmorNode[-t-1]);if(t>=0){let e=this.BagMgrNode.children[t];this.clickArr.push(e),this.clickIndex.push(t),this.SelectBox.active=!0,this.SelectBox.worldPosition=e.worldPosition}else this.clickArr.push(this.ArmorNode[-t-1]);if(2===this.clickArr.length){switch(this.SelectBox.active=!1,this.clickArr[0].name){case"背包框-打开":return this.clickArr=[],void(this.clickIndex=[]);case"护甲":case"头盔":case"裤子":case"靴子":if("背包框-打开"===this.clickArr[1].name){let t=u.Instance.getArmorDataByPart(this.clickArr[0].name);return void this.Disboard(t.Part,t.Name)}return this.clickArr=[],void(this.clickIndex=[])}if("防具"===k.getTypeByName(this.clickArr[0].name)){let t=k.GetArmorDataByName(this.clickArr[0].name).Part,e=u.Instance.getArmorDataByPart(t).Name;return t===this.clickArr[1].name?void(""===e?this.armorMove(t,this.clickArr[0].name):(this.clickArr=[],this.clickIndex=[])):(this.SelectBox.active=!1,void this.moveProp())}return"背包框-打开"!==this.clickArr[0].name?void this.moveProp():void("背包框-打开"!==this.clickArr[1].name&&(this.clickArr=[],this.clickIndex=[],this.clickProp(t)))}}clickBottomProp(t){let e=this.bottomBag.children[t];this.SelectBoxBottom.active=!0,this.SelectBoxBottom.worldPosition=e.worldPosition;let i=e.getComponent(b).propName;g.getScene().emit("哈基米世界_更换底部道具",i)}armorMove(t,e){let i=h(this.clickArr[0].getChildByName("propSprite"));i.parent=this.node,i.worldPosition=this.clickArr[0].worldPosition.clone(),p(i).to(.2,{worldPosition:this.clickArr[1].worldPosition.clone()}).call((()=>{if(this.clickArr[0].getSiblingIndex()<9){let t=this.clickArr[0].getComponent(A);this.bottomBag.children[t.boxID].getComponent(b).resetData(),t.resetData()}let r=this.clickArr[0].getComponent(A);r.resetData(),this.clickArr=[],this.clickIndex=[],i.destroy(),u.Instance.SubKnapsackDataByBagID(r.bagID,1)&&this.subPropByName(e,1),g.getScene().emit("哈基米世界_刷新防具",t,e)})).start()}Disboard(t,e){let i=h(this.clickArr[0].getChildByName("armorSprite"));i.parent=this.node,i.worldPosition=this.clickArr[0].worldPosition.clone();let r=this.clickArr[1].getComponent(A);p(i).to(.2,{worldPosition:this.clickArr[1].worldPosition.clone()}).call((()=>{this.clickArr[0].getComponent(I).resetData();let o=this.clickArr[1].getSiblingIndex();if(o<9){this.bottomBag.children[r.boxID].getComponent(b).resetData()}this.refeshBottomProp(),this.clickArr=[],this.clickIndex=[],i.destroy(),u.Instance.pushKnapsackData(e,1,o)&&(this.pushPropByName(e,1,o),u.Instance.refreshArmorData(t,""))})).start()}moveProp(){switch(this.clickArr[1].name){case"护甲":case"头盔":case"裤子":case"靴子":return this.clickArr=[],void(this.clickIndex=[])}let t=h(this.clickArr[0].getChildByName("propSprite"));t.parent=this.node,t.worldPosition=this.clickArr[0].worldPosition.clone();let e=this.clickArr[0].position.clone();this.clickArr[0].position=this.clickArr[1].position.clone(),this.clickArr[1].position=e,p(t).to(.2,{worldPosition:this.clickArr[0].worldPosition.clone()}).call((()=>{let e=this.clickArr[0].getSiblingIndex(),i=this.clickArr[1].getSiblingIndex();if(e<9){let t=this.clickArr[0].getComponent(A);this.bottomBag.children[t.boxID].getComponent(b).resetData()}this.clickArr[0].setSiblingIndex(this.clickIndex[1]),this.clickArr[1].setSiblingIndex(this.clickIndex[0]),this.refeshID();let r=u.Instance.getDataByBagID(e),o=u.Instance.getDataByBagID(i);e=this.clickArr[0].getSiblingIndex(),i=this.clickArr[1].getSiblingIndex(),r&&(r.BagID=e),o&&(o.BagID=i),console.log(u.Instance.KnapsackData),this.refeshBottomProp(),this.clickArr=[],this.clickIndex=[],t.destroy()})).start()}refeshBottomProp(){for(let t=0;t<9;t++){let e=u.Instance.getDataByBagID(t);e&&0!==e.Num&&this.creatProp(e)}}refeshID(){for(let t=0;t<36;t++)this.BagMgrNode.children[t].getComponent(A).refeshID(t)}refeshBag(){for(let e=0;e<this.BagMgrNode.children.length;e++){if(!this.BagMgrNode.children[e].getChildByName("propSprite").getComponent(d).spriteFrame)return void(t.curBagID=e)}}pushPropByName(e,i,r){let o=!1;this.refeshBag();let n=k.GetDataByName(e).type;if("武器"!==n&&"防具"!==n&&this.BagMgrNode.children.forEach((t=>{t.name!=e||(o=!0)})),!o)for(let i of u.Instance.KnapsackData)if(i.Name==e){if(r){if(i.BagID!==r)continue}else i.BagID=t.curBagID;return void this.creatProp(i)}g.getScene().emit("哈基米世界_刷新道具",e),g.getScene().emit("哈基米世界_刷新底部道具",e)}subPropByName(t,e){g.getScene().emit("哈基米世界_刷新道具",t),g.getScene().emit("哈基米世界_刷新底部道具",t),this.refeshBag()}creatProp(t){console.log("创建道具"),f.LoadSprite("Sprites/物品/"+t.Name).then((e=>{let i=t.BagID,r=this.BagMgrNode.children[i];if(r.name=t.Name,r){if(i<9){let r=this.bottomBag.children[i].getComponent(b);r.boxID=i,r.init(t,e)}r.getComponent(A).init(t,e),this.refeshBag()}}))}openBag(){let t=this.node.getChildByName("bg").getComponent(m);this.openBtn.enabled=!1,p(t).to(.5,{opacity:255}).start(),p(this.BagMgrNode.parent).to(.8,{position:B(0,0,0)}).start()}closeBg(){let t=this.node.getChildByName("bg").getComponent(m);this.closeBtn.enabled=!1,p(t).to(.5,{opacity:0}).start(),p(this.BagMgrNode.parent).to(.8,{position:B(0,-1200,0)},{easing:"backIn"}).call((()=>{this.openBtn.enabled=!0,this.closeBtn.enabled=!0})).start()}}).curBagID=1,v=e((_=F).prototype,"BagPropPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(_.prototype,"openBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(_.prototype,"closeBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(_.prototype,"SelectBox",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(_.prototype,"SelectBoxBottom",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(_.prototype,"ArmorNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=e(_.prototype,"propDetail",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=_))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_BagProp.ts",["cc","./HJMSJ_GameData.ts","./HJMSJ_Constant.ts"],(function(t){var e,i,r,s,o,a,p,n,h;return{setters:[function(t){e=t.cclegacy,i=t.Component,r=t.Label,s=t.Sprite,o=t.Node,a=t.director,p=t._decorator},function(t){n=t.HJMSJ_GameData},function(t){h=t.HJMSJ_Constant}],execute:function(){var l;e._RF.push({},"e3afaFIe2VPk4ngDTPxRW7g","HJMSJ_BagProp",void 0);const{ccclass:c,property:g}=p;t("HJMSJ_BagProp",c("HJMSJ_BagProp")(l=class extends i{constructor(...t){super(...t),this.bagID=0,this.boxID=0,this.propName="",this.propSprite=null,this.label=null}start(){this.label=this.node.getChildByName("propNum").getComponent(r),this.propSprite=this.node.getChildByName("propSprite").getComponent(s),this.node.on(o.EventType.TOUCH_END,this.clickProp,this),a.getScene().on("哈基米世界_刷新道具",(t=>{this.refeshProp(t)}),this)}refeshProp(t){if(t===this.propName){let e=n.Instance.GetPropNum(this.propName);if(e<=0){return this.propSprite.spriteFrame=null,this.label.string="",this.node.name="背包框-打开",void(n.Instance.getDataByBagID(this.bagID).BagID=-10)}let i=h.getTypeByName(t);if("武器"===i||"防具"===i)return void(this.label.string="");this.label.string=e.toString()}}clickProp(){a.getScene().emit("哈基米世界_点击道具",this.boxID)}resetData(){this.node.name="背包框-打开",this.propName="",this.label.string="",this.propSprite.spriteFrame=null}refeshID(t){this.boxID=t,this.bagID=t}init(t,e){this.propName=t.Name,this.bagID=t.BagID,this.refeshProp(this.propName),e&&(this.propSprite.spriteFrame=e)}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Block.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Incident.ts"],(function(e){var t,i,r,n,o,c,s,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.SpriteFrame,o=e._decorator,c=e.Component,s=e.director,l=e.Sprite},function(e){a=e.HJMSJ_Incident}],execute:function(){var u,p,h,d,m,b,f,S,g,y,H,J,k;r._RF.push({},"3f0821JZS1LrbYx6vzkiC38","HJMSJ_Block",void 0);const{ccclass:_,property:C}=o;e("HJMSJ_Block",(u=_("HJMSJ_Block"),p=C(),h=C(),d=C(),m=C(),b=C(n),u((g=t((S=class extends c{constructor(...e){super(...e),i(this,"blockName",g,this),i(this,"couldAttack",y,this),i(this,"couldCross",H,this),i(this,"hp",J,this),i(this,"shineSpriteFrame",k,this),this.curHp=0}onLoad(){this.curHp=this.hp}onAttack(e){if(this.curHp<=0)return;if(this.curHp-=e,this.curHp<=0){let e=this.node.worldPosition.clone();console.log(e),s.getScene().emit("哈基米世界_掉落物品",this.blockName,e),this.node.destroy()}let t=this.node.getChildByName("裂痕").getComponent(l),i=Math.floor(this.curHp/this.hp*10);a.LoadSprite("Sprites/方块裂痕/"+i).then((e=>{t.spriteFrame=e})),this.shine()}shine(){let e=this.node.getChildByName("闪烁").getComponent(l);e.spriteFrame=this.shineSpriteFrame,e.node.active=!0,this.scheduleOnce((()=>{e.node.active=!1}),.05)}}).prototype,"blockName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=t(S.prototype,"couldAttack",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),H=t(S.prototype,"couldCross",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),J=t(S.prototype,"hp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(S.prototype,"shineSpriteFrame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=S))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Body.ts",["cc"],(function(t){var s,e,o,i;return{setters:[function(t){s=t.cclegacy,e=t.Component,o=t.Vec3,i=t._decorator}],execute:function(){var n;s._RF.push({},"c52961eX9FIKKJ9/Eh0xqOi","HJMSJ_Body",void 0);const{ccclass:l,property:r}=i;t("HJMSJ_Body",l("HJMSJ_Body")(n=class extends e{constructor(...t){super(...t),this.preNode=null,this.lastPosition=new o,this.lastEulerAngles=new o,this.spriteNode=null,this.isInit=!1}start(){}update(t){this.isInit&&(o.copy(this.lastPosition,this.node.worldPosition),o.copy(this.lastEulerAngles,this.node.eulerAngles))}init(t){this.preNode=t,this.node.worldPosition=this.preNode.worldPosition.clone(),this.spriteNode=this.node.getChildByName("sprite"),o.copy(this.lastPosition,this.node.worldPosition),o.copy(this.lastEulerAngles,this.node.eulerAngles),this.isInit=!0}followTarget(t,s){this.node.worldPosition=t,this.node.eulerAngles=s}})||n);s._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Boss1.ts",["cc","./HJMSJ_AIPlayer.ts","./HJMSJ_Player.ts","./HJMSJ_ATKBox.ts"],(function(t){var e,s,n,o,i,r,a;return{setters:[function(t){e=t.cclegacy,s=t.tween,n=t.v3,o=t._decorator},function(t){i=t.HJMSJ_AIPlayer},function(t){r=t.HJMSJ_Player},function(t){a=t.HJMSJ_ATKBox}],execute:function(){var h;e._RF.push({},"15405iJwCRF1I3G1Pk16S5h","HJMSJ_Boss1",void 0);const{ccclass:c,property:l}=o;t("HJMSJ_Boss1",c("HJMSJ_Boss1")(h=class extends i{constructor(...t){super(...t),this.DropPropArr=[{Name:"绿宝石",Num:10,Percent:1},{Name:"铁锭",Num:3,Percent:1},{Name:"铁剑",Num:1,Percent:.5}]}Attack(){this.isAttacking||(this.isAttacking=!0,s(this.handRoot).to(.15,{eulerAngles:n(0,0,-70)}).to(.25,{eulerAngles:n(0,0,30)}).start(),this.scheduleOnce((()=>{let t=this.playerNode.getComponent(r);if(this.getPlayerDistance().length()<250){let e=this.getPlayerDir();t.repelDistance=180,t.onAttack(-this.ATK,e),t.Shake(5,.3)}this.isAttacking=!1}),.4))}onMove(t){this._dir=n(t.x,t.y,0),this._dir.x<0&&180===this.Model.eulerAngles.y&&(s(this.Model).to(.2,{eulerAngles:n(0,0,0)},{easing:"backInOut"}).start(),s(this.handProp).to(.2,{eulerAngles:n(0,0,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=n(-100,-60,0),this.handRoot.getComponent(a).Show(),this.forwardDir=1})).start()),this._dir.x>0&&0===this.Model.eulerAngles.y&&(s(this.Model).to(.2,{eulerAngles:n(0,180,0)},{easing:"backInOut"}).start(),s(this.handProp).to(.2,{eulerAngles:n(0,180,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=n(100,-60,0),this.handRoot.getComponent(a).Show(),this.forwardDir=-1})).start())}onExitContact(t,e,s){}randomMove(){}shake(){}})||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Boss2.ts",["cc","./HJMSJ_AIPlayer.ts","./HJMSJ_Player.ts","./HJMSJ_ATKBox.ts"],(function(t){var e,s,i,n,a,r,o;return{setters:[function(t){e=t.cclegacy,s=t.tween,i=t.v3,n=t._decorator},function(t){a=t.HJMSJ_AIPlayer},function(t){r=t.HJMSJ_Player},function(t){o=t.HJMSJ_ATKBox}],execute:function(){var h;e._RF.push({},"b14afUIzM9P1ofu9LnpndpX","HJMSJ_Boss2",void 0);const{ccclass:c,property:l}=n;t("HJMSJ_Boss2",c("HJMSJ_Boss2")(h=class extends a{constructor(...t){super(...t),this.DropPropArr=[{Name:"绿宝石",Num:10,Percent:1},{Name:"钻石",Num:10,Percent:1},{Name:"钻石剑",Num:1,Percent:.2}]}Attack(){if(this.isAttacking)return;this.isAttacking=!0,this.chasePlayer=!1;let t=this.handProp.getChildByName("leftHand"),e=this.handProp.getChildByName("rightHand"),n=t.getChildByName("拖尾");n.active=!0;let a=e.getChildByName("拖尾");a.active=!0,s(t).by(.2,{eulerAngles:i(0,0,360)}).start(),s(e).by(.2,{eulerAngles:i(0,0,360)}).start(),this.scheduleOnce((()=>{let t=this.playerNode.getComponent(r);if(this.getPlayerDistance().length()<this.MinDistance){let e=this.getPlayerDir();t.onAttack(-this.ATK,e),t.Shake(7,.5)}this.isAttacking=!1}),.25),this.scheduleOnce((()=>{this.chasePlayer=!0}),.8),this.scheduleOnce((()=>{a.active=!1,n.active=!1}),.5)}onMove(t){this._dir=i(t.x,t.y,0),this._dir.x<0&&180===this.Model.eulerAngles.y&&(s(this.Model).to(.2,{eulerAngles:i(0,0,0)},{easing:"backInOut"}).start(),s(this.handProp).to(.2,{eulerAngles:i(0,0,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=i(0,0,0),this.handRoot.getComponent(o).Show(),this.forwardDir=1})).start()),this._dir.x>0&&0===this.Model.eulerAngles.y&&(s(this.Model).to(.2,{eulerAngles:i(0,180,0)},{easing:"backInOut"}).start(),s(this.handProp).to(.2,{eulerAngles:i(0,180,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=i(0,0,0),this.handRoot.getComponent(o).Show(),this.forwardDir=-1})).start())}onExitContact(t,e,s){}randomMove(){}shake(){}})||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Boss3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_AIPlayer.ts","./HJMSJ_Player.ts","./HJMSJ_GameMgr.ts","./HJMSJ_SnowBall.ts","./HJMSJ_IceBall.ts"],(function(t){var e,i,s,l,n,a,h,o,r,c,d,g,f,m,u,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,l=t.Prefab,n=t._decorator,a=t.v3,h=t.math,o=t.tween,r=t.ParticleSystem2D,c=t.UITransform,d=t.instantiate},function(t){g=t.HJMSJ_AIPlayer},function(t){f=t.HJMSJ_Player},function(t){m=t.HJMSJ_GameMgr},function(t){u=t.HJMSJ_SnowBall},function(t){w=t.HJMSJ_IceBall}],execute:function(){var P,B,y,S,p,H,M,b,v;s._RF.push({},"de85cV/WGtJtqxVBvwGRpIh","HJMSJ_Boss3",void 0);const{ccclass:C,property:J}=n;t("HJMSJ_Boss3",(P=C("HJMSJ_Boss3"),B=J(l),y=J(l),S=J(l),P((M=e((H=class extends g{constructor(...t){super(...t),i(this,"SnowBallPrefab",M,this),i(this,"IceBallPrefab",b,this),i(this,"SnowManPrefab",v,this),this.iceParticle=null,this.iceEffect=null,this.leftHand=null,this.rightHand=null,this.snowBallTime=4,this.snowBallInterval=.2,this.isSkilling=!1,this.snowManTime=2,this.snowManInterval=.4,this.snowManPos=null,this.iceBallTime=1,this.iceBallInterval=.1,this.iceBallNum=10}update(t){if(this.handRoot.position=a(0,0,0),this.searchBox.node.position=a(0,0,0),!m.instance.isGamePause)if(m.instance.isGameOver)this.unschedule(this.randomMove);else if(!this.isDie){if(this.handRoot&&this.onMove(this.getPlayerDir()),this.moveSelf)if(this.moveTimer+=t,this.moveTimer<2){let t=this.node.worldPosition.clone().add(this.moveOffset.clone()).subtract(this.node.worldPosition.clone()).clone().normalize().negative();this.node.worldPosition=this.node.worldPosition.clone().add(t.multiplyScalar(this.moveSpeed))}else this.moveTimer=0,this.moveSelf=!1;if(this.chasePlayer){if(this.getPlayerDistance().length()<this.MinDistance)this.timer+=t,this.timer>this.attackInterval&&(console.log("开始攻击"),this.Attack(),this.timer=0);else{console.log("正在追逐玩家"),this.timer=0;let t=this.getPlayerDir();this.node.worldPosition=this.node.worldPosition.clone().add(t.multiplyScalar(this.moveSpeed))}}}}Attack(){this.isAttacking||(this.isAttacking=!0,this.scheduleOnce((()=>{this.playerNode.getComponent(f);if(this.getPlayerDistance().length()<this.MinDistance){switch(h.randomRangeInt(0,3)){case 0:this.SnowBall();break;case 1:this.IceBall();break;case 2:this.CreatSnowMan()}}this.isAttacking=!1}),.4))}SnowBall(){if(this.leftHand||(this.leftHand=this.handProp.getChildByName("leftHand"),this.rightHand=this.handProp.getChildByName("rightHand")),this.isSkilling)return;this.isSkilling=!0;let t=this.snowBallTime/this.snowBallInterval;this.schedule(this.creatSnowBall,this.snowBallInterval,t),o(this.leftHand).by(this.snowBallTime/2,{eulerAngles:a(0,0,-135)}).call((()=>{o(this.leftHand).by(this.snowBallTime/2,{eulerAngles:a(0,0,135)}).start()})).start(),o(this.rightHand).by(this.snowBallTime/2,{eulerAngles:a(0,0,-135)}).call((()=>{o(this.rightHand).by(this.snowBallTime/2,{eulerAngles:a(0,0,135)}).call((()=>{this.chasePlayer=!1})).start()})).start(),this.scheduleOnce((()=>{this.moveSelf=!0,this.unschedule(this.creatSnowBall)}),this.snowBallTime),this.scheduleOnce((()=>{this.isSkilling=!1,this.chasePlayer=!0}),2*this.snowBallTime)}IceBall(){if(this.leftHand||(this.leftHand=this.handProp.getChildByName("leftHand"),this.rightHand=this.handProp.getChildByName("rightHand")),this.isSkilling)return;this.isSkilling=!0;let t=null;switch(this.forwardDir){case-1:t=this.leftHand.getChildByName("冰球特效"),this.iceParticle=t.getComponent(r),this.iceParticle.resetSystem(),this.iceEffect=t.getChildByName("拖尾"),this.iceEffect.active=!0,this.chasePlayer=!1,this.schedule(this.creatIceBall,this.iceBallInterval,1),o(this.leftHand).by(.5,{eulerAngles:a(0,0,10)}).call((()=>{o(this.leftHand).by(.2,{eulerAngles:a(0,0,-90)}).start()})).start(),this.scheduleOnce((()=>{o(this.leftHand).to(.3,{eulerAngles:a(0,180,-25)}).call((()=>{this.iceEffect.active=!1})).start()}),.9),this.scheduleOnce((()=>{this.chasePlayer=!0,this.isSkilling=!1}),3*this.iceBallTime);break;case 1:t=this.rightHand.getChildByName("冰球特效"),this.iceParticle=this.rightHand.getChildByName("冰球特效").getComponent(r),this.iceParticle.resetSystem(),this.iceEffect=t.getChildByName("拖尾"),this.iceEffect.active=!0,this.chasePlayer=!1,this.schedule(this.creatIceBall,this.iceBallInterval,1),o(this.rightHand).by(.5,{eulerAngles:a(0,0,10)}).call((()=>{o(this.rightHand).by(.3,{eulerAngles:a(0,0,-90)}).start()})).start(),this.scheduleOnce((()=>{o(this.rightHand).to(.3,{eulerAngles:a(0,0,-25)}).call((()=>{this.iceEffect.active=!1})).start()}),.9),this.scheduleOnce((()=>{this.chasePlayer=!0,this.isSkilling=!1}),3*this.iceBallTime)}}CreatSnowMan(){this.leftHand||(this.leftHand=this.handProp.getChildByName("leftHand"),this.rightHand=this.handProp.getChildByName("rightHand")),this.isSkilling||(this.snowManPos||(this.snowManPos=this.Model.getChildByName("雪人召唤点").getComponent(c)),this.isSkilling=!0,this.chasePlayer=!1,this.iceEffect=this.leftHand.getChildByName("冰球特效"),this.iceParticle=this.iceEffect.getComponent(r),this.iceParticle.resetSystem(),this.iceEffect=this.rightHand.getChildByName("冰球特效"),this.iceParticle=this.iceEffect.getComponent(r),this.iceParticle.resetSystem(),this.schedule(this.creatSnowMan,this.snowManInterval,this.snowManTime),this.scheduleOnce((()=>{this.isSkilling=!1,this.chasePlayer=!0}),2*this.snowManTime))}creatSnowBall(){let t=this.leftHand.getChildByName("pos").worldPosition.clone(),e=this.rightHand.getChildByName("pos").worldPosition.clone(),i=t.clone().subtract(this.leftHand.worldPosition.clone()).normalize(),s=e.clone().subtract(this.rightHand.worldPosition.clone()).normalize(),l=d(this.SnowBallPrefab);l.parent=m.instance.mapNode.children[0],l.worldPosition=t,l.getComponent(u).init(i);let n=d(this.SnowBallPrefab);n.parent=m.instance.mapNode.children[0],n.worldPosition=e,n.getComponent(u).init(s)}creatIceBall(){let t=this.Model.getChildByName("冰球制造点"),e=t.worldPosition.clone().add(a(0,90,0)),i=t.getComponent(c).width/this.iceBallNum*this.forwardDir;for(let t=0;t<this.iceBallNum;t++){let s=d(this.IceBallPrefab);s.parent=m.instance.mapNode.children[0],s.worldPosition=e.clone().add(a(i*t,0,0)),s.getComponent(w).init(a(0,-1,0))}}creatSnowMan(){let t=d(this.SnowManPrefab);t.parent=m.instance.mapNode.children[0];let e=h.randomRange(-1,1)*(this.snowManPos.width/2);t.worldPosition=this.snowManPos.node.worldPosition.clone().add(a(e,e,0))}onMove(t){this._dir=a(t.x,t.y,0),this._dir.x<0&&180===this.Model.eulerAngles.y&&o(this.Model).to(.2,{eulerAngles:a(0,0,0)},{easing:"backInOut"}).call((()=>{this.forwardDir=1})).start(),this._dir.x>0&&0===this.Model.eulerAngles.y&&o(this.Model).to(.2,{eulerAngles:a(0,180,0)},{easing:"backInOut"}).call((()=>{this.forwardDir=-1})).start()}onExitContact(t,e,i){}shake(){}}).prototype,"SnowBallPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(H.prototype,"IceBallPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(H.prototype,"SnowManPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=H))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Boss4.ts",["cc","./HJMSJ_AIPlayer.ts","./HJMSJ_Player.ts","./HJMSJ_ATKBox.ts"],(function(t){var e,s,o,n,i,a,r;return{setters:[function(t){e=t.cclegacy,s=t.tween,o=t.v3,n=t._decorator},function(t){i=t.HJMSJ_AIPlayer},function(t){a=t.HJMSJ_Player},function(t){r=t.HJMSJ_ATKBox}],execute:function(){var l;e._RF.push({},"feb9ew0Y6ZOWIs6jkxJoqVf","HJMSJ_Boss4",void 0);const{ccclass:h,property:c}=n;t("HJMSJ_Boss4",h("HJMSJ_Boss4")(l=class extends i{Attack(){this.isAttacking||(this.isAttacking=!0,s(this.handRoot).to(.15,{eulerAngles:o(0,0,-70)}).to(.25,{eulerAngles:o(0,0,30)}).start(),this.scheduleOnce((()=>{let t=this.playerNode.getComponent(a);this.getPlayerDistance().length()<250&&t.onAttack(-1.5),this.isAttacking=!1}),.4))}onMove(t){this._dir=o(t.x,t.y,0),console.log(this._dir.x),this._dir.x<0&&180===this.Model.eulerAngles.y&&(s(this.Model).to(.2,{eulerAngles:o(0,0,0)},{easing:"backInOut"}).start(),s(this.handProp).to(.2,{eulerAngles:o(0,0,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=o(-100,-60,0),this.handRoot.getComponent(r).Show(),this.forwardDir=1})).start()),this._dir.x>0&&0===this.Model.eulerAngles.y&&(s(this.Model).to(.2,{eulerAngles:o(0,180,0)},{easing:"backInOut"}).start(),s(this.handProp).to(.2,{eulerAngles:o(0,180,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=o(100,-60,0),this.handRoot.getComponent(r).Show(),this.forwardDir=-1})).start())}onExitContact(t,e,s){}randomMove(){}shake(){}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_BOSSBtn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Incident.ts","./HJMSJ_GameMgr.ts"],(function(t){var e,n,s,o,i,r,c,a,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t._decorator,i=t.Component,r=t.NodeEventType,c=t.instantiate,a=t.director},function(t){l=t.HJMSJ_Incident},function(t){p=t.HJMSJ_GameMgr}],execute:function(){var u,S,J,M,_;s._RF.push({},"767cdZKhwlJjpj4M9JX4wSL","HJMSJ_BOSSBtn",void 0);const{ccclass:d,property:h}=o;t("HJMSJ_BOSSBtn",(u=d("HJMSJ_BOSSBtn"),S=h(),u((_=e((M=class extends i{constructor(...t){super(...t),n(this,"bossID",_,this)}start(){this.node.on(r.TOUCH_END,this.onClick,this)}onClick(){console.log("准备更换地图"+this.bossID),l.Loadprefab("Prefabs/地图/BossMap"+this.bossID).then((t=>{let e=c(t);p.instance.changeMap(e),a.getScene().emit("哈基米世界_更换Boss地图")}))}}).prototype,"bossID",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=M))||J));s._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_BOSSMap.ts",["cc"],(function(t){var e,o,s,n,c,i;return{setters:[function(t){e=t.cclegacy,o=t.Component,s=t.director,n=t.UIOpacity,c=t.tween,i=t._decorator}],execute:function(){var a;e._RF.push({},"068ffbGn3dKCo3nh5qSZsAr","HJMSJ_BOSSMap",void 0);const{ccclass:r,property:h}=i;t("HJMSJ_BOSSMap",r("HJMSJ_BOSSMap")(a=class extends o{start(){s.getScene().on("哈基米世界_交互",(t=>{"BOSS地图"===t&&this.open()}),this),s.getScene().on("哈基米世界_更换Boss地图",this.close,this)}onBtnClick(t){"退出页面"===t.target.name&&this.close()}open(){this.node.getChildByName("bg").active=!0,this.node.getChildByName("地图界面").active=!0;let t=this.getComponent(n);c(t).to(.3,{opacity:255}).start()}close(){let t=this.getComponent(n);c(t).to(.3,{opacity:0}).call((()=>{this.node.getChildByName("bg").active=!1,this.node.getChildByName("地图界面").active=!1})).start()}})||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_BOSSMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,o=e._decorator,s=e.Component,c=e.director}],execute:function(){var a,u,l,p,S;i._RF.push({},"bd688V9FOZFnIkUW7fG8z50","HJMSJ_BOSSMgr",void 0);const{ccclass:d,property:h}=o;e("HJMSJ_BOSSMgr",(a=d("HJMSJ_BOSSMgr"),u=h(n),a((S=t((p=class extends s{constructor(...e){super(...e),r(this,"winNode",S,this)}start(){this.winNode.active=!1,c.getScene().on("哈基米世界_Boss胜利",this.win,this),c.getScene().on("哈基米世界_返回村庄",this.returnMap,this)}win(){this.winNode.active=!0}returnMap(){this.destroy()}}).prototype,"winNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=p))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_BottomProp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_GameData.ts","./HJMSJ_Constant.ts"],(function(t){var e,i,r,o,s,p,n,a,l,h,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t._decorator,s=t.Component,p=t.Label,n=t.Sprite,a=t.Node,l=t.director},function(t){h=t.HJMSJ_GameData},function(t){c=t.HJMSJ_Constant}],execute:function(){var m,u,d,g,S;r._RF.push({},"dd6ae/6kqxHh4HWwl3CxUM6","HJMSJ_BottomProp",void 0);const{ccclass:J,property:b}=o;t("HJMSJ_BottomProp",(m=J("HJMSJ_BottomProp"),u=b(),m((S=e((g=class extends s{constructor(...t){super(...t),this.bagID=0,i(this,"boxID",S,this),this.propName="",this.propSprite=null,this.label=null}start(){this.label=this.node.getChildByName("propNum").getComponent(p),this.propSprite=this.node.getChildByName("propSprite").getComponent(n),this.node.on(a.EventType.TOUCH_END,this.clickProp,this),l.getScene().on("哈基米世界_刷新底部道具",(t=>{this.refeshProp(t)}),this)}clickProp(){l.getScene().emit("哈基米世界_点击底部道具",this.boxID)}update(t){}resetData(){this.propName="",this.propSprite.spriteFrame=null,this.label.string="",this.node.name="背包框"}refeshProp(t){if(t===this.propName){let e=h.Instance.GetPropNum(this.propName);if(e<=0)return void this.resetData();let i=c.getTypeByName(t);if("武器"===i||"防具"===i)return void(this.label.string="");this.label.string=e.toString()}}init(t,e){this.propName=t.Name,this.bagID=t.BagID,this.refeshProp(this.propName),e&&(this.propSprite.spriteFrame=e)}}).prototype,"boxID",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=g))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_BuyProp.ts",["cc","./HJMSJ_Incident.ts","./HJMSJ_GameData.ts","./HJMSJ_BagMgr.ts","./HJMSJ_GameMgr.ts"],(function(e){var t,n,s,o,a,i,r,u,p,h,m;return{setters:[function(e){t=e.cclegacy,n=e.Component,s=e.Sprite,o=e.Label,a=e.Color,i=e.NodeEventType,r=e._decorator},function(e){u=e.HJMSJ_Incident},function(e){p=e.HJMSJ_GameData},function(e){h=e.HJMSJ_BagMgr},function(e){m=e.HJMSJ_GameMgr}],execute:function(){var c;t._RF.push({},"342e6j3lvROx6Um6Rll3v1e","HJMSJ_BuyProp",void 0);const{ccclass:l,property:N}=r;e("HJMSJ_BuyProp",l("HJMSJ_BuyProp")(c=class extends n{constructor(...e){super(...e),this.buyPropNameLabel=null,this.buyPropName="",this.payNode=null,this.bugProp=null,this.needNumLabel=null,this.needNum=0}init(e){this.bugProp=this.node.getChildByName("道具").getComponent(s),this.buyPropNameLabel=this.node.getChildByName("道具名").getComponent(o),this.payNode=this.node.getChildByName("支付框"),this.needNumLabel=this.payNode.getChildByName("所需个数").getComponent(o),u.LoadSprite("Sprites/新手村/购买商店/"+e.buyProp).then((t=>{this.buyPropName=e.buyProp,this.bugProp.spriteFrame=t,this.needNum=e.needNum,this.needNumLabel.string=this.needNum.toString(),this.buyPropNameLabel.string=this.buyPropName.toString(),this.buyPropName.startsWith("金")&&(this.buyPropNameLabel.color=new a(234,238,87)),this.buyPropName.startsWith("钻石")&&(this.buyPropNameLabel.color=new a(132,255,235)),this.payNode.on(i.TOUCH_END,this.onClick,this)}))}onClick(){console.log("购买"),p.Instance.GetPropNum("绿宝石")>=this.needNum&&(p.Instance.SubKnapsackData("绿宝石",this.needNum)&&m.instance.BagMgrTs.subPropByName("绿宝石",this.needNum),p.Instance.pushKnapsackData(this.buyPropName,1,h.curBagID)&&m.instance.BagMgrTs.pushPropByName(this.buyPropName,1))}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Composition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Constant.ts"],(function(t){var e,o,s,i,n,r;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t._decorator,n=t.Component},function(t){r=t.HJMSJ_Constant}],execute:function(){var p,c,a,h,l;s._RF.push({},"fcedd2eC/pP5bGEI3H333KM","HJMSJ_Composition",void 0);const{ccclass:u,property:m}=i;t("HJMSJ_Composition",(p=u("HJMSJ_Composition"),c=m(),p((l=e((h=class extends n{constructor(...t){super(...t),o(this,"compositionType",l,this),this.resProp="",this.resNum=1,this.propNames=[],this.creatMethod=new Map,this.posIndex=0}start(){if(this.compositionType){let t=r.getMethodByName(this.node.name);this.resProp=t.Name;for(let e=0;e<t.type.length/2;e++){let o=t.type[2*e],s=t.type[2*e+1],i=[];for(let e=0;e<s;e++,this.posIndex++)i.push(t.pos[this.posIndex]);let n=[o,s,i];this.propNames.push(o),this.creatMethod.set(o,n)}console.log(this.creatMethod),this.resNum=t.resNum}}}).prototype,"compositionType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=h))||a));s._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Constant.ts",["cc"],(function(e){var t,a;return{setters:[function(e){t=e.cclegacy,a=e._decorator}],execute:function(){var r,m;t._RF.push({},"3bfbeicXK1HVpEsz/KWNDvF","HJMSJ_Constant",void 0);const{ccclass:N,property:p}=a;e("HJMSJ_Constant",N("HJMSJ_Constant")(((m=class e{static getMethodByName(e){for(let t=0;t<this.CreatMethod.length;t++)if(this.CreatMethod[t].Name==e)return this.CreatMethod[t];return console.error("名字错误，没有找到"+e+"对应制作方法"),null}static getTypeByName(t){for(let a=0;a<e.PropData.length;a++)if(e.PropData[a].Name==t)return e.PropData[a].type;return console.log("名字错误，没有找到"+t+"对应类型"),null}static GetDataByName(t){for(let a=0;a<e.PropData.length;a++)if(e.PropData[a].Name==t)return e.PropData[a];return console.log("名字错误，没有找到对应武器属性"),null}static GetWeaponDataByName(t){for(let a=0;a<e.WeaponData.length;a++)if(e.WeaponData[a].Name==t)return e.WeaponData[a];return console.log("名字错误，没有找到对应属性"),null}static GetArmorDataByName(t){for(let a=0;a<e.ArmorData.length;a++)if(e.ArmorData[a].Name==t)return e.ArmorData[a];return console.log("名字错误，没有找到对应属性"),null}static GetArmorDataByPart(t){for(let a=0;a<e.ArmorData.length;a++)if(e.ArmorData[a].Part==t)return e.ArmorData[a];return console.log("名字错误，没有找到对应属性"),null}}).PropData=[{Name:"木剑",type:"武器",describe:"木剑\n锋利V"},{Name:"铁剑",type:"武器",describe:"铁剑\n锋利V"},{Name:"金剑",type:"武器",describe:"铁剑\n锋利V"},{Name:"钻石剑",type:"武器",describe:"钻石剑\n锋利V"},{Name:"铁镐",type:"武器",describe:"钻石镐\n+攻击伤害"},{Name:"金镐",type:"武器",describe:"钻石镐\n+攻击伤害"},{Name:"钻石镐",type:"武器",describe:"钻石镐\n+攻击伤害"},{Name:"铁甲",type:"防具",describe:"铁甲"},{Name:"铁头盔",type:"防具",describe:"铁头盔"},{Name:"铁裤子",type:"防具",describe:"铁裤子"},{Name:"铁靴子",type:"防具",describe:"铁靴子"},{Name:"金头盔",type:"防具",describe:"金头盔"},{Name:"金甲",type:"防具",describe:"金甲"},{Name:"金裤子",type:"防具",describe:"金裤子"},{Name:"金靴子",type:"防具",describe:"金靴子"},{Name:"钻石甲",type:"防具",describe:"钻石甲"},{Name:"钻石头盔",type:"防具",describe:"钻石头盔"},{Name:"钻石裤子",type:"防具",describe:"钻石裤子"},{Name:"钻石靴子",type:"防具",describe:"钻石靴子"},{Name:"钻石矿",type:"方块",describe:"钻石矿"},{Name:"橡木原木",type:"方块",describe:"橡木原木"},{Name:"橡木木板",type:"方块",describe:"橡木木板"},{Name:"橡木木板-块",type:"方块",describe:"橡木木板-块"},{Name:"圆石",type:"方块",describe:"圆石"},{Name:"虞美人",type:"方块",describe:"虞美人"},{Name:"玫瑰丛",type:"方块",describe:"玫瑰丛"},{Name:"工作台",type:"方块",describe:"工作台"},{Name:"腐肉",type:"道具",describe:"腐肉"},{Name:"破损的盾牌(下)",type:"道具",describe:"破损的盾牌(下)"},{Name:"钻石",type:"道具",describe:"钻石"},{Name:"金块",type:"道具",describe:"金块"},{Name:"铁锭",type:"道具",describe:"铁锭"},{Name:"绿宝石",type:"道具",describe:"绿宝石"},{Name:"木棍",type:"道具",describe:"木棍"},{Name:"金苹果",type:"消耗品",describe:"金苹果"},{Name:"不死图腾",type:"消耗品",describe:"不死图腾"},{Name:"附魔金苹果",type:"消耗品",describe:"附魔金苹果"}],m.StoreData=[{buyProp:"铁锭",needNum:5},{buyProp:"金块",needNum:8},{buyProp:"钻石",needNum:20},{buyProp:"铁头盔",needNum:20},{buyProp:"铁甲",needNum:36},{buyProp:"铁裤子",needNum:30},{buyProp:"铁靴子",needNum:18},{buyProp:"金头盔",needNum:35},{buyProp:"金甲",needNum:60},{buyProp:"金裤子",needNum:50},{buyProp:"金靴子",needNum:30},{buyProp:"钻石头盔",needNum:85},{buyProp:"钻石甲",needNum:70},{buyProp:"钻石裤子",needNum:125},{buyProp:"钻石靴子",needNum:75},{buyProp:"铁剑",needNum:10},{buyProp:"金剑",needNum:16},{buyProp:"钻石剑",needNum:40}],m.CreatMethod=[{Name:"木剑",type:["橡木木板-块",2,"木棍",1],pos:[1,4,7],resNum:1},{Name:"木棍",type:["橡木木板-块",2],pos:[0,1],resNum:4},{Name:"橡木木板-块",type:["橡木原木",1],pos:[0],resNum:4},{Name:"铁镐",type:["铁锭",3,"木棍",2],pos:[0,1,2,4,7],resNum:1},{Name:"金镐",type:["金块",3,"木棍",2],pos:[0,1,2,4,7],resNum:1},{Name:"钻石镐",type:["钻石",3,"木棍",2],pos:[0,1,2,4,7],resNum:1},{Name:"铁剑",type:["铁锭",2,"木棍",1],pos:[1,4,7],resNum:1},{Name:"金剑",type:["金块",2,"木棍",1],pos:[1,4,7],resNum:1},{Name:"钻石剑",type:["钻石",2,"木棍",1],pos:[1,4,7],resNum:1},{Name:"铁甲",type:["铁锭",8],pos:[0,2,3,4,5,6,7,8],resNum:1},{Name:"金甲",type:["金块",8],pos:[0,2,3,4,5,6,7,8],resNum:1},{Name:"钻石甲",type:["钻石",8],pos:[0,2,3,4,5,6,7,8],resNum:1},{Name:"铁头盔",type:["铁锭",5],pos:[3,4,5,6,8],resNum:1},{Name:"金头盔",type:["铁锭",5],pos:[3,4,5,6,8],resNum:1},{Name:"钻石头盔",type:["铁锭",5],pos:[3,4,5,6,8],resNum:1},{Name:"铁裤子",type:["铁锭",7],pos:[0,1,2,3,5,6,8],resNum:1},{Name:"金裤子",type:["金块",7],pos:[0,1,2,3,5,6,8],resNum:1},{Name:"钻石裤子",type:["钻石",7],pos:[0,1,2,3,5,6,8],resNum:1},{Name:"铁靴子",type:["铁锭",4],pos:[3,5,8,6],resNum:1},{Name:"金靴子",type:["金块",4],pos:[3,5,8,6],resNum:1},{Name:"钻石靴子",type:["钻石",4],pos:[3,5,8,6],resNum:1}],m.WeaponData=[{Name:"木剑",Attack:10},{Name:"铁剑",Attack:30},{Name:"金剑",Attack:40},{Name:"钻石剑",Attack:60},{Name:"铁镐",Attack:10},{Name:"金镐",Attack:15},{Name:"钻石镐",Attack:20}],m.ArmorData=[{Name:"铁甲",Part:"护甲",Defend:2},{Name:"铁头盔",Part:"头盔",Defend:1},{Name:"铁裤子",Part:"裤子",Defend:.5},{Name:"铁靴子",Part:"靴子",Defend:.5},{Name:"金甲",Part:"护甲",Defend:3},{Name:"金头盔",Part:"头盔",Defend:2},{Name:"金裤子",Part:"裤子",Defend:1},{Name:"金靴子",Part:"靴子",Defend:1},{Name:"钻石甲",Part:"护甲",Defend:4},{Name:"钻石头盔",Part:"头盔",Defend:3},{Name:"钻石裤子",Part:"裤子",Defend:2},{Name:"钻石靴子",Part:"靴子",Defend:1}],r=m))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_ExpBall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Player.ts"],(function(t){var e,o,i,n,l,s,r,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t._decorator,l=t.Component,s=t.Collider2D,r=t.Contact2DType},function(t){a=t.HJMSJ_Player}],execute:function(){var c,d,h;i._RF.push({},"65bf077Oc5IibUDERVIHXM0","HJMSJ_ExpBall",void 0);const{ccclass:p,property:u}=n;t("HJMSJ_ExpBall",p("HJMSJ_ExpBall")((h=e((d=class extends l{constructor(...t){super(...t),o(this,"expNum",h,this),this.moveSpeed=15,this.colider=null,this.playNode=null,this.timer=0,this.interval=.5}start(){this.colider=this.getComponent(s),this.colider.on(r.BEGIN_CONTACT,this.onStartContact,this)}update(t){if(this.playNode&&(this.timer+=t,this.timer>=this.interval)){let t=this.node.worldPosition.clone().subtract(this.playNode.worldPosition.clone()),e=t.clone().normalize().negative(),o=this.node.worldPosition.add(e.multiplyScalar(this.moveSpeed));t.length()<=10&&this.onMoveEnd(),this.node.worldPosition=o}}onStartContact(t,e,o){"Player"===e.node.name&&(console.log("Hit"),this.playNode=e.node,this.colider.off(r.BEGIN_CONTACT,this.onStartContact,this))}onMoveEnd(){this.playNode.getComponent(a).onGetExp(this.expNum),this.playNode=null,this.node.active=!1,this.scheduleOnce((()=>{this.node.destroy()}),.5)}}).prototype,"expNum",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),c=d))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_GameData.ts",["cc","./HJMSJ_Constant.ts","./UIManager.ts"],(function(a){var t,e,n,s,i,r;return{setters:[function(a){t=a.cclegacy,e=a._decorator,n=a.director,s=a.sys},function(a){i=a.HJMSJ_Constant},function(a){r=a.UIManager}],execute:function(){var o,l;t._RF.push({},"b3f28DPbElOaaeDe3JJasJO","HJMSJ_GameData",void 0);const{ccclass:c,property:D}=e;a("HJMSJ_GameData",c("HJMSJ_GameData")(((l=class a{constructor(){this.level=0,this.levelReward=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],this.hp=10,this.hunger=10,this.armor=0,this.curExp=0,this.maxExp=10,this.curBagID=0,this.curSkin="哈基米",this.SkinData=[{Name:"哈基米",SkinValue:0,SkinState:"已获得",WearState:"已穿戴",SkinType:"普通"},{Name:"娃娃丢",SkinValue:10,SkinState:"未获得",WearState:"未穿戴",SkinType:"普通"},{Name:"漂亮家的番茄狗",SkinValue:15,SkinState:"未获得",WearState:"未穿戴",SkinType:"普通"},{Name:"Popcat",SkinValue:15,SkinState:"未获得",WearState:"未穿戴",SkinType:"普通"},{Name:"屑猫",SkinValue:20,SkinState:"未获得",WearState:"未穿戴",SkinType:"普通"},{Name:"疑惑猫",SkinValue:25,SkinState:"未获得",WearState:"未穿戴",SkinType:"普通"},{Name:"秦皇小猫",SkinValue:999,SkinState:"未获得",WearState:"未穿戴",SkinType:"金色"},{Name:"？？？",SkinValue:1888,SkinState:"未获得",WearState:"未穿戴",SkinType:"红色"}],this.ArmorData=[{Name:"",Part:"护甲",Defend:0},{Name:"",Part:"头盔",Defend:0},{Name:"",Part:"裤子",Defend:0},{Name:"",Part:"靴子",Defend:0}],this.KnapsackData=[{Name:"木剑",Num:1,BagID:0},{Name:"工作台",Num:1,BagID:1}],this.TimeDate=[]}static get Instance(){return a.instance||this.ReadDate(),a.instance}changeSkin(a){for(let a of this.SkinData)a.Name===this.curSkin&&(a.WearState="未穿戴");for(let t of this.SkinData)if(t.Name===a)return t.WearState="已穿戴",this.curSkin=a,n.getScene().emit("哈基米世界_更换皮肤",a),!0;return console.log("未找到该皮肤"),!1}buySkin(a){for(let t=0;t<this.SkinData.length;t++)if(this.SkinData[t].Name===a)return this.SkinData[t].SkinState="已获得",!0;return console.log("未找到该皮肤数据"),!1}getSkinData(a){for(let t=0;t<this.SkinData.length;t++)if(this.SkinData[t].Name==a)return this.SkinData[t];return console.log("未找到该皮肤数据"),null}refreshArmorData(a,t){this.armor=0;for(let e=0;e<this.ArmorData.length;e++){if(this.ArmorData[e].Part===a){if(""===t){this.ArmorData[e]={Name:"",Part:a,Defend:0};continue}this.ArmorData[e]=i.GetArmorDataByName(t)}this.armor+=this.ArmorData[e].Defend}n.getScene().emit("哈基米世界_改变护甲值")}getArmorNum(){let a=0;for(let t=0;t<this.ArmorData.length;t++)""!==this.ArmorData[t].Name&&(a+=this.ArmorData[t].Defend);return a}getArmorDataByPart(a){for(let t=0;t<this.ArmorData.length;t++)if(this.ArmorData[t].Part==a)return this.ArmorData[t];return console.log("未找到该装备数据"),null}pushKnapsackData(a,t,e){for(let e=0;e<this.KnapsackData.length;e++){let n=i.getTypeByName(a);if(this.KnapsackData[e].Name==a){if("武器"===n||"防具"===n)break;return this.KnapsackData[e].Num+=t,console.log("放入"+a+t+"个"),console.log(this.KnapsackData),!0}}let n=0;for(let a=0;a<this.KnapsackData.length;a++)this.KnapsackData[a].Num>0&&(n+=1);return console.log("当前背包长度"+n),n>=36?(r.ShowTip("背包已满!"),!1):(this.KnapsackData.push({Name:a,Num:t,BagID:e}),console.log("放入"+a+t+"个"),console.log(this.KnapsackData),!0)}pushKnapsackDataByBagID(a,t,e){for(let n=0;n<this.KnapsackData.length;n++)if(this.KnapsackData[n].BagID==e)return this.KnapsackData[n].Num<=0&&(this.KnapsackData[n]={Name:a,Num:t,BagID:e},!0)}SubKnapsackData(a,t){for(let e=0;e<this.KnapsackData.length;e++)if(this.KnapsackData[e].Name==a)return this.KnapsackData[e].Num>=t?(this.KnapsackData[e].Num-=t,console.log("扣除"+a+t+"个"),console.log(this.KnapsackData),!0):(console.log(this.KnapsackData),!1);return!1}SubKnapsackDataByBagID(a,t){for(let e=0;e<this.KnapsackData.length;e++)if(this.KnapsackData[e].BagID==a)return this.KnapsackData[e].Num>=t&&(this.KnapsackData[e].Num-=t,console.log("扣除"+this.KnapsackData[e].Name+t+"个"),console.log(this.KnapsackData),!0);return!1}getDataByBagID(a){for(let t of this.KnapsackData)if(t.BagID===a)return t;return null}getKnapsackLength(){let a=0;for(let t=0;t<this.KnapsackData.length;t++){let e=i.getTypeByName(this.KnapsackData[t].Name);"武器"!==e&&"防具"!==e?this.KnapsackData[t].Num>0&&(a+=1):a+=this.KnapsackData[t].Num}return a}GetPropNum(a){let t=0;for(let e=0;e<this.KnapsackData.length;e++)this.KnapsackData[e].Name===a&&(t+=this.KnapsackData[e].Num);return t}static DateSave(){let t=JSON.stringify(a.Instance);s.localStorage.setItem("HJMSJ_DATA",t),console.log("游戏存档")}static ReadDate(){let t=s.localStorage.getItem("HJMSJ_DATA");""!=t&&null!=t?(console.log("读取存档"),a.instance=Object.assign(new a,JSON.parse(t))):(console.log("新建存档"),a.instance=new a)}}).instance=null,o=l))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_BagMgr.ts","./HJMSJ_GameData.ts","./HJMSJ_Prop.ts","./HJMSJ_Incident.ts","./ProjectEventManager.ts","./GameManager.ts","./UIManager.ts","./HJMSJ_Player.ts"],(function(e){var t,a,i,n,r,o,s,p,l,c,u,h,m,g,d,M,J,S,f,P,b,y,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,r=e.Prefab,o=e.AudioClip,s=e._decorator,p=e.Component,l=e.director,c=e.v3,u=e.UITransform,h=e.instantiate,m=e.Sprite},function(e){g=e.HJMSJ_BagMgr},function(e){d=e.HJMSJ_GameData},function(e){M=e.HJMSJ_Prop},function(e){J=e.HJMSJ_Incident},function(e){S=e.ProjectEventManager,f=e.ProjectEvent},function(e){P=e.GameManager},function(e){b=e.UIManager,y=e.Panel},function(e){N=e.HJMSJ_Player}],execute:function(){var v,_,H,C,G,B,I,w,D,z,k,T,j,L,U,x;i._RF.push({},"96728vwXFlJlJLjy7dwPCZu","HJMSJ_GameMgr",void 0);const{ccclass:F,property:E}=s;e("HJMSJ_GameMgr",(v=F("HJMSJ_GameMgr"),_=E(n),H=E(n),C=E(r),G=E(n),B=E(n),I=E({type:[o]}),v(((x=class e extends p{constructor(...e){super(...e),a(this,"Pause",z,this),a(this,"playerNode",k,this),a(this,"dropProp",T,this),a(this,"startMapNode",j,this),a(this,"mapNode",L,this),a(this,"clips",U,this),this.BagMgrTs=null,this.isBossMap=!1,this.isGameOver=!1,this.isGamePause=!1}start(){e.instance=this,console.log(d.Instance.levelReward),S.emit(f.游戏开始),this.BagMgrTs=l.getScene().getChildByName("Canvas").getComponentInChildren(g),l.getScene().on("哈基米世界_掉落物品",((e,t)=>{this.DropProp(e,t)}),this)}update(e){}returnMap(){this.startMapNode.active=!0,this.mapNode=this.startMapNode,this.playerNode.position=c(0,0,0),this.playerNode.getComponent(N).mapUITransform=this.startMapNode.getComponent(u)}changeMap(e){let t=this.mapNode.getSiblingIndex();e.parent=this.mapNode.parent,e.setSiblingIndex(t+1),this.mapNode.destroy(),this.playerNode.position=c(0,0,0),this.mapNode=e,this.playerNode.getComponent(N).mapUITransform=e.getComponent(u),console.log("更换地图结束"),e.name.startsWith("BossMap")?this.isBossMap=!0:this.isBossMap=!1}revive(){d.Instance.hp=10,this.isGameOver=!1,this.BagMgrTs.subPropByName("不死图腾",1),this.playerNode.getComponent(N).curHealth=10}Lost(){this.isGameOver=!0,d.DateSave(),S.emit(f.游戏结束)}onBtnClick(e){switch(e.target.name){case"返回主页":d.DateSave(),S.emit(f.返回主页按钮事件,(()=>{b.ShowPanel(y.LoadingPanel,P.StartScene,(()=>{S.emit(f.返回主页,"哈基米世界")}))}));break;case"重新开始":d.Instance.hp=10,l.loadScene("HJMSJ_Game");break;case"暂停":this.isGamePause=!0,this.Pause.active=!0;break;case"继续游戏":this.isGamePause=!1,this.Pause.active=!1;break;case"打开切歌":l.getScene().emit("哈基米世界_打开切歌")}}DropProp(e,t){let a=h(this.dropProp);a.parent=this.mapNode.children[0],a.worldPosition=t,a.getComponent(M).propName=e,J.LoadSprite("Sprites/物品/"+e).then((t=>{a.getChildByName("propSprite").getComponent(m).spriteFrame=t,console.error("掉落"+e)}))}onDestroy(){d.DateSave()}}).instance=null,z=t((D=x).prototype,"Pause",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"playerNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(D.prototype,"dropProp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(D.prototype,"startMapNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(D.prototype,"mapNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(D.prototype,"clips",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=D))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_IceBall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Player.ts","./HJMSJ_GameMgr.ts"],(function(t){var e,i,s,r,o,n,l,a,c,h,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t._decorator,o=t.Component,n=t.v3,l=t.Collider2D,a=t.Contact2DType,c=t.ParticleSystem2D},function(t){h=t.HJMSJ_Player},function(t){d=t.HJMSJ_GameMgr}],execute:function(){var u,p,y,m,f,J,S,g,D;s._RF.push({},"b7c7bOWah1E54MfF4oNNiqy","HJMSJ_IceBall",void 0);const{ccclass:b,property:_}=r;t("HJMSJ_IceBall",(u=b("HJMSJ_IceBall"),p=_(),y=_(),m=_(),u((S=e((J=class extends o{constructor(...t){super(...t),i(this,"moveSpeed",S,this),i(this,"ATK",g,this),i(this,"flyTime",D,this),this.Dir=n(0,0,0),this.particle=null,this.timer=0,this.isInit=!1,this.isDestory=!1,this.colider=null,this.playerNode=null}start(){this.colider=this.getComponent(l),this.colider.on(a.BEGIN_CONTACT,this.onStartContact,this),this.playerNode=d.instance.playerNode}update(t){this.isDestory||this.isInit&&(this.timer+=t,this.timer<=this.flyTime?this.node.worldPosition=this.node.worldPosition.add(n(0,this.Dir.y*this.moveSpeed*this.timer,0)):(this.isInit=!1,this.timer=0))}init(t){this.scheduleOnce((()=>{this.isInit=!0,this.Dir=t,this.particle=this.node.getChildByName("火焰").getComponent(c),this.particle.resetSystem()}),.5),this.scheduleOnce((()=>{this.isInit=!1,this.node.destroy()}),10)}onStartContact(t,e,i){if("Player"==e.node.name){this.isDestory=!0,e.node.getComponent(h).onAttack(-this.ATK,this.getPlayerDir()),this.node.destroy()}}getPlayerDir(){return this.node.worldPosition.clone().subtract(this.playerNode.worldPosition.clone()).clone().normalize().negative()}}).prototype,"moveSpeed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=e(J.prototype,"ATK",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=e(J.prototype,"flyTime",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=J))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Incident.ts",["cc","./BundleManager.ts"],(function(e){var n,t,r,c,o,a;return{setters:[function(e){n=e.cclegacy,t=e.Component,r=e.SpriteFrame,c=e.Prefab,o=e._decorator},function(e){a=e.BundleManager}],execute:function(){var s;n._RF.push({},"2b941PNWkVOuIaQxC97qDMi","HJMSJ_Incident",void 0);const{ccclass:i,property:u}=o;e("HJMSJ_Incident",i("HJMSJ_Incident")(s=class extends t{static LoadSprite(e){return new Promise(((n,t)=>{a.GetBundle("39_HJMSJ").load(e+"/spriteFrame",r,((t,r)=>{t?console.log("没有找到图片"+e):n&&n(r)}))}))}static Loadprefab(e){return new Promise(((n,t)=>{a.GetBundle("39_HJMSJ").load(e,c,((t,r)=>{t?console.log("没有找到预制体"+e):n&&n(r)}))}))}})||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_JoyStick.ts",["cc"],(function(t){var i,o,e,n,s,c,r,h,y,a;return{setters:[function(t){i=t.cclegacy,o=t.Component,e=t.v3,n=t.UITransform,s=t.Node,c=t.input,r=t.Input,h=t.director,y=t.KeyCode,a=t._decorator}],execute:function(){var d;i._RF.push({},"86d0a7cP/pJCoq07vHE11c2","HJMSJ_JoyStick",void 0);const{ccclass:l,property:S}=a;t("HJMSJ_JoyStick",l("HJMSJ_JoyStick")(d=class extends o{constructor(...t){super(...t),this.JoyStickHandle=null,this.JoyStickBg=null,this.JoySrickCenter=null,this._dir=e(0,0,0),this.keyboardDir=e(0,0,0)}start(){this.JoyStickBg=this.node.getChildByName("JoyStickBg").getComponent(n),this.JoyStickHandle=this.node.getChildByName("JoyStickHandle"),this.JoySrickCenter=this.JoyStickBg.node.worldPosition.clone(),this.JoyStickBg.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.JoyStickBg.node.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.JoyStickBg.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.JoyStickBg.node.on(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this),c.on(r.EventType.KEY_DOWN,this.onKeyDown,this),c.on(r.EventType.KEY_UP,this.onKeyUp,this)}update(t){this.keyboardDir.length()>0&&(this._dir=this.keyboardDir.clone().normalize(),h.getScene().emit("哈基米世界_开始移动",this._dir.multiplyScalar(80)))}onKeyDown(t){switch(t.keyCode){case y.KEY_W:this.keyboardDir.y=1;break;case y.KEY_S:this.keyboardDir.y=-1;break;case y.KEY_A:this.keyboardDir.x=-1;break;case y.KEY_D:this.keyboardDir.x=1}}onKeyUp(t){switch(t.keyCode){case y.KEY_W:case y.KEY_S:this.keyboardDir.y=0;break;case y.KEY_A:case y.KEY_D:this.keyboardDir.x=0}0===this.keyboardDir.length()&&this.onKeyboardStop()}onKeyboardStop(){this.JoyStickHandle.worldPosition=this.JoySrickCenter,h.getScene().emit("哈基米世界_停止移动")}onTouchStart(t){this.keyboardDir.set(0,0,0);let i=e(t.getUILocation().x,t.getUILocation().y);this.JoyStickHandle.worldPosition=i;let o=i.clone().subtract(this.JoyStickBg.node.worldPosition),n=this.JoyStickBg.width/2;this._dir=o.clone().normalize();this._dir.multiplyScalar(n);h.getScene().emit("哈基米世界_开始移动",this._dir)}onTouchMove(t){let i=e(t.getUILocation().x,t.getUILocation().y),o=i.clone().subtract(this.JoyStickBg.node.worldPosition),n=o.clone().length(),s=this.JoyStickBg.width/2;this._dir=o.clone().normalize();let c=this._dir.multiplyScalar(s);n<s?this.JoyStickHandle.worldPosition=i:this.JoyStickHandle.position=c,h.getScene().emit("哈基米世界_开始移动",this._dir)}onTouchEnd(t){this.JoyStickHandle.worldPosition=this.JoySrickCenter,h.getScene().emit("哈基米世界_停止移动")}})||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_LevelProp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_GameData.ts","./HJMSJ_Incident.ts","./UIManager.ts","./HJMSJ_BagMgr.ts","./HJMSJ_GameMgr.ts"],(function(e){var t,n,i,r,o,a,s,p,l,c,u,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e._decorator,o=e.Component,a=e.Label,s=e.Sprite,p=e.NodeEventType},function(e){l=e.HJMSJ_GameData},function(e){c=e.HJMSJ_Incident},function(e){u=e.UIManager},function(e){h=e.HJMSJ_BagMgr},function(e){m=e.HJMSJ_GameMgr}],execute:function(){var d,g,N,J,f,S,M,_,y;i._RF.push({},"f3c4c9R5ehG96kGc3ZauqQk","HJMSJ_LevelProp",void 0);const{ccclass:C,property:H}=r;e("HJMSJ_LevelProp",(d=C("HJMSJ_LevelProp"),g=H(),N=H(),J=H(),d((M=t((S=class extends o{constructor(...e){super(...e),n(this,"propNum",M,this),n(this,"propName",_,this),n(this,"needNum",y,this)}start(){if(l.Instance.level>=this.needNum){let e=this.needNum/100*10-1;if(console.log("index",e),l.Instance.levelReward[e]){this.node.getChildByName("获得状态").getComponent(a).string="已获得",c.LoadSprite("Sprites/新手村/等级奖励/"+this.propName).then((e=>{this.node.getChildByName("道具图片").getComponent(s).spriteFrame=e}))}}this.node.on(p.TOUCH_END,this.onClick,this)}onClick(){if("已获得"!==this.node.getChildByName("获得状态").getComponent(a).string)if(l.Instance.level>=this.needNum){if(l.Instance.pushKnapsackData(this.propName,this.propNum,h.curBagID)){m.instance.BagMgrTs.pushPropByName(this.propName,this.propNum);let e=this.needNum/100*10-1;l.Instance.levelReward[e]=!0,this.node.getChildByName("获得状态").getComponent(a).string="已获得",c.LoadSprite("Sprites/新手村/等级奖励/"+this.propName).then((e=>{this.node.getChildByName("道具图片").getComponent(s).spriteFrame=e}))}else u.ShowTip("背包已满!")}else u.ShowTip("请先升级到"+this.needNum+"级!");else u.ShowTip("该奖励已领取!")}}).prototype,"propNum",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=t(S.prototype,"propName",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=t(S.prototype,"needNum",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=S))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_MapCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,s,o,a,l,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.Prefab,s=t.Node,o=t._decorator,a=t.Component,l=t.instantiate,c=t.math}],execute:function(){var h,p,u,d,b,f,P,g,m;r._RF.push({},"6b5caUTL+tCHYmvI4CgDkQz","HJMSJ_MapCtrl",void 0);const{ccclass:y,property:B}=o;t("HJMSJ_MapCtrl",(h=y("HJMSJ_MapCtrl"),p=B({type:[n]}),u=B(s),d=B(n),h((P=e((f=class extends a{constructor(...t){super(...t),i(this,"blockPrefab",P,this),i(this,"posParent",g,this),i(this,"bossPrefab",m,this),this.Boss=null,this.index=0}start(){this.schedule(this.creatBlock,.5),this.schedule(this.creatBoss,10)}update(t){}creatBoss(){if(this.Boss)return;if(5*Math.random()<2){let t=l(this.blockPrefab[c.randomRangeInt(0,this.bossPrefab.length)]);t.parent=this.node.getChildByName("AICtrl").getChildByName("AIParent");let e=this.node.getChildByName("AICtrl").getChildByName("AIStartPos");t.worldPosition=e.children[c.randomRangeInt(0,e.children.length)].worldPosition.clone(),this.Boss=t}}creatBlock(){if(this.index<this.posParent.children.length){let t=c.randomRangeInt(0,this.blockPrefab.length),e=l(this.blockPrefab[t]),i=this.posParent.children[this.index].position.clone();e.parent=this.node.children[0],e.position=i,this.index++}else this.unschedule(this.creatBlock)}}).prototype,"blockPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=e(f.prototype,"posParent",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(f.prototype,"bossPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=f))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Music.ts",["cc","./HJMSJ_AudioManager.ts"],(function(e){var t,i,s,c,a,n,u;return{setters:[function(e){t=e.cclegacy,i=e.Component,s=e.Label,c=e.NodeEventType,a=e.director,n=e._decorator},function(e){u=e.HJMSJ_AudioManager}],execute:function(){var m;t._RF.push({},"20893ca1m5E8LMUmauRKMcw","HJMSJ_Music",void 0);const{ccclass:o,property:h}=n;e("HJMSJ_Music",o("HJMSJ_Music")(m=class extends i{constructor(...e){super(...e),this.musicName="",this.musicNameLabel=null,this.musicStateLabel=null}init(e){this.musicNameLabel||(this.musicNameLabel=this.node.getChildByName("歌名").getComponent(s)),this.musicStateLabel||(this.musicStateLabel=this.node.getChildByName("播放状态").getComponent(s)),this.musicName=e,this.musicNameLabel.string=this.musicName,this.node.on(c.TOUCH_END,this.onClick,this),a.getScene().on("哈基米世界_音乐切换",(e=>{e==this.musicName?this.musicStateLabel.string="播放中":this.musicStateLabel.string=""}))}onClick(){u.instance.playBGM(this.musicName),a.getScene().emit("哈基米世界_音乐切换",this.musicName)}})||m);t._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_NewCourse.ts",["cc"],(function(e){var t,s,n;return{setters:[function(e){t=e.cclegacy,s=e.Component,n=e._decorator}],execute:function(){var i;t._RF.push({},"82860IVdB5D8KAfV3eF486V","HJMSJ_NewCourse",void 0);const{ccclass:h,property:c}=n;e("HJMSJ_NewCourse",h("HJMSJ_NewCourse")(i=class extends s{constructor(...e){super(...e),this.Index=0,this.MaxIndex=0}start(){this.MaxIndex=this.node.getChildByName("Content").children.length,this.Show()}onBtnClick(e){switch(e.target.name){case"左翻页":this.Index=this.Index-1<0?this.MaxIndex-1:this.Index-1,this.Show();break;case"右翻页":this.Index=this.Index+1>=this.MaxIndex?0:this.Index+1,this.Show();break;case"关闭":this.node.active=!1}}Show(){this.node.getChildByName("Content").children.forEach(((e,t)=>{e.active=this.Index==t}))}})||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_NPC.ts",["cc"],(function(t){var e,i,n,o,s,r,a,c;return{setters:[function(t){e=t.cclegacy,i=t.Component,n=t.Collider2D,o=t.Contact2DType,s=t.v3,r=t.tween,a=t.director,c=t._decorator}],execute:function(){var l;e._RF.push({},"e7333w9iqRLW7flRiR5wO7P","HJMSJ_NPC",void 0);const{ccclass:h,property:d}=c;t("HJMSJ_SkinNPC",h("HJMSJ_SkinNPC")(l=class extends i{constructor(...t){super(...t),this.talkWindow=null,this.colider=null}start(){this.talkWindow=this.node.getChildByName("Talk"),this.colider=this.getComponent(n),this.colider.on(o.BEGIN_CONTACT,this.onTriggerEnter,this),this.colider.on(o.END_CONTACT,this.onTriggerExit,this),this.talkWindow.scale=s(0,0,0)}update(t){}showTalkWindow(t){t?r(this.talkWindow).to(.5,{scale:s(1,1,1)},{easing:"backInOut"}).start():r(this.talkWindow).to(.3,{scale:s(0,0,0)}).start()}onTriggerEnter(t,e,i){"Player"==e.node.name&&(this.showTalkWindow(!0),a.getScene().emit("哈基米世界_对话",this.node.name))}onTriggerExit(t,e,i){"Player"==e.node.name&&(this.showTalkWindow(!1),a.getScene().emit("哈基米世界_离开对话"))}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./HJMSJ_ATKBox.ts","./HJMSJ_Body.ts","./HJMSJ_AIPlayer.ts","./HJMSJ_GameMgr.ts","./HJMSJ_Prop.ts","./HJMSJ_GameData.ts","./HJMSJ_BagMgr.ts","./HJMSJ_Incident.ts","./HJMSJ_Constant.ts","./HJMSJ_Block.ts","./HJMSJ_AudioManager.ts"],(function(t){var i,e,s,o,n,a,h,r,l,d,c,p,m,u,g,y,f,S,A,C,k,P,_,b,B,I,w,J,N,M,T,D,v,x;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.Node,n=t.UITransform,a=t.Prefab,h=t.SpriteFrame,r=t._decorator,l=t.Component,d=t.v2,c=t.Vec3,p=t.v3,m=t.Sprite,u=t.director,g=t.tween,y=t.math,f=t.instantiate,S=t.UIOpacity,A=t.ParticleSystem2D,C=t.RigidBody2D,k=t.Collider2D,P=t.Contact2DType},function(t){_=t.UIManager},function(t){b=t.HJMSJ_ATKBox},function(t){B=t.HJMSJ_Body},function(t){I=t.HJMSJ_AIPlayer},function(t){w=t.HJMSJ_GameMgr},function(t){J=t.HJMSJ_Prop},function(t){N=t.HJMSJ_GameData},function(t){M=t.HJMSJ_BagMgr},function(t){T=t.HJMSJ_Incident},function(t){D=t.HJMSJ_Constant},function(t){v=t.HJMSJ_Block},function(t){x=t.HJMSJ_AudioManager}],execute:function(){var H,R,O,U,E,z,F,G,K,L,V,W,X,j,q,Q,Y,Z,$,tt,it,et;s._RF.push({},"24095sse7RPt7v67ICGvC7U","HJMSJ_Player",void 0);const{ccclass:st,property:ot}=r;t("HJMSJ_Player",(H=st("HJMSJ_Player"),R=ot(o),O=ot(o),U=ot(o),E=ot(n),z=ot(a),F=ot(o),G=ot(h),K=ot(h),L=ot(o),H(((et=class extends l{constructor(...t){super(...t),e(this,"shadow",X,this),e(this,"InteractBtn",j,this),e(this,"mapCamera",q,this),e(this,"mapUITransform",Q,this),e(this,"bodyPrefab",Y,this),e(this,"bodyNodeRoot",Z,this),this.handPropType=null,this.handPropName=null,this.handPos=null,this.bulletPrefab=null,this.bodyRoot=null,this.particle=null,this.healthBar=null,this.curHealth=10,this.maxHealth=10,this.screenSize=d(2340,1080),this.handRoot=null,this.handProp=null,this.handPropData=null,this.handEffect=null,this.colider=null,this.atkColider=null,this.startPos=null,this._lastPosition=new c,this._lastEulerAngles=new c,this.model=null,this._rigibody=null,this._dir=p(0,0,0),this.moveSpeed=3,this.attackInterval=.5,this.openShake=!0,this.isShaking=!1,this.shakeTime=0,this.shakeDuration=0,this.originalPosition=null,this.shakeIntensity=10,this.isInit=!1,this.shiftTimer=0,this.curSpriteFrame=null,this.BlockArray=[],this.AIArray=[],this.SnowBallArray=[],e(this,"blackFrame",$,this),e(this,"commonFrame",tt,this),e(this,"blackBg",it,this),this.InteractTarget="",this.forwardDir=1,this.preDir=p(-1,0,0),this.isDestorySnowBall=!1,this.isAttacking=!1,this.playerPos=p(0,0,0),this.isRepelling=!1,this.repelDistance=100,this.shiftNodes=[],this.isOnShift=!1}update(t){if(w.instance.isGamePause)return;if(this.isOnShift&&(c.copy(this._lastPosition,this.node.worldPosition),c.copy(this._lastEulerAngles,this.node.eulerAngles),this.shiftTimer+=t,this.shiftTimer>=.1&&this.updateBodyNodes()),this.isDestorySnowBall&&this.SnowBallArray&&this.SnowBallArray.length>0)for(let t=0;t<this.SnowBallArray.length;t++)this.SnowBallArray[t].destroy(),console.log("销毁雪球");let i=p(this._dir.x*this.moveSpeed*t,this._dir.y*this.moveSpeed*t);if(this.node.position=this.node.position.add(i),this.handPos=this.node.worldPosition,this.handRoot.position=p(0,-15,0),this.shadow.worldPosition=this.node.worldPosition.clone().add(p(0,-80,0)),this.isRepelling&&(i=p(this.playerPos.x*this.repelDistance/100,this.playerPos.y*this.repelDistance/100),this.node.position=this.node.position.add(i)),this.openShake){let i=Math.abs(this.node.position.x)+this.screenSize.x/2,e=Math.abs(this.node.position.y)+this.screenSize.y/2;if(i<=this.mapUITransform.width/2&&e<=this.mapUITransform.height/2?this.mapCamera.position=p(this.node.position.x,this.node.position.y,1e3):i>this.mapUITransform.width/2&&e<=this.mapUITransform.height/2?this.mapCamera.position=p(this.mapCamera.position.x,this.node.position.y,1e3):i<=this.mapUITransform.width/2&&e>this.mapUITransform.height/2&&(this.mapCamera.position=p(this.node.position.x,this.mapCamera.position.y,1e3)),!this.isShaking)return;this.shakeTime+=t;let s=2*(Math.random()-.5)*this.shakeIntensity,o=2*(Math.random()-.5)*this.shakeIntensity;if(this.mapCamera.position=new c(this.mapCamera.position.x+s,this.mapCamera.position.y+o,this.mapCamera.position.z),this.shakeTime>=this.shakeDuration){this.isShaking=!1;let t=Math.abs(this.node.position.x)+this.screenSize.x/2,i=Math.abs(this.node.position.y)+this.screenSize.y/2;return t<=this.mapUITransform.width/2&&i<=this.mapUITransform.height/2?this.mapCamera.position=p(this.node.position.x,this.node.position.y,1e3):t>this.mapUITransform.width/2&&i<=this.mapUITransform.height/2?this.mapCamera.position=p(this.mapCamera.position.x,this.node.position.y,1e3):t<=this.mapUITransform.width/2&&i>this.mapUITransform.height/2&&(this.mapCamera.position=p(this.node.position.x,this.mapCamera.position.y,1e3)),void(i>this.mapUITransform.height/2&&(this.mapCamera.position=p(this.node.position.x,this.mapCamera.position.y,1e3)))}}}changeSkin(){let t=N.Instance.curSkin;T.LoadSprite("Sprites/角色/"+t).then((t=>{this.model.getComponent(m).spriteFrame=t,this.curSpriteFrame=t}))}health(t){t<0&&(t+=N.Instance.armor/2)>=0&&(t=0),this.curHealth+=t,this.curHealth>=this.maxHealth&&(this.curHealth=this.maxHealth),this.curHealth<=0&&(this.curHealth=0),u.getScene().emit("哈基米世界_改变生命值",t)}onAttackBoxStart(t,i,e){let s=i.node;if("小雪人"===s.name||"AIPlayer"===s.name||s.name.startsWith("Boss")){let t=s.getComponent(I);return void this.AIArray.push(t)}if("雪球"===s.name){let t=s;return void this.SnowBallArray.push(t)}let o=s.getComponent(v);o&&o.couldAttack&&this.BlockArray.push(o)}onAttackBoxEnd(t,i,e){let s=i.node;if("小雪人"===s.name||"AIPlayer"===s.name||s.name.startsWith("Boss")){let t=s.getComponent(I),i=this.AIArray.indexOf(t);return void(-1!==i&&this.AIArray.splice(i,1))}if("雪球"===s.name){let t=s,i=this.SnowBallArray.indexOf(t);return void(-1!==i&&this.SnowBallArray.splice(i,1))}let o=s.getComponent(v);if(o&&o.couldAttack){let t=this.BlockArray.indexOf(o);-1!==t&&this.BlockArray.splice(t,1)}}onStartContact(t,i,e){let s=i.node;switch(s.name){case"Prop":let t=s.getComponent(J),i=N.Instance.GetPropNum(t.propName),e=N.Instance.getKnapsackLength();if(i<=0&&e>=36)return void console.log("背包已满");g(s).to(.2,{worldPosition:this.node.worldPosition,scale:p(0,0,0)}).call((()=>{let t=s.getComponent(J);N.Instance.pushKnapsackData(t.propName,t.propNum,M.curBagID)&&w.instance.BagMgrTs.pushPropByName(t.propName,t.propNum),s.destroy()})).start();break;case"工作台":case"BOSS地图":case"购买商店":case"等级奖励":case"皮肤商城":case"世界地图":this.InteractTarget=s.name,this.InteractBtn.active=!0}}onExitContact(t,i,e){switch(i.node.name){case"工作台":case"BOSS地图":case"购买商店":case"等级奖励":case"皮肤商城":case"世界地图":this.InteractTarget="",this.InteractBtn.active=!1}}onBtnClick(t){u.getScene().getChildByName("Canvas").getChildByName("暗黑模式"),u.getScene().getChildByName("Canvas").getChildByName("正常模式");switch(t.target.name){case"交互":u.getScene().emit("哈基米世界_交互",this.InteractTarget)}}onMove(t){this._dir=p(t.x,t.y,0),this._dir.x>0&&180===this.model.eulerAngles.y&&(g(this.model).to(.2,{eulerAngles:p(0,0,0)},{easing:"backInOut"}).start(),g(this.handProp).to(.2,{eulerAngles:p(0,0,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=p(50,0,0),this.handRoot.getComponent(b).Show(),this.forwardDir=1})).start()),this._dir.x<0&&0===this.model.eulerAngles.y&&(g(this.model).to(.2,{eulerAngles:p(0,180,0)},{easing:"backInOut"}).start(),g(this.handProp).to(.2,{eulerAngles:p(0,180,0)},{easing:"backInOut"}).call((()=>{this.handProp.position=p(-50,0,0),this.handRoot.getComponent(b).Show(),this.forwardDir=-1})).start())}onStopMove(){this.preDir=this._dir.clone(),this._dir=p(0,0,0)}changProp(t){if(!t||""===t)return this.handProp.getChildByName("手").active=!1,this.handProp.getComponent(m).spriteFrame=null,this.handPropName=null,void(this.handPropType=null);T.LoadSprite("Sprites/物品/"+t).then((i=>{this.handProp.getComponent(m).spriteFrame=i,this.handPropName=t,this.handPropType=D.getTypeByName(t),this.handProp.getChildByName("手").active=!0}))}onCommonAttack(t){this.isAttacking||(this.isAttacking=!0,"武器"===this.handPropType&&(this.handEffect.active=!0,x.instance.playSFX("攻击")),g(this.handRoot).by(.05,{eulerAngles:p(0,0,20*this.forwardDir)}).by(.1,{eulerAngles:p(0,0,-100*this.forwardDir)}).call((()=>{this.isDestorySnowBall=!0,g(this.handRoot).to(.1,{eulerAngles:p(0,0,0)}).call((()=>{if(this.isDestorySnowBall=!1,this.isAttacking=!1,this.AIArray&&this.AIArray.length>0&&this.AIArray.forEach((t=>{let i=D.GetWeaponDataByName(this.handPropName).Attack;t.onAttack(i),this.Shake(5,.8)})),this.BlockArray&&this.BlockArray.length>0){let t=this.BlockArray.length-1;this.BlockArray[t].onAttack(6),this.Shake(5,.8)}this.handEffect.active=!1})).start()})).start())}Repel(t){this.particle.resetSystem(),this.isRepelling=!0,this.playerPos=t,this.scheduleOnce((()=>{this.isRepelling=!1}),.5)}Shake(t,i){this.isShaking||(this.shakeIntensity=t,this.shakeDuration=i,this.isShaking=!0,this.shakeTime=0)}onChargeAttack(t){_.ShowTip("该功能未开启!")}StopAttack(){}onAttack(t,i){this.health(t),this.Repel(i)}onGetExp(t){let i=y.randomRangeInt(1,6);x.instance.playSFX("经验"+i),u.getScene().emit("哈基米世界_改变经验值",t)}onShift(){if(this.isOnShift)return;this.isOnShift=!0,this.creatBody(7);let t=d(0,0);0!==this._dir.clone().length()?(t=d(this._dir.x*this.moveSpeed*.1,this._dir.y*this.moveSpeed*.1),g(this.node).to(.5,{eulerAngles:p(0,0,-30*this.forwardDir)}).start(),g(this._rigibody).by(.5,{linearVelocity:t}).call((()=>{g(this.node).to(.3,{eulerAngles:p(0,0,0)}).start()})).start()):(t=d(this.preDir.x*this.moveSpeed*.1,this.preDir.y*this.moveSpeed*.1),g(this.node).to(.5,{eulerAngles:p(0,0,-30*this.forwardDir)}).start(),g(this._rigibody).by(.5,{linearVelocity:t}).call((()=>{g(this.node).to(.3,{eulerAngles:p(0,0,0)}).start()})).start()),this.scheduleOnce((()=>{this.isOnShift=!1,this.shiftTimer=0,this._rigibody.linearVelocity=d(0,0);for(let t=0;t<this.bodyNodeRoot.children.length;t++)this.bodyNodeRoot.children[t].destroy()}),.85)}creatBody(t){let i=255;for(let e=0;e<t;e++){let t=f(this.bodyPrefab);if(t.parent=this.bodyNodeRoot,t.getComponentInChildren(m).spriteFrame=this.curSpriteFrame,t.eulerAngles=this.model.eulerAngles,0!==e)t.getComponent(B).init(this.shiftNodes[e-1]),i-=50,t.getComponent(S).opacity=i;else{this.bodyNodeRoot.children[0].getComponent(B).init(this.model)}}}updateBodyNodes(){if(0===this.shiftNodes.length)return;const t=this.shiftNodes[0].getComponent(B);t&&(t.spriteNode.eulerAngles=this.model.eulerAngles,t.followTarget(this._lastPosition,this._lastEulerAngles));for(let t=1;t<this.shiftNodes.length;t++){const i=this.shiftNodes[t].getComponent(B),e=this.shiftNodes[t-1].getComponent(B);if(i&&e){e.lastPosition.clone().subtract(i.lastPosition.clone()).length()>.2&&(i.spriteNode.eulerAngles=this.model.eulerAngles,i.followTarget(e.lastPosition,e.lastEulerAngles))}}}start(){this.isInit||(this.isInit=!0,this.initData(),this.schedule((()=>{N.DateSave()}),5))}initData(){this.startPos=this.node.worldPosition.clone(),this.handRoot=this.node.getChildByName("handRoot"),this.handProp=this.handRoot.getChildByName("handProp"),this.model=this.node.getChildByName("Model"),this.particle=this.model.getChildByName("受击").getComponent(A),this._rigibody=this.getComponent(C),this.colider=this.node.getComponent(k),this.colider.on(P.BEGIN_CONTACT,this.onStartContact,this),this.colider.on(P.END_CONTACT,this.onExitContact,this),u.getScene().on("哈基米世界_开始移动",this.onMove,this),u.getScene().on("哈基米世界_停止移动",this.onStopMove,this),u.getScene().on("哈基米世界_普通攻击",this.onCommonAttack,this),u.getScene().on("哈基米世界_蓄力攻击",this.onChargeAttack,this),u.getScene().on("哈基米世界_停止攻击",this.StopAttack,this),u.getScene().on("哈基米世界_闪避",this.onShift,this),u.getScene().on("哈基米世界_更换皮肤",this.changeSkin,this),u.getScene().on("哈基米世界_更换底部道具",(t=>{this.changProp(t)}),this),this.atkColider=this.handRoot.getComponent(k),this.atkColider.on(P.BEGIN_CONTACT,this.onAttackBoxStart,this),this.atkColider.on(P.END_CONTACT,this.onAttackBoxEnd,this),c.copy(this._lastPosition,this.model.worldPosition),c.copy(this._lastEulerAngles,this.model.eulerAngles),this.shiftNodes=this.bodyNodeRoot.children,this.handEffect=this.handProp.getChildByName("拖尾"),this.isInit=!0,this.changeSkin()}}).couldMove=!0,et.couldAttack=!1,X=i((W=et).prototype,"shadow",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(W.prototype,"InteractBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(W.prototype,"mapCamera",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(W.prototype,"mapUITransform",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(W.prototype,"bodyPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(W.prototype,"bodyNodeRoot",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(W.prototype,"blackFrame",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(W.prototype,"commonFrame",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=i(W.prototype,"blackBg",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=W))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Prop.ts",["cc"],(function(t){var s,e,o,r,i;return{setters:[function(t){s=t.cclegacy,e=t.Component,o=t.tween,r=t.v3,i=t._decorator}],execute:function(){var n;s._RF.push({},"1afcfTq1ulEk5nhqU97V8p3","HJMSJ_Prop",void 0);const{ccclass:c,property:p}=i;t("HJMSJ_Prop",c("HJMSJ_Prop")(n=class extends e{constructor(...t){super(...t),this.propName="金苹果",this.propNum=1,this.sign=1}start(){this.moveSelf()}update(t){}moveSelf(){o(this.node).by(1,{position:r(0,20*this.sign,0)}).call((()=>{this.sign=-this.sign,this.moveSelf()})).start()}})||n);s._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Reward.ts",["cc"],(function(t){var e,c,o,a,i,n;return{setters:[function(t){e=t.cclegacy,c=t.Component,o=t.director,a=t.UIOpacity,i=t.tween,n=t._decorator}],execute:function(){var s;e._RF.push({},"4e52ewVOaNJ656FJDcCfTWV","HJMSJ_Reward",void 0);const{ccclass:r,property:d}=n;t("HJMSJ_Reward",r("HJMSJ_Reward")(s=class extends c{start(){o.getScene().on("哈基米世界_交互",(t=>{"等级奖励"===t&&this.open()}),this)}onBtnClick(t){"退出页面"==t.target.name&&this.close()}open(){this.node.getChildByName("bg").active=!0,this.node.getChildByName("奖励界面").active=!0;let t=this.getComponent(a);i(t).to(.3,{opacity:255}).start()}close(){let t=this.getComponent(a);i(t).to(.3,{opacity:0}).call((()=>{this.node.getChildByName("bg").active=!1,this.node.getChildByName("奖励界面").active=!1})).start()}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Role.ts",["cc","./HJMSJ_Incident.ts","./HJMSJ_GameData.ts","./HJMSJ_GameMgr.ts","./UIManager.ts"],(function(t){var e,i,s,a,n,h,S,r,k,l,o;return{setters:[function(t){e=t.cclegacy,i=t.Component,s=t.director,a=t.Sprite,n=t.Label,h=t.NodeEventType,S=t._decorator},function(t){r=t.HJMSJ_Incident},function(t){k=t.HJMSJ_GameData},function(t){l=t.HJMSJ_GameMgr},function(t){o=t.UIManager}],execute:function(){var c;e._RF.push({},"6208cT6Sg5LSpWsyoj6QlFJ","HJMSJ_Role",void 0);const{ccclass:m,property:g}=S;t("HJMSJ_Role",m("HJMSJ_Role")(c=class extends i{constructor(...t){super(...t),this.skinSprite=null,this.skinNameLabel=null,this.skinStateLabel=null,this.wearStateLabel=null,this.skinName="",this.skinValue=0,this.skinState="未获得",this.wearState="未佩戴",this.skinType=""}start(){}onClick(){if("已穿戴"!==this.wearState)if("未获得"===this.skinState){k.Instance.GetPropNum("绿宝石")>=this.skinValue?k.Instance.SubKnapsackData("绿宝石",this.skinValue)&&(l.instance.BagMgrTs.subPropByName("绿宝石",this.skinValue),k.Instance.buySkin(this.skinName),o.ShowTip("购买"+this.skinName+"成功！"),s.getScene().emit("哈基米世界_刷新皮肤数据")):o.ShowTip("购买失败,绿宝石不足！")}else k.Instance.changeSkin(this.skinName),o.ShowTip("已成功穿戴"+this.skinName),s.getScene().emit("哈基米世界_刷新皮肤数据")}initData(t){this.skinSprite=this.node.getChildByName("皮肤图片").getComponent(a),this.skinNameLabel=this.node.getChildByName("皮肤名").getComponent(n),this.skinStateLabel=this.node.getChildByName("获得状态").getComponent(n),this.wearStateLabel=this.node.getChildByName("穿戴状态").getComponent(n),this.skinName=t.Name,this.skinValue=t.SkinValue,this.skinState=t.SkinState,this.wearState=t.WearState,this.skinType=t.SkinType,this.skinNameLabel.string=this.skinName,this.skinStateLabel.string=this.skinState,this.wearStateLabel.string=this.wearState,"未获得"==this.skinState?this.wearStateLabel.string=this.skinValue.toString()+"个绿宝石解锁":this.wearStateLabel.string=this.wearState.toString(),this.node.on(h.TOUCH_END,this.onClick,this),r.LoadSprite("Sprites/角色/"+this.skinName).then((t=>{this.skinSprite.spriteFrame=t}))}refreshData(t){this.skinName=t.Name,this.skinValue=t.SkinValue,this.skinState=t.SkinState,this.wearState=t.WearState,this.skinType=t.SkinType,this.skinNameLabel.string=this.skinName,this.skinStateLabel.string=this.skinState,this.wearStateLabel.string=this.wearState,"未获得"==this.skinState?this.wearStateLabel.string=this.skinValue.toString()+"个绿宝石解锁":this.wearStateLabel.string=this.wearState.toString()}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Shift.ts",["cc","./HJMSJ_Player.ts","./HJMSJ_GameMgr.ts"],(function(t){var e,n,o,s,c,i,h,r,a,u;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.NodeEventType,s=t.input,c=t.Input,i=t.KeyCode,h=t.director,r=t._decorator},function(t){a=t.HJMSJ_Player},function(t){u=t.HJMSJ_GameMgr}],execute:function(){var _;e._RF.push({},"21daftxYHtAf5cZeJ2YxvRa","HJMSJ_Shift",void 0);const{ccclass:p,property:S}=r;t("HJMSJ_Shift",p("HJMSJ_Shift")(_=class extends n{constructor(...t){super(...t),this.playerTs=null}start(){this.playerTs=u.instance.playerNode.getComponent(a),this.node.on(o.TOUCH_START,this.onTouchStart,this),this.node.on(o.TOUCH_END,this.onTouchEnd,this),this.node.on(o.TOUCH_CANCEL,this.onTouchCancel,this),s.on(c.EventType.KEY_DOWN,this.onKeyDown,this),s.on(c.EventType.KEY_UP,this.onKeyUp,this)}update(t){}onKeyDown(t){}onKeyUp(t){switch(t.keyCode){case i.SHIFT_LEFT:h.getScene().emit("哈基米世界_闪避")}}onTouchStart(t){}onTouchEnd(t){h.getScene().emit("哈基米世界_闪避")}onTouchCancel(t){}})||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_SkinStore.ts",["cc","./HJMSJ_GameData.ts","./HJMSJ_Role.ts"],(function(t){var e,n,i,o,a,s,c,r,S;return{setters:[function(t){e=t.cclegacy,n=t.Component,i=t.ScrollView,o=t.director,a=t.UIOpacity,s=t.tween,c=t._decorator},function(t){r=t.HJMSJ_GameData},function(t){S=t.HJMSJ_Role}],execute:function(){var h;e._RF.push({},"013f5jZHvpDSLzBo+nfXISf","HJMSJ_SkinStore",void 0);const{ccclass:l,property:g}=c;t("HJMSJ_SkinStore",l("HJMSJ_SkinStore")(h=class extends n{constructor(...t){super(...t),this.SkinMgr=null,this.SkinStoreNode=null}start(){this.SkinStoreNode=this.node.getChildByName("皮肤界面"),this.SkinMgr=this.node.getChildByName("皮肤界面").getComponentInChildren(i),this.initSkin(),o.getScene().on("哈基米世界_刷新皮肤数据",this.refreshData,this),o.getScene().on("哈基米世界_交互",(t=>{"皮肤商城"===t&&this.open()}),this)}initSkin(){for(let t=0;t<r.Instance.SkinData.length;t++){let e=r.Instance.SkinData[t];this.SkinMgr.content.children[t].getComponent(S).initData(e)}}refreshData(){for(let t=0;t<r.Instance.SkinData.length;t++){let e=r.Instance.SkinData[t];this.SkinMgr.content.children[t].getComponent(S).refreshData(e)}}onBtnClick(t){switch(t.target.name){case"返回键":this.close()}}open(){this.SkinStoreNode.active=!0,this.node.getChildByName("bg").active=!0;let t=this.getComponent(a);s(t).to(.3,{opacity:255}).start()}close(){let t=this.getComponent(a);s(t).to(.3,{opacity:0}).call((()=>{this.SkinStoreNode.active=!1,this.node.getChildByName("bg").active=!1})).start()}})||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_SnowBall.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Player.ts","./HJMSJ_GameMgr.ts"],(function(t){var e,i,o,n,r,s,l,a,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t._decorator,r=t.Component,s=t.v3,l=t.Collider2D,a=t.Contact2DType},function(t){c=t.HJMSJ_Player},function(t){h=t.HJMSJ_GameMgr}],execute:function(){var d,p,u,y,S,J,m;o._RF.push({},"370dfkImcdKFrqxp5+YaS+V","HJMSJ_SnowBall",void 0);const{ccclass:f,property:D}=n;t("HJMSJ_SnowBall",(d=f("HJMSJ_SnowBall"),p=D(),u=D(),d((J=e((S=class extends r{constructor(...t){super(...t),i(this,"moveSpeed",J,this),i(this,"ATK",m,this),this.Dir=s(0,0,0),this.isInit=!1,this.isDestory=!1,this.colider=null,this.playerNode=null}start(){this.colider=this.getComponent(l),this.colider.on(a.BEGIN_CONTACT,this.onStartContact,this),this.playerNode=h.instance.playerNode}update(t){if(!this.isDestory&&this.isInit){let e=s(this.Dir.x*this.moveSpeed*t,this.Dir.y*this.moveSpeed*t,0);this.node.worldPosition=this.node.worldPosition.add(e)}}init(t){this.isInit=!0,this.Dir=t,this.scheduleOnce((()=>{this.isInit=!1,this.node.destroy()}),10)}onStartContact(t,e,i){if("Player"==e.node.name){this.isDestory=!0,e.node.getComponent(c).onAttack(-this.ATK,this.getPlayerDir()),this.node.destroy()}}getPlayerDir(){return this.node.worldPosition.clone().subtract(this.playerNode.worldPosition.clone()).clone().normalize().negative()}}).prototype,"moveSpeed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=e(S.prototype,"ATK",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),y=S))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_SnowEffect.ts",["cc"],(function(t){var e,c,s,o;return{setters:[function(t){e=t.cclegacy,c=t.Component,s=t.ParticleSystem2D,o=t._decorator}],execute:function(){var r;e._RF.push({},"07a6dvDPv1Is5JfiOY5nuXT","HJMSJ_SnowEffect",void 0);const{ccclass:n,property:i}=o;t("HJMSJ_SnowEffect",n("HJMSJ_SnowEffect")(r=class extends c{constructor(...t){super(...t),this.Particle=null}start(){this.Particle=this.getComponent(s),this.schedule(this.LoopEffect,10)}LoopEffect(){this.Particle&&this.Particle.resetSystem()}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_SnowMan.ts",["cc","./HJMSJ_AIPlayer.ts","./HJMSJ_Player.ts"],(function(t){var e,s,n,i,a,r;return{setters:[function(t){e=t.cclegacy,s=t.v3,n=t.tween,i=t._decorator},function(t){a=t.HJMSJ_AIPlayer},function(t){r=t.HJMSJ_Player}],execute:function(){var l;e._RF.push({},"53beaOoNs1JELk6QNxFYjHz","HJMSJ_SnowMan",void 0);const{ccclass:o,property:c}=i;t("HJMSJ_SnowMan",o("HJMSJ_SnowMan")(l=class extends a{Attack(){this.isAttacking||(this.isAttacking=!0,this.scheduleOnce((()=>{let t=this.playerNode.getComponent(r);if(this.getPlayerDistance().length()<this.MinDistance){let e=this.getPlayerDir();t.repelDistance=100,t.onAttack(-this.ATK,e),t.Shake(2,.3)}this.isAttacking=!1}),.4))}onMove(t){this._dir=s(t.x,t.y,0),this._dir.x<0&&0===this.Model.eulerAngles.y&&(n(this.Model).to(.2,{eulerAngles:s(0,180,0)},{easing:"backInOut"}).start(),n(this.handProp).to(.2,{eulerAngles:s(0,180,0)},{easing:"backInOut"}).call((()=>{this.forwardDir=-1})).start()),this._dir.x>0&&180===this.Model.eulerAngles.y&&(n(this.Model).to(.2,{eulerAngles:s(0,0,0)},{easing:"backInOut"}).start(),n(this.handProp).to(.2,{eulerAngles:s(0,0,0)},{easing:"backInOut"}).call((()=>{this.forwardDir=1})).start())}DropProp(){}shake(){}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Start.ts",["cc"],(function(t){var e,c,r,a;return{setters:[function(t){e=t.cclegacy,c=t.Component,r=t.director,a=t._decorator}],execute:function(){var s;e._RF.push({},"36570skh+JDObo9qzuWePTK","HJMSJ_Start",void 0);const{ccclass:n,property:o}=a;t("HJMSJ_Start",n("HJMSJ_Start")(s=class extends c{start(){}update(t){}onBtnClick(t){switch(t.target.name){case"开始游戏":r.loadScene("HJMSJ_Game")}}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Store.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Constant.ts","./HJMSJ_BuyProp.ts","./HJMSJ_GameMgr.ts","./HJMSJ_GameData.ts","./HJMSJ_BagMgr.ts","./Banner.ts"],(function(e){var t,i,a,n,o,s,r,c,l,g,h,p,u,d,J,S,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e.Prefab,o=e._decorator,s=e.Component,r=e.PageView,c=e.director,l=e.instantiate,g=e.UIOpacity,h=e.tween},function(e){p=e.HJMSJ_Constant},function(e){u=e.HJMSJ_BuyProp},function(e){d=e.HJMSJ_GameMgr},function(e){J=e.HJMSJ_GameData},function(e){S=e.HJMSJ_BagMgr},function(e){y=e.default}],execute:function(){var M,f,m,_,B;a._RF.push({},"bf3af/jfGlHaJgex7lnbGi8","HJMSJ_Store",void 0);const{ccclass:C,property:H}=o;e("HJMSJ_Store",(M=C("HJMSJ_Store"),f=H(n),M((B=t((_=class extends s{constructor(...e){super(...e),i(this,"buyNode",B,this),this.storeNode=null,this.pageView=null}start(){this.storeNode=this.node.getChildByName("商店"),this.pageView=this.storeNode.getChildByName("PageView").getComponent(r),this.initData(),c.getScene().on("哈基米世界_交互",(e=>{"购买商店"===e&&this.open()}),this)}initData(){let e=0;for(let t=0;t<p.StoreData.length;t++){let i=l(this.buyNode);i.parent=this.pageView.content.children[e],4===this.pageView.content.children[e].children.length&&e++,i.getComponent(u).init(p.StoreData[t])}}onBtnClick(e){switch(e.target.name){case"上一页":this.prePage();break;case"下一页":this.nextPage();break;case"退出":this.close();break;case"观看广告":y.Instance.ShowVideoAd((()=>{J.Instance.pushKnapsackData("绿宝石",50,S.curBagID)&&d.instance.BagMgrTs.pushPropByName("绿宝石",50)}))}}open(){this.storeNode.active=!0,this.node.getChildByName("bg").active=!0,this.node.getChildByName("商店底框").active=!0;let e=this.getComponent(g);h(e).to(.3,{opacity:255}).start()}close(){let e=this.getComponent(g);h(e).to(.3,{opacity:0}).call((()=>{this.storeNode.active=!1,this.node.getChildByName("商店底框").active=!1,this.node.getChildByName("bg").active=!1})).start()}prePage(){let e=this.pageView.getCurrentPageIndex();e>0&&this.pageView.scrollToPage(e-1)}nextPage(){let e=this.pageView.getCurrentPageIndex();e<this.pageView.content.children.length-1&&this.pageView.scrollToPage(e+1)}}).prototype,"buyNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=_))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_SwitchMusic.ts",["cc","./HJMSJ_AudioManager.ts","./HJMSJ_Music.ts"],(function(t){var e,i,n,o,c,s,r,a,h;return{setters:[function(t){e=t.cclegacy,i=t.Component,n=t.ScrollView,o=t.director,c=t.UIOpacity,s=t.tween,r=t._decorator},function(t){a=t.HJMSJ_AudioManager},function(t){h=t.HJMSJ_Music}],execute:function(){var l;e._RF.push({},"4b42dlYit9ID4I/ylko720A","HJMSJ_SwitchMusic",void 0);const{ccclass:S,property:g}=r;t("HJMSJ_SwitchMusic",S("HJMSJ_SwitchMusic")(l=class extends i{constructor(...t){super(...t),this.SkinMgr=null,this.SkinStoreNode=null}start(){this.SkinStoreNode=this.node.getChildByName("切歌界面"),this.SkinMgr=this.node.getChildByName("切歌界面").getComponentInChildren(n),this.init(),o.getScene().on("哈基米世界_打开切歌",this.open,this)}init(){for(let t=0;t<a.instance.bgmNameArr.length;t++){let e=this.SkinMgr.content.children[t].getComponent(h);e.init(a.instance.bgmNameArr[t]),0===t&&e.onClick()}}onBtnClick(t){switch(t.target.name){case"关闭切歌":this.close()}}open(){this.SkinStoreNode.active=!0,this.node.getChildByName("bg").active=!0;let t=this.getComponent(c);s(t).to(.3,{opacity:255}).start()}close(){let t=this.getComponent(c);s(t).to(.3,{opacity:0}).call((()=>{this.SkinStoreNode.active=!1,this.node.getChildByName("bg").active=!1})).start()}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_UIGame.ts",["cc"],(function(e){var t,s,c,a;return{setters:[function(e){t=e.cclegacy,s=e.Component,c=e.director,a=e._decorator}],execute:function(){var i;t._RF.push({},"d173dJzDupHS4BaUsbn4SYe","HJMSJ_UIGame",void 0);const{ccclass:n,property:o}=a;e("HJMSJ_UIGame",n("HJMSJ_UIGame")(i=class extends s{start(){c.getScene().on("哈基米世界_死亡",this.lost,this)}update(e){}lost(){this.node.getChildByName("UI").active=!1,this.node.getChildByName("失败").active=!0,this.node.getChildByName("死亡背景").active=!0}OnNewCourseClick(){this.node.getChildByName("新手教程").active=!0}})||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_ValueMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_GameData.ts","./HJMSJ_GameMgr.ts"],(function(t){var e,i,n,r,s,h,a,l,o,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Sprite,s=t.Node,h=t._decorator,a=t.Component,l=t.Label,o=t.director},function(t){c=t.HJMSJ_GameData},function(t){u=t.HJMSJ_GameMgr}],execute:function(){var g,p,m,x,M,H,E,C,f,v,b;n._RF.push({},"53441zneL1Cc6VOGtvDb72a","HJMSJ_ValueMgr",void 0);const{ccclass:d,property:S}=h;t("HJMSJ_ValueMgr",(g=d("HJMSJ_ValueMgr"),p=S(r),m=S(r),x=S(r),M=S(s),g((C=e((E=class extends a{constructor(...t){super(...t),i(this,"HpMgr",C,this),i(this,"HungerMgr",f,this),i(this,"ArmorMgr",v,this),i(this,"ExpMgr",b,this),this.ExpBar=null,this.levelLabel=null,this.hp=10,this.hunger=10,this.armor=0,this.curExp=0,this.maxExp=10,this.isOnAttack=!1,this.timer=0,this.interval=3,this.couldAttack=!0}start(){this.hp=c.Instance.hp,this.hunger=c.Instance.hunger,this.armor=c.Instance.armor,this.curExp=c.Instance.curExp,this.maxExp=c.Instance.maxExp,this.ExpBar=this.ExpMgr.getChildByName("经验条").getComponent(r),this.levelLabel=this.ExpMgr.getChildByName("等级").getComponent(l),this.levelLabel.string=c.Instance.level.toString(),this.onHPChange(10),this.onHungerChange(0),this.onArmorChange(),this.onExpChange(0),o.getScene().on("哈基米世界_改变生命值",(t=>{this.onHPChange(t)}),this),o.getScene().on("哈基米世界_改变饥饿值",(t=>{this.onHungerChange(t)}),this),o.getScene().on("哈基米世界_改变经验值",(t=>{this.onExpChange(t)})),o.getScene().on("哈基米世界_改变护甲值",this.onArmorChange,this)}update(t){this.isOnAttack?(this.timer+=t,this.timer>=this.interval&&(this.timer=0,this.isOnAttack=!1,this.schedule(this.HungerCtrl,5))):this.unscheduleAllCallbacks()}HungerCtrl(){this.hunger>=9&&this.hp<10&&this.onHPChange(.5)}onHPChange(t){if(!(t<=0)||this.couldAttack){if(this.hp+=t,this.hp<=0){return this.unschedule(this.HungerCtrl),this.HpMgr.fillRange=0,c.Instance.GetPropNum("不死图腾")>0?void this.revive():(u.instance.Lost(),void o.getScene().emit("哈基米世界_死亡"))}this.hp>=10&&(this.hp=10),t<0&&(this.isOnAttack=!0),this.HpMgr.fillRange=this.hp/10,c.Instance.hp=this.hp}}onArmorChange(){this.armor=c.Instance.armor,this.ArmorMgr.fillRange=this.armor/10}onHungerChange(t){this.hunger+=t,this.HungerMgr.fillRange=this.hunger/10,c.Instance.hunger=this.hunger}onExpChange(t){this.curExp+=t,this.curExp>=this.maxExp&&(this.curExp-=this.maxExp,c.Instance.level++,this.levelLabel.string=c.Instance.level.toString());let e=this.curExp/this.maxExp;this.ExpBar.fillRange=e,c.Instance.curExp=this.curExp}revive(){c.Instance.SubKnapsackData("不死图腾",1)&&(u.instance.revive(),this.hp=10,this.onHPChange(0),this.couldAttack=!1,this.scheduleOnce((()=>{this.couldAttack=!0}),1.5))}}).prototype,"HpMgr",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(E.prototype,"HungerMgr",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(E.prototype,"ArmorMgr",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(E.prototype,"ExpMgr",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=E))||H));n._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_Work.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Composition.ts","./HJMSJ_GameData.ts","./HJMSJ_BagMgr.ts","./UIManager.ts"],(function(e){var t,r,i,o,s,n,a,p,h,l,c,u,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.SpriteFrame,s=e.Sprite,n=e.Node,a=e.Label,p=e._decorator,h=e.Component,l=e.director},function(e){c=e.HJMSJ_Composition},function(e){u=e.HJMSJ_GameData},function(e){m=e.HJMSJ_BagMgr},function(e){g=e.UIManager}],execute:function(){var f,S,P,d,b,M,J,k,N,B,y;i._RF.push({},"78ce6u1YHJCpYmnBATHwEPx","HJMSJ_Work",void 0);const{ccclass:_,property:C}=p;e("HJMSJ_Work",(f=_("HJMSJ_Work"),S=C({type:[o]}),P=C(s),d=C(n),b=C(a),f((k=t((J=class extends h{constructor(...e){super(...e),r(this,"propSptieFrames",k,this),r(this,"resSprite",N,this),r(this,"bagMgr",B,this),r(this,"resNumLabel",y,this),this.methodSprites=[],this.WorkBench=null,this.Panel=null,this.curProp=null}start(){this.WorkBench=this.node.getChildByName("工作台-底版"),this.Panel=this.node.getChildByName("面板");let e=this.WorkBench.getChildByName("所需物品").children;for(let t of e)this.methodSprites.push(t.getComponentInChildren(s));l.getScene().on("哈基米世界_交互",(e=>{"工作台"===e&&(this.Panel.active=!0)}))}update(e){}onBtnClick(e){switch(e.target.name){case"关闭工作台":this.WorkBench.active=!1,this.Panel.active=!1;break;case"开始制作":this.makeProp();break;default:let t=e.target.getComponent(c);t.compositionType?(this.WorkBench.active=!0,this.showMethod(t)):(this.WorkBench.active=!1,this.refreshSprite())}}makeProp(){if(!this.curProp)return;let e=[];for(let t=0;t<this.curProp.propNames.length;t++){let r=this.curProp.creatMethod.get(this.curProp.propNames[t]),i=r[0],o=r[1];console.log("需要:"+i+o+"个");let s=u.Instance.GetPropNum(i)>=o;e.push(s)}let t=!0;for(let r of e)r||(t=!1,console.log("无法合成"));if(t){for(let e=0;e<this.curProp.propNames.length;e++){let t=this.curProp.creatMethod.get(this.curProp.propNames[e]),r=t[0],i=t[1];if(u.Instance.getKnapsackLength()>=36)return void g.ShowTip("背包已满,无法添加"+this.curProp.resProp);if(u.Instance.SubKnapsackData(r,i)){this.bagMgr.getComponent(m).subPropByName(r,i),console.log("扣除成功")}}if(u.Instance.pushKnapsackData(this.curProp.resProp,this.curProp.resNum,m.curBagID)){this.bagMgr.getComponent(m).pushPropByName(this.curProp.resProp,this.curProp.resNum,m.curBagID),g.ShowTip("制作"+this.curProp.resProp+"成功!")}console.log(u.Instance.KnapsackData)}else g.ShowTip("材料不足,无法制作"+this.curProp.resProp)}showMethod(e){this.refreshSprite(),this.curProp=e;for(let t=0;t<e.propNames.length;t++){let r=e.creatMethod.get(e.propNames[t]);for(let i=0;i<r[1];i++){let o=r[2][i],s=this.getSprite(e.propNames[t]);this.methodSprites[o].spriteFrame=s}}let t=this.getSprite(e.node.name);this.resSprite.spriteFrame=t,this.resNumLabel.string=this.curProp.resNum}refreshSprite(){for(let e=0;e<this.methodSprites.length;e++)this.methodSprites[e].spriteFrame=null;this.resSprite.spriteFrame=null}getSprite(e){for(let t of this.propSptieFrames)if(t.name==e)return t}}).prototype,"propSptieFrames",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(J.prototype,"resSprite",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(J.prototype,"bagMgr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(J.prototype,"resNumLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=J))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_WorldBtn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HJMSJ_Incident.ts","./HJMSJ_GameMgr.ts"],(function(t){var e,n,i,o,r,c,s,a,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t._decorator,r=t.Component,c=t.NodeEventType,s=t.instantiate,a=t.director},function(t){l=t.HJMSJ_Incident},function(t){p=t.HJMSJ_GameMgr}],execute:function(){var u,J,d,M,_;i._RF.push({},"940efb3aOlK94gmDcWHHMki","HJMSJ_WorldBtn",void 0);const{ccclass:f,property:H}=o;t("HJMSJ_WorldBtn",(u=f("HJMSJ_WorldBtn"),J=H(),u((_=e((M=class extends r{constructor(...t){super(...t),n(this,"mapID",_,this)}start(){this.node.on(c.TOUCH_END,this.onClick,this)}onClick(){p.instance.isBossMap,console.log("准备更换地图"+this.mapID),l.Loadprefab("Prefabs/地图/"+this.mapID).then((t=>{let e=s(t);p.instance.changeMap(e),a.getScene().emit("哈基米世界_更换世界地图")}))}}).prototype,"mapID",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=M))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/HJMSJ_WorldMap.ts",["cc"],(function(t){var e,o,c,s,i,n;return{setters:[function(t){e=t.cclegacy,o=t.Component,c=t.director,s=t.UIOpacity,i=t.tween,n=t._decorator}],execute:function(){var a;e._RF.push({},"9440fd6leVAJ5oYsZLDmOkB","HJMSJ_WorldMap",void 0);const{ccclass:r,property:l}=n;t("HJMSJ_WorldMap",r("HJMSJ_WorldMap")(a=class extends o{start(){c.getScene().on("哈基米世界_交互",(t=>{"世界地图"===t&&this.open()}),this),c.getScene().on("哈基米世界_更换世界地图",this.close,this)}onBtnClick(t){"退出页面"===t.target.name&&this.close()}open(){this.node.getChildByName("bg").active=!0,this.node.getChildByName("地图界面").active=!0;let t=this.getComponent(s);i(t).to(.3,{opacity:255}).start()}close(){let t=this.getComponent(s);i(t).to(.3,{opacity:0}).call((()=>{this.node.getChildByName("bg").active=!1,this.node.getChildByName("地图界面").active=!1})).start()}})||a);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/39_HJMSJ', 'chunks:///_virtual/39_HJMSJ'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});