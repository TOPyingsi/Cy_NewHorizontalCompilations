System.register("chunks:///_virtual/0_XGTW",["./XGTW_Data.ts","./XGTW_Constant.ts","./XGTW_AchievementManager.ts","./XGTW_DataManager.ts","./XGTW_Event.ts","./XGTW_GuideManager.ts","./XGTW_IncidentManager.ts","./XGTW_UIManager.ts","./XGTW_Broadcast.ts","./XGTW_CommonTipPanel.ts","./XGTW_FloatingText.ts","./XGTW_SearchPanel.ts","./XGTW_SelectMapPanel.ts","./XGTW_ZhuangJiaPanel.ts","./XGTW_AchievementItem.ts","./XGTW_BGTransform.ts","./XGTW_BackpackItem.ts","./XGTW_BackpackPanel.ts","./XGTW_BackpackWeaponButton.ts","./XGTW_BuyPanel.ts","./XGTW_CommonItem.ts","./XGTW_EnergyTipPanel.ts","./XGTW_EquipInfoPanel.ts","./XGTW_FailPanel.ts","./XGTW_FreeRewardPanel.ts","./XGTW_GameBackpackPanel.ts","./XGTW_GameInventoryPanel.ts","./XGTW_GameItemUI.ts","./XGTW_GamePanel.ts","./XGTW_GoodsItem.ts","./XGTW_HPBar.ts","./XGTW_HeiShiButton.ts","./XGTW_HeiShiPanel.ts","./XGTW_InventoryButton.ts","./XGTW_InventoryPanel.ts","./XGTW_Item.ts","./XGTW_ItemDetailPanel.ts","./XGTW_ItemInfoPanel.ts","./XGTW_ItemNameTitle.ts","./XGTW_KanChaShopPanel.ts","./XGTW_RankPanel.ts","./XGTW_RewardPanel.ts","./XGTW_SItem.ts","./XGTW_SeasonItem.ts","./XGTW_ShopPanel.ts","./XGTW_SkinItem.ts","./XGTW_SkinShopPanel.ts","./XGTW_SpecialSkinDetailPanel.ts","./XGTW_SpecialSkinItem.ts","./XGTW_SpecialSkinShopPanel.ts","./XGTW_SpecialSkinShopPanel_.ts","./XGTW_StartPanel.ts","./XGTW_ValueBar.ts","./XGTW_WeaponInfoPanel.ts","./XGTW_WinPanel.ts","./XGTW_XunZhangPanel.ts","./XGTW_ZaHuoItem.ts","./XGTW_AudioManager.ts","./XGTW_Bullet.ts","./XGTW_CameraController.ts","./XGTW_DroppedItem.ts","./XGTW_EnemyBOSSController.ts","./XGTW_EnemyController.ts","./XGTW_FireGun.ts","./XGTW_GameManager.ts","./XGTW_Grenade.ts","./XGTW_GrenadeListener.ts","./XGTW_Missile.ts","./XGTW_PlayerController.ts","./XGTW_Supplies.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/XGTW_AchievementItem.ts",["cc","./NodeUtil.ts","./BundleManager.ts","./GameManager.ts","./XGTW_AchievementManager.ts"],(function(e){var t,i,s,n,h,o,c,a,d;return{setters:[function(e){t=e.cclegacy,i=e.Component,s=e.Sprite,n=e.RichText,h=e._decorator},function(e){o=e.default},function(e){c=e.BundleManager},function(e){a=e.GameManager},function(e){d=e.XGTW_AchievementType}],execute:function(){var r;t._RF.push({},"5bb347h5udMTqfVN1Cm4Fjk","XGTW_AchievementItem",void 0);const{ccclass:l,property:m}=h;e("default",l("XGTW_AchievementItem")(r=class extends i{constructor(...e){super(...e),this.Achievement_0=null,this.Achievement_1=null,this.Achievement_2=null,this.Icon=null,this.TitleLb=null,this.DescLb=null,this.StateLb=null,this.common=["#ffffff","#6b696b"],this.rare=["#c6c3c6","#6b6d6b"],this.epic=["#ffd300","#846510"],this.red=["#c62008","#730c08"],this.data=null}onLoad(){this.Achievement_0=o.GetNode("Achievement_0",this.node),this.Achievement_1=o.GetNode("Achievement_1",this.node),this.Achievement_2=o.GetNode("Achievement_2",this.node),this.Icon=o.GetComponent("Icon",this.node,s),this.TitleLb=o.GetComponent("TitleLb",this.node,n),this.DescLb=o.GetComponent("DescLb",this.node,n),this.StateLb=o.GetComponent("StateLb",this.node,n)}Init(e){this.TitleLb.node.active=!0,this.DescLb.node.active=!0,this.StateLb.node.active=!0,this.data=e,this.Refresh()}InitTip(e){this.data=e,this.Refresh(),this.TitleLb.node.active=!0,this.DescLb.node.active=!1,this.StateLb.node.active=!1}Refresh(){let e=["#ffffff","#6b696b"];this.data.Type==d.Common&&(e=this.common),this.data.Type==d.Rare&&(e=this.rare),this.data.Type==d.Epic&&(e=this.epic),this.StateLb.node.active=!this.data.Done,this.Achievement_0.active=this.data.Type==d.Common,this.Achievement_1.active=this.data.Type==d.Rare,this.Achievement_2.active=this.data.Type==d.Epic,this.TitleLb.string=`<b><size=45><outline color=${e[1]} width = 4 ><color=${e[0]}>${this.data.Name}</color></outline></size></b>`,this.DescLb.string=`<b><size=35><outline color=${e[1]} width = 4 ><color=${e[0]}>${this.data.Desc}</color></outline></size></b>`,this.StateLb.string=`<b><size=40><outline color=${this.red[1]} width = 4 ><color=${this.red[0]}>未完成</color></outline></size></b>`,c.LoadSpriteFrame(a.GameData.DefaultBundle,`Res/Sprites/Achievement/${this.data.Name}`).then((e=>{this.Icon.spriteFrame=e}))}})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_AchievementManager.ts",["cc","./XGTW_Constant.ts","./PrefsManager.ts","./TweenUtil.ts","./PoolManager.ts","./XGTW_DataManager.ts","./XGTW_AchievementItem.ts","./GameManager.ts"],(function(e){var t,n,i,a,s,c,o,h,m,r,u,l,v;return{setters:[function(e){t=e.cclegacy,n=e.v3,i=e.view,a=e.find,s=e.Tween,c=e.UIOpacity,o=e.tween},function(e){h=e.XGTW_Constant},function(e){m=e.default},function(e){r=e.EasingType},function(e){u=e.PoolManager},null,function(e){l=e.default},function(e){v=e.GameManager}],execute:function(){t._RF.push({},"8a95dZ+87pKBLLcMOwZToQh","XGTW_AchievementManager",void 0);e("XGTW_AchievementType",function(e){return e[e.Common=0]="Common",e[e.Rare=1]="Rare",e[e.Epic=2]="Epic",e[e.Legendary=3]="Legendary",e[e.Ancient=4]="Ancient",e[e.Mythic=5]="Mythic",e}({})),e("XGTW_EAchievement",function(e){return e["小试牛刀"]="小试牛刀",e["菜就多练"]="菜就多练",e["不讲武德"]="不讲武德",e["这里不是披萨塔"]="这里不是披萨塔",e["根本死不掉"]="根本死不掉",e["这才值钱"]="这才值钱",e["根本花不完"]="根本花不完",e["RPK专家"]="RPK专家",e["AX50专家"]="AX50专家",e}({}));class p{static CheckAchievement(e){}static AddAchievementTimes(e){m.SetNumber(`${h.Key.AchievementTimes}_${e}`,this.GetAchievementTimes(e)+1),this.CheckAchievement(e)}static GetAchievementTimes(e){return m.GetNumber(`${h.Key.AchievementTimes}_${e}`,0)}static ShowAchievementTip(e){if(!this.AchievementMap.has(e))return;console.log(`解锁成就：${e}`);let t=this.AchievementMap.get(e),h=n(i.getVisibleSize().width/2-150,i.getVisibleSize().height/2+256);u.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/AchievementItem",a("Canvas")).then((e=>{e.getComponent(l).InitTip(t),s.stopAllByTarget(e),e.setPosition(h),e.addComponent(c).opacity=255,o(e).to(1,{position:n(e.position.x,e.position.y-450)},{easing:r.elasticInOut}).delay(1).call((()=>{u.PutNode(e)})).start(),o(e.getComponent(c)).delay(2).to(.5,{opacity:0},{easing:r.quartIn}).start()}))}}e("XGTW_AchievementManager",p),p.AchievementMap=new Map;e("XGTW_AchievementData",class{constructor(e,t,n){this.Name=void 0,this.Desc=void 0,this.Type=void 0,this.Name=e,this.Desc=t,this.Type=n}get Done(){return m.GetBool(this.Name,!1)}set Done(e){m.SetBool(this.Name,e)}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_AudioManager.ts",["cc","./BundleManager.ts"],(function(o){var e,u,a,n,c,d,i;return{setters:[function(o){e=o.cclegacy,u=o._decorator,a=o.Component,n=o.Node,c=o.AudioSource,d=o.AudioClip},function(o){i=o.BundleManager}],execute:function(){var r,t;e._RF.push({},"b4b74Xk1zJBEJBq6O/N6zLW","XGTW_AudioManager",void 0);const{ccclass:s,property:l}=u;o("XGTW_AudioManager",s("XGTW_AudioManager")(((t=class o extends a{static AudioClipPlay(e,u){o.audiosource||(o.audiosource=(new n).addComponent(c)),i.GetBundle("0_XGTW").load("AudioClip/"+e,d,((a,n)=>{a?console.log("没有找到音效文件："+e):o.audiosource.playOneShot(n,u)}))}static BGMPlay(e,u){o.audiosource||(o.audiosource=(new n).addComponent(c)),i.GetBundle("0_XGTW").load("AudioClip/"+e,d,((u,a)=>{u?console.log("没有找到音效文件："+e):(o.audiosource.clip=a,o.audiosource.play())}))}}).audiosource=null,r=t))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_BackpackItem.ts",["cc","./XGTW_GameBackpackPanel.ts","./XGTW_Item.ts","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./NodeUtil.ts","./EventManager.ts","./XGTW_Event.ts","./PoolManager.ts","./XGTW_DataManager.ts","./XGTW_Data.ts","./GameManager.ts"],(function(t){var e,a,n,i,s,l,o,u,r,c,h,d,m,_,p,f;return{setters:[function(t){e=t.cclegacy,a=t.Component,n=t.Label,i=t._decorator},function(t){s=t.default},function(t){l=t.default},function(t){o=t.XGTW_AudioManager},function(t){u=t.XGTW_Constant,r=t.XGTW_ItemType},function(t){c=t.default},function(t){h=t.EventManager},function(t){d=t.XGTW_Event},function(t){m=t.PoolManager},function(t){_=t.XGTW_DataManager},function(t){p=t.XGTW_ItemData},function(t){f=t.GameManager}],execute:function(){var b;e._RF.push({},"55070+IlbtOyY6r2ICxaKWG","XGTW_BackpackItem",void 0);const{ccclass:G,property:B}=i;t("default",G("XGTW_BackpackItem")(b=class extends a{constructor(...t){super(...t),this.NameLabel=null,this.WeightLabel=null,this.PriceLabel=null,this.Button_0Label=null,this.Button_1Label=null,this.Item=null,this.Buttons=null,this.data=void 0,this.cb_0=null,this.cb_1=null}onLoad(){this.NameLabel=c.GetComponent("NameLabel",this.node,n),this.WeightLabel=c.GetComponent("WeightLabel",this.node,n),this.PriceLabel=c.GetComponent("PriceLabel",this.node,n),this.Button_0Label=c.GetComponent("Button_0Label",this.node,n),this.Button_1Label=c.GetComponent("Button_1Label",this.node,n),this.Item=c.GetNode("Item",this.node),this.Buttons=c.GetNode("Buttons",this.node)}Init(t,e=null,a=null,n="丢弃",i="存加密"){this.Buttons.active=!1,this.data=t,this.cb_0=e,this.cb_1=a,this.Button_0Label.string=n,this.Button_1Label.string=i,this.NameLabel.string=`${t.Name}`,this.WeightLabel.string=`${t.Weight}`,this.PriceLabel.string=`${t.Price}`,this.Item.children.forEach((t=>m.PutNode(t))),m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/Item",this.Item).then((e=>{e.getComponent(l).InitSimple(t)}))}SetSelect(t){this.Buttons.active=t==this.data}OnButtonClick(t){switch(o.AudioClipPlay(u.Audio.ButtonClick),t.target.name){case"BackpackItem":const t=()=>{_.RemoveItemFromBackpack(this.data),h.Scene.emit(d.RefreshBackpackGoodsItem),h.Scene.emit(d.RefreshInventoryButtons),h.Scene.emit(d.RefreshEquip)};let e=p.GetItemType(this.data.Type);if(p.IsMainGun(e)&&null==_.PlayerData.Weapon_0)return _.PlayerData.Weapon_0=this.data,void t();if(p.IsMainGun(e)&&null==_.PlayerData.Weapon_1)return _.PlayerData.Weapon_1=this.data,void t();if(e==r.手枪&&null==_.PlayerData.Pistol)return _.PlayerData.Pistol=this.data,void t();if(e==r.近战&&null==_.PlayerData.MeleeWeapon)return _.PlayerData.MeleeWeapon=this.data,void t();if(e==r.头盔&&null==_.PlayerData.Helmet)return _.PlayerData.Helmet=this.data,void t();if(e==r.防弹衣&&null==_.PlayerData.Bulletproof)return _.PlayerData.Bulletproof=this.data,void t();if(e==r.背包&&null==_.PlayerData.Backpack)return _.PlayerData.Backpack=this.data,void t();s.Instance.RefreshItemSelect(this.data);break;case"Button_0":this.cb_0&&this.cb_0(this.data);break;case"Button_1":this.cb_1&&this.cb_1(this.data)}}})||b);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_BackpackPanel.ts",["cc","./XGTW_Item.ts","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./UIManager.ts","./NodeUtil.ts","./XGTW_DataManager.ts","./GameManager.ts","./BundleManager.ts","./ProjectEventManager.ts"],(function(t){var e,a,c,s,o,n,i,l,h,r,k,u,m,B;return{setters:[function(t){e=t.cclegacy,a=t.Component,c=t.instantiate,s=t._decorator},function(t){o=t.default},function(t){n=t.XGTW_AudioManager},function(t){i=t.XGTW_Constant},function(t){l=t.UIManager},function(t){h=t.default},function(t){r=t.XGTW_DataManager},function(t){k=t.GameManager},function(t){u=t.BundleManager},function(t){m=t.ProjectEventManager,B=t.ProjectEvent}],execute:function(){var d;e._RF.push({},"fc893nEvZZKapyDcu2zI9Nh","XGTW_BackpackPanel",void 0);const{ccclass:I,property:p}=s;t("default",I("XGTW_BackpackPanel")(d=class extends a{constructor(...t){super(...t),this.QualityBar=null,this.BackpackScrollViewContent=null,this.LockboxScrollViewContent=null,this.SellButton=null,this.PutButton=null,this.BackpackItems=[],this.LockBoxItems=[],this.SelectData=null}onLoad(){this.QualityBar=h.GetNode("QualityBar",this.node),this.BackpackScrollViewContent=h.GetNode("BackpackScrollViewContent",this.node),this.LockboxScrollViewContent=h.GetNode("LockboxScrollViewContent",this.node),this.SellButton=h.GetNode("SellButton",this.node),this.PutButton=h.GetNode("PutButton",this.node)}Show(){m.emit(B.弹出窗口,k.GameData.gameName),this.node.active||(this.node.active=!0),this.RefreshItems(),this.SellButton.active=!1,this.PutButton.active=!1}RefreshItems(){this.RefreshBackpackItems(),this.RefreshLockItems()}RefreshBackpackItems(){console.error("RefreshBackpackItems1",this.BackpackItems),this.BackpackItems.forEach((t=>t.node.destroy())),console.error("RefreshBackpackItems2",this.BackpackItems),this.BackpackItems=[];for(let t=0;t<r.PlayerData.BackpackItems.length;t++){const e=r.PlayerData.BackpackItems[t];u.GetBundle(k.GameData.DefaultBundle).load("Prefabs/UI/Item",((t,a)=>{let s=c(a);s.setParent(this.BackpackScrollViewContent);let n=s.getComponent(o);n.Init(e,this.OnItemCallback.bind(this),!1),this.BackpackItems.push(n)}))}}RefreshLockItems(){this.LockBoxItems.forEach((t=>t.node.destroy())),this.LockBoxItems=[];for(let t=0;t<r.PlayerData.LockboxItems.length;t++){const e=r.PlayerData.LockboxItems[t];u.GetBundle(k.GameData.DefaultBundle).load("Prefabs/UI/Item",((t,a)=>{let s=c(a);s.setParent(this.LockboxScrollViewContent);let n=s.getComponent(o);n.Init(e,this.OnItemCallback.bind(this),!1),this.LockBoxItems.push(n)}))}}OnItemCallback(t){this.PutButton.active=!0,this.SellButton.active=!0,this.SelectData=t,this.BackpackItems.forEach((e=>e.SetSelect(t))),this.LockBoxItems.forEach((e=>e.SetSelect(t)))}Hide(){this.node.active&&(this.node.active=!1)}OnButtonClick(t){switch(n.AudioClipPlay(i.Audio.ButtonClick),t.target.name){case"SellButton":if(this.SelectData){let t=0;for(let e=0;e<this.BackpackItems.length;e++)r.RemoveItemFromBackpack(this.BackpackItems[e].data)&&(t+=this.BackpackItems[e].data.Price*this.BackpackItems[e].data.Count);this.RefreshItems(),r.Money+=t,l.ShowTip(`获得金钱${t}`)}break;case"PutButton":this.SelectData&&(r.RemoveItemFromBackpack(this.SelectData)&&r.AddPlayerItem(this.SelectData),r.RemoveItemFromLockbox(this.SelectData)&&r.AddPlayerItem(this.SelectData),this.RefreshItems());break;case"ReturnButtton":this.Hide()}}})||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_BackpackWeaponButton.ts",["cc","./BundleManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./XGTW_Constant.ts","./GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./XGTW_Data.ts","./XGTW_DataManager.ts","./XGTW_AudioManager.ts"],(function(e){var a,t,n,s,o,i,l,r,c,p,u,m,d,h,y,B;return{setters:[function(e){a=e.cclegacy,t=e.Component,n=e.Sprite,s=e.Label,o=e.color,i=e._decorator},function(e){l=e.BundleManager},function(e){r=e.default},function(e){c=e.default},function(e){p=e.XGTW_Constant},function(e){u=e.GameManager},function(e){m=e.EventManager},function(e){d=e.XGTW_Event},function(e){h=e.XGTW_ItemData},function(e){y=e.XGTW_DataManager},function(e){B=e.XGTW_AudioManager}],execute:function(){var D;a._RF.push({},"0a298KWwspC2K+VYteDnef6","XGTW_BackpackWeaponButton",void 0);const{ccclass:k,property:_}=i;e("default",k("XGTW_BackpackWeaponButton")(D=class extends t{constructor(...e){super(...e),this.Icon=null,this.Name_Lb=null,this.Desc_Lb=null,this.Bullet_Lb=null,this.QualityBar=null,this.Accessories=null,this.data=null,this.defaultName=""}onLoad(){this.QualityBar=r.GetNode("QualityBar",this.node),this.Accessories=r.GetNode("Accessories",this.node),this.Icon=r.GetComponent("Icon",this.node,n),this.Name_Lb=r.GetComponent("Name_Lb",this.node,s),this.Desc_Lb=r.GetComponent("Desc_Lb",this.node,s),this.Bullet_Lb=r.GetComponent("Bullet_Lb",this.node,s),this.defaultName=this.Name_Lb.string}Refresh(e){if(this.data=e,this.QualityBar.getComponent(n).color=c.GetQualityColor(0),this.Icon.spriteFrame=null,this.Name_Lb.string=this.defaultName,this.Desc_Lb.string="",this.Bullet_Lb.string="",this.Accessories&&(this.Accessories.active=null!=e),e){this.QualityBar.getComponent(n).color=c.GetQualityColor(e.Quality),this.Icon.node.getComponent(n).color=o(255,e.Durable/e.MaxDurable*255,e.Durable/e.MaxDurable*255,255),this.Name_Lb.string=`${e.Name}`;let a=y.GetEquipGunSkin(e);a?l.LoadSpriteFrame(u.GameData.DefaultBundle,`Res/Sprites/Doggie/${a.Type}/${a.Name}`).then((e=>{this.Icon.spriteFrame=e})):l.LoadSpriteFrame(u.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name}`).then((e=>{this.Icon.spriteFrame=e})),this.Accessories&&this.RefreshAssories()}}RefreshAssories(){let e=h.GetAssories(h.GetItemType(this.data.Type));for(let a=0;a<this.Accessories.children.length;a++){const t=this.Accessories.children[a];if(t.active=e.find((e=>e==t.name)),t.active){t.getChildByName("Icon").getComponent(n).spriteFrame=null;let e=this.data.Assories.find((e=>e.Type==t.name));e&&l.LoadSpriteFrame(u.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name}`).then((e=>{t.getChildByName("Icon").getComponent(n).spriteFrame=e}))}}}OnButtonClick(e){B.AudioClipPlay(p.Audio.ButtonClick);const a=()=>{m.Scene.emit(d.RefreshBackpackGoodsItem),m.Scene.emit(d.RefreshInventoryButtons),m.Scene.emit(d.RefreshEquip)};switch(e.target.name){case"Weapon_0":y.PlayerData.Weapon_0&&(y.AddItemToBackpack(y.PlayerData.Weapon_0),y.RemovePlayerEquippedItem(y.PlayerData.Weapon_0),a());break;case"Weapon_1":y.PlayerData.Weapon_1&&(y.AddItemToBackpack(y.PlayerData.Weapon_1),y.RemovePlayerEquippedItem(y.PlayerData.Weapon_1),a());break;case"MeleeWeapon":y.PlayerData.MeleeWeapon&&(y.AddItemToBackpack(y.PlayerData.MeleeWeapon),y.RemovePlayerEquippedItem(y.PlayerData.MeleeWeapon),a());break;case"Pistol":y.PlayerData.Pistol&&(y.AddItemToBackpack(y.PlayerData.Pistol),y.RemovePlayerEquippedItem(y.PlayerData.Pistol),a());break;case"Helmet":y.PlayerData.Helmet&&(y.AddItemToBackpack(y.PlayerData.Helmet),y.RemovePlayerEquippedItem(y.PlayerData.Helmet),a());break;case"Bulletproof":y.PlayerData.Bulletproof&&(y.AddItemToBackpack(y.PlayerData.Bulletproof),y.RemovePlayerEquippedItem(y.PlayerData.Bulletproof),a());break;case"Backpack":y.PlayerData.Backpack&&(y.AddItemToBackpack(y.PlayerData.Backpack),y.RemovePlayerEquippedItem(y.PlayerData.Backpack),a())}}})||D);a._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_BGTransform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,s,h,n,r,o,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,h=t.Enum,n=t._decorator,r=t.Component,o=t.v2,c=t.view}],execute:function(){var a,l,p,u,y,d;s._RF.push({},"6e28cqcGwtIzbtpeCg5xA3M","XGTW_BGTransform",void 0);const{ccclass:x,property:f}=n;let b=t("Direction",function(t){return t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Up=2]="Up",t[t.Down=3]="Down",t}({}));t("default",(a=x("XGTW_BGTransform"),l=f({type:h(b)}),a((y=i((u=class extends r{constructor(...t){super(...t),e(this,"speed",y,this),e(this,"direction",d,this),this.main=null,this.sub=null,this.screen=o(),this.x=0,this.y=0,this.x_2=0,this.y_2=0}onLoad(){this.screen.set(o(c.getVisibleSize().width,c.getVisibleSize().height)),this.main=this.node.children[0],this.node.children.length>1&&(this.sub=this.node.children[1])}update(t){switch(this.x=this.main.position.x,this.y=this.main.position.y,this.direction){case b.Left:this.x-=t*this.speed,this.x<=-this.screen.x&&(this.x=0),this.x_2=this.x+this.screen.x;break;case b.Right:this.x+=t*this.speed,this.x>=this.screen.x&&(this.x=0),this.x_2=this.x-this.screen.x;break;case b.Up:this.y+=t*this.speed,this.y>=this.screen.y&&(this.y=0),this.y_2=this.y-this.screen.y;break;case b.Down:this.y-=t*this.speed,this.y<=-this.screen.y&&(this.y=0),this.y_2=this.y+this.screen.y}this.main.setPosition(this.x,this.y),this.sub.setPosition(this.x_2,this.y_2)}}).prototype,"speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=i(u.prototype,"direction",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.Left}}),p=u))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Broadcast.ts",["cc","./BundleManager.ts","./GameManager.ts","./PoolManager.ts","./Tools.ts"],(function(t){var e,o,s,n,a,i,d,l,r,c,h,p,m,u;return{setters:[function(t){e=t.cclegacy,o=t.v3,s=t.Component,n=t.Sprite,a=t.Label,i=t.UIOpacity,d=t.Tween,l=t.tween,r=t.Vec3,c=t._decorator},function(t){h=t.BundleManager},function(t){p=t.GameManager},function(t){m=t.PoolManager},function(t){u=t.Tools}],execute:function(){var g;e._RF.push({},"437beQLAjZIL4mNVp0LMimk","XGTW_Broadcast",void 0);const{ccclass:y,property:B}=c,S=o(0,100,0);t("default",y("XGTW_Broadcast")(g=class extends s{constructor(...t){super(...t),this.mask=null,this.tipLb=null}onLoad(){this.mask=this.node.getChildByName("Mask").getComponent(n),this.tipLb=this.node.getChildByName("TipLb").getComponent(a)}Show(t,e,s,n=.75,a=1){this.node.addComponent(i).opacity=255,this.tipLb.string=`${t}`,u.IsEmptyStr(e)?h.LoadSpriteFrame(p.GameData.DefaultBundle,"Res/Sprites/Doggie/个性化枪械/Common_Broadcast").then((t=>{this.mask.spriteFrame=t})):h.LoadSpriteFrame(p.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化枪械/${e}`).then((t=>{this.mask.spriteFrame=t})),this.node.setScale(0,0,0),this.node.setPosition(o(s.x,s.y)),d.stopAllByTarget(this.node),l(this.node).to(.5,{scale:r.ONE,position:o(s.x-250,s.y)},{easing:"elasticOut"}).delay(n).to(.25,{position:o(s.x-250,s.y+250),scale:r.ZERO}).call((()=>{m.PutNode(this.node)})).start(),l(this.node.getComponent(i)).delay(.5+n).to(.25,{opacity:0}).start()}ShowTween1(t=.75){this.node.setScale(0,0,0),this.node.setPosition(S),d.stopAllByTarget(this.node),l(this.node).to(.5,{scale:r.ONE},{easing:"elasticOut"}).delay(t).to(.25,{position:o(250,0),scale:r.ZERO}).call((()=>{m.PutNode(this.node)})).start()}ShowTween2(t=.75){this.node.setScale(r.ONE),this.node.setPosition(S),d.stopAllByTarget(this.node),l(this.node).delay(t).to(.25,{position:o(0,250)}).call((()=>{m.PutNode(this.node)})).start(),this.node.getComponent(i)||this.node.addComponent(i),l(this.node.getComponent(i)).delay(t).to(.25,{opacity:0}).start()}})||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Bullet.ts",["cc","./XGTW_Constant.ts","./PoolManager.ts","./GameManager.ts"],(function(t){var e,o,n,i,s,a,l,r,d,c,u,h,g;return{setters:[function(t){e=t.cclegacy,o=t.Component,n=t.RigidBody2D,i=t.v3,s=t.v2,a=t.BoxCollider2D,l=t.Contact2DType,r=t.find,d=t.Vec2,c=t._decorator},function(t){u=t.XGTW_Constant},function(t){h=t.PoolManager},function(t){g=t.GameManager}],execute:function(){var p;e._RF.push({},"0dbfe6VZYJG+YeTvn9WaNwv","XGTW_Bullet",void 0);const{ccclass:y,property:C}=c;t("default",y("XGTW_Bullet")(p=class extends o{constructor(...t){super(...t),this.rigidbody=null,this.target=null,this.weapon=null,this.playerData=null}onLoad(){this.rigidbody=this.node.getComponent(n)}Init(t,e,o){this.target=t,this.weapon=e,this.playerData=o;let n=i(this.node.right.clone().multiplyScalar(1e4));this.rigidbody.applyForceToCenter(s(n.x,n.y),!0),this.node.getComponent(a).on(l.BEGIN_CONTACT,this.onBeginContact,this)}InitBlank(t,e){this.target=t,this.rigidbody.applyLinearImpulseToCenter(e,!0),this.rigidbody.applyTorque(.5,!0)}onBeginContact(t,e,o){if(e.group==u.Group.Obstacle){const t=o.getWorldManifold();h.GetNodeByBundle(g.GameData.DefaultBundle,"Prefabs/Explosion",r("Canvas")).then((e=>{e.setWorldPosition(i(t.points[0].x,t.points[0].y)),e.angle=this.node.angle+180})),this.scheduleOnce((()=>{h.PutNode(this.node)}))}}update(t){this.target?d.distance(this.node.getWorldPosition(),this.target.getWorldPosition())>3500&&(this.rigidbody.linearVelocity=d.ZERO,h.PutNode(this.node)):(this.rigidbody.linearVelocity=d.ZERO,h.PutNode(this.node))}})||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_BuyPanel.ts",["cc","./XGTW_ValueBar.ts","./XGTW_AudioManager.ts","./BundleManager.ts","./XGTW_Constant.ts","./NodeUtil.ts","./XGTW_UIManager.ts","./UIManager.ts","./GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./PoolManager.ts","./Tools.ts","./XGTW_Data.ts","./XGTW_DataManager.ts"],(function(t){var e,a,n,s,u,o,i,l,h,r,B,c,d,f,G,p,m,y,I,C;return{setters:[function(t){e=t.cclegacy,a=t.Component,n=t.Sprite,s=t.Label,u=t._decorator},function(t){o=t.default},function(t){i=t.XGTW_AudioManager},function(t){l=t.BundleManager},function(t){h=t.XGTW_ItemType,r=t.XGTW_Constant},function(t){B=t.default},function(t){c=t.XGTW_UIManager},function(t){d=t.UIManager},function(t){f=t.GameManager},function(t){G=t.EventManager},function(t){p=t.XGTW_Event},function(t){m=t.PoolManager},function(t){y=t.Tools},function(t){I=t.XGTW_ItemData},function(t){C=t.XGTW_DataManager}],execute:function(){var T;e._RF.push({},"1f09d50J6ZDf7zqFFOS8CS0","XGTW_BuyPanel",void 0);const{ccclass:g,property:b}=u;t("default",g("XGTW_BuyPanel")(T=class extends a{constructor(...t){super(...t),this.TitleLabel=null,this.BuyBarLabel=null,this.BuyButtonLabel=null,this.Icon=null,this.ValuesContent=null,this.count=0,this.data=null,this.valueBars=[]}onLoad(){this.Icon=B.GetComponent("Icon",this.node,n),this.TitleLabel=B.GetComponent("TitleLabel",this.node,s),this.BuyBarLabel=B.GetComponent("BuyBarLabel",this.node,s),this.BuyButtonLabel=B.GetComponent("BuyButtonLabel",this.node,s),this.ValuesContent=B.GetNode("ValuesContent",this.node)}Show(t){this.data=t,this.count=1,this.TitleLabel.string=`${t.Name}`,l.LoadSpriteFrame(f.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.Icon.spriteFrame=t})),this.RefreshValues(t),this.Refresh()}RefreshValues(t){let e=!1;this.valueBars.forEach((t=>m.PutNode(t)));let a=h[`${t.Type}`];I.IsGun(a)&&(e=!0,m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(o).Init(t.Damage/90,"伤害"),this.valueBars.push(e)})),m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(o).Init((1.5-t.FireRate)/1.5,"射速"),this.valueBars.push(e)})),m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(o).Init(t.Recoil/.5,"后坐力"),this.valueBars.push(e)}))),I.IsEquip(a)&&(e=!0,m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(o).Init(t.Lv/5,"防护等级"),this.valueBars.push(e)})),m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(o).Init(t.Durability/100,"耐久度"),this.valueBars.push(e)}))),I.IsMedicine(a)&&(e=!0,m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(o).Init(t.HP/500,"血量"),this.valueBars.push(e)})),m.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(o).Init((6-t.Time)/6,"速度"),this.valueBars.push(e)}))),this.Icon.node.setPosition(-200,e?40:-30)}Refresh(){this.BuyBarLabel.string=`${this.count}`,this.BuyButtonLabel.string=""+this.count*this.data.Price}OnButtonClick(t){i.AudioClipPlay(r.Audio.ButtonClick);let e=this.data.Type==h[h.子弹]?30:5;switch(t.target.name){case"Mask":case"CloseButton":c.Instance.HidePanel(r.Panel.BuyPanel);break;case"BuyButton":if(C.Money>=this.count*this.data.Price){C.Money-=this.count*this.data.Price;for(let t=0;t<this.count;t++)C.AddPlayerItem(this.data,!0);d.ShowTip("购买成功"),G.Scene.emit(p.REFRESH_ITEMS)}else d.ShowTip("金钱不足");break;case"AddButton":this.count++,this.count=y.Clamp(this.count,1,e),this.Refresh();break;case"ReduceButton":this.count--,this.count=y.Clamp(this.count,1,e),this.Refresh()}}})||T);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_CameraController.ts",["cc","./TweenUtil.ts","./XGTW_GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./Tools.ts"],(function(t){var o,e,n,a,s,i,r,l,c,m,h,u,p;return{setters:[function(t){o=t.cclegacy,e=t.v3,n=t._decorator,a=t.Component,s=t.Camera,i=t.Tween,r=t.tween,l=t.Vec2},function(t){c=t.EasingType},function(t){m=t.default},function(t){h=t.EventManager},function(t){u=t.XGTW_Event},function(t){p=t.Tools}],execute:function(){var d,g;o._RF.push({},"9bc885ZvmZCXqbr+xqLMbZI","XGTW_CameraController",void 0);const{ccclass:C,property:f}=n,y=e(),T=e(),Z=e(),v=e();t("default",C("XGTW_CameraController")(((g=class t extends a{constructor(...t){super(...t),this.camera=null,this.stopFollow=!1}onLoad(){t.Instance=this,this.camera=this.node.getComponent(s)}Move(t){this.stopFollow=!0,this.node.getPosition(v),v.add(t.negative().multiplyScalar(5)),v.set(e(p.Clamp(v.x,-5e3,5e3),p.Clamp(v.y,-5e3,5e3))),this.node.setPosition(e(v.x,v.y,1e3))}ZoomIn(){i.stopAllByTarget(this.camera),r(this.camera).to(.2,{orthoHeight:400},{easing:c.quadIn}).start()}ZoomOut(t=600,o=null){i.stopAllByTarget(this.camera),r(this.camera).to(.2,{orthoHeight:t},{easing:c.quadIn}).start(),r(this.camera.node).to(.3,{position:e(this.camera.node.position.x,this.camera.node.position.y+1,this.camera.node.position.z)}).call((()=>{o&&o()})).start()}update(t){this.stopFollow||m.Instance.player&&(this.node.getPosition(y),m.Instance.player.getPosition(T),l.lerp(Z,y,T,.2),this.node.setPosition(e(Z.x,Z.y,1e3)))}onEnable(){h.on(u.CameraZoomIn,this.ZoomIn,this),h.on(u.CameraZoomOut,this.ZoomOut,this)}onDisable(){h.off(u.CameraZoomIn,this.ZoomIn,this),h.off(u.CameraZoomOut,this.ZoomOut,this)}}).Instance=null,d=g))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_CommonItem.ts",["cc","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_GameManager.ts","./GameManager.ts","./XGTW_Data.ts"],(function(t){var e,i,a,n,s,o,c,h,l,d,u,r,I;return{setters:[function(t){e=t.cclegacy,i=t.Component,a=t.Sprite,n=t.v3,s=t._decorator},function(t){o=t.XGTW_AudioManager},function(t){c=t.BundleManager},function(t){h=t.default},function(t){l=t.XGTW_ItemType,d=t.XGTW_Constant},function(t){u=t.default},function(t){r=t.GameManager},function(t){I=t.XGTW_ItemData}],execute:function(){var m;e._RF.push({},"16653osFK5C4bPr9VhfOO7b","XGTW_CommonItem",void 0);const{ccclass:p,property:S}=s;t("default",p("XGTW_CommonItem")(m=class extends i{constructor(...t){super(...t),this.Icon=null,this.Quality=null,this.Select=null,this.data=void 0,this.cb=null}onLoad(){this.Icon=h.GetComponent("Icon",this.node,a),this.Quality=h.GetNode("Quality",this.node),this.Select=h.GetNode("Select",this.node)}Init(t,e=null){this.cb=e,this.data=t,this.Select.active=!1,l[`${t.Type}`]==l.个性化枪械?(this.Icon.node.angle=-45,this.Icon.node.setScale(-1,1),c.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化枪械/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}))):l[`${t.Type}`]==l.个性化装扮?(this.Icon.node.angle=0,this.Icon.node.setScale(1,1),c.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化装扮/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}))):c.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.Icon.spriteFrame=t})),this.Quality.getComponent(a).color=u.GetQualityColor(t.Quality)}SetSelect(t){this.Select.active=t==this.data}"头盔"(t){this.data=t,this.Init(t),this.Icon.node.setScale(n(.5,.5))}"防弹衣"(t){this.data=t,this.Init(t),this.Icon.node.setScale(n(.8,.8))}"手枪"(t){this.data=t,this.Init(t),this.Icon.node.setScale(n(.8,.8))}"突击步枪"(t){this.data=t,this.Init(t)}"冲锋枪"(t){this.data=t,this.Init(t)}"射手步枪"(t){this.data=t,this.Init(t)}"栓动步枪"(t){this.data=t,this.Init(t)}"轻机枪"(t){this.data=t,this.Init(t)}"霰弹枪"(t){this.data=t,this.Init(t)}"投掷物"(t){this.data=t,this.Init(t)}"子弹"(t){this.data=t,this.Init(t),this.Icon.node.setScale(n(.8,.8))}"药品"(t){this.data=t,this.Init(t),this.Icon.node.setScale(I.GetScale(t.Type))}OnButtonClick(){o.AudioClipPlay(d.Audio.ButtonClick),this.cb&&this.cb(this.data)}})||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_CommonTipPanel.ts",["cc","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./Banner.ts","./Tools.ts"],(function(t){var n,e,o,s,i,l,a,u,c,h,_,b,r,p;return{setters:[function(t){n=t.cclegacy,e=t.Component,o=t.find,s=t.Label,i=t.RichText,l=t.Tween,a=t.Vec3,u=t.tween,c=t._decorator},function(t){h=t.XGTW_AudioManager},function(t){_=t.XGTW_Constant},function(t){b=t.XGTW_UIManager},function(t){r=t.default},function(t){p=t.Tools}],execute:function(){var d;n._RF.push({},"f1f92WwyLRIfoD5SSrLJ8Eu","XGTW_CommonTipPanel",void 0);const{ccclass:T,property:g}=c;t("default",T("XGTW_CommonTipPanel")(d=class extends e{constructor(...t){super(...t),this.panel=null,this.titleLb=null,this.contentLb=null,this.button_1=null,this.button_1_Lb=null,this.button_2=null,this.button_2_Lb=null,this.cb_1=null,this.cb_2=null}onLoad(){this.panel=o("Panel",this.node),this.titleLb=o("Panel/Title/Label",this.node).getComponent(s),this.contentLb=o("Panel/RichText",this.node).getComponent(i),this.button_1=o("Panel/Buttons/Button_1",this.node),this.button_1_Lb=o("Panel/Buttons/Button_1/Label",this.node).getComponent(s),this.button_2=o("Panel/Buttons/Button_2",this.node),this.button_2_Lb=o("Panel/Buttons/Button_2/Label",this.node).getComponent(s)}onDisable(){l.stopAllByTarget(this.panel),this.panel.setScale(a.ZERO)}Show(t,n="",e="",o=null,s=null,i="提示"){this.onDisable(),this.contentLb.string=`<b>${t}</b>`,this.titleLb.string=i,this.button_1_Lb.string=n,this.button_2_Lb.string=e,this.cb_1=o,this.cb_2=s,this.button_2.active=!p.IsEmptyStr(e),u(this.panel).to(.3,{scale:a.ONE},{easing:"backOut"}).call((()=>{r.RegionMask&&this.scheduleOnce((()=>{}),3),r.RegionMask&&r.Instance.ShowCustomAd()})).start()}OnButtonClick(t){switch(h.AudioClipPlay(_.Audio.ButtonClick),t.target.name){case"Button_1":this.cb_1&&this.cb_1();break;case"Button_2":this.cb_2&&this.cb_2();break;case"CloseButton":b.Instance.HidePanel(_.Panel.CommonTipPanel)}}})||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Constant.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"a6ee8wtlxhO2bq75hzv3X1b","XGTW_Constant",void 0);e("XGTW_ItemType",function(e){return e[e.None=0]="None",e[e["头盔"]=1]="头盔",e[e["防弹衣"]=2]="防弹衣",e[e["背包"]=3]="背包",e[e["手枪"]=4]="手枪",e[e["突击步枪"]=5]="突击步枪",e[e["冲锋枪"]=6]="冲锋枪",e[e["射手步枪"]=7]="射手步枪",e[e["栓动步枪"]=8]="栓动步枪",e[e["轻机枪"]=9]="轻机枪",e[e["霰弹枪"]=10]="霰弹枪",e[e["近战"]=11]="近战",e[e["弓弩"]=12]="弓弩",e[e["子弹"]=13]="子弹",e[e["瞄具"]=14]="瞄具",e[e["枪口"]=15]="枪口",e[e["弹匣"]=16]="弹匣",e[e["握把"]=17]="握把",e[e["枪托"]=18]="枪托",e[e["投掷物"]=19]="投掷物",e[e["钥匙"]=20]="钥匙",e[e["药品"]=21]="药品",e[e["食物"]=22]="食物",e[e["战利品"]=23]="战利品",e[e["金钱"]=24]="金钱",e[e["神秘商店"]=25]="神秘商店",e[e["热卖新品"]=26]="热卖新品",e[e["抽奖礼包"]=27]="抽奖礼包",e[e["快捷装备"]=28]="快捷装备",e[e["个性化枪械"]=29]="个性化枪械",e[e["个性化装扮"]=30]="个性化装扮",e[e["碎片装扮"]=31]="碎片装扮",e[e["特殊道具"]=32]="特殊道具",e}({})),e("XGTW_SuppliesType",function(e){return e[e.None=0]="None",e[e["保险柜"]=1]="保险柜",e[e["储物盒"]=2]="储物盒",e[e["医疗用品"]=3]="医疗用品",e[e["弹药箱"]=4]="弹药箱",e[e["武器箱"]=5]="武器箱",e[e["电脑"]=6]="电脑",e}({})),e("XGTW_GoodsType",function(e){return e[e.None=0]="None",e[e["杂物"]=1]="杂物",e[e["储物盒"]=2]="储物盒",e[e["医疗用品"]=3]="医疗用品",e[e["弹药箱"]=4]="弹药箱",e[e["武器箱"]=5]="武器箱",e[e["电脑"]=6]="电脑",e}({})),e("XGTW_ColorHex",function(e){return e.RED="#960000",e.PURPLE="#7B0096",e.GREEN="#0fff00",e.GOLD="#CFBA5E",e.BROWN="#B87942",e}({})),e("XGTW_Quality",function(e){return e[e.Common=0]="Common",e[e.Uncommon=1]="Uncommon",e[e.Rare=2]="Rare",e[e.Superior=3]="Superior",e[e.Epic=4]="Epic",e[e.Legendary=5]="Legendary",e[e.Mythic=6]="Mythic",e}({})),e("XGTW_QualityColorHex",function(e){return e.Common="#858585",e.Uncommon="#2fa170",e.Rare="#276abf",e.Superior="#7430b9",e.Epic="#cd23b2",e.Legendary="#e09a1a",e.Mythic="#f03a39",e}({}));class a{}e("XGTW_Constant",a),a.Audio={BG:"BG",BG2:"BG2",Equip:"Equip",Unequip:"Unequip",Fire:"Fire",GetMoney:"GetMoney",Reload:"Reload",ButtonClick:"ButtonClick"},a.Scene={Main:"Main"},a.Path={Tip:"Prefabs/UI/Tip",Broadcast:"Prefabs/UI/Broadcast",FloatingText:"Prefabs/UI/FloatingText"},a.Key={Money:"Moneyyyy",EnergyBattery:"EnergyBattery",KCQB:"KCQB",SkinPiece:"SkinPiece",HuiZhangPiece:"HuiZhangPiece",EXP:"EXP",RankPoint:"RankPoint",Items:"Items",PlayerData:"PlayerData",AgreePolicy:"AgreePoliaacy",GameData:"GameData",UnlockSeason:"Season",FreeReward:"FreeReward",AchievementTimes:"AchievementTimes"},a.Panel={CommonTipPanel:"Panel/CommonTipPanel",InventoryPanel:"Panel/InventoryPanel",GameInventoryPanel:"Panel/GameInventoryPanel",ShopPanel:"Panel/ShopPanel",SkinShopPanel:"Panel/SkinShopPanel",SpecialSkinShopPanel:"Panel/SpecialSkinShopPanel",BuyPanel:"Panel/BuyPanel",ItemDetailPanel:"Panel/ItemDetailPanel",SelectMapPanel:"Panel/SelectMapPanel",FailPanel:"Panel/FailPanel",WinPanel:"Panel/WinPanel",SeasonPanel:"Panel/SeasonPanel",RewardPanel:"Panel/RewardPanel",SpecialSkinDetailPanel:"Panel/SpecialSkinDetailPanel",FreeRewardPanel:"Panel/FreeRewardPanel",TreasureBox:"Panel/TreasureBox",XunZhangPanel:"Panel/XunZhangPanel",RankPanel:"Panel/RankPanel",HeiShiPanel:"Panel/HeiShiPanel",GameBackpackPanel:"Panel/GameBackpackPanel",SearchPanel:"Panel/SearchPanel",ZhuangJiaPanel:"Panel/ZhuangJiaPanel",KanChaShopPanel:"Panel/KanChaShopPanel",EnergyTipPanel:"Panel/EnergyTipPanel"},a.Group={Player:32,Enemy:64,Bullet:128,Obstacle:512},a.PRIORITY={NORMAL:10,DIALOG:100,REWARD:200,WAITING:300,TIPS:400},n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Data.ts",["cc","./XGTW_Constant.ts","./PrefsManager.ts","./Tools.ts","./XGTW_DataManager.ts"],(function(t){var s,e,i,a,h,n,l,u;return{setters:[function(t){s=t.cclegacy,e=t.Vec3,i=t.v3,a=t.v2},function(t){h=t.XGTW_ItemType},function(t){n=t.default},function(t){l=t.Tools},function(t){u=t.XGTW_DataManager}],execute:function(){s._RF.push({},"b3354EodtNEC6JgdaWlpo6A","XGTW_Data",void 0);class r{constructor(t=null,s=null,e=null,i=null,a=null,h=null,n=[]){this.Name="",this.Skin_Helmet=null,this.Skin_Bulletproof=null,this.Helmet=null,this.Bulletproof=null,this.Weapon_0=null,this.Weapon_1=null,this.Pistol=null,this.MeleeWeapon=null,this.Backpack=null,this.BackpackItems=[],this.LockboxItems=[],this.EquipGunSkins=[],this.Helmet=t,this.Bulletproof=s,this.Weapon_0=e,this.Weapon_1=i,this.Pistol=a,this.MeleeWeapon=h,this.BackpackItems=n}Clear(){this.Helmet=null,this.Bulletproof=null,this.Weapon_0=null,this.Weapon_1=null,this.Pistol=null,this.MeleeWeapon=null,this.BackpackItems=[]}ItemToArray(){let t=[];return this.Helmet&&t.push(this.Helmet),this.Bulletproof&&t.push(this.Bulletproof),this.Weapon_0&&t.push(this.Weapon_0),this.Weapon_1&&t.push(this.Weapon_1),this.Pistol&&t.push(this.Pistol),this.BackpackItems&&t.push(...this.BackpackItems),t}}t("XGTW_PlayerData",r),r.MaxBackpackItems=10;class o{constructor(t,s,e,i,a=-1){this.Price=0,this.Count=1,this.Durable=0,this.MaxDurable=-1,this.Weight=0,this.Name=t,this.Type=s,this.price=e,this.Quality=i,-1==a&&"子弹"==s&&(this.Count=60),this.Price=Number(e)}static GetFullName(t){let s=t.Name;return o.IsMainGun(h[`${t.Type}`])&&(0==t.Quality&&(s+="(破损)"),1==t.Quality&&(s+="(修复)"),2==t.Quality&&(s+="(完好)"),3==t.Quality&&(s+="(改进)"),4==t.Quality&&(s+="(精制)")),s}static IsGun(t){return t==h.冲锋枪||t==h.射手步枪||t==h.手枪||t==h.栓动步枪||t==h.突击步枪||t==h.轻机枪||t==h.霰弹枪}static IsMeleeWeapon(t){return t==h.近战}static IsEquip(t){return t==h.头盔||t==h.防弹衣||t==h.背包}static CanEquip(t){return this.IsEquip(t)||this.IsGun(t)||this.IsMeleeWeapon(t)||this.IsAssories(t)}static IsSniper(t){return t==h.射手步枪||t==h.栓动步枪}static IsConsumables(t){return-1!=o.Consumables.findIndex((s=>s==t))}static IsAssories(t){return t==h.枪口||t==h.握把||t==h.弹匣||t==h.枪托||t==h.瞄具}static GetAssories(t){let s=[];return t==h.冲锋枪&&s.push("枪口","握把","弹匣","瞄具"),t==h.手枪&&s.push("枪口","握把","弹匣","瞄具"),t==h.突击步枪&&s.push("枪口","握把","弹匣","枪托","瞄具"),t==h.轻机枪&&s.push("弹匣","瞄具"),t==h.霰弹枪&&s.push("枪口","弹匣","瞄具"),t==h.弓弩&&s.push("握把","瞄具"),t==h.栓动步枪&&s.push("枪口","弹匣","枪托","瞄具"),s}static GetItemType(t){return h[`${t}`]}static IsMedicine(t){return t==h.药品}static IsAX50(t){return"AX50"==t||"AX50-龙影"==t}static IsMainGun(t){return t==h.冲锋枪||t==h.射手步枪||t==h.栓动步枪||t==h.突击步枪||t==h.轻机枪||t==h.霰弹枪}static GetScale(t){let s=e.ONE;return t==h[h.头盔]&&(s=i(.6,.6)),t==h[h.防弹衣]&&(s=i(.6,.6)),t==h[h.手枪]&&(s=i(.8,.8)),t==h[h.突击步枪]&&(s=i(.8,.8)),t==h[h.冲锋枪]&&(s=i(.8,.8)),t==h[h.射手步枪]&&(s=i(.8,.8)),t==h[h.栓动步枪]&&(s=i(.8,.8)),t==h[h.轻机枪]&&(s=i(.8,.8)),t==h[h.霰弹枪]&&(s=i(.8,.8)),t==h[h.子弹]&&(s=i(.6,.6)),t==h[h.战利品]&&(s=i(.6,.6)),t==h[h.药品]&&(s=i(.6,.6)),s}}t("XGTW_ItemData",o),o.MainGunTypes=[h.冲锋枪,h.射手步枪,h.栓动步枪,h.突击步枪,h.轻机枪,h.霰弹枪,h.近战],o.PeiJianTypes=[h.瞄具,h.枪口,h.握把,h.弹匣,h.枪托],o.FangJuTypes=[h.头盔,h.防弹衣],o.GunTypes=[h.冲锋枪,h.射手步枪,h.栓动步枪,h.突击步枪,h.轻机枪,h.霰弹枪,h.手枪,h.近战],o.Consumables=[h.子弹,h.投掷物,h.药品];t("XGTW_头盔",class extends o{constructor(t,s,e,i,h,n){"头盔"==t&&(t=`头盔(${Number(i)+1}级)`),super(t,s,e,i),this.Position=a(),this.Durable=h,this.MaxDurable=h,this.Weight=n}});t("XGTW_防弹衣",class extends o{constructor(t,s,e,i,a,h){super(`防弹衣(${Number(i)+1}级)`,s,e,i),this.Durable=a,this.MaxDurable=a,this.Weight=h}});t("XGTW_背包",class extends o{constructor(t,s,e,i,a,h){super(`背包(${Number(i)+1}级)`,s,e,i),this.Durable=a,this.MaxDurable=a,this.Weight=h}});t("XGTW_手枪",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=12,this.MagazineBulletCount=12,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Desc=o,this.Recoil=r,this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1])))}});t("XGTW_突击步枪",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=30,this.MagazineBulletCount=30,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Recoil=r,this.Desc=o,this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1])))}});t("XGTW_冲锋枪",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=45,this.MagazineBulletCount=45,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Recoil=r,this.Desc=o,this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1])))}});t("XGTW_射手步枪",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=20,this.MagazineBulletCount=20,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Recoil=r,this.Desc=o,"string"==typeof c?this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1]))):this.FirePosition.set(c)}});t("XGTW_栓动步枪",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=10,this.MagazineBulletCount=10,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Recoil=r,this.Desc=o,"string"==typeof c?this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1]))):this.FirePosition.set(c)}});t("XGTW_轻机枪",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=100,this.MagazineBulletCount=100,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Recoil=r,this.Desc=o,"string"==typeof c?this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1]))):this.FirePosition.set(c)}});t("XGTW_霰弹枪",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=10,this.MagazineBulletCount=10,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Recoil=r,this.Desc=o,"string"==typeof c?this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1]))):this.FirePosition.set(c)}});t("XGTW_弓弩",class extends o{constructor(t,s,e,i,h,n,l,u,r,o,c){super(t,s,e,i),this.MaxMagazineBulletCount=10,this.MagazineBulletCount=10,this.BulletCount=0,this.Damage=0,this.FireRate=0,this.Recoil=0,this.Desc="",this.FirePosition=a(),this.Assories=[],this.Durable=h,this.MaxDurable=h,this.Weight=n,this.Damage=l,this.FireRate=u,this.Recoil=r,this.Desc=o,"string"==typeof c?this.FirePosition.set(a(Number(c.split(",")[0]),Number(c.split(",")[1]))):this.FirePosition.set(c)}});t("XGTW_近战武器",class extends o{constructor(t,s,e,i,a,h,n,l){super(t,s,e,i),this.Damage=0,this.FireRate=0,this.Durable=a,this.MaxDurable=a,this.Weight=h,this.Damage=n,this.FireRate=l}});t("XGTW_子弹",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_瞄具",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_枪口",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_弹匣",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_握把",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_枪托",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_药品",class extends o{constructor(t,s,e,i,a,h,n){super(t,s,e,h),this.HP=0,this.Time=2,this.HP=a,this.Time=i,this.Weight=n}});t("XGTW_投掷物",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_战利品",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Weight=a}});t("XGTW_神秘商店",class extends o{constructor(t,s,e,i,a){super(t,s,e,a),this.Name=t,this.Type=s,this.Price=e,this.OriginType=i,this.Quality=a}GetItemData(){return u.ItemDatas.get(h[`${this.OriginType}`]).find((t=>t.Name==this.Name&&t.Quality==this.Quality))}});t("XGTW_热卖新品",class extends o{constructor(t,s,e,i,a){super(t,s,e,i),this.Name=t,this.Type=s,this.Price=e,this.Quality=i,this.Desc=a}});t("XGTW_抽奖礼包",class extends o{constructor(t,s,e,i,a,h,n){super(t,e,s,a),this.Name=t,this.Price=s,this.Type=e,this.GetType=i,this.Quality=a,this.Qualitys=h,this.Desc=n}GetItemData(){let t=null,s=[];if(this.Qualitys.split(",").forEach((t=>s.push(Number(t)))),"防具"==this.GetType){let e=o.FangJuTypes[l.GetRandomInt(0,o.FangJuTypes.length)];t=u.ItemDatas.get(e).filter((t=>-1!==s.findIndex((s=>s==t.Quality))))}else if("礼包"==this.GetType){let e=o.MainGunTypes[l.GetRandomInt(0,o.MainGunTypes.length)];t=u.ItemDatas.get(e).filter((t=>-1!==s.findIndex((s=>s==t.Quality))))}else t=u.ItemDatas.get(h[`${this.GetType}`]).filter((t=>-1!==s.findIndex((s=>s==t.Quality))));return t[l.GetRandomInt(0,t.length)]}});t("XGTW_快捷装备",class extends o{constructor(t,s,e,i){let a=u.ItemDatas.get(h[`${e}`]).find((s=>s.Name==t&&s.Quality==i));null==a&&console.error(s,e,t);let n=a.Price;super(t,s,n,i),this.Name=t,this.Type=s,this.OriginType=e,this.Quality=i}GetItemData(){return u.ItemDatas.get(h[`${this.OriginType}`]).find((t=>t.Name==this.Name&&t.Quality==this.Quality))}});t("XGTW_个性化枪械",class extends o{constructor(t,s,e,i,a,h,n){super(t,s,0,a),this.Name=t,this.Type=s,this.OriginType=e,this.Origin=i,this.Quality=a,this.HasBroadcast=h,this.HasBox=n}get IsUnlock(){return n.GetBool(`${this.Name}`,!1)}set IsUnlock(t){n.SetBool(`${this.Name}`,t)}});t("XGTW_个性化装扮",class extends o{constructor(t,s,e){super(t,s,0,e)}get IsUnlock(){return n.GetBool(`${this.Name}`,!1)}set IsUnlock(t){n.SetBool(`${this.Name}`,t)}});t("XGTW_碎片装扮",class extends o{constructor(t,s,e,i){super(t,s,i,e)}get IsUnlock(){return n.GetBool(`${this.Name}`,!1)}set IsUnlock(t){n.SetBool(`${this.Name}`,t)}});t("XGTW_特殊道具",class extends o{constructor(t,s,e,i){super(t,s,i,e)}get IsUnlock(){return n.GetBool(`${this.Name}`,!1)}set IsUnlock(t){n.SetBool(`${this.Name}`,t)}});class c{constructor(t,s,e,i,a,h){this.Name=void 0,this.PlayerName="",this.Type=void 0,this.Time=void 0,this.Count=void 0,this.NeedKey=void 0,this.Taken=!1,this.HasOpenState=void 0,this.Name=t,this.Type=s,this.Time=e,this.Count=i,this.NeedKey=a,this.HasOpenState=h,this.Taken=!1,this.PlayerName=""}}t("XGTW_SuppliesData",c),c.Out=[[],["金杯","金色手机","狮银币","邮票","便携电脑","照相机","镜头","隔音棉","音乐盒","照相机"],["USP风扇","便携电脑","刨冰机","勘测仪","医用剪刀","镜头","眼镜","电影胶卷","音乐盒","示波器","颜料","胶带","医用海绵","隔音棉","千斤顶","喷油器","小霸王","录音带","打字机","打火机","摄像头","收音机","机油","水壶","洗发水","热成像仪","照相机"],[],[],[],["USP风扇","摄像头","破碎的屏幕","示波器"]];t("XGTW_SeasonData",class{constructor(t,s,e,i,a,n){this.Count_1=1,this.Count_2=1,this.ItemData_1=null,this.ItemData_2=null,this.Count_1=i,this.Count_2=a,u.ItemDatas.has(h[`${e}`])&&(this.ItemData_1=l.Clone(u.ItemDatas.get(h[`${e}`]).find((s=>s.Name==t))),this.ItemData_1&&(this.ItemData_1.Count=i)),n?(this.ItemData_2=l.Clone(u.JunXuItems.find((t=>t.Name==s))),this.ItemData_2&&(this.ItemData_2.Count=a)):u.ItemDatas.has(h[`${e}`])&&(this.ItemData_2=l.Clone(u.ItemDatas.get(h[`${e}`]).find((t=>t.Name==s))),this.ItemData_2&&(this.ItemData_2.Count=a))}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_DataManager.ts",["cc","./XGTW_InventoryPanel.ts","./XGTW_Constant.ts","./PrefsManager.ts","./BundleManager.ts","./GameManager.ts","./XGTW_GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./Tools.ts","./XGTW_AchievementManager.ts","./XGTW_Data.ts"],(function(e){var t,a,s,i,l,n,r,o,m,u,p,h,D,c,y,g,I,P,f,T,G,W,S,k,_,N,d,v,R,X,B,b,w,E,M,Q,K,q,O,C,A,F,x,H,J,L,$,Z;return{setters:[function(e){t=e.cclegacy},function(e){a=e.InventoryType},function(e){s=e.XGTW_Constant,i=e.XGTW_ItemType,l=e.XGTW_SuppliesType},function(e){n=e.default},function(e){r=e.BundleManager},function(e){o=e.GameManager},function(e){m=e.default},function(e){u=e.EventManager},function(e){p=e.XGTW_Event},function(e){h=e.Tools},function(e){D=e.XGTW_AchievementManager,c=e.XGTW_AchievementData,y=e.XGTW_AchievementType},function(e){g=e.XGTW_PlayerData,I=e.XGTW_头盔,P=e.XGTW_防弹衣,f=e.XGTW_背包,T=e.XGTW_手枪,G=e.XGTW_突击步枪,W=e.XGTW_冲锋枪,S=e.XGTW_射手步枪,k=e.XGTW_栓动步枪,_=e.XGTW_轻机枪,N=e.XGTW_霰弹枪,d=e.XGTW_弓弩,v=e.XGTW_近战武器,R=e.XGTW_子弹,X=e.XGTW_瞄具,B=e.XGTW_枪口,b=e.XGTW_弹匣,w=e.XGTW_握把,E=e.XGTW_枪托,M=e.XGTW_药品,Q=e.XGTW_投掷物,K=e.XGTW_神秘商店,q=e.XGTW_热卖新品,O=e.XGTW_抽奖礼包,C=e.XGTW_快捷装备,A=e.XGTW_个性化枪械,F=e.XGTW_个性化装扮,x=e.XGTW_碎片装扮,H=e.XGTW_特殊道具,J=e.XGTW_战利品,L=e.XGTW_SuppliesData,$=e.XGTW_SeasonData,Z=e.XGTW_ItemData}],execute:function(){t._RF.push({},"7e4e9VdahdCmIkv+IMmZl74","XGTW_DataManager",void 0);class U{static get Money(){return n.GetNumber(s.Key.Money,1e6)}static set Money(e){e=Math.floor(e),n.SetNumber(s.Key.Money,e),D.CheckAchievement("小试牛刀"),D.CheckAchievement("根本花不完"),u.Scene.emit(p.RefreshMoney)}static get EnergyBattery(){return n.GetNumber(s.Key.EnergyBattery,0)}static set EnergyBattery(e){n.SetNumber(s.Key.EnergyBattery,e),u.Scene.emit(p.RefreshEnergyBattery)}static get KCQB(){return n.GetNumber(s.Key.KCQB,0)}static set KCQB(e){n.SetNumber(s.Key.KCQB,e),u.Scene.emit(p.RefreshKCQB)}static get SkinPiece(){return n.GetNumber(s.Key.SkinPiece,0)}static set SkinPiece(e){n.SetNumber(s.Key.SkinPiece,e),u.Scene.emit(p.RefreshSkinPiece)}static get HuiZhangPiece(){return n.GetNumber(s.Key.HuiZhangPiece,0)}static set HuiZhangPiece(e){n.SetNumber(s.Key.HuiZhangPiece,e),u.Scene.emit(p.RefreshHuiZhangPiece)}static get SeasonLv(){return h.Clamp(Math.floor(U.EXP/1e3),0,80)}static get EXP(){return n.GetNumber(s.Key.EXP,0)}static set EXP(e){e=Math.floor(e),n.SetNumber(s.Key.EXP,e)}static get RankPoint(){return n.GetNumber(s.Key.RankPoint,0)}static set RankPoint(e){e=Math.floor(e),n.SetNumber(s.Key.RankPoint,e)}static async LoadData(){return U.ItemDatas=new Map,U.SuppliesDatas=new Map,U.JunXuItems=[],U.PlayerItems=[],U.SeasonDatas=[],m.JJMode=!1,new Promise(((e,t)=>{if(n.GetItem(s.Key.PlayerData)){let e=JSON.parse(n.GetItem(s.Key.PlayerData));this.PlayerData=new g(e.Helmet,e.Bulletproof,e.Weapon_0,e.Weapon_1,e.Pistol,e.MeleeWeapon,e.BackpackItems)}else this.PlayerData=new g;if(console.log("[玩家装备数据]:",this.PlayerData),n.GetItem(s.Key.Items)){let e=JSON.parse(n.GetItem(s.Key.Items));for(let t=0;t<e.length;t++)this.PlayerItems.push(e[t])}console.log("[玩家仓库数据]:",this.PlayerItems),r.LoadJson(o.GameData.DefaultBundle,"Name").then((e=>{let t=e.json;this.Names=t.Names})),r.LoadJson(o.GameData.DefaultBundle,"Data").then((t=>{let a=t.json;U.ItemDatas.set(i.金钱,[]),U.ItemDatas.set(i.头盔,[]);for(let e=0;e<a.头盔.length;e++){let t=a.头盔[e];U.ItemDatas.get(i.头盔).push(new I(t.Name,t.Type,t.Prices,t.Qualitys,t.Durables,t.Weight))}U.ItemDatas.set(i.防弹衣,[]);for(let e=0;e<a.防弹衣.length;e++){let t=a.防弹衣[e];U.ItemDatas.get(i.防弹衣).push(new P(t.Name,t.Type,t.Prices,t.Qualitys,t.Durables,t.Weight))}U.ItemDatas.set(i.背包,[]);for(let e=0;e<a.背包.length;e++){let t=a.背包[e];U.ItemDatas.get(i.背包).push(new f(t.Name,t.Type,t.Prices,t.Qualitys,t.Durables,t.Weight))}U.ItemDatas.set(i.手枪,[]);for(let e=0;e<a.手枪.length;e++){let t=a.手枪[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.手枪).push(new T(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.突击步枪,[]);for(let e=0;e<a.突击步枪.length;e++){let t=a.突击步枪[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.突击步枪).push(new G(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.冲锋枪,[]);for(let e=0;e<a.冲锋枪.length;e++){let t=a.冲锋枪[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.冲锋枪).push(new W(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.射手步枪,[]);for(let e=0;e<a.射手步枪.length;e++){let t=a.射手步枪[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.射手步枪).push(new S(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.栓动步枪,[]);for(let e=0;e<a.栓动步枪.length;e++){let t=a.栓动步枪[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.栓动步枪).push(new k(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.轻机枪,[]);for(let e=0;e<a.轻机枪.length;e++){let t=a.轻机枪[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.轻机枪).push(new _(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.霰弹枪,[]);for(let e=0;e<a.霰弹枪.length;e++){let t=a.霰弹枪[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.霰弹枪).push(new N(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.弓弩,[]);for(let e=0;e<a.弓弩.length;e++){let t=a.弓弩[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.弓弩).push(new d(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate,t.Recoil,t.Desc,t.FirePosition))}U.ItemDatas.set(i.近战,[]);for(let e=0;e<a.近战.length;e++){let t=a.近战[e],s=t.Prices.split(","),l=t.Durables.split(","),n=t.Qualitys.split(",");for(let e=0;e<l.length;e++)U.ItemDatas.get(i.近战).push(new v(t.Name,t.Type,s[e],n[e],l[e],t.Weight,t.Damage,t.FireRate))}U.ItemDatas.set(i.子弹,[]);for(let e=0;e<a.子弹.length;e++){let t=a.子弹[e],s=t.Prices.split(","),l=t.Qualitys.split(",");for(let e=0;e<s.length;e++)U.ItemDatas.get(i.子弹).push(new R(t.Name,t.Type,s[e],l[e],t.Weight))}U.ItemDatas.set(i.瞄具,[]);for(let e=0;e<a.瞄具.length;e++){let t=a.瞄具[e],s=t.Prices.split(","),l=t.Qualitys.split(",");for(let e=0;e<s.length;e++)U.ItemDatas.get(i.瞄具).push(new X(t.Name,t.Type,s[e],l[e],t.Weight))}U.ItemDatas.set(i.枪口,[]);for(let e=0;e<a.枪口.length;e++){let t=a.枪口[e],s=t.Prices.split(","),l=t.Qualitys.split(",");for(let e=0;e<s.length;e++)U.ItemDatas.get(i.枪口).push(new B(t.Name,t.Type,s[e],l[e],t.Weight))}U.ItemDatas.set(i.弹匣,[]);for(let e=0;e<a.弹匣.length;e++){let t=a.弹匣[e],s=t.Prices.split(","),l=t.Qualitys.split(",");for(let e=0;e<s.length;e++)U.ItemDatas.get(i.弹匣).push(new b(t.Name,t.Type,s[e],l[e],t.Weight))}U.ItemDatas.set(i.握把,[]);for(let e=0;e<a.握把.length;e++){let t=a.握把[e],s=t.Prices.split(","),l=t.Qualitys.split(",");for(let e=0;e<s.length;e++)U.ItemDatas.get(i.握把).push(new w(t.Name,t.Type,s[e],l[e],t.Weight))}U.ItemDatas.set(i.枪托,[]);for(let e=0;e<a.枪托.length;e++){let t=a.枪托[e],s=t.Prices.split(","),l=t.Qualitys.split(",");for(let e=0;e<s.length;e++)U.ItemDatas.get(i.枪托).push(new E(t.Name,t.Type,s[e],l[e],t.Weight))}U.ItemDatas.set(i.药品,[]);for(let e=0;e<a.药品.length;e++){let t=a.药品[e];U.ItemDatas.get(i.药品).push(new M(t.Name,t.Type,t.Price,t.Time,t.HP,t.Qualitys,t.Weight))}U.ItemDatas.set(i.投掷物,[]);for(let e=0;e<a.投掷物.length;e++){let t=a.投掷物[e];U.ItemDatas.get(i.投掷物).push(new Q(t.Name,t.Type,t.Price,t.Qualitys,t.Weight))}U.ItemDatas.set(i.神秘商店,[]);for(let e=0;e<a.神秘商店.length;e++){let t=a.神秘商店[e];U.ItemDatas.get(i.神秘商店).push(new K(t.Name,t.Type,t.Price,t.OriginType,t.Quality))}U.ItemDatas.set(i.热卖新品,[]);for(let e=0;e<a.热卖新品.length;e++){let t=a.热卖新品[e];U.ItemDatas.get(i.热卖新品).push(new q(t.Name,t.Type,t.Price,t.Quality,t.Desc))}U.ItemDatas.set(i.抽奖礼包,[]);for(let e=0;e<a.抽奖礼包.length;e++){let t=a.抽奖礼包[e];U.ItemDatas.get(i.抽奖礼包).push(new O(t.Name,t.Price,t.Type,t.GetType,t.Quality,t.Qualitys,t.Desc))}U.ItemDatas.set(i.快捷装备,[]);for(let e=0;e<a.快捷装备.length;e++){let t=a.快捷装备[e];U.ItemDatas.get(i.快捷装备).push(new C(t.Name,t.Type,t.OriginType,t.Quality))}U.ItemDatas.set(i.个性化枪械,[]);for(let e=0;e<a.个性化枪械.length;e++){let t=a.个性化枪械[e];U.ItemDatas.get(i.个性化枪械).push(new A(t.Name,t.Type,t.OriginType,t.Origin,t.Quality,t.HasBroadcast,t.HasBox))}U.ItemDatas.set(i.个性化装扮,[]);for(let e=0;e<a.个性化装扮.length;e++){let t=a.个性化装扮[e];U.ItemDatas.get(i.个性化装扮).push(new F(t.Name,t.Type,t.Quality))}U.ItemDatas.set(i.碎片装扮,[]);for(let e=0;e<a.碎片装扮.length;e++){let t=a.碎片装扮[e];U.ItemDatas.get(i.碎片装扮).push(new x(t.Name,t.Type,t.Quality,t.Price))}U.ItemDatas.set(i.特殊道具,[]);for(let e=0;e<a.特殊道具.length;e++){let t=a.特殊道具[e];U.ItemDatas.get(i.特殊道具).push(new H(t.Name,t.Type,t.Quality,t.Price))}U.ItemDatas.set(i.战利品,[]);for(let e=0;e<a.战利品.length;e++){let t=a.战利品[e];U.ItemDatas.get(i.战利品).push(new J(t.Name,t.Type,t.Value,t.Quality,t.Weight))}for(let e=0;e<a.物资.length;e++){let t=a.物资[e],s=l[`${t.Type}`];this.SuppliesDatas.has(s)||this.SuppliesDatas.set(s,[]),this.SuppliesDatas.get(s).push(new L(t.Name,t.Type,t.Time,t.Count,t.NeedKey,t.HasOpenState))}for(let e=0;e<a.赛季.length;e++){let t=a.赛季[e],s=new $(t.Name_1,t.Name_2,t.Type,t.Count_1,t.Count_2,t.IsJunXu);this.SeasonDatas.push(s)}for(let e=0;e<a.成就.length;e++){let t=a.成就[e],s=new c(t.Name,t.Desc,y[`${t.Type}`]);D.AchievementMap.set(t.Name,s)}console.log("[所有物品数据]:",U.ItemDatas),console.log("[所有军需数据]:",U.JunXuItems),console.log("[所有补给数据]:",U.SuppliesDatas),console.log("[所有赛季数据]:",U.SeasonDatas),console.log("[所有成就数据]:",D.AchievementMap),e([])}))}))}static GetItemData(e,t){return U.ItemDatas.get(e).find((e=>e.Name==t))}static AddPlayerItem(e,t=!1){let a=i[e.Type];if(t&&U.ItemDatas.get(a).find((t=>t.Name==e.Name))){let t=JSON.stringify(e);e=Object.assign(new Z(e.Name,e.Type,e.Price,e.Quality),JSON.parse(t))}e&&(console.log("向仓库添加:",e),this.PlayerItems.push(e),this.SaveData(),u.Scene.emit(p.RefreshInventoryItems))}static RemovePlayerItem(e){return-1!=this.PlayerItems.indexOf(e)&&(this.PlayerItems.splice(this.PlayerItems.indexOf(e),1),this.SaveData(),u.Scene.emit(p.RefreshInventoryItems),!0)}static SaveData(){n.SetItem(s.Key.Items,JSON.stringify(this.PlayerItems)),n.SetItem(s.Key.PlayerData,JSON.stringify(this.PlayerData))}static AddEquippedItem(e,t){switch(e){case a.Helmet:null!=this.PlayerData.Helmet&&this.RemovePlayerEquippedItem(this.PlayerData.Helmet),this.PlayerData.Helmet=t;break;case a.Bulletproof:null!=this.PlayerData.Bulletproof&&this.RemovePlayerEquippedItem(this.PlayerData.Bulletproof),this.PlayerData.Bulletproof=t;break;case a.Weapon_0:null!=this.PlayerData.Weapon_0&&this.RemovePlayerEquippedItem(this.PlayerData.Weapon_0),this.PlayerData.Weapon_0=t;break;case a.Weapon_1:null!=this.PlayerData.Weapon_1&&this.RemovePlayerEquippedItem(this.PlayerData.Weapon_1),this.PlayerData.Weapon_1=t;break;case a.Pistol:null!=this.PlayerData.Pistol&&this.RemovePlayerEquippedItem(this.PlayerData.Pistol),this.PlayerData.Pistol=t;break;case a.MeleeWeapon:null!=this.PlayerData.MeleeWeapon&&this.RemovePlayerEquippedItem(this.PlayerData.MeleeWeapon),this.PlayerData.MeleeWeapon=t;break;case a.Backpack:null!=this.PlayerData.Backpack&&this.RemovePlayerEquippedItem(this.PlayerData.Backpack),this.PlayerData.Backpack=t}return this.RemovePlayerItem(t),this.SaveData(),!0}static RemovePlayerEquippedItem(e){for(const t in this.PlayerData)if(this.PlayerData.hasOwnProperty(t)&&this.PlayerData[t]==e)return this.PlayerData[t]=null,console.log(`移除已经装备 ${t}：`,e),this.SaveData(),!0;return!1}static AddBulletToEquippedItem(e){if(null!=this.PlayerData.Weapon_0){let t=this.PlayerData.Weapon_0;if(t.Desc==e.Name&&60!=t.BulletCount)return t.BulletCount=60,this.RemovePlayerItem(e),this.SaveData(),!0}if(null!=this.PlayerData.Weapon_1){let t=this.PlayerData.Weapon_1;if(t.Desc==e.Name&&60!=t.BulletCount)return t.BulletCount=60,this.RemovePlayerItem(e),this.SaveData(),!0}if(null!=this.PlayerData.Pistol){let t=this.PlayerData.Pistol;if(t.Desc==e.Name&&60!=t.BulletCount)return t.BulletCount=60,this.RemovePlayerItem(e),this.SaveData(),!0}return!1}static AddItemToBackpack(e){return U.PlayerData.BackpackItems.push(e),this.SaveData(),u.Scene.emit(p.RefreshBackpackGoodsItem),console.log("向背包添加:",e),!0}static RemoveItemFromBackpack(e){return-1!=this.PlayerData.BackpackItems.indexOf(e)&&(this.PlayerData.BackpackItems.splice(this.PlayerData.BackpackItems.indexOf(e),1),this.SaveData(),console.log("向背包移除:",e),!0)}static LockboxHasItem(e){return Boolean(U.PlayerData.LockboxItems.find((t=>t==e)))}static AddItemToLockbox(e){return!(U.PlayerData.LockboxItems.length>=g.MaxBackpackItems)&&(U.PlayerData.LockboxItems.push(e),this.SaveData(),u.Scene.emit(p.RefreshBackpackGoodsItem),console.log("向密码箱添加:",e),!0)}static RemoveItemFromLockbox(e){return-1!=this.PlayerData.LockboxItems.indexOf(e)&&(this.PlayerData.LockboxItems.splice(this.PlayerData.LockboxItems.indexOf(e),1),this.SaveData(),console.log("向密码箱移除:",e),!0)}static EquipAccessorie(e,t){let a=e.Assories.find((e=>e.Type==t.Type));return a&&(e.Assories=e.Assories.filter((e=>e!==a))),e.Assories.push(t),console.log("配件",e.Assories),this.SaveData(),a}static UnequipAssorie(e,t){let a=e.Assories.find((e=>e.Type==t));return a&&(e.Assories=e.Assories.filter((e=>e!==a))),this.SaveData(),console.log("配件",e.Assories),a}static EquipGunSkin(e){return!U.PlayerData.EquipGunSkins.find((t=>t.Name==e.Name))&&(U.PlayerData.EquipGunSkins.find((t=>t.Origin==e.Origin))&&(U.PlayerData.EquipGunSkins=U.PlayerData.EquipGunSkins.filter((t=>t.Origin!=e.Origin))),U.PlayerData.EquipGunSkins.push(e),this.SaveData(),!0)}static UnequipGunSkin(e){U.PlayerData.EquipGunSkins.find((t=>t.Name==e.Name))&&(U.PlayerData.EquipGunSkins=U.PlayerData.EquipGunSkins.filter((t=>t.Origin!=e.Origin)),this.SaveData())}static GetEquipGunSkin(e){return U.PlayerData.EquipGunSkins.find((t=>t.Origin==e.Name))}static EquipDogSkin(e){U.PlayerData.Skin_Bulletproof=e,this.SaveData()}static UnequipDogSkin(e){U.PlayerData.Skin_Bulletproof=null,this.SaveData()}static GeneratePlayerData(){let e=new g;if(e.Name=this.Names[h.GetRandomInt(0,this.Names.length)],e.Helmet=U.ItemDatas.get(i.头盔)[h.GetRandomInt(0,U.ItemDatas.get(i.头盔).length)],e.Bulletproof=U.ItemDatas.get(i.防弹衣)[h.GetRandomInt(0,U.ItemDatas.get(i.防弹衣).length)],Math.random()>.8)e.Pistol=U.ItemDatas.get(i.手枪)[h.GetRandomInt(0,U.ItemDatas.get(i.手枪).length)],e.Pistol.BulletCount=h.GetRandomInt(0,80);else{let t=Z.GunTypes[h.GetRandomInt(0,Z.MainGunTypes.length)];e.Weapon_0=U.ItemDatas.get(t)[h.GetRandomInt(0,U.ItemDatas.get(t).length)],e.Weapon_0.BulletCount=h.GetRandomInt(0,80)}for(let t=0;t<h.GetRandomInt(0,3);t++)e.BackpackItems.push(U.ItemDatas.get(i.子弹)[h.GetRandomInt(0,U.ItemDatas.get(i.子弹).length)]);for(let e=0;e<h.GetRandomInt(0,3);e++);return e}static SetSeasonItemGot(e,t){n.SetBool(`${s.Key.UnlockSeason}_${e}_${t}`,!0)}static GetSeasonItemGot(e,t){return n.GetBool(`${s.Key.UnlockSeason}_${e}_${t}`)}static GetJiJiaGun(){let e=U.ItemDatas.get(i.轻机枪).find((e=>"M134重机枪"==e.Name)),t=h.Clone(e);return t.FireRate=.05,t.BulletCount=999999999999999,t}static GetPieceSkinData(e){let t=U.ItemDatas.get(i.碎片装扮).find((t=>t.Name==e)),a=null;return t&&(a=h.Clone(t)),a}static IsPieceSkin(e){return Boolean(U.ItemDatas.get(i.碎片装扮).find((t=>t.Name==e)))}}e("XGTW_DataManager",U),U.ItemDatas=void 0,U.SuppliesDatas=void 0,U.JunXuItems=void 0,U.PlayerItems=void 0,U.SeasonDatas=void 0,U.PlayerData=void 0,U.Names=[],t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_DroppedItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./NodeUtil.ts","./GameManager.ts","./Tools.ts","./XGTW_Data.ts","./XGTW_DataManager.ts"],(function(t){var e,n,o,i,a,s,r,l,u,p,c,d,h,m,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t._decorator,a=t.Component,s=t.Sprite,r=t.BoxCollider2D,l=t.tween,u=t.v3},function(t){p=t.BundleManager},function(t){c=t.default},function(t){d=t.GameManager},function(t){h=t.Tools},function(t){m=t.XGTW_ItemData},function(t){g=t.XGTW_DataManager}],execute:function(){var f,D,G;o._RF.push({},"b2211F2KyNLj5F2Jng4SfrJ","XGTW_DroppedItem",void 0);const{ccclass:I,property:y}=i;t("default",I("XGTW_DroppedItem")((G=e((D=class extends a{constructor(...t){super(...t),this.Icon=null,this.collider=null,this.goodsDatas=[],this.itemData=null,n(this,"generateGun",G,this)}onLoad(){if(this.Icon=c.GetComponent("Icon",this.node,s),this.collider=this.node.getComponent(r),this.generateGun){let t=m.GunTypes[h.GetRandomInt(0,m.GunTypes.length)],e=h.Clone(g.ItemDatas.get(t)[h.GetRandomInt(0,g.ItemDatas.get(t).length)]);e.BulletCount=500,this.Init(e)}}Init(t){l(this.node).to(1,{position:u(this.node.position.x,this.node.position.y+30)}).to(1,{position:u(this.node.position.x,this.node.position.y)}).union().repeatForever().start(),this.itemData=t,t&&p.LoadSpriteFrame(d.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name.replace(/^\./,"")}`).then((t=>{this.Icon.spriteFrame=t}))}}).prototype,"generateGun",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=D))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_EnemyBOSSController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XGTW_Bullet.ts","./XGTW_UIManager.ts","./XGTW_PlayerController.ts","./XGTW_Supplies.ts","./XGTW_GamePanel.ts","./XGTW_HPBar.ts","./XGTW_Missile.ts","./XGTW_Constant.ts","./BundleManager.ts","./XGTW_GameManager.ts","./NodeUtil.ts","./GameManager.ts","./Tools.ts","./PoolManager.ts","./XGTW_Data.ts","./XGTW_DataManager.ts","./XGTW_AchievementManager.ts"],(function(t){var e,i,o,n,s,a,l,r,h,d,u,p,c,g,y,m,G,P,f,D,B,T,v,C,W,_,S,M,I,X,A,E,x,H,b,N,F,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t._decorator,s=t.Component,a=t.v3,l=t.v2,r=t.instantiate,h=t.RigidBody2D,d=t.CircleCollider2D,u=t.Sprite,p=t.UITransform,c=t.Color,g=t.Contact2DType,y=t.Vec2,m=t.misc,G=t.PhysicsSystem2D,P=t.ERaycast2DType,f=t.find},function(t){D=t.default},function(t){B=t.XGTW_UIManager},function(t){T=t.AniState},function(t){v=t.default},function(t){C=t.default},function(t){W=t.default},function(t){_=t.default},function(t){S=t.XGTW_ItemType,M=t.XGTW_Constant},function(t){I=t.BundleManager},function(t){X=t.default},function(t){A=t.default},function(t){E=t.GameManager},function(t){x=t.Tools},function(t){H=t.PoolManager},function(t){b=t.XGTW_ItemData},function(t){N=t.XGTW_DataManager},function(t){F=t.XGTW_AchievementManager,k=t.XGTW_EAchievement}],execute:function(){var z,w,O;o._RF.push({},"4a665Oyd6RIdKt1dLNTWBsa","XGTW_EnemyBOSSController",void 0);const{ccclass:q,property:R}=n;t("default",q("XGTW_EnemyBOSSController")((O=e((w=class extends s{constructor(...t){super(...t),this.MAXHP=1200,this._hp=0,i(this,"gailv",O,this),this.rigidbody=null,this.collider=null,this.FirePos=void 0,this.Gun=void 0,this.Doggie=void 0,this.GunSp=void 0,this.Equip=void 0,this.Attack=void 0,this.Equip_Helmet=void 0,this.Equip_Bulletproof=void 0,this.speed=15,this.x=0,this.y=0,this.hpBar=null,this.results=null,this.isDie=!1,this.oriPosition=a(),this.targetPosition=a(),this.state="Idle",this.playerData=null,this.killedGun=null,this.target=null}get HP(){return this._hp}set HP(t){var e;if(!this.isDie){if(t<=0){this.isDie=!0;const e=this.playerData.ItemToArray();this.playerData.Clear(),N.EXP+=5e3,N.RankPoint+=5e3;let i="Common_Broadcast";if(this.killedGun&&b.IsMainGun(b.GetItemType(this.killedGun.Type))){let t=N.GetEquipGunSkin(this.killedGun);t&&t.HasBroadcast&&(i=`${t.Name}_Broadcast`)}B.ShowBroadcast(`击败${this.playerData.Name}`,i,l(C.Instance.BroadcastPosition.getPosition().x,C.Instance.BroadcastPosition.getPosition().y)),this.scheduleOnce((()=>{I.LoadPrefab(E.GameData.DefaultBundle,"Supplies").then((t=>{let i=r(t);i.getComponent(v).generateBox=!1,i.setParent(X.Instance.ItemsNd),i.setWorldPosition(this.node.getWorldPosition()),i.getComponent(v).InitDieBox(this.playerData.Name,this.killedGun,e),this.scheduleOnce((()=>{this.node.destroy()}))}))}),1),t=0}this._hp=x.Clamp(t,0,this.MAXHP),null==(e=this.hpBar)||e.Set(this._hp/this.MAXHP)}}onLoad(){this.node.active=Math.random()<this.gailv,this.rigidbody=this.node.getComponent(h),this.collider=this.node.getComponent(d),this.Doggie=A.GetNode("Doggie",this.node),this.Gun=this.node.getChildByName("Gun"),this.GunSp=A.GetComponent("GunSp",this.node,u),this.FirePos=A.GetNode("FirePos",this.node),this.Equip=A.GetNode("Equip",this.node),this.Attack=A.GetComponent("Attack",this.node,p),this.Equip_Helmet=A.GetComponent("Equip_Helmet",this.node,u),this.Equip_Bulletproof=A.GetComponent("Equip_Bulletproof",this.node,u),this.playerData=N.GeneratePlayerData(),H.GetNodeByBundle(E.GameData.DefaultBundle,"Prefabs/UI/HPBar",this.node).then((t=>{t.setPosition(0,this.node.getComponent(p).height/2+20),this.hpBar=t.getComponent(W),this.hpBar.Init(c.RED),this.HP=this.MAXHP})),this.oriPosition.set(a(this.node.getWorldPosition().x,this.node.getWorldPosition().y)),this.targetPosition.set(this.oriPosition),this.collider.on(g.BEGIN_CONTACT,this.onBeginContact,this)}Move(t){this.isDie||(this.rigidbody.linearVelocity=t.multiplyScalar(this.speed),this.PlayAni(T.Move))}StopMove(){this.isDie||(this.rigidbody.linearVelocity=y.ZERO,this.PlayAni(T.Idle))}SetGunDir(t){if(this.isDie)return;this.Doggie.setScale(a(t.x<0?-1:1,this.Doggie.scale.y));let e=Math.atan2(t.y,t.x),i=m.radiansToDegrees(e);this.Gun.setScale(a(i>90&&i<=180||i<-90&&i>=-180?-1:1,this.Gun.scale.y)),i=x.Lerp(i>90&&i<=180||i<-90&&i>=-180?i-180:i,this.Gun.angle,.1),this.Gun.angle=i}Fire(){this.isDie||this.StartFire()}StartFire(){this.isDie||(this.node.getChildByPath("Gun/GunSp/FirePos").active=!0)}StopFire(){this.unschedule(this.StartFire),this.node.getChildByPath("Gun/GunSp/FirePos").active=!1}TakeDamage(t){if(this.isDie)return;if(!x.IsEmptyStr(t.playerData.Name))return;this.killedGun=t.weapon;let e,i=t.weapon.Damage,o=0;null!=this.playerData.Bulletproof&&(e=this.playerData.Bulletproof,o+=e.Quality,e.Durable-=i/50,e.Durable<=0&&(this.playerData.Bulletproof=null)),null!=this.playerData.Helmet&&(e=this.playerData.Helmet,o+=e.Quality,e.Durable-=i/50,e.Durable<=0&&(this.playerData.Helmet=null)),this.HP-=0==o?i:i/o*2,this.HP<=0&&(t.weapon&&b.IsAX50(t.weapon.Name)&&F.AddAchievementTimes(k.AX50专家),t.weapon&&t.weapon.Type==S[`${S.轻机枪}`]&&F.AddAchievementTimes(k.RPK专家),t.weapon&&t.weapon.Type==S[`${S.冲锋枪}`]&&F.AddAchievementTimes(k.这里不是披萨塔))}update(t){if(!X.IsGameOver)if(X.Instance.player&&X.Instance.playerCtrl&&this.Attack.getBoundingBoxToWorld().contains(l(X.Instance.player.getWorldPosition().x,X.Instance.player.getWorldPosition().y))&&(X.Instance.playerCtrl.HP-=1),this.isDie)this.rigidbody.linearVelocity=y.ZERO;else if(X.Instance.player){if(X.Instance.player.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone()).length()>3e3)return this.StopFire(),void this.StopMove();if(this.results=G.instance.raycast(this.node.worldPosition,X.Instance.player.worldPosition,P.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(h).group==M.Group.Player){this.targetPosition.set(this.results[0].collider.node.getWorldPosition().clone());let t=this.targetPosition.clone().subtract(a(this.node.getWorldPosition().x,this.node.getWorldPosition().y)),e=t.clone();this.Move(l(t.normalize().x,t.normalize().y)),e.length()<1200?(e.length()<600?this.StopMove():this.Move(l(t.normalize().x,t.normalize().y)),this.SetGunDir(a(t.normalize().x,t.normalize().y)),this.Fire()):(this.StopFire(),this.Move(l(t.normalize().x,t.normalize().y)))}else{let t=this.targetPosition.clone().subtract(a(this.node.getWorldPosition().x,this.node.getWorldPosition().y));t.length()>1?(this.SetGunDir(a(t.normalize().x,t.normalize().y)),this.Move(l(l(t.normalize().x,t.normalize().y)))):(this.StopFire(),this.StopMove())}}}PlayAni(t){this.state!=t&&(this.state=t)}onBeginContact(t,e,i){if(e.group==M.Group.Bullet){let t=e.node.getComponent(D);if(t&&t.weapon)this.TakeDamage(t),this.scheduleOnce((()=>{H.PutNode(e.node)}));else{if(e.node.getComponent(_)){const t=i.getWorldManifold();H.GetNodeByBundle(E.GameData.DefaultBundle,"Prefabs/MissileExplosion",f("Canvas")).then((e=>{e.setWorldPosition(a(t.points[0].x,t.points[0].y))})),this.HP-=50}this.scheduleOnce((()=>{H.PutNode(e.node)}))}}}onEndContact(t,e,i){}}).prototype,"gailv",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),z=w))||z);o._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_EnemyController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XGTW_Bullet.ts","./XGTW_PlayerController.ts","./XGTW_Supplies.ts","./XGTW_GamePanel.ts","./XGTW_HPBar.ts","./BundleManager.ts","./XGTW_Missile.ts","./XGTW_AudioManager.ts","./XGTW_UIManager.ts","./XGTW_GameManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./AStar.ts","./GameManager.ts","./Tools.ts","./PoolManager.ts","./XGTW_Data.ts","./XGTW_AchievementManager.ts","./XGTW_DataManager.ts"],(function(t){var e,i,s,n,a,o,l,h,r,u,p,d,c,g,m,y,D,f,P,G,T,B,C,S,_,M,I,F,W,A,v,H,R,X,E,N,b,x,w,q,k,z,$,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t._decorator,a=t.Component,o=t.v3,l=t.v2,h=t.instantiate,r=t.RigidBody2D,u=t.CircleCollider2D,p=t.Sprite,d=t.Animation,c=t.UITransform,g=t.Color,m=t.Contact2DType,y=t.Vec3,D=t.Vec2,f=t.misc,P=t.PhysicsSystem2D,G=t.ERaycast2DType,T=t.Tween,B=t.tween,C=t.find},function(t){S=t.default},function(t){_=t.AniState},function(t){M=t.default},function(t){I=t.default},function(t){F=t.default},function(t){W=t.BundleManager},function(t){A=t.default},function(t){v=t.XGTW_AudioManager},function(t){H=t.XGTW_UIManager},function(t){R=t.default},function(t){X=t.default},function(t){E=t.XGTW_ItemType,N=t.XGTW_Constant},function(t){b=t.AStarManager},function(t){x=t.GameManager},function(t){w=t.Tools},function(t){q=t.PoolManager},function(t){k=t.XGTW_ItemData},function(t){z=t.XGTW_AchievementManager,$=t.XGTW_EAchievement},function(t){O=t.XGTW_DataManager}],execute:function(){var L,U,V,Q,Z,K;s._RF.push({},"7c5f0h21HJGKZYUx/Ia2TN2","XGTW_EnemyController",void 0);const{ccclass:j,property:J}=n;t("default",(L=j("XGTW_EnemyController"),U=J({visible(){return this.isTeamMode}}),L((Z=e((Q=class extends a{constructor(...t){super(...t),this.MAXHP=200,this._hp=0,this.rigidbody=null,this.collider=null,this.GunSpAni=null,this.FirePos=void 0,this.Gun=void 0,this.Doggie=void 0,this.GunSp=void 0,this.Equip=void 0,this.Equip_Helmet=void 0,this.Equip_Bulletproof=void 0,this.speed=5,this.x=0,this.y=0,this.hpBar=null,this.results=null,this.isDie=!1,this.isFire=!1,this.isCooldown=!0,this.isReload=!1,this.oriPosition=o(),this.targetPosition=o(),this.state="Idle",this.playerData=null,this.gun=null,i(this,"isTeamMode",Z,this),i(this,"isRedTeam",K,this),this.killedGun=null,this.target=null,this.redDots=[],this.lastNode=null,this.isChasing=!1}get HP(){return this._hp}set HP(t){var e;if(!this.isDie){if(t<=0){this.isDie=!0;const e=this.playerData.ItemToArray();this.playerData.Clear(),this.RefreshEquip(),this.PlayAni(_.Die),O.EXP+=200,O.RankPoint+=200;let i="Common_Broadcast";if(this.killedGun&&k.IsMainGun(k.GetItemType(this.killedGun.Type))){let t=O.GetEquipGunSkin(this.killedGun);t&&t.HasBroadcast&&(i=`${t.Name}_Broadcast`)}H.ShowBroadcast(`击败${this.playerData.Name}`,i,l(I.Instance.BroadcastPosition.getPosition().x,I.Instance.BroadcastPosition.getPosition().y)),this.isTeamMode&&this.isRedTeam&&I.Instance.RefreshTeamScore(0,1),this.isTeamMode&&!this.isRedTeam&&I.Instance.RefreshTeamScore(1,0),this.scheduleOnce((()=>{W.LoadPrefab(x.GameData.DefaultBundle,"Supplies").then((t=>{let i=h(t);i.getComponent(M).generateBox=!1,i.setParent(R.Instance.ItemsNd),i.setWorldPosition(this.node.getWorldPosition()),i.getComponent(M).InitDieBox(this.playerData.Name,this.killedGun,e),this.isTeamMode?(this.isDie=!1,this.StopChasing(),R.Instance.timer>=120?this.MAXHP=200:this.MAXHP=60,this.HP=this.MAXHP,this.playerData=O.GeneratePlayerData(),this.RefreshEquip(),this.node.setWorldPosition(o(this.oriPosition.x,this.oriPosition.y)),this.PlayAni("Idle")):this.scheduleOnce((()=>{this.node.destroy()}))}))}),1),t=0}this._hp=w.Clamp(t,0,this.MAXHP),null==(e=this.hpBar)||e.Set(this._hp/this.MAXHP)}}onLoad(){this.rigidbody=this.node.getComponent(r),this.collider=this.node.getComponent(u),this.Doggie=X.GetNode("Doggie",this.node),this.Gun=this.node.getChildByName("Gun"),this.GunSp=X.GetComponent("GunSp",this.node,p),this.FirePos=X.GetNode("FirePos",this.node),this.Equip=X.GetNode("Equip",this.node),this.Equip_Helmet=X.GetComponent("Equip_Helmet",this.node,p),this.Equip_Bulletproof=X.GetComponent("Equip_Bulletproof",this.node,p),this.GunSpAni=this.GunSp.getComponent(d),this.GunSpAni.on(d.EventType.FINISHED,(()=>{this.gun&&(this.gun.BulletCount=60),this.isReload=!1,this.isFire=!1,this.Fire()}),this),this.playerData=O.GeneratePlayerData(),q.GetNodeByBundle(x.GameData.DefaultBundle,"Prefabs/UI/HPBar",this.node).then((t=>{t.setPosition(0,this.node.getComponent(c).height/2+20),this.hpBar=t.getComponent(F),this.hpBar.Init(this.isTeamMode?this.isRedTeam?g.RED:g.BLUE:g.RED),R.Instance.timer>=60?this.MAXHP=200:this.MAXHP=60,this.HP=this.MAXHP})),this.oriPosition.set(o(this.node.getWorldPosition().x,this.node.getWorldPosition().y)),this.targetPosition.set(this.oriPosition),this.collider.on(m.BEGIN_CONTACT,this.onBeginContact,this)}start(){this.RefreshEquip()}RefreshEquip(){this.Equip_Helmet.node.active=null!=this.playerData.Helmet,null!=this.playerData.Helmet&&W.LoadSpriteFrame(x.GameData.DefaultBundle,`Res/Sprites/Doggie/${this.playerData.Helmet.Type}/${this.playerData.Helmet.Name}`).then((t=>{this.Equip_Helmet.spriteFrame=t})),this.Equip_Bulletproof.node.active=null!=this.playerData.Bulletproof,null!=this.playerData.Bulletproof&&W.LoadSpriteFrame(x.GameData.DefaultBundle,`Res/Sprites/Doggie/${this.playerData.Bulletproof.Type}/${this.playerData.Bulletproof.Name}`).then((t=>{this.Equip_Bulletproof.spriteFrame=t}));let t=null;null!=this.playerData.Weapon_0?t=this.playerData.Weapon_0:null!=this.playerData.Weapon_1?t=this.playerData.Weapon_1:null!=this.playerData.Pistol&&(t=this.playerData.Pistol),t&&(W.LoadSpriteFrame(x.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.GunSp.spriteFrame=t})),t.Type==E[E.近战]?this.GunSp.node.setScale(y.ONE):this.FirePos.setPosition(o(t.FirePosition.x,t.FirePosition.y)),this.gun=t)}Move(t){this.isDie||(this.rigidbody.linearVelocity=t.multiplyScalar(this.speed),this.PlayAni(_.Move))}StopMove(){this.isDie||(this.rigidbody.linearVelocity=D.ZERO,this.PlayAni(_.Idle))}SetGunDir(t){if(this.isDie)return;this.isFire&&this.Doggie.setScale(o(t.x<0?-1:1,this.Doggie.scale.y));let e=Math.atan2(t.y,t.x),i=f.radiansToDegrees(e);this.Gun.setScale(o(i>90&&i<=180||i<-90&&i>=-180?-1:1,this.Gun.scale.y)),i=w.Lerp(i>90&&i<=180||i<-90&&i>=-180?i-180:i,this.Gun.angle,.1),this.Gun.angle=i}Fire(){this.isDie||this.isFire||(this.isFire=!0,this.gun&&(this.isReload||(this.isCooldown&&(this.isCooldown=!1,this.StartFire()),this.schedule(this.StartFire,2*this.gun.FireRate))))}StartFire(){if(this.isDie)return;if(!this.gun)return;if(this.gun.BulletCount<=0)return this.StopFire(),void this.Reload();let t=this.gun.Type==E[E.霰弹枪]?5:1;v.AudioClipPlay(N.Audio.Fire),this.FirePos.getComponent(d).play("Fire");for(let e=0;e<t;e++)q.GetNodeByBundle(x.GameData.DefaultBundle,"Prefabs/Bullet",this.node.parent,null,this.FirePos.getWorldPosition().clone()).then((e=>{if(R.IsGameOver)return;let i=w.GetRandom(-10*this.gun.Recoil*t,10*this.gun.Recoil*t);e.angle=this.Gun.scale.x<0?this.Gun.angle+i-180:this.Gun.angle+i,e.getComponent(S).Init(this.node,this.gun,O.PlayerData)}));q.GetNodeByBundle(x.GameData.DefaultBundle,"Prefabs/BulletBlank",this.node).then((t=>{t.setWorldPosition(o(this.FirePos.getWorldPosition().x-50,this.FirePos.getWorldPosition().y)),t.getComponent(S).InitBlank(this.node,l(-5*this.Gun.scale.x,w.GetRandom(5,8)).multiplyScalar(.2))}))}StopFire(){this.isFire&&(this.isFire=!1,this.unschedule(this.StartFire))}Reload(){this.isDie||this.gun&&(this.isReload=!0,this.GunSpAni.play("Reload"))}TakeDamage(t){if(this.isDie)return;if(!w.IsEmptyStr(t.playerData.Name))return;this.killedGun=t.weapon;let e,i=t.weapon.Damage,s=0;null!=this.playerData.Bulletproof&&(e=this.playerData.Bulletproof,s+=e.Quality,e.Durable-=i/50,e.Durable<=0&&(this.playerData.Bulletproof=null)),null!=this.playerData.Helmet&&(e=this.playerData.Helmet,s+=e.Quality,e.Durable-=i/50,e.Durable<=0&&(this.playerData.Helmet=null)),this.HP-=0==s?i:i/s*2,this.HP<=0&&(t.weapon&&k.IsAX50(t.weapon.Name)&&z.AddAchievementTimes($.AX50专家),t.weapon&&t.weapon.Type==E[`${E.轻机枪}`]&&z.AddAchievementTimes($.RPK专家),t.weapon&&t.weapon.Type==E[`${E.冲锋枪}`]&&z.AddAchievementTimes($.这里不是披萨塔))}TakeMeleeDamage(t){this.isDie||(null!=this.playerData.Bulletproof&&(t=t*this.playerData.Bulletproof.Quality/10),null!=this.playerData.Helmet&&(t=t*this.playerData.Helmet.Quality/5),this.HP-=t,this.HP<=0&&z.AddAchievementTimes($.不讲武德))}update(t){if(!R.IsGameOver)if(this.isDie)this.rigidbody.linearVelocity=D.ZERO;else if(R.Instance.player){if(R.Instance.player.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone()).length()>3e3)return this.StopFire(),void this.StopMove();if(this.results=P.instance.raycast(this.node.worldPosition,R.Instance.player.worldPosition,G.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(r).group==N.Group.Player){this.targetPosition.set(this.results[0].collider.node.getWorldPosition().clone());let t=this.targetPosition.clone().subtract(o(this.node.getWorldPosition().x,this.node.getWorldPosition().y)),e=t.clone();this.Move(l(t.normalize().x,t.normalize().y)),e.length()<1200?(e.length()<600?this.StopMove():this.Move(l(t.normalize().x,t.normalize().y)),this.SetGunDir(o(t.normalize().x,t.normalize().y)),this.Fire()):(this.StopFire(),this.Move(l(t.normalize().x,t.normalize().y)))}else{let t=this.targetPosition.clone().subtract(o(this.node.getWorldPosition().x,this.node.getWorldPosition().y));t.length()>1?(this.SetGunDir(o(t.normalize().x,t.normalize().y)),this.Move(l(l(t.normalize().x,t.normalize().y)))):(this.StopFire(),this.StopMove())}}}PlayAni(t){this.state!=t&&(this.state=t)}StartChasing(){this.isChasing||(this.isChasing=!0,this.ChasingFunc(),this.schedule(this.ChasingFunc,.5))}StopChasing(){this.isChasing&&(this.isChasing=!1,T.stopAllByTarget(this.node),this.unschedule(this.ChasingFunc))}ChasingFunc(){if(!R.Instance.player)return void this.StopChasing();if(R.Instance.IsInCantArrivePosition(R.Instance.player))return;let t=R.Instance.GetMapPosition(this.node),e=R.Instance.GetMapPosition(R.Instance.player);if(t&&e&&0!==t.length&&0!==t.length){let i=b.Instance.FindPath(l(Number(t.split("_")[0]),Number(t.split("_")[1])),l(Number(e.split("_")[0]),Number(e.split("_")[1])));this.Chasing(this.node,i)}}Chasing(t,e){if(!e)return;for(let i=e.some((t=>t==this.lastNode))?1:0;i<e.length;i++){const s=e[i];if(R.Instance.map.has(`${s.x}_${s.y}`)){T.stopAllByTarget(t),this.lastNode=s;R.Instance.map.get(`${s.x}_${s.y}`);let i,n=y.distance(t.position,o(i.x,i.y))/this.speed;B(t).to(n,{position:o(i.x,i.y)}).call((()=>{e.splice(0,e.indexOf(s)+1),this.Chasing(t,e)})).start();break}}}onBeginContact(t,e,i){if(e.group==N.Group.Bullet){let t=e.node.getComponent(S);if(t&&t.weapon&&this.gun!=t.weapon)this.TakeDamage(t),this.scheduleOnce((()=>{q.PutNode(e.node)}));else{if(e.node.getComponent(A)){const t=i.getWorldManifold();q.GetNodeByBundle(x.GameData.DefaultBundle,"Prefabs/MissileExplosion",C("Canvas")).then((e=>{e.setWorldPosition(o(t.points[0].x,t.points[0].y))})),this.HP-=50}this.scheduleOnce((()=>{q.PutNode(e.node)}))}}}}).prototype,"isTeamMode",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=e(Q.prototype,"isRedTeam",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=Q))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_EnergyTipPanel.ts",["cc","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./Banner.ts","./NodeUtil.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts","./GameManager.ts"],(function(e){var n,t,a,c,o,s,r,i,l,u,g,d,P,T;return{setters:[function(e){n=e.cclegacy,t=e.Component,a=e.Vec3,c=e.tween,o=e._decorator},function(e){s=e.XGTW_AudioManager},function(e){r=e.XGTW_Constant},function(e){i=e.XGTW_UIManager},function(e){l=e.default},function(e){u=e.default},function(e){g=e.XGTW_DataManager},function(e){d=e.ProjectEventManager,P=e.ProjectEvent},function(e){T=e.GameManager}],execute:function(){var f;n._RF.push({},"c0f2d8LZA9IFrZOctJbIFJs","XGTW_EnergyTipPanel",void 0);const{ccclass:G,property:_}=o;e("default",G("XGTW_EnergyTipPanel")(f=class extends t{constructor(...e){super(...e),this.Panel=null}onLoad(){this.Panel=u.GetNode("Panel",this.node)}Show(){d.emit(P.弹出窗口,T.GameData.gameName),this.Panel.setScale(a.ZERO),c(this.Panel).to(.2,{scale:a.ONE},{easing:"backOut"}).start()}OnButtonClick(e){switch(s.AudioClipPlay(r.Audio.ButtonClick),e.target.name){case"Mask":case"CloseButton":i.Instance.HidePanel(r.Panel.EnergyTipPanel);break;case"Button":l.Instance.ShowVideoAd((()=>{g.EnergyBattery+=1,i.Instance.HidePanel(r.Panel.EnergyTipPanel)}))}}})||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_EquipInfoPanel.ts",["cc","./XGTW_InventoryPanel.ts","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./XGTW_Constant.ts","./GameManager.ts","./XGTW_Data.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(e){var t,a,n,s,i,o,r,l,u,c,h,d,m,p,f,G,b,g;return{setters:[function(e){t=e.cclegacy,a=e.Component,n=e.Label,s=e.Sprite,i=e.UITransform,o=e._decorator},function(e){r=e.default},function(e){l=e.XGTW_AudioManager},function(e){u=e.BundleManager},function(e){c=e.default},function(e){h=e.default},function(e){d=e.XGTW_ItemType,m=e.XGTW_Constant},function(e){p=e.GameManager},function(e){f=e.XGTW_ItemData},function(e){G=e.XGTW_DataManager},function(e){b=e.ProjectEventManager,g=e.ProjectEvent}],execute:function(){var y;t._RF.push({},"a43d23xSWBHTZ4ViWl6crah","XGTW_EquipInfoPanel",void 0);const{ccclass:T,property:C}=o;e("default",T("XGTW_EquipInfoPanel")(y=class extends a{constructor(...e){super(...e),this.NameLabel=null,this.WeightLabel=null,this.Durable=null,this.DurableLabel=null,this.ConfirmButtonLabel=null,this.Icon=null,this.QualityBar=null,this.Accessories=null,this.data=null}onLoad(){this.NameLabel=c.GetComponent("NameLabel",this.node,n),this.WeightLabel=c.GetComponent("WeightLabel",this.node,n),this.DurableLabel=c.GetComponent("DurableLabel",this.node,n),this.ConfirmButtonLabel=c.GetComponent("ConfirmButtonLabel",this.node,n),this.Icon=c.GetComponent("Icon",this.node,s),this.Durable=c.GetNode("Durable",this.node),this.QualityBar=c.GetNode("QualityBar",this.node),this.Accessories=c.GetNode("Accessories",this.node)}Show(e){b.emit(g.弹出窗口,p.GameData.gameName),this.node.active||(this.node.active=!0),this.data=e,this.NameLabel.string=`${f.GetFullName(e)}`,u.LoadSpriteFrame(p.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name.replace(/^\./,"")}`).then((e=>{this.Icon.spriteFrame=e})),this.QualityBar.getComponent(s).color=h.GetQualityColor(e.Quality),this.DurableLabel.string=`${e.Durable}/${e.MaxDurable}`,this.Durable.active=-1!=e.Durable;let t=f.GetAssories(f.GetItemType(e.Type)).length>0;this.Accessories.active=t,t&&this.RefreshAssories();let a=t||f.IsConsumables(d[e.Type])?900:700;this.node.getComponent(i).setContentSize(650,a),this.node.active=!1,this.node.active=!0}Hide(){this.node.active&&(this.node.active=!1)}RefreshAssories(){let e=f.GetAssories(f.GetItemType(this.data.Type));for(let t=0;t<this.Accessories.children.length;t++){const a=this.Accessories.children[t];if(a.active=e.find((e=>e==a.name)),a.active){a.getChildByName("Icon").getComponent(s).spriteFrame=null;let e=this.data.Assories.find((e=>e.Type==a.name));e&&u.LoadSpriteFrame(p.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name}`).then((e=>{a.getChildByName("Icon").getComponent(s).spriteFrame=e}))}}}OnButtonClick(e){switch(l.AudioClipPlay(m.Audio.ButtonClick),e.target.name){case"ConfirmButton":G.RemovePlayerEquippedItem(this.data)&&G.AddPlayerItem(this.data),r.Instance.RefreshEquipButtons(),this.Hide();break;case"枪口":case"握把":case"弹匣":case"枪托":case"瞄具":if(!this.data)return;let t=G.UnequipAssorie(this.data,e.target.name);t&&G.AddPlayerItem(t,!1),this.RefreshAssories();break;case"ReturnButtton":this.Hide()}}onEnable(){}onDisable(){}})||y);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Event.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e3941gLSTtAKZs/e9wJhcPO","XGTW_Event",void 0);class n{}e("XGTW_Event",n),n.ShowTakeSupplies="MyEvent.ShowTakeSupplies",n.ShowTakeItem="MyEvent.ShowTakeItem",n.Evacuation="MyEvent.Evacuation",n.RefreshMoney="MyEvent.REFRESH_MONEY",n.RefreshEnergyBattery="MyEvent.RefreshEnergyBattery",n.RefreshHuiZhangPiece="MyEvent.RefreshHuiZhangPiece",n.RefreshKCQB="MyEvent.RefreshKCQB",n.RefreshSkinPiece="MyEvent.RefreshSkinPiece",n.REFRESH_ITEMS="MyEvent.REFRESH_ITEMS",n.RefreshInventoryButtons="MyEvent.REFRESH_INVENTORYITEMS",n.RefreshInventoryItems="MyEvent.REFRESH_GOODSITEMS",n.RefreshBackpackGoodsItem="MyEvent.RefreshPlayerGoodsItem",n.RefreshEquip="MyEvent.RefreshEquip",n.RefreshHP="MyEvent.RefreshHP",n.RefreshBulletCount="MyEvent.RefreshBulletCount",n.LEVEL_LOAD_DONE="MyEvent.LEVEL_LOAD_DONE",n.CameraZoomIn="MyEvent.CameraZoomIn",n.CameraZoomOut="MyEvent.CameraZoomOut",n.RefreshMapButtonLabel="MyEvent.RefreshMapButtonLabel",t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_FailPanel.ts",["cc","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./XGTW_Constant.ts","./UIManager.ts","./GameManager.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(a){var e,t,n,o,s,i,l,c,r,u,m,p,g,G,d,h,M;return{setters:[function(a){e=a.cclegacy,t=a.Component,n=a.Label,o=a.Tween,s=a.UIOpacity,i=a.tween,l=a._decorator},function(a){c=a.XGTW_AudioManager},function(a){r=a.default},function(a){u=a.default},function(a){m=a.XGTW_Constant},function(a){p=a.UIManager,g=a.Panel},function(a){G=a.GameManager},function(a){d=a.XGTW_DataManager},function(a){h=a.ProjectEventManager,M=a.ProjectEvent}],execute:function(){var k;e._RF.push({},"b122dT6RKpHupm8GQbM+eGO","XGTW_FailPanel",void 0);const{ccclass:f,property:W}=l;a("default",f("XGTW_FailPanel")(k=class extends t{constructor(...a){super(...a),this.NameLabel=null,this.WeaponNameLabel=null,this.BlackMask=null}onLoad(){this.NameLabel=r.GetComponent("NameLabel",this.node,n),this.WeaponNameLabel=r.GetComponent("WeaponNameLabel",this.node,n),this.BlackMask=r.GetNode("BlackMask",this.node)}Show(a){h.emit(M.游戏结束,G.GameData.gameName),u.JJMode=!1,d.EXP+=500,d.RankPoint+=500,o.stopAllByTarget(this.BlackMask.getComponent(s)),this.BlackMask.getComponent(s).opacity=255,i(this.BlackMask.getComponent(s)).to(1,{opacity:0}).start(),a&&(this.NameLabel.string=`${a.playerData.Name}`,this.WeaponNameLabel.string=`${a.weapon.Name}`)}OnButtonClick(a){switch(c.AudioClipPlay(m.Audio.ButtonClick),a.target.name){case"EndButton":p.ShowPanel(g.LoadingPanel,[G.GameData,G.GameData.startScene])}}})||k);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_FireGun.ts",["cc"],(function(t){var e,n,o,r;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.RigidBody2D,r=t._decorator}],execute:function(){var c;e._RF.push({},"f366au7y0ZHCIhZPC613OGR","XGTW_FireGun",void 0);const{ccclass:i,property:s}=r;t("default",i("XGTW_FireGun")(c=class extends n{constructor(...t){super(...t),this.rigidbody=null}onLoad(){this.rigidbody=this.node.getComponent(o)}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_FloatingText.ts",["cc","./PoolManager.ts"],(function(t){var e,o,n,i,s,c,a,h,r,l;return{setters:[function(t){e=t.cclegacy,o=t.Component,n=t.Vec3,i=t.RichText,s=t.UIOpacity,c=t.Tween,a=t.tween,h=t.v3,r=t._decorator},function(t){l=t.PoolManager}],execute:function(){var d;e._RF.push({},"b745cpqROVHpKfI0UbAfkdH","XGTW_FloatingText",void 0);const{ccclass:T,property:p}=r;t("XGTW_FloatingText",T("XGTW_FloatingText")(d=class extends o{constructor(...t){super(...t),this.richText=null}Show(t,e,o=!1,a=.35,h=1){this.node.setScale(n.ONE);let r=`<color=${e}>${t}</c>`;switch(o&&(r=`<b>${r}</b>`),this.richText=this.node.getChildByName("RichText").getComponent(i),this.richText.string=r,this.richText.node.getComponent(s)?this.richText.node.getComponent(s).opacity=255:this.richText.node.addComponent(s),c.stopAllByTarget(this.node),c.stopAllByTarget(this.richText.node),h){case 1:this.ShowTween1(a);break;case 2:this.ShowTween2(a);break;default:this.ShowTween1(a)}}ShowTween1(t){this.node.setScale(n.ZERO),a(this.node).to(.2,{scale:n.ONE},{easing:"backOut"}).delay(t).call((()=>a(this.richText.node.getComponent(s)).to(.25,{opacity:100}).start())).to(.25,{position:h(this.node.position.x,this.node.position.y+150)}).call((()=>l.PutNode(this.node))).start()}ShowTween2(t){a(this.richText.node.getComponent(s)).delay(t).to(.25,{opacity:0}).start(),a(this.node).delay(t).to(.25,{position:h(0,250)}).call((()=>{l.PutNode(this.node)})).start()}})||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_FreeRewardPanel.ts",["cc","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./PrefsManager.ts","./UIManager.ts","./Tools.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts","./GameManager.ts"],(function(e){var a,n,t,r,o,s,c,u,i,l,d,P,f;return{setters:[function(e){a=e.cclegacy,n=e.Component,t=e._decorator},function(e){r=e.XGTW_AudioManager},function(e){o=e.XGTW_Constant},function(e){s=e.XGTW_UIManager},function(e){c=e.default},function(e){u=e.UIManager},function(e){i=e.Tools},function(e){l=e.XGTW_DataManager},function(e){d=e.ProjectEventManager,P=e.ProjectEvent},function(e){f=e.GameManager}],execute:function(){var g;a._RF.push({},"83280VQ8ulJB67oDSzjGBNW","XGTW_FreeRewardPanel",void 0);const{ccclass:G,property:_}=t;e("default",G("XGTW_FreeRewardPanel")(g=class extends n{Show(){d.emit(P.弹出窗口,f.GameData.gameName)}OnButtonClick(e){switch(r.AudioClipPlay(o.Audio.ButtonClick),e.target.name){case"Mask":case"CloseButton":s.Instance.HidePanel(o.Panel.FreeRewardPanel);break;case"Button":if(c.GetBool(o.Key.FreeReward))return void u.ShowTip("已领取过");if(l.JunXuItems.find((e=>"RPK16-神秘图腾"==e.Name))){let e=i.Clone(l.JunXuItems.find((e=>"RPK16-神秘图腾"==e.Name)));l.AddPlayerItem(e),s.Instance.HidePanel(o.Panel.FreeRewardPanel),s.Instance.ShowPanel(o.Panel.RewardPanel,[e]),c.SetBool(o.Key.FreeReward,!0)}}}})||g);a._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GameBackpackPanel.ts",["cc","./XGTW_DroppedItem.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./UIManager.ts","./PoolManager.ts","./XGTW_BackpackItem.ts","./XGTW_BackpackWeaponButton.ts","./XGTW_DataManager.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(e){var t,a,n,o,s,i,h,l,c,r,p,u,k,m,B,f,d,g,I,W;return{setters:[function(e){t=e.cclegacy,a=e._decorator,n=e.Component,o=e.Label},function(e){s=e.default},function(e){i=e.XGTW_AudioManager},function(e){h=e.default},function(e){l=e.default},function(e){c=e.XGTW_Constant},function(e){r=e.XGTW_UIManager},function(e){p=e.EventManager},function(e){u=e.XGTW_Event},function(e){k=e.UIManager},function(e){m=e.PoolManager},function(e){B=e.default},function(e){f=e.default},function(e){d=e.XGTW_DataManager},function(e){g=e.GameManager},function(e){I=e.ProjectEventManager,W=e.ProjectEvent}],execute:function(){var G,P;t._RF.push({},"32ce3vCCPFO/qlNTqYbDGb6","XGTW_GameBackpackPanel",void 0);const{ccclass:T,property:y}=a;e("default",T("XGTW_GameBackpackPanel")(((P=class e extends n{constructor(...e){super(...e),this.QualityBar=null,this.ChangeTypeButton=null,this.ScrollViewContent=null,this.Weapon_0=null,this.Weapon_1=null,this.MeleeWeapon=null,this.Pistol=null,this.Helmet=null,this.Bulletproof=null,this.Backpack=null,this.TotalWeightLabel=null,this.TotalPriceLabel=null,this.BackpackItems=[],this.SelectData=null,this.isBackpackList=!0}onLoad(){e.Instance=this,this.QualityBar=h.GetNode("QualityBar",this.node),this.ChangeTypeButton=h.GetNode("ChangeTypeButton",this.node),this.ScrollViewContent=h.GetNode("ScrollViewContent",this.node),this.Weapon_0=h.GetComponent("Weapon_0",this.node,f),this.Weapon_1=h.GetComponent("Weapon_1",this.node,f),this.MeleeWeapon=h.GetComponent("MeleeWeapon",this.node,f),this.Pistol=h.GetComponent("Pistol",this.node,f),this.Helmet=h.GetComponent("Helmet",this.node,f),this.Bulletproof=h.GetComponent("Bulletproof",this.node,f),this.Backpack=h.GetComponent("Backpack",this.node,f),this.TotalWeightLabel=h.GetComponent("TotalWeightLabel",this.node,o),this.TotalPriceLabel=h.GetComponent("TotalPriceLabel",this.node,o)}Show(){I.emit(W.弹出窗口,g.GameData.gameName),this.node.active||(this.node.active=!0),this.isBackpackList=!0,this.RefreshWeaponButtons(),this.RefreshChangeTypeButton(),this.RefreshItems()}RefreshWeaponButtons(){this.Weapon_0.Refresh(d.PlayerData.Weapon_0),this.Weapon_1.Refresh(d.PlayerData.Weapon_1),this.MeleeWeapon.Refresh(d.PlayerData.MeleeWeapon),this.Pistol.Refresh(d.PlayerData.Pistol),this.Helmet.Refresh(d.PlayerData.Helmet),this.Bulletproof.Refresh(d.PlayerData.Bulletproof),this.Backpack.Refresh(d.PlayerData.Backpack)}RefreshItems(){this.BackpackItems.forEach((e=>m.PutNode(e.node)));let e=this.isBackpackList?d.PlayerData.BackpackItems:d.PlayerData.LockboxItems,t=0,a=0;for(let n=0;n<e.length;n++){const o=e[n];m.GetNodeByBundle(g.GameData.DefaultBundle,"Prefabs/UI/BackpackItem",this.ScrollViewContent).then((e=>{let t=e.getComponent(B);this.isBackpackList?t.Init(o,this.PutInLockbox.bind(this),this.ThrowAway.bind(this),"存加密","丢弃"):t.Init(o,this.PutInBackpack.bind(this),this.ThrowAwayFromLockBox.bind(this),"放背包","丢弃"),this.BackpackItems.push(t)})),t+=Math.ceil(o.Price),a+=Math.ceil(o.Weight)}this.TotalPriceLabel.string=`${t}`,this.TotalWeightLabel.string=`${a}`}GetLockBoxTotalWeight(){let e=d.PlayerData.LockboxItems,t=0;for(let a=0;a<e.length;a++)t+=Math.ceil(e[a].Weight);return t}ThrowAway(e){d.RemoveItemFromBackpack(e),m.GetNodeByBundle(g.GameData.DefaultBundle,"Prefabs/DroppedItem",l.Instance.ItemsNd).then((t=>{t.setWorldPosition(l.Instance.player.getWorldPosition()),t.getComponent(s).Init(e)})),this.RefreshItems(),i.AudioClipPlay(c.Audio.Unequip),p.Scene.emit(u.RefreshEquip)}ThrowAwayFromLockBox(e){d.RemoveItemFromLockbox(e),m.GetNodeByBundle(g.GameData.DefaultBundle,"Prefabs/DroppedItem",l.Instance.ItemsNd).then((t=>{t.setWorldPosition(l.Instance.player.getWorldPosition()),t.getComponent(s).Init(e)})),this.RefreshItems(),i.AudioClipPlay(c.Audio.Unequip),p.Scene.emit(u.RefreshEquip)}PutInBackpack(e){d.RemoveItemFromLockbox(e),d.AddItemToBackpack(e),this.RefreshItems()}PutInLockbox(e){this.GetLockBoxTotalWeight()+e.Weight>300&&k.ShowTip("重量超出上限"),d.RemoveItemFromBackpack(e),d.AddItemToLockbox(e),this.RefreshItems()}RefreshItemSelect(e){this.BackpackItems.forEach((t=>t.SetSelect(e)))}RefreshChangeTypeButton(){this.ChangeTypeButton.getChildByName("Backpack").active=this.isBackpackList,this.ChangeTypeButton.getChildByName("Lockbox").active=!this.isBackpackList,this.ChangeTypeButton.getChildByName("ChangeTypeButtonLb").getComponent(o).string=this.isBackpackList?"背包":"加密箱"}OnButtonClick(e){switch(i.AudioClipPlay(c.Audio.ButtonClick),e.target.name){case"ReturnButtton":r.Instance.HidePanel(c.Panel.GameBackpackPanel);break;case"ChangeTypeButton":this.isBackpackList=!this.isBackpackList,this.RefreshChangeTypeButton(),this.RefreshItems()}}onEnable(){p.on(u.RefreshInventoryButtons,this.RefreshWeaponButtons,this),p.on(u.RefreshBackpackGoodsItem,this.RefreshItems,this)}onDisable(){p.off(u.RefreshInventoryButtons,this.RefreshWeaponButtons,this),p.off(u.RefreshBackpackGoodsItem,this.RefreshItems,this)}}).Instance=null,G=P))||G);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GameInventoryPanel.ts",["cc","./XGTW_DroppedItem.ts","./XGTW_DataManager.ts","./XGTW_PlayerController.ts","./XGTW_GamePanel.ts","./XGTW_GoodsItem.ts","./XGTW_InventoryButton.ts","./XGTW_ValueBar.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./UIManager.ts","./XGTW_GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./PoolManager.ts","./Tools.ts","./XGTW_Data.ts","./XGTW_AchievementManager.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(e){var t,a,o,s,n,l,i,h,u,r,c,m,d,I,p,D,G,f,P,S,B,y,k,C,b,W,v,T,R;return{setters:[function(e){t=e.cclegacy,a=e.Component,o=e.Label,s=e._decorator},function(e){n=e.default},function(e){l=e.XGTW_DataManager},function(e){i=e.default},function(e){h=e.default},function(e){u=e.default},function(e){r=e.default},function(e){c=e.default},function(e){m=e.XGTW_AudioManager},function(e){d=e.default},function(e){I=e.XGTW_ItemType,p=e.XGTW_Constant},function(e){D=e.XGTW_UIManager},function(e){G=e.UIManager},function(e){f=e.default},function(e){P=e.EventManager},function(e){S=e.XGTW_Event},function(e){B=e.PoolManager},function(e){y=e.Tools},function(e){k=e.XGTW_ItemData,C=e.XGTW_PlayerData},function(e){b=e.XGTW_AchievementManager,W=e.XGTW_EAchievement},function(e){v=e.GameManager},function(e){T=e.ProjectEventManager,R=e.ProjectEvent}],execute:function(){var _;t._RF.push({},"0cf55JPtZNP76jkyjn4zXyx","XGTW_GameInventoryPanel",void 0);const{ccclass:g,property:M}=s;let E=e("InventoryType",function(e){return e.None="None",e.Helmet="头盔",e.Bulletproof="防弹衣",e.Weapon_0="主武器",e.Weapon_1="副武器",e.Pistol="手枪",e.MeleeWeapon="近战武器",e}({}));e("default",g("XGTW_GameInventoryPanel")(_=class extends a{constructor(...e){super(...e),this.Helmet=null,this.Bulletproof=null,this.Weapon_0=null,this.Weapon_1=null,this.Pistol=null,this.MeleeWeapon=null,this.buttons=[],this.MoneyLabel=null,this.GoodsTitleLabel=null,this.GoodsContentLabel=null,this.GoodsScrollViewContent=null,this.PlayerGoodsContent=null,this.DetailPanel=null,this.DetailEquipButton=null,this.DetailGoodsContent=null,this.DetailGoodsLabel=null,this.DetailUseButton=null,this.DetailTakeButton=null,this.GoodsSearchLabel=null,this.ValuesContent=null,this.PlayerBackpackItems=[],this.GoodsItems=[],this.DetailGoodsItem=null,this.ItemDatas=[],this.SelectItemData=null,this.valueBars=[],this.InventoryType=void 0}onLoad(){this.Helmet=d.GetComponent("Helmet",this.node,r),this.Bulletproof=d.GetComponent("Bulletproof",this.node,r),this.Weapon_0=d.GetComponent("Weapon_0",this.node,r),this.Weapon_1=d.GetComponent("Weapon_1",this.node,r),this.Pistol=d.GetComponent("Pistol",this.node,r),this.MeleeWeapon=d.GetComponent("MeleeWeapon",this.node,r),this.MoneyLabel=d.GetComponent("MoneyLabel",this.node,o),this.buttons.push(this.Helmet),this.buttons.push(this.Bulletproof),this.buttons.push(this.Weapon_0),this.buttons.push(this.Weapon_1),this.buttons.push(this.Pistol),this.buttons.push(this.MeleeWeapon),this.GoodsTitleLabel=d.GetComponent("GoodsTitleLabel",this.node,o),this.GoodsContentLabel=d.GetComponent("GoodsContentLabel",this.node,o),this.GoodsScrollViewContent=d.GetNode("GoodsScrollViewContent",this.node),this.DetailPanel=d.GetNode("DetailPanel",this.node),this.DetailEquipButton=d.GetNode("DetailEquipButton",this.node),this.DetailGoodsContent=d.GetNode("DetailGoodsContent",this.node),this.DetailGoodsLabel=d.GetComponent("DetailGoodsLabel",this.node,o),this.DetailUseButton=d.GetNode("DetailUseButton",this.node),this.DetailTakeButton=d.GetNode("DetailTakeButton",this.node),this.PlayerGoodsContent=d.GetNode("PlayerGoodsContent",this.node),this.GoodsSearchLabel=d.GetNode("GoodsSearchLabel",this.node),this.ValuesContent=d.GetNode("ValuesContent",this.node)}Show(e,t,a=2){T.emit(R.弹出窗口,v.GameData.gameName),this.Helmet.Set(E.Helmet),this.Bulletproof.Set(E.Bulletproof),this.Weapon_0.Set(E.Weapon_0),this.Weapon_1.Set(E.Weapon_1),this.Pistol.Set(E.Pistol),this.MeleeWeapon.Set(E.MeleeWeapon),this.GoodsSearchLabel.active=!0,this.GoodsItems.forEach((e=>B.PutNode(e.node))),this.GoodsSearchLabel.active=t&&t.length>0,this.scheduleOnce((()=>{this.GoodsSearchLabel.active=!1,this.RefreshGoodsItem()}),a),this.SelectItemData=null,this.ItemDatas=t,this.GoodsTitleLabel.string=`${e}`,this.RefreshMoney(),this.RefreshInventoryButtons(),this.RefreshBackpackGoodsItem(),this.ShowValues()}ShowDetailPanel(e,t=!1){if(this.DetailPanel.active=e,e){this.DetailGoodsItem&&B.PutNode(this.DetailGoodsItem.node),B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/GoodsItem",this.DetailGoodsContent).then((e=>{let t=e.getComponent(u);t.InitSimple(this.SelectItemData),this.DetailGoodsItem=t,this.DetailGoodsLabel.string=`${this.SelectItemData.Name}`}));let e=-1!=l.PlayerData.BackpackItems.indexOf(this.SelectItemData);this.DetailUseButton.active=(!t||e)&&!(this.SelectItemData.Type==I[I.战利品]),this.DetailTakeButton.active=-1!=this.ItemDatas.indexOf(this.SelectItemData)}else this.SelectItemData=null;this.ShowValues(null!=this.SelectItemData&&t,this.SelectItemData)}ShowValues(e=!1,t=null){if(this.valueBars.forEach((e=>B.PutNode(e))),this.ValuesContent.active=e,e&&!(this.ItemDatas&&this.ItemDatas.length>0)){let e=I[`${t.Type}`];k.IsGun(e)&&(B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(c).Init(t.Damage/90,"伤害"),this.valueBars.push(e)})),B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(c).Init((1.5-t.FireRate)/1.5,"射速"),this.valueBars.push(e)})),B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(c).Init(t.Recoil/.5,"后坐力"),this.valueBars.push(e)}))),k.IsEquip(e)&&(B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(c).Init(t.Lv/5,"防护等级"),this.valueBars.push(e)})),B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(c).Init(t.Durability/100,"耐久度"),this.valueBars.push(e)}))),k.IsMedicine(e)&&(B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(c).Init(t.HP/500,"血量"),this.valueBars.push(e)})),B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((e=>{e.getComponent(c).Init((6-t.Time)/6,"速度"),this.valueBars.push(e)})))}}RefreshGoodsItem(){this.GoodsItems.forEach((e=>B.PutNode(e.node)));for(let e=0;e<this.ItemDatas.length;e++){const t=this.ItemDatas[e];B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/GoodsItem",this.GoodsScrollViewContent).then((e=>{let a=e.getComponent(u);a.Init(t,this.OnGoodsItemCallback.bind(this)),this.GoodsItems.push(a)}))}}RefreshInventoryButtons(){this.buttons.forEach((e=>e.Refresh()))}RefreshBackpackGoodsItem(){this.PlayerBackpackItems.forEach((e=>B.PutNode(e.node)));for(let e=0;e<C.MaxBackpackItems;e++){const t=l.PlayerData.BackpackItems[e];B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/UI/GoodsItem",this.PlayerGoodsContent).then((e=>{let a=e.getComponent(u);t?a.Init(t,this.OnGoodsItemCallback.bind(this)):a.InitBlank(),this.PlayerBackpackItems.push(a)}))}}OnGoodsItemCallback(e){this.GoodsItems.forEach((t=>t.SetSelected(e))),this.PlayerBackpackItems.forEach((t=>t.SetSelected(e))),this.SelectItemData=e,this.ShowDetailPanel(!0)}OnButtonClick(e){switch(m.AudioClipPlay(p.Audio.ButtonClick),e.target.name){case"Helmet":l.PlayerData.Helmet?(this.SelectItemData=l.PlayerData.Helmet,this.ShowDetailPanel(!0,!0)):D.Instance.ShowPanel(p.Panel.ShopPanel,[I.头盔]),this.buttons.forEach((t=>t.RefreshSelected(E[e.target.name])));break;case"Bulletproof":l.PlayerData.Bulletproof?(this.SelectItemData=l.PlayerData.Bulletproof,this.ShowDetailPanel(!0,!0)):D.Instance.ShowPanel(p.Panel.ShopPanel,[I.防弹衣]),this.buttons.forEach((t=>t.RefreshSelected(E[e.target.name])));break;case"Weapon_0":l.PlayerData.Weapon_0?(this.SelectItemData=l.PlayerData.Weapon_0,this.ShowDetailPanel(!0,!0)):D.Instance.ShowPanel(p.Panel.ShopPanel,[I.突击步枪]),this.buttons.forEach((t=>t.RefreshSelected(E[e.target.name])));break;case"Weapon_1":l.PlayerData.Weapon_1?(this.SelectItemData=l.PlayerData.Weapon_1,this.ShowDetailPanel(!0,!0)):D.Instance.ShowPanel(p.Panel.ShopPanel,[I.射手步枪]),this.buttons.forEach((t=>t.RefreshSelected(E[e.target.name])));break;case"Pistol":l.PlayerData.Pistol?(this.SelectItemData=l.PlayerData.Pistol,this.ShowDetailPanel(!0,!0)):D.Instance.ShowPanel(p.Panel.ShopPanel,[I.手枪]),this.buttons.forEach((t=>t.RefreshSelected(E[e.target.name])));break;case"MeleeWeapon":this.SelectItemData=l.PlayerData.MeleeWeapon,this.ShowDetailPanel(!0,!0),this.buttons.forEach((t=>t.RefreshSelected(E[e.target.name])));break;case"ReturnButton":D.Instance.HidePanel(p.Panel.GameInventoryPanel);break;case"DetailUseButton":this.SelectItemData.Type==I[I.子弹]?l.PlayerData.Weapon_0&&l.PlayerData.Weapon_0.Desc==this.SelectItemData.Name?(l.PlayerData.Weapon_0.BulletCount+=this.SelectItemData.Count,m.AudioClipPlay(p.Audio.Equip),l.RemoveItemFromBackpack(this.SelectItemData),this.ShowDetailPanel(!1)):l.PlayerData.Weapon_1&&l.PlayerData.Weapon_1.Desc==this.SelectItemData.Name?(l.PlayerData.Weapon_1.BulletCount+=this.SelectItemData.Count,m.AudioClipPlay(p.Audio.Equip),l.RemoveItemFromBackpack(this.SelectItemData),this.ShowDetailPanel(!1)):l.PlayerData.Pistol&&l.PlayerData.Pistol.Desc==this.SelectItemData.Name?(l.PlayerData.Pistol.BulletCount+=this.SelectItemData.Count,m.AudioClipPlay(p.Audio.Equip),l.RemoveItemFromBackpack(this.SelectItemData),this.ShowDetailPanel(!1)):G.ShowTip("没有合适的枪械"):k.IsMainGun(I[this.SelectItemData.Type])?l.AddEquippedItem(E.Weapon_0,this.SelectItemData)||l.AddEquippedItem(E.Weapon_1,this.SelectItemData)?(this.RefreshGoodsItem(),m.AudioClipPlay(p.Audio.Equip),l.RemoveItemFromBackpack(this.SelectItemData)):G.ShowTip("装备已满"):I[this.SelectItemData.Type]==I.手枪?l.AddEquippedItem(E.Pistol,this.SelectItemData)?(this.RefreshGoodsItem(),m.AudioClipPlay(p.Audio.Equip),l.RemoveItemFromBackpack(this.SelectItemData)):G.ShowTip("已有装备"):I[this.SelectItemData.Type]==I.头盔?l.AddEquippedItem(E.Helmet,this.SelectItemData)?(this.RefreshGoodsItem(),m.AudioClipPlay(p.Audio.Equip),l.RemoveItemFromBackpack(this.SelectItemData)):G.ShowTip("已有装备"):I[this.SelectItemData.Type]==I.防弹衣?l.AddEquippedItem(E.Bulletproof,this.SelectItemData)?(this.RefreshGoodsItem(),m.AudioClipPlay(p.Audio.Equip),l.RemoveItemFromBackpack(this.SelectItemData)):G.ShowTip("已有装备"):I[this.SelectItemData.Type]==I.药品&&(f.Instance.playerCtrl.HP<i.MAXHP?(D.Instance.HidePanel(p.Panel.GameInventoryPanel),h.Instance.ShowUseItem(!0,this.SelectItemData,(e=>{f.Instance.playerCtrl.HP+=e.HP,l.RemoveItemFromBackpack(e),b.AddAchievementTimes(W.根本死不掉),this.RefreshBackpackGoodsItem()}))):G.ShowTip("血量已满")),this.ShowDetailPanel(!1),P.Scene.emit(S.RefreshEquip);break;case"DetailDetailButton":D.Instance.ShowPanel(p.Panel.ItemDetailPanel,[this.SelectItemData]);break;case"DetailDropButton":if(this.SelectItemData){const e=this.SelectItemData;if(e.Type==I[I.近战])return;(l.RemovePlayerItem(this.SelectItemData)||l.RemovePlayerEquippedItem(this.SelectItemData)||l.RemoveItemFromBackpack(this.SelectItemData))&&B.GetNodeByBundle(v.GameData.DefaultBundle,"Prefabs/DroppedItem",f.Instance.ItemsNd).then((t=>{t.setWorldPosition(f.Instance.player.getWorldPosition()),t.getComponent(n).Init(e)})),m.AudioClipPlay(p.Audio.Unequip),this.RefreshGoodsItem(),this.ShowDetailPanel(!1),P.Scene.emit(S.RefreshEquip)}break;case"DetailCloseButton":this.ShowDetailPanel(!1);break;case"DetailTakeButton":l.AddItemToBackpack(this.SelectItemData)?(y.RemoveItemFromArray(this.ItemDatas,this.SelectItemData),this.RefreshBackpackGoodsItem(),this.RefreshGoodsItem()):G.ShowTip("背包已满"),this.ShowDetailPanel(!1)}this.RefreshInventoryButtons()}RefreshMoney(){this.MoneyLabel.string=`${l.Money}`}onEnable(){P.on(S.RefreshMoney,this.RefreshMoney,this),P.on(S.RefreshInventoryItems,this.RefreshGoodsItem,this),P.on(S.RefreshBackpackGoodsItem,this.RefreshBackpackGoodsItem,this),P.on(S.RefreshInventoryButtons,this.RefreshInventoryButtons,this)}onDisable(){P.off(S.RefreshMoney,this.RefreshMoney,this),P.off(S.RefreshInventoryItems,this.RefreshGoodsItem,this),P.off(S.RefreshBackpackGoodsItem,this.RefreshBackpackGoodsItem,this),P.off(S.RefreshInventoryButtons,this.RefreshInventoryButtons,this)}})||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GameItemUI.ts",["cc","./XGTW_InventoryPanel.ts","./BundleManager.ts","./NodeUtil.ts","./GameManager.ts","./XGTW_DataManager.ts"],(function(e){var t,a,n,l,s,o,i,r,u,c,h;return{setters:[function(e){t=e.cclegacy,a=e.Component,n=e.Sprite,l=e.Label,s=e.v3,o=e._decorator},function(e){i=e.InventoryType},function(e){r=e.BundleManager},function(e){u=e.default},function(e){c=e.GameManager},function(e){h=e.XGTW_DataManager}],execute:function(){var p;t._RF.push({},"f45be6j5mVEaaDYYdwFMLwm","XGTW_GameItemUI",void 0);const{ccclass:_,property:m}=o;e("default",_("XGTW_GameItemUI")(p=class extends a{constructor(...e){super(...e),this.Selected=null,this.Icon=null,this.Name_Lb=null,this.Bullet_Lb=null,this.type=i.None}onLoad(){this.Selected=u.GetNode("Selected",this.node),this.Icon=u.GetComponent("Icon",this.node,n),this.Name_Lb=u.GetComponent("Name_Lb",this.node,l),this.Bullet_Lb=u.GetComponent("Bullet_Lb",this.node,l)}Set(e){this.type=e}Reset(){this.Bullet_Lb.string=""}Refresh(){this.Reset();let e=null,t=1;switch(this.type){case i.Weapon_0:t=1,e=h.PlayerData.Weapon_0,e&&(this.Bullet_Lb.string=`${e.BulletCount}`);break;case i.Weapon_1:t=1,e=h.PlayerData.Weapon_1,e&&(this.Bullet_Lb.string=`${e.BulletCount}`);break;case i.Pistol:e=h.PlayerData.Pistol,t=.4,e&&(this.Bullet_Lb.string=`${e.BulletCount}`);break;case i.MeleeWeapon:t=.5,e=h.PlayerData.MeleeWeapon}this.Name_Lb.string=e?`${e.Name}`:`${this.type}`,this.Icon.node.active=null!=e,null!=e&&(this.Icon.node.setScale(s(t,t)),r.LoadSpriteFrame(c.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name}`).then((e=>{this.Icon.spriteFrame=e})))}RefreshBulletCount(){switch(this.type){case i.Weapon_0:h.PlayerData.Weapon_0&&(this.Bullet_Lb.string=`${h.PlayerData.Weapon_0.BulletCount}`);break;case i.Weapon_1:h.PlayerData.Weapon_1&&(this.Bullet_Lb.string=`${h.PlayerData.Weapon_1.BulletCount}`);break;case i.Pistol:h.PlayerData.Pistol&&(this.Bullet_Lb.string=`${h.PlayerData.Pistol.BulletCount}`)}}RefreshSelected(e){this.Selected.active=this.type==e}})||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XGTW_PlayerController.ts","./XGTW_UIManager.ts","./XGTW_Constant.ts","./BundleManager.ts","./GameManager.ts","./Banner.ts","./Tools.ts"],(function(e){var t,n,a,i,r,o,l,s,p,d,u,c,h,g,y,m,M,f,G,b,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.Node,r=e.TiledMap,o=e._decorator,l=e.Component,s=e.instantiate,p=e.find,d=e.RigidBody2D,u=e.ERigidBody2DType,c=e.BoxCollider2D,h=e.UITransform,g=e.v2},function(e){y=e.default},function(e){m=e.XGTW_UIManager},function(e){M=e.XGTW_Constant,f=e.XGTW_QualityColorHex},function(e){G=e.BundleManager},function(e){b=e.GameManager},null,function(e){C=e.Tools}],execute:function(){var P,T,I,W,_,S,x,B,X,v,E,w;a._RF.push({},"01dbdApV2lBR5WKMhPqSy95","XGTW_GameManager",void 0);const{ccclass:A,property:L}=o;let N=e("GameMode",function(e){return e[e.ESCAPE=0]="ESCAPE",e[e.TEAM=1]="TEAM",e}({}));e("default",(P=A("XGTW_GameManager"),T=L(i),I=L(i),W=L(r),_=L(i),P(((w=class e extends l{constructor(...e){super(...e),n(this,"playerNd",B,this),n(this,"ItemsNd",X,this),this.player=null,this.playerCtrl=null,n(this,"tiledMap",v,this),n(this,"MapNodes",E,this),this.map=new Map,this.aStarMap=new Map,this.timer=0}onLoad(){e.Instance=this,this.InitPlayer(),this.InitMap(),e.GameMode==N.ESCAPE&&m.Instance.ShowPanel(M.Panel.CommonTipPanel,["搜寻物资并找到撤离点。","知道了","",()=>{m.Instance.HidePanel(M.Panel.CommonTipPanel)}])}InitPlayer(){G.LoadPrefab(b.GameData.DefaultBundle,"Player").then((e=>{this.player&&this.player.destroy(),this.player=s(e),this.player.setParent(p("Canvas")),this.player.setSiblingIndex(this.playerNd.getSiblingIndex()),this.player.setWorldPosition(this.playerNd.getWorldPosition()),this.playerCtrl=this.player.getComponent(y)}))}InitMap(){let e=this.tiledMap.getTileSize(),t=this.tiledMap.getLayer("Obstacle");for(let n=0;n<t.getLayerSize().width;n++)for(let a=0;a<t.getLayerSize().height;a++){let i=t.getTiledTileAt(n,a,!0);if(0!=i.grid){let t=i.node.addComponent(d);t.type=u.Static;let n=i.node.addComponent(c);t.group=M.Group.Obstacle,n.group=M.Group.Obstacle,i.node.getComponent(h).setContentSize(e.width,e.height),n.offset=g(e.width/2,e.height/2),n.size=e,n.apply()}}}update(e){this.timer+=e}GetMapPosition(e){const t=Array.from(this.map.entries()).find((([t,n])=>n.getComponent(h).getBoundingBoxToWorld().contains(g(e.getWorldPosition().x,e.getWorldPosition().y))));return t?t[0]:""}IsInCantArrivePosition(e){return!!Array.from(this.aStarMap.entries()).find((([t,n])=>n.getComponent(h).getBoundingBoxToWorld().contains(g(e.getWorldPosition().x,e.getWorldPosition().y))))}static GetSceneName(){let e="XGTW_Lv_5";return 0==this.MapIndex&&(e="XGTW_Lv_5"),1==this.MapIndex&&(e="XGTW_Lv_6"),2==this.MapIndex&&(e="XGTW_Lv_7"),e}static GetQualityColor(e){let t=Number(e),n=f.Common;switch(t){case 0:n=f.Common;break;case 1:n=f.Uncommon;break;case 2:n=f.Rare;break;case 3:n=f.Superior;break;case 4:n=f.Epic;break;case 5:n=f.Legendary;break;case 6:n=f.Mythic}return C.GetColorFromHex(n)}}).Instance=null,w.IsFirstUnlock=!0,w.IsGameOver=!1,w.GameMode=N.ESCAPE,w.MapIndex=0,w.Mode=0,w.JJMode=!1,B=t((x=w).prototype,"playerNd",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(x.prototype,"ItemsNd",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(x.prototype,"tiledMap",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(x.prototype,"MapNodes",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=x))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GamePanel.ts",["cc","./XGTW_CameraController.ts","./XGTW_GameItemUI.ts","./XGTW_HPBar.ts","./XGTW_InventoryPanel.ts","./XGTW_SItem.ts","./XGTW_AudioManager.ts","./BundleManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./UIManager.ts","./UI_SkillCooldown.ts","./GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./Tools.ts","./PoolManager.ts","./XGTW_Data.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(e){var t,a,n,o,i,s,l,h,u,r,d,p,c,m,I,B,T,f,S,C,M,G,R,y,P,_,v,k,g,W,E,D,w,b,N,U;return{setters:[function(e){t=e.cclegacy,a=e._decorator,n=e.Component,o=e.Label,i=e.Sprite,s=e.Node,l=e.Color,h=e.Tween,u=e.tween,r=e.v3,d=e.director},function(e){p=e.default},function(e){c=e.default},function(e){m=e.default},function(e){I=e.InventoryType},function(e){B=e.default},function(e){T=e.XGTW_AudioManager},function(e){f=e.BundleManager},function(e){S=e.XGTW_Constant,C=e.XGTW_ItemType},function(e){M=e.XGTW_UIManager},function(e){G=e.default},function(e){R=e.default,y=e.GameMode},function(e){P=e.UIManager,_=e.Panel},function(e){v=e.default},function(e){k=e.GameManager},function(e){g=e.EventManager},function(e){W=e.XGTW_Event},function(e){E=e.Tools},function(e){D=e.PoolManager},function(e){w=e.XGTW_ItemData},function(e){b=e.XGTW_DataManager},function(e){N=e.ProjectEventManager,U=e.ProjectEvent}],execute:function(){var J,L;t._RF.push({},"9558dUY6lNLtIPV4eiEzfRX","XGTW_GamePanel",void 0);const{ccclass:X,property:A}=a;e("default",X("XGTW_GamePanel")(((L=class e extends n{constructor(...e){super(...e),this.TakeSuppliesButton=null,this.Evacuation=null,this.TakeSuppliesButtonLabel=null,this.EvacuationCountDownLabel=null,this.Weapon_0=null,this.Weapon_1=null,this.Pistol=null,this.MeleeWeapon=null,this.UseItem=null,this.UseItemFill=null,this.UseItemIcon=null,this.MapButton=null,this.TeamScore=null,this.RedTeamScoreLabel=null,this.BlueTeamScoreLabel=null,this.BottomBar=null,this.Joystick=null,this.ReturnButton=null,this.Medicine=null,this.Medicine_0=null,this.Medicine_1=null,this.Medicines=null,this.ReloadButton=null,this.BroadcastPosition=null,this.NormalBar=null,this.JJBar=null,this.JJBarBulletCountLb=null,this.JJBarMissileItems=null,this.Left_JJ=null,this.HPBar=null,this.mapMode=!1,this.supplies=null,this.droppedItem=null,this.countDown=5,this.startCount=!1,this.redTeamScore=0,this.blueTeamScore=0,this.medicineItems=[],this.reloadBulletItems=[],this.touchs=[]}onLoad(){e.Instance=this,this.TakeSuppliesButton=G.GetNode("TakeSuppliesButton",this.node),this.Evacuation=G.GetNode("Evacuation",this.node),this.TakeSuppliesButtonLabel=G.GetComponent("TakeSuppliesButtonLabel",this.node,o),this.HPBar=G.GetComponent("HPBar",this.node,m),this.Weapon_0=G.GetComponent("Weapon_0",this.node,c),this.Weapon_1=G.GetComponent("Weapon_1",this.node,c),this.Pistol=G.GetComponent("Pistol",this.node,c),this.MeleeWeapon=G.GetComponent("MeleeWeapon",this.node,c),this.EvacuationCountDownLabel=G.GetComponent("EvacuationCountDownLabel",this.node,o),this.UseItem=G.GetNode("UseItem",this.node),this.UseItemFill=G.GetComponent("UseItemFill",this.node,i),this.UseItemIcon=G.GetComponent("UseItemIcon",this.node,i),this.TeamScore=G.GetNode("TeamScore",this.node),this.RedTeamScoreLabel=G.GetComponent("RedTeamScoreLabel",this.node,o),this.BlueTeamScoreLabel=G.GetComponent("BlueTeamScoreLabel",this.node,o),this.MapButton=G.GetNode("MapButton",this.node),this.BottomBar=G.GetNode("BottomBar",this.node),this.Joystick=G.GetNode("Joystick",this.node),this.ReturnButton=G.GetNode("ReturnButton",this.node),this.ReloadButton=G.GetNode("ReloadButton",this.node),this.BroadcastPosition=G.GetNode("BroadcastPosition",this.node),this.NormalBar=G.GetNode("NormalBar",this.node),this.JJBar=G.GetNode("JJBar",this.node),this.JJBarMissileItems=G.GetNode("JJBarMissileItems",this.node),this.Left_JJ=G.GetNode("Left_JJ",this.node),this.JJBarBulletCountLb=G.GetComponent("JJBarBulletCountLb",this.node,o),this.Medicine=G.GetNode("Medicine",this.node),this.Medicine_0=G.GetNode("Medicine_0",this.node),this.Medicine_1=G.GetNode("Medicine_1",this.node),this.Medicines=G.GetNode("Medicines",this.node),this.Weapon_0.Set(I.Weapon_0),this.Weapon_1.Set(I.Weapon_1),this.Pistol.Set(I.Pistol),this.MeleeWeapon.Set(I.MeleeWeapon),this.MapButton.on(s.EventType.TOUCH_START,(()=>{g.Scene.emit(W.CameraZoomOut,.2)}),this),this.MapButton.on(s.EventType.TOUCH_END,(()=>{g.Scene.emit(W.CameraZoomIn)}),this),this.MapButton.on(s.EventType.TOUCH_CANCEL,(()=>{g.Scene.emit(W.CameraZoomIn)}),this),this.node.on(s.EventType.TOUCH_START,this.OnTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.OnTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.OnTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.OnTouchEnd,this),this.MapButton.active=R.GameMode==y.ESCAPE,this.ReturnButton.active=R.GameMode==y.TEAM}onDestroy(){}start(){this.SetJJPanel(R.JJMode),this.HPBar.Init(l.WHITE),this.TeamScore&&(this.TeamScore.active=R.GameMode==y.TEAM),this.RefreshGameItemUI(),this.RefreshMedicine(!1),this.RefreshReload(!1)}ShowTakeSupplies(e,t=null){this.supplies&&this.supplies.ShowSuppliesItems(!1),this.TakeSuppliesButton.active=e,this.supplies=t,this.droppedItem=null,e&&(console.log(t.data),this.TakeSuppliesButtonLabel.string=`${E.IsEmptyStr(t.data.PlayerName)?t.data.Name:t.data.PlayerName}`)}SetJJPanel(e=!1){this.NormalBar.active=!e,this.JJBar.active=e,this.Left_JJ.active=e}ShowTakeItem(e,t){this.TakeSuppliesButton.active=e,this.supplies=null,this.droppedItem=t,e&&(this.TakeSuppliesButtonLabel.string=`${t.itemData.Name}`)}ShowUseItem(e,t=null,a=null){this.UseItem.active=e,e?(h.stopAllByTarget(this.UseItemFill),this.UseItemFill.fillRange=1,f.LoadSpriteFrame(k.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((e=>{this.UseItemIcon.spriteFrame=e,this.UseItemIcon.node.setScale(w.GetScale(t.Type).multiplyScalar(.7))})),u(this.UseItemFill).to(t.Time,{fillRange:0}).call((()=>{a&&a(t),this.ShowUseItem(!1)})).start()):h.stopAllByTarget(this.UseItemFill)}ShowEvacuation(e){this.Evacuation.active=e,e?(this.startCount=!0,this.countDown=5):this.startCount=!1}RefreshTeamScore(e=0,t=0){R.IsGameOver||(this.redTeamScore+=e,this.blueTeamScore+=t,this.RedTeamScoreLabel.string=`${this.redTeamScore}`,this.BlueTeamScoreLabel.string=`${this.blueTeamScore}`,this.redTeamScore>=10&&(R.IsGameOver=!0,M.Instance.ShowPanel(S.Panel.WinPanel)),this.blueTeamScore>=10&&(R.IsGameOver=!0,b.PlayerData.Clear(),M.Instance.ShowPanel(S.Panel.FailPanel,[R.Instance.playerCtrl.hitBullet])))}RefreshGameItemUI(){this.Weapon_0.Refresh(),this.Weapon_1.Refresh(),this.Pistol.Refresh(),this.MeleeWeapon.Refresh()}RefreshBulletCount(){this.Weapon_0.RefreshBulletCount(),this.Weapon_1.RefreshBulletCount(),this.Pistol.RefreshBulletCount(),this.MeleeWeapon.RefreshBulletCount()}RefreshMedicine(e){this.Medicine_0.active=!e,this.Medicine_1.active=e,this.Medicines.active=e,e&&this.RefreshMeidcineItems()}RefreshMeidcineItems(){this.medicineItems.forEach((e=>D.PutNode(e.node)));let e=b.PlayerData.BackpackItems.filter((e=>w.GetItemType(e.Type)==C.药品));if(e.length<=0)this.RefreshMedicine(!1),P.ShowTip("没有发现药品");else for(let t=0;t<e.length;t++){const a=e[t];D.GetNodeByBundle(k.GameData.DefaultBundle,"Prefabs/UI/SItem",this.Medicines).then((e=>{let t=e.getComponent(B);t.Init(a,this.MedicineItemCallback.bind(this)),this.medicineItems.push(t)}))}}MedicineItemCallback(e){this.ShowUseItem(!0,e,(e=>{R.Instance.playerCtrl.HP+=e.HP,b.RemoveItemFromBackpack(e),this.RefreshMeidcineItems()}))}RefreshReload(e){this.ReloadButton.getChildByName("ReloadButton_0").active=!e,this.ReloadButton.getChildByName("ReloadButton_1").active=e,this.ReloadButton.getChildByName("ReloadBullets").active=e,e&&this.RefreshReloadBulletItems()}RefreshReloadBulletItems(){this.reloadBulletItems.forEach((e=>D.PutNode(e.node)));let e=b.PlayerData.BackpackItems.filter((e=>w.GetItemType(e.Type)==C.子弹));if(e=R.Instance.playerCtrl.gun?e.filter((e=>e.Name==R.Instance.playerCtrl.gun.Desc)):[],e.length<=0)this.RefreshReload(!1),P.ShowTip("没有备用弹药");else{let t=this.ReloadButton.getChildByName("ReloadBullets");for(let a=0;a<e.length;a++){const n=e[a];D.GetNodeByBundle(k.GameData.DefaultBundle,"Prefabs/UI/SItem",t).then((e=>{let t=e.getComponent(B);t.Init(n,this.ReloadBulletItemCallback.bind(this)),this.reloadBulletItems.push(t)}))}}}ReloadBulletItemCallback(e){if(R.Instance.playerCtrl.gun&&R.Instance.playerCtrl.gun.BulletCount<=0)return R.Instance.playerCtrl.gun.BulletCount+=e.Count,R.Instance.playerCtrl.Reload(e),b.RemoveItemFromBackpack(e),void this.RefreshReload(!1);P.ShowTip("换弹失败")}RefreshHPBar(e){this.HPBar.Set(e)}update(e){this.startCount&&(this.countDown-=e,this.countDown<=0&&(this.countDown=0,this.startCount=!1,M.Instance.ShowPanel(S.Panel.WinPanel)),this.EvacuationCountDownLabel.string=`${this.countDown.toFixed(2)}`)}OnTouchStart(e){this.mapMode}OnTouchMove(e){this.mapMode&&p.Instance.Move(r(e.getDelta().clone().x,e.getDelta().clone().y))}OnTouchEnd(e){this.mapMode}OnMapButtonClick(){this.mapMode=!this.mapMode,this.BottomBar.active=!this.mapMode,this.Joystick.active=!this.mapMode,this.mapMode?(p.Instance.stopFollow=!0,p.Instance.ZoomOut(2e3,(()=>{d.pause()}))):(d.resume(),p.Instance.stopFollow=!1,this.touchs=[],p.Instance.ZoomIn())}OnButtonClick(e){var t,a,n;switch(T.AudioClipPlay(S.Audio.ButtonClick),e.target.name){case"TakeSuppliesButton":null!=this.supplies&&(this.supplies.ShowSuppliesItems(!0),this.supplies.Take()),null!=this.droppedItem&&(w.IsMainGun(C[`${this.droppedItem.itemData.Type}`])&&(b.AddEquippedItem(I.Weapon_0,this.droppedItem.itemData)||b.AddEquippedItem(I.Weapon_1,this.droppedItem.itemData))?(T.AudioClipPlay(S.Audio.Equip),this.droppedItem.node.destroy(),g.Scene.emit(W.RefreshEquip)):C[`${this.droppedItem.itemData.Type}`]==C.手枪&&b.AddEquippedItem(I.Pistol,this.droppedItem.itemData)||C[`${this.droppedItem.itemData.Type}`]==C.头盔&&b.AddEquippedItem(I.Helmet,this.droppedItem.itemData)||C[`${this.droppedItem.itemData.Type}`]==C.防弹衣&&b.AddEquippedItem(I.Bulletproof,this.droppedItem.itemData)?(T.AudioClipPlay(S.Audio.Equip),g.Scene.emit(W.RefreshEquip),this.droppedItem.node.destroy()):b.AddItemToBackpack(this.droppedItem.itemData)?this.droppedItem.node.destroy():P.ShowTip("背包已满"));break;case"Weapon_0":b.PlayerData.Weapon_0&&R.Instance.playerCtrl.LoadGun(b.PlayerData.Weapon_0);break;case"Weapon_1":b.PlayerData.Weapon_1&&R.Instance.playerCtrl.LoadGun(b.PlayerData.Weapon_1);break;case"Pistol":b.PlayerData.Pistol&&R.Instance.playerCtrl.LoadGun(b.PlayerData.Pistol);break;case"MeleeWeapon":b.PlayerData.MeleeWeapon&&R.Instance.playerCtrl.LoadGun(b.PlayerData.MeleeWeapon);break;case"ReloadButton":this.RefreshReload(!this.ReloadButton.getChildByName("ReloadButton_1").active);break;case"BackpackButton":M.Instance.ShowPanel(S.Panel.GameBackpackPanel);break;case"UseItemCancelButton":this.ShowUseItem(!1,null,null);break;case"ReturnButton":N.emit(U.返回主页按钮事件,(()=>{P.ShowPanel(_.LoadingPanel,[k.GameData,"XGTW_Start"])}));break;case"Medicine":this.RefreshMedicine(!this.Medicine_1.active);break;case"WXButton":R.Instance.playerCtrl.jjRevival=!0,null==(t=e.target.getChildByName("SkillCooldown"))||t.getComponent(v).StartCooldown();break;case"MissileButton":R.Instance.playerCtrl.FireMissile(),null==(a=e.target.getChildByName("SkillCooldown"))||a.getComponent(v).StartCooldown();break;case"DLTJButton":R.Instance.playerCtrl.jjSpeedUp=!0,null==(n=e.target.getChildByName("SkillCooldown"))||n.getComponent(v).StartCooldown()}}onEnable(){g.on(W.ShowTakeSupplies,this.ShowTakeSupplies,this),g.on(W.ShowTakeItem,this.ShowTakeItem,this),g.on(W.RefreshEquip,this.RefreshGameItemUI,this),g.on(W.RefreshBulletCount,this.RefreshBulletCount,this),g.on(W.Evacuation,this.ShowEvacuation,this),g.on(W.RefreshHP,this.RefreshHPBar,this)}onDisable(){g.off(W.ShowTakeSupplies,this.ShowTakeSupplies,this),g.off(W.RefreshEquip,this.RefreshGameItemUI,this),g.off(W.ShowTakeItem,this.ShowTakeItem,this),g.off(W.RefreshBulletCount,this.RefreshBulletCount,this),g.off(W.Evacuation,this.ShowEvacuation,this),g.off(W.RefreshHP,this.RefreshHPBar,this)}}).Instance=null,J=L))||J);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GoodsItem.ts",["cc","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./UIManager.ts","./GameManager.ts"],(function(t){var e,s,n,i,a,o,c,h,l,d,u,r;return{setters:[function(t){e=t.cclegacy,s=t.Component,n=t.Button,i=t.Sprite,a=t.Label,o=t.v3,c=t._decorator},function(t){h=t.BundleManager},function(t){l=t.default},function(t){d=t.XGTW_ItemType},function(t){u=t.UIManager},function(t){r=t.GameManager}],execute:function(){var p;e._RF.push({},"b9815c+JSlN+Y+n7ohVz24A","XGTW_GoodsItem",void 0);const{ccclass:m,property:G}=c;t("default",m("XGTW_GoodsItem")(p=class extends s{constructor(...t){super(...t),this.Button=null,this.Icon=null,this.Name=null,this.Desc=null,this.Selected=null,this.Locked=null,this.Get=null,this.data=void 0,this.cb=null}onLoad(){this.Button=this.node.getComponent(n),this.Icon=l.GetComponent("Icon",this.node,i),this.Name=l.GetComponent("Name",this.node,a),this.Desc=l.GetComponent("Desc",this.node,a),this.Selected=l.GetNode("Selected",this.node),this.Locked=l.GetNode("Locked",this.node),this.Get=l.GetNode("Get",this.node)}Init(t,e){this.Reset(),this.data=t,this.cb=e,this.Name.string=`${this.data.Name}`,this.Desc.string=`${this.data.Count} `;let s=1;t.Type==d[d.头盔]&&(s=.4),t.Type==d[d.防弹衣]&&(s=.6),t.Type==d[d.手枪]&&(s=.8),t.Type==d[d.突击步枪]&&(s=.8),t.Type==d[d.冲锋枪]&&(s=.8),t.Type==d[d.射手步枪]&&(s=.8),t.Type==d[d.栓动步枪]&&(s=.8),t.Type==d[d.轻机枪]&&(s=.8),t.Type==d[d.霰弹枪]&&(s=.8),t.Type==d[d.子弹]&&(s=.6),t.Type==d[d.战利品]&&(s=.6),t.Type==d[d.药品]&&(s=.6),t.Type==d[d.金钱]&&(s=.5),this.Icon.node.setScale(o(s,s)),h.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}))}InitBlank(){this.Reset(),this.Button.enabled=!1}InitSimple(t){this.Reset(),this.Button.enabled=!1,h.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}))}Reset(){this.data=null,this.cb=null,this.Button.enabled=!0,this.Name.string="",this.Desc.string="",this.Icon.spriteFrame=null,this.Selected.active=!1,this.Get.active=!1,this.Locked.active=!1}SetSelected(t){this.Selected.active=t==this.data}OnButtonClick(){this.Get.active||(this.Locked.active?u.ShowTip("获得进阶手册可解锁更多奖励"):this.cb&&this.cb(this.data))}})||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Grenade.ts",["cc","./NodeUtil.ts","./PoolManager.ts","./XGTW_GrenadeListener.ts"],(function(t){var e,n,o,i,s,r,a,l,d,u;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.Sprite,i=t.Animation,s=t.RigidBody2D,r=t.Vec2,a=t._decorator},function(t){l=t.default},function(t){d=t.PoolManager},function(t){u=t.default}],execute:function(){var c;e._RF.push({},"4f6b6rZOVJHc6xJKSFEPVqJ","XGTW_Grenade",void 0);const{ccclass:h,property:p}=a;t("default",h("XGTW_Grenade")(c=class extends n{constructor(...t){super(...t),this.rigidbody=null,this.Sp=null,this.Boom=null,this.grenadeListener=null}onLoad(){this.Sp=l.GetComponent("Sp",this.node,o),this.Boom=l.GetComponent("Boom",this.node,i),this.rigidbody=this.node.getComponent(s),this.grenadeListener=this.Sp.getComponent(u)}onEnable(){this.Boom.on(i.EventType.FINISHED,this.Put,this)}onDisable(){var t;null==(t=this.Boom)||t.off(i.EventType.FINISHED,this.Put,this)}Put(){this.scheduleOnce((()=>{d.PutNode(this.node)}))}Throw(t){this.rigidbody.applyLinearImpulse(t.multiplyScalar(2e3),r.ZERO,!0),this.scheduleOnce((()=>{this.Boom.play()}),3)}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GrenadeListener.ts",["cc","./XGTW_Constant.ts","./Tools.ts"],(function(e){var n,o,t,r,s,c,a;return{setters:[function(e){n=e.cclegacy,o=e.Component,t=e.Vec3,r=e.RigidBody2D,s=e._decorator},function(e){c=e.XGTW_Constant},function(e){a=e.Tools}],execute:function(){var i;n._RF.push({},"7da448eaypGSrr/9JFrlifv","XGTW_GrenadeListener",void 0);const{ccclass:d,property:u}=s;e("default",d("XGTW_GrenadeListener")(i=class extends o{constructor(...e){super(...e),this.nds=[]}update(e){this.node.setPosition(t.ZERO)}onBeginContact(e,n,o){console.error(o.name),o.node.getComponent(r).group==c.Group.Player&&this.nds.push(o.node)}onEndContact(e,n,o){o.node.getComponent(r).group==c.Group.Player&&a.RemoveItemFromArray(this.nds,o.node)}})||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_GuideManager.ts",["cc","./BundleManager.ts","./GameManager.ts"],(function(e){var t,a,n,i,s,o,c,r;return{setters:[function(e){t=e.cclegacy,a=e._decorator,n=e.Component,i=e.Tween,s=e.find,o=e.instantiate},function(e){c=e.BundleManager},function(e){r=e.GameManager}],execute:function(){var u,d;t._RF.push({},"8e0e7wpU8VOPaQXUxB5Eqdr","XGTW_GuideManager",void 0);const{ccclass:l,property:g}=a;e("default",l("XGTW_GuideManager")(((d=class e extends n{static MoveByLine(t,a=.5,n=3,i=(()=>{})){if(t)switch(this.Stop(),t.length){case 2:e.MoveByPoints2(t,a,n,i);break;case 3:e.MoveByPoints3(t,a,n);break;case 4:e.MoveByPoints4(t,a,n);break;default:t.length>4&&(console.error("节点长度超过4"),t=[t[0],t[1],t[2],t[3]],e.MoveByPoints4(t,a,n))}}static Stop(){this.guide&&(i.stopAllByTarget(this.guide),this.guide.active=!1)}static MoveByPoints2(e,t=.5,a=3,n=(()=>{})){const i=s("Canvas");c.LoadPrefab(r.GameData.DefaultBundle,"小手").then((e=>{let t=o(e);this.guide=t,function(e){e.setParent(i),e.active=!0}(t)}))}static MoveByPoints3(e,t=.5,a=3){}static MoveByPoints4(e,t=.5,a=3){}}).guide=null,u=d))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_HeiShiButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_DataManager.ts","./XGTW_HeiShiPanel.ts"],(function(t){var e,i,s,n,o,a,h,l,r,u,c,m,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Node,o=t._decorator,a=t.Component,h=t.Label,l=t.UIOpacity,r=t.Color,u=t.color},function(t){c=t.default},function(t){m=t.XGTW_ItemType},function(t){f=t.XGTW_DataManager},function(t){d=t.default}],execute:function(){var B,S,b,p,G,_,I,g;s._RF.push({},"404c8dhBeZDb7Zdjcol4EEj","XGTW_HeiShiButton",void 0);const{ccclass:D,property:O}=o;t("default",(B=D("XGTW_HeiShiButton"),S=O({type:[n]}),b=O(n),B((_=e((G=class t extends a{constructor(...t){super(...t),i(this,"Buttons",_,this),i(this,"Order",I,this),i(this,"isSub",g,this),this.BG_SMSD=null,this.BG_Normal=null,this.BG_Sub=null,this.Label=null,this.isOn=!1}onLoad(){this.BG_SMSD=c.GetNode("BG_SMSD",this.node),this.BG_Normal=c.GetNode("BG_Normal",this.node),this.BG_Sub=c.GetNode("BG_Sub",this.node),this.Label=c.GetComponent("Label",this.node,h),this.isSub&&(this.Label.node.getComponent(l).opacity=150)}start(){this.BG_SMSD.active=!1,this.BG_Normal.active=!1,this.BG_Sub.active=!1}SetSelect(t){"神秘商店"==this.node.name?this.BG_SMSD.active=t:this.scheduleOnce((()=>{this.BG_Normal.active=!this.isSub&&t,this.BG_Sub.active=this.isSub&&t})),this.isSub||(this.Label.color=t?r.BLACK:u().fromHEX("#A4D0DB"))}OnButtonClick(){if(d.Instance.ItemInfoPanel.Hide(),this.isOn=!this.isOn,this.SetSelect(!0),this.Buttons.forEach((t=>t.active=this.isOn)),this.Buttons.length>0){let t=this.Label.string;t=t.slice(0,-1),this.Label.string=`${t}${this.isOn?"▼":"▲"}`}if("神秘商店"==this.node.name){let t=[];f.ItemDatas.get(m.神秘商店).forEach((e=>t.push(e.GetItemData()))),d.Instance.RefreshItems(t)}else if("热卖新品"==this.node.name){let t=[];t.push(...f.ItemDatas.get(m.热卖新品)),d.Instance.RefreshItems(t)}else if("抽奖礼包"==this.node.name){let t=f.ItemDatas.get(m.抽奖礼包);d.Instance.RefreshItems(t)}else if("快捷装备"==this.node.name){let t=[];f.ItemDatas.get(m.快捷装备).forEach((e=>t.push(e.GetItemData()))),d.Instance.RefreshItems(t)}else{["5.56毫米子弹","7.62毫米子弹","9毫米子弹",".45口径子弹","12口径子弹",".300马格南子弹",".50口径子弹",".408口径子弹","弩箭"].find((t=>t==this.node.name))?d.Instance.RefreshItems(f.ItemDatas.get(m.子弹).filter((t=>t.Name==this.node.name))):this.Buttons.length<=0?d.Instance.RefreshItems(f.ItemDatas.get(m[this.node.name])):this.Buttons[0].getComponent(t).OnButtonClick()}this.isOn&&this.Buttons.length>0?this.Buttons[0].getComponent(t).OnButtonClick():d.Instance.SetHeiShiButton(this)}}).prototype,"Buttons",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=e(G.prototype,"Order",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(G.prototype,"isSub",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=G))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_HeiShiPanel.ts",["cc","./XGTW_HeiShiButton.ts","./XGTW_Item.ts","./XGTW_ItemInfoPanel.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./Banner.ts","./XGTW_DataManager.ts","./GameManager.ts","./BundleManager.ts","./ProjectEventManager.ts"],(function(t){var e,n,i,o,s,l,h,a,u,c,d,r,B,m,G,T,f,g,S,W,C,I,H;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Component,o=t.ScrollView,s=t.Label,l=t.instantiate,h=t.Color,a=t.color},function(t){u=t.default},function(t){c=t.default},function(t){d=t.default},function(t){r=t.XGTW_AudioManager},function(t){B=t.default},function(t){m=t.XGTW_Constant},function(t){G=t.XGTW_UIManager},function(t){T=t.EventManager},function(t){f=t.XGTW_Event},function(t){g=t.default},function(t){S=t.XGTW_DataManager},function(t){W=t.GameManager},function(t){C=t.BundleManager},function(t){I=t.ProjectEventManager,H=t.ProjectEvent}],execute:function(){var M,y;e._RF.push({},"99291Sd7WJP+5KNiTHxHSaA","XGTW_HeiShiPanel",void 0);const{ccclass:P,property:p}=n;t("default",P("XGTW_HeiShiPanel")(((y=class t extends i{constructor(...t){super(...t),this.ItemContent=null,this.GunButton=null,this.SkinButton=null,this.Detail=null,this.DetailUseButton=null,this.DetailBuyButton=null,this.DetailUnequippedButton=null,this.JCWG=null,this.TWMB=null,this.ZDTX=null,this.TTBB=null,this.ZJWG=null,this.ZLPH=null,this.神秘商店=null,this.MoneyLabel=null,this.items=[],this.HeiShiButton=null,this.ItemScrollView=null,this.ItemInfoPanel=null}onLoad(){t.Instance=this,this.ItemContent=B.GetNode("ItemContent",this.node),this.GunButton=B.GetNode("GunButton",this.node),this.SkinButton=B.GetNode("SkinButton",this.node),this.Detail=B.GetNode("Detail",this.node),this.DetailUseButton=B.GetNode("DetailUseButton",this.node),this.DetailBuyButton=B.GetNode("DetailBuyButton",this.node),this.DetailUnequippedButton=B.GetNode("DetailUnequippedButton",this.node),this.ItemScrollView=B.GetComponent("ItemScrollView",this.node,o),this.ItemInfoPanel=B.GetComponent("ItemInfoPanel",this.node,d),this.神秘商店=B.GetComponent("神秘商店",this.node,u),this.MoneyLabel=B.GetComponent("MoneyLabel",this.node,s),this.JCWG=B.GetNode("JCWG",this.node),this.TWMB=B.GetNode("TWMB",this.node),this.ZDTX=B.GetNode("ZDTX",this.node),this.TTBB=B.GetNode("TTBB",this.node),this.ZJWG=B.GetNode("ZJWG",this.node),this.ZLPH=B.GetNode("ZLPH",this.node)}Show(){I.emit(H.弹出窗口,W.GameData.gameName),this.ItemInfoPanel.Hide(),this.scheduleOnce((()=>{this.神秘商店.OnButtonClick()})),this.RefreshMoney()}SetHeiShiButton(t){this.HeiShiButton&&this.HeiShiButton!=t&&(this.HeiShiButton.SetSelect(!1),this.HeiShiButton.Order&&this.HeiShiButton.Order.getComponent(u).SetSelect(!1)),this.HeiShiButton=t,this.HeiShiButton&&this.HeiShiButton.Order&&this.HeiShiButton.Order.getComponent(u).SetSelect(!0)}RefreshItems(t){this.ItemScrollView.stopAutoScroll(),this.ItemScrollView.scrollToTop();let e=()=>{for(let e=0;e<this.items.length;e++){if(e>t.length-1){this.items[e].active=!1;continue}this.items[e].active=!0,this.items[e].getComponent(c).Init(t[e],this.ShowInfoPanel.bind(this))}};if(this.items.length<t.length){let n=t.length-this.items.length;for(let i=0;i<t.length-this.items.length;i++)C.GetBundle(W.GameData.DefaultBundle).load("Prefabs/UI/Item",((t,i)=>{let o=l(i);o.setParent(this.ItemContent),this.items.push(o),n--,n<=0&&e()}))}else e()}ShowInfoPanel(t){this.ItemInfoPanel.Show(t,!0)}RefreshDetailButtonState(t){this.ItemInfoPanel.Hide(),this.JCWG.getChildByName("Select").active="JCWG"==t,this.TWMB.getChildByName("Select").active="TWMB"==t,this.ZDTX.getChildByName("Select").active="ZDTX"==t,this.TTBB.getChildByName("Select").active="TTBB"==t,this.ZJWG.getChildByName("Select").active="ZJWG"==t,this.ZLPH.getChildByName("Select").active="ZLPH"==t,this.JCWG.getChildByName("Label").getComponent(s).color="JCWG"==t?h.WHITE:a().fromHEX("#999999"),this.TWMB.getChildByName("Label").getComponent(s).color="TWMB"==t?h.WHITE:a().fromHEX("#999999"),this.ZDTX.getChildByName("Label").getComponent(s).color="ZDTX"==t?h.WHITE:a().fromHEX("#999999"),this.TTBB.getChildByName("Label").getComponent(s).color="TTBB"==t?h.WHITE:a().fromHEX("#999999"),this.ZJWG.getChildByName("Label").getComponent(s).color="ZJWG"==t?h.WHITE:a().fromHEX("#999999"),this.ZLPH.getChildByName("Label").getComponent(s).color="ZLPH"==t?h.WHITE:a().fromHEX("#999999")}RefreshMoney(){this.MoneyLabel.string=`${S.Money}`}OnButtonClick(t){switch(this.ItemInfoPanel.Hide(),r.AudioClipPlay(m.Audio.ButtonClick),t.target.name){case"JCWG":case"TWMB":case"ZDTX":case"TTBB":case"ZJWG":case"ZLPH":this.RefreshDetailButtonState(t.target.name);break;case"ReturnButton":G.Instance.HidePanel(m.Panel.HeiShiPanel);break;case"AddMoneyButton":g.Instance.ShowVideoAd((()=>{r.AudioClipPlay(m.Audio.GetMoney),S.Money+=2e4}))}}onEnable(){T.on(f.RefreshMoney,this.RefreshMoney,this)}onDisable(){T.off(f.RefreshMoney,this.RefreshMoney,this)}}).Instance=null,M=y))||M);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_HPBar.ts",["cc","./NodeUtil.ts","./Tools.ts"],(function(t){var o,e,r,s,n,a,c;return{setters:[function(t){o=t.cclegacy,e=t.Component,r=t.Color,s=t.Sprite,n=t._decorator},function(t){a=t.default},function(t){c=t.Tools}],execute:function(){var i;o._RF.push({},"af9faU0RVVL158Iz4XBfLHQ","XGTW_HPBar",void 0);const{ccclass:l,property:u}=n;t("default",l("XGTW_HPBar")(i=class extends e{constructor(...t){super(...t),this.HPBarFG=null}Init(t=r.RED){this.HPBarFG=a.GetComponent("HPBarFG",this.node,s),this.HPBarFG.color=t,this.Set(1)}Set(t){t=c.Clamp(t,0,1),this.HPBarFG.fillRange=t}})||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_IncidentManager.ts",["cc"],(function(e){var n,t,i;return{setters:[function(e){n=e.cclegacy,t=e.Component,i=e._decorator}],execute:function(){var s;n._RF.push({},"2e429+/j2NE3aA07luikGXo","XGTW_IncidentManager",void 0);const{ccclass:c,property:h}=i;e("default",c("XGTW_IncidentManager")(s=class extends t{constructor(...e){super(...e),this.Incident=[],this.IncidentTime=[],this.HaveBeenNum=0}Pushincident(e,n){this.Incident.push(e),this.IncidentTime.push(n)}Pushincidents(e,n){for(let t=0;t<e.length;t++)this.Incident.push(e[t]),this.IncidentTime.push(n[t])}RemoveOfIndex(e,n=1){this.Incident.splice(e,n)}start(){this.HaveBeenNum=0,this.Begin()}Stop(){this.HaveBeenNum=-999}Begin(){this.HaveBeenNum<0||this.HaveBeenNum<this.Incident.length&&(this.Incident[this.HaveBeenNum](),this.scheduleOnce((()=>{this.Begin()}),this.IncidentTime[this.HaveBeenNum]),this.HaveBeenNum++)}})||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_InventoryButton.ts",["cc","./XGTW_InventoryPanel.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./GameManager.ts","./XGTW_DataManager.ts"],(function(t){var e,a,l,o,n,i,s,r,u,c,h,y;return{setters:[function(t){e=t.cclegacy,a=t.Component,l=t.Sprite,o=t.Label,n=t.color,i=t._decorator},function(t){s=t.InventoryType},function(t){r=t.BundleManager},function(t){u=t.default},function(t){c=t.default},function(t){h=t.GameManager},function(t){y=t.XGTW_DataManager}],execute:function(){var b;e._RF.push({},"aab6d1cnldGy6C388y6hQWc","XGTW_InventoryButton",void 0);const{ccclass:B,property:D}=i;t("default",B("XGTW_InventoryButton")(b=class extends a{constructor(...t){super(...t),this.Selected=null,this.Icon=null,this.Name_Lb=null,this.Desc_Lb=null,this.Bullet_Lb=null,this.QualityBar=null,this.type=s.None}onLoad(){this.Selected=u.GetNode("Selected",this.node),this.QualityBar=u.GetNode("QualityBar",this.node),this.Icon=u.GetComponent("Icon",this.node,l),this.Name_Lb=u.GetComponent("Name_Lb",this.node,o),this.Desc_Lb=u.GetComponent("Desc_Lb",this.node,o),this.Bullet_Lb=u.GetComponent("Bullet_Lb",this.node,o)}Set(t){this.type=t}Reset(){this.Desc_Lb.string="",this.Bullet_Lb&&(this.Bullet_Lb.string="")}Refresh(){this.Reset();let t=null;switch(this.Icon.color=n(255,255,255,255),this.Icon.node.setScale(1,1),this.type){case s.Helmet:t=y.PlayerData.Helmet,this.QualityBar.active=null!=t,t&&(this.Icon.color=n(255,t.Durable/t.MaxDurable*255,t.Durable/t.MaxDurable*255,255),this.QualityBar.getComponent(l).color=c.GetQualityColor(t.Quality));break;case s.Bulletproof:t=y.PlayerData.Bulletproof,this.QualityBar.active=null!=t,t&&(this.Icon.color=n(255,t.Durable/t.MaxDurable*255,t.Durable/t.MaxDurable*255,255),this.QualityBar.getComponent(l).color=c.GetQualityColor(t.Quality));break;case s.Weapon_0:t=y.PlayerData.Weapon_0,this.QualityBar.active=null!=t,t&&(this.Bullet_Lb.string=`${t.Desc}`,this.Desc_Lb.string=`${t.MagazineBulletCount}/${t.BulletCount}`,this.Icon.color=n(255,t.Durable/t.MaxDurable*255,t.Durable/t.MaxDurable*255,255),this.QualityBar.getComponent(l).color=c.GetQualityColor(t.Quality));break;case s.Weapon_1:t=y.PlayerData.Weapon_1,this.QualityBar.active=null!=t,t&&(this.Bullet_Lb.string=`${t.Desc}`,this.Desc_Lb.string=`${t.MagazineBulletCount}/${t.BulletCount}`,this.Icon.color=n(255,t.Durable/t.MaxDurable*255,t.Durable/t.MaxDurable*255,255),this.QualityBar.getComponent(l).color=c.GetQualityColor(t.Quality));break;case s.Pistol:t=y.PlayerData.Pistol,this.QualityBar.active=null!=t,t&&(this.Bullet_Lb.string=`${t.Desc}`,this.Desc_Lb.string=`${t.MagazineBulletCount}/${t.BulletCount}`,this.Icon.color=n(255,t.Durable/t.MaxDurable*255,t.Durable/t.MaxDurable*255,255),this.QualityBar.getComponent(l).color=c.GetQualityColor(t.Quality),this.Icon.node.setScale(2,2));break;case s.MeleeWeapon:t=y.PlayerData.MeleeWeapon,this.QualityBar.active=null!=t,t&&(this.QualityBar.getComponent(l).color=c.GetQualityColor(t.Quality));break;case s.Backpack:t=y.PlayerData.Backpack,this.QualityBar.active=null!=t,t?(this.QualityBar.getComponent(l).color=c.GetQualityColor(t.Quality),this.node.getChildByName("Icon_Default").active=!1):(this.QualityBar.getComponent(l).color=c.GetQualityColor(0),this.node.getChildByName("Icon_Default").active=!0)}this.Name_Lb.string=t?`${t.Name}`:`${this.type}`,this.Icon.node.active=null!=t,null!=t&&r.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name.replace(/^\./,"")}`).then((t=>{this.Icon.spriteFrame=t}))}RefreshSelected(t){this.Selected.active=this.type==t}})||b);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_InventoryPanel.ts",["cc","./XGTW_BackpackPanel.ts","./XGTW_EquipInfoPanel.ts","./XGTW_InventoryButton.ts","./XGTW_Item.ts","./XGTW_ItemInfoPanel.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./UIManager.ts","./XGTW_UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./Banner.ts","./XGTW_Data.ts","./XGTW_DataManager.ts","./GameManager.ts","./BundleManager.ts","./ProjectEventManager.ts"],(function(e){var t,n,a,s,o,i,l,h,u,p,c,r,f,B,m,I,d,y,P,W,G,_,D,k,S;return{setters:[function(e){t=e.cclegacy,n=e._decorator,a=e.Component,s=e.Label,o=e.instantiate},function(e){i=e.default},function(e){l=e.default},function(e){h=e.default},function(e){u=e.default},function(e){p=e.default},function(e){c=e.XGTW_AudioManager},function(e){r=e.default},function(e){f=e.XGTW_ItemType,B=e.XGTW_Constant},function(e){m=e.UIManager},function(e){I=e.XGTW_UIManager},function(e){d=e.EventManager},function(e){y=e.XGTW_Event},function(e){P=e.default},function(e){W=e.XGTW_ItemData},function(e){G=e.XGTW_DataManager},function(e){_=e.GameManager},function(e){D=e.BundleManager},function(e){k=e.ProjectEventManager,S=e.ProjectEvent}],execute:function(){var M,R;t._RF.push({},"0b9ceJGwtFFBKMZul8Zx3jx","XGTW_InventoryPanel",void 0);const{ccclass:E,property:T}=n;let q=e("InventoryType",function(e){return e.None="None",e.Helmet="头盔",e.Bulletproof="防弹衣",e.Weapon_0="主武器",e.Weapon_1="副武器",e.Pistol="手枪",e.MeleeWeapon="近战武器",e.Backpack="背包",e}({}));e("default",E("XGTW_InventoryPanel")(((R=class e extends a{constructor(...e){super(...e),this.Weapon_0=null,this.Weapon_1=null,this.MeleeWeapon=null,this.Pistol=null,this.Helmet=null,this.Bulletproof=null,this.Backpack=null,this.equipButtons=[],this.MoneyLabel=null,this.WeaponItemContent=null,this.ItemContent=null,this.DetailEquipButton=null,this.DetailGoodsContent=null,this.DetailGoodsLabel=null,this.DetailPutButton=null,this.DetailBuyBulletButton=null,this.WeaponButtons=null,this.PlayerGoodsItems=[],this.DetailGoodsItem=null,this.ItemInfoPanel=null,this.EquipInfoPanel=null,this.BackpackPanel=null,this.Items=[],this.SelectItemData=null,this.InventoryType=void 0}onLoad(){e.Instance=this,this.Helmet=r.GetComponent("Helmet",this.node,h),this.Bulletproof=r.GetComponent("Bulletproof",this.node,h),this.Weapon_0=r.GetComponent("Weapon_0",this.node,h),this.Weapon_1=r.GetComponent("Weapon_1",this.node,h),this.Pistol=r.GetComponent("Pistol",this.node,h),this.MeleeWeapon=r.GetComponent("MeleeWeapon",this.node,h),this.Backpack=r.GetComponent("Backpack",this.node,h),this.MoneyLabel=r.GetComponent("MoneyLabel",this.node,s),this.equipButtons.push(this.Helmet),this.equipButtons.push(this.Bulletproof),this.equipButtons.push(this.Weapon_0),this.equipButtons.push(this.Weapon_1),this.equipButtons.push(this.Pistol),this.equipButtons.push(this.MeleeWeapon),this.equipButtons.push(this.Backpack),this.WeaponButtons=r.GetNode("WeaponButtons",this.node),this.WeaponItemContent=r.GetNode("WeaponItemContent",this.node),this.ItemContent=r.GetNode("ItemContent",this.node),this.DetailEquipButton=r.GetNode("DetailEquipButton",this.node),this.DetailGoodsContent=r.GetNode("DetailGoodsContent",this.node),this.DetailGoodsLabel=r.GetComponent("DetailGoodsLabel",this.node,s),this.DetailPutButton=r.GetNode("DetailPutButton",this.node),this.DetailBuyBulletButton=r.GetNode("DetailBuyBulletButton",this.node),this.ItemInfoPanel=r.GetComponent("ItemInfoPanel",this.node,p),this.EquipInfoPanel=r.GetComponent("EquipInfoPanel",this.node,l),this.BackpackPanel=r.GetComponent("BackpackPanel",this.node,i)}Show(){k.emit(S.弹出窗口,_.GameData.gameName),this.ItemInfoPanel.Hide(),this.Helmet.Set(q.Helmet),this.Bulletproof.Set(q.Bulletproof),this.Weapon_0.Set(q.Weapon_0),this.Weapon_1.Set(q.Weapon_1),this.Pistol.Set(q.Pistol),this.MeleeWeapon.Set(q.MeleeWeapon),this.Backpack.Set(q.Backpack),this.RefreshItemByWeaponButtons("Button_All"),this.SelectItemData=null,this.RefreshMoney(),this.RefreshEquipButtons()}RefreshItems(e){this.Items.forEach((e=>e.node.destroy())),this.Items=[];for(let t=0;t<e.length;t++)D.GetBundle(_.GameData.DefaultBundle).load("Prefabs/UI/Item",((n,a)=>{let s=o(a);s.setParent(this.ItemContent);let i=s.getComponent(u);i.Init(e[t],this.OnItemCallback.bind(this),!1),this.Items.push(i)}))}RefreshEquipButtons(){this.equipButtons.forEach((e=>e.Refresh()))}RefreshEquipButtonSelect(e){this.equipButtons.forEach((t=>t.RefreshSelected(e)))}OnItemCallback(e){this.EquipInfoPanel.Hide(),this.BackpackPanel.Hide();let t=null;switch(W.GetItemType(e.Type)){case f.弹匣:case f.握把:case f.枪口:case f.枪托:case f.瞄具:t=this.SelectItemData?()=>{if(W.GetAssories(W.GetItemType(this.SelectItemData.Type)).find((t=>t==e.Type))){let t=G.EquipAccessorie(this.SelectItemData,e);G.RemovePlayerItem(e),t&&G.AddPlayerItem(t),this.ItemInfoPanel.Hide(),this.EquipInfoPanel.RefreshAssories(),m.ShowTip("装配成功")}else m.ShowTip("装配失败")}:()=>{m.ShowTip("未选择装备")};break;case f.冲锋枪:case f.射手步枪:case f.手枪:case f.弓弩:case f.栓动步枪:case f.突击步枪:case f.轻机枪:case f.霰弹枪:case f.防弹衣:case f.头盔:case f.近战:case f.背包:t=()=>{this.ItemInfoPanel.Hide(),this.RefreshEquipButtons()}}this.ItemInfoPanel.Show(e,!1,t)}RefreshItemByWeaponButtons(e){let t=[];switch(e){case"Button_All":t.push(...G.PlayerItems),this.RefreshItems(t);break;case"Button_Gun":t.push(...G.PlayerItems.filter((e=>W.GunTypes.find((t=>t==f[`${e.Type}`]))))),this.RefreshItems(t);break;case"Button_ZhuangBei":t.push(...G.PlayerItems.filter((e=>W.FangJuTypes.find((t=>t==f[`${e.Type}`]))))),this.RefreshItems(t);break;case"Button_PeiJian":t.push(...G.PlayerItems.filter((e=>W.PeiJianTypes.find((t=>t==f[`${e.Type}`]))))),this.RefreshItems(t);break;case"Button_YiLiao":t.push(...G.PlayerItems.filter((e=>W.IsConsumables(f[`${e.Type}`])))),this.RefreshItems(t);break;case"Button_CangKu":t.push(...G.PlayerData.LockboxItems),this.RefreshItems(t)}this.WeaponButtons.children.forEach((t=>t.getChildByName("BG").active=t.name==e))}OnButtonClick(e){switch(c.AudioClipPlay(B.Audio.ButtonClick),this.ItemInfoPanel.Hide(),e.target.name){case"Button_All":case"Button_Gun":case"Button_ZhuangBei":case"Button_PeiJian":case"Button_YiLiao":case"Button_CangKu":this.RefreshItemByWeaponButtons(e.target.name);break;case"Helmet":this.RefreshEquipButtonSelect(q.Helmet),G.PlayerData.Helmet&&(this.SelectItemData=G.PlayerData.Helmet,this.EquipInfoPanel.Show(this.SelectItemData));break;case"Bulletproof":this.RefreshEquipButtonSelect(q.Bulletproof),G.PlayerData.Bulletproof&&(this.SelectItemData=G.PlayerData.Bulletproof,this.EquipInfoPanel.Show(this.SelectItemData));break;case"Weapon_0":this.RefreshEquipButtonSelect(q.Weapon_0),G.PlayerData.Weapon_0&&(this.SelectItemData=G.PlayerData.Weapon_0,this.EquipInfoPanel.Show(this.SelectItemData));break;case"Weapon_1":this.RefreshEquipButtonSelect(q.Weapon_1),G.PlayerData.Weapon_1&&(this.SelectItemData=G.PlayerData.Weapon_1,this.EquipInfoPanel.Show(this.SelectItemData));break;case"Pistol":this.RefreshEquipButtonSelect(q.Pistol),G.PlayerData.Pistol&&(this.SelectItemData=G.PlayerData.Pistol,this.EquipInfoPanel.Show(this.SelectItemData));break;case"MeleeWeapon":this.RefreshEquipButtonSelect(q.MeleeWeapon),G.PlayerData.MeleeWeapon&&(this.SelectItemData=G.PlayerData.MeleeWeapon,this.EquipInfoPanel.Show(this.SelectItemData));break;case"Backpack":this.BackpackPanel.Show();break;case"ReturnButton":I.Instance.HidePanel(B.Panel.InventoryPanel);break;case"AddMoneyButton":P.Instance.ShowVideoAd((()=>{c.AudioClipPlay(B.Audio.GetMoney),G.Money+=2e4}))}}RefreshMoney(){this.MoneyLabel.string=`${G.Money}`}onEnable(){d.on(y.RefreshMoney,this.RefreshMoney,this),d.on(y.RefreshInventoryItems,(()=>{for(let e=0;e<this.WeaponButtons.children.length;e++)this.WeaponButtons.children[e].getChildByName("BG").active&&this.RefreshItemByWeaponButtons(this.WeaponButtons.children[e].name)}),this),d.on(y.RefreshInventoryButtons,this.RefreshEquipButtons,this)}onDisable(){d.off(y.RefreshMoney,this.RefreshMoney,this),d.off(y.RefreshInventoryItems,(()=>{for(let e=0;e<this.WeaponButtons.children.length;e++)this.WeaponButtons.children[e].getChildByName("BG").active&&this.RefreshItemByWeaponButtons(this.WeaponButtons.children[e].name)}),this),d.off(y.RefreshInventoryButtons,this.RefreshEquipButtons,this)}}).Instance=null,M=R))||M);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Item.ts",["cc","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./GameManager.ts","./XGTW_Data.ts"],(function(t){var e,i,n,s,a,o,h,c,l,d,u,p,r,I;return{setters:[function(t){e=t.cclegacy,i=t.Component,n=t.Sprite,s=t.Label,a=t.Button,o=t.v3,h=t._decorator},function(t){c=t.XGTW_AudioManager},function(t){l=t.BundleManager},function(t){d=t.default},function(t){u=t.XGTW_ItemType,p=t.XGTW_Constant},function(t){r=t.GameManager},function(t){I=t.XGTW_ItemData}],execute:function(){var y;e._RF.push({},"6219cdnFn5K/aWhb1Kduc05","XGTW_Item",void 0);const{ccclass:m,property:T}=h;t("default",m("XGTW_Item")(y=class extends i{constructor(...t){super(...t),this.Button=null,this.Icon=null,this.Quality=null,this.Price=null,this.Count=null,this.Bottom=null,this.Select=null,this.data=void 0,this.cb=null}preload(){this.Icon=d.GetComponent("Icon",this.node,n),this.Quality=d.GetComponent("Quality",this.node,n),this.Price=d.GetComponent("Price",this.node,s),this.Count=d.GetComponent("Count",this.node,s),this.Bottom=d.GetNode("Bottom",this.node),this.Select=d.GetNode("Select",this.node),this.Button=this.node.getComponent(a)}Init(t,e=null,i=!0){if(this.preload(),this.Reset(),this.data=t,this.cb=e,this.Bottom.active=i,this.Count.node.active=!i,i?this.Price.string=`${t.Price}`:this.Count.string=`${t.Count}`,t.Type==u[u.头盔]||t.Type==u[u.防弹衣]||t.Type==u[u.背包]||t.Type==u[u.枪口]||t.Type==u[u.瞄具]||t.Type==u[u.子弹]||t.Type==u[u.弹匣]||t.Type==u[u.握把]||t.Type==u[u.药品]||t.Type==u[u.投掷物]||t.Type==u[u.枪托]||t.Type==u[u.枪口]||t.Type==u[u.热卖新品]||t.Type==u[u.抽奖礼包]||t.Type==u[u.战利品])this.Icon.node.angle=0,this.Icon.node.setScale(1,1);else{this.Icon.node.angle=-45;let t=u.手枪==I.GetItemType(this.data.Type)?2.5:1;this.Icon.node.setScale(-t,t)}l.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Quality/Quality_${t.Quality}`).then((t=>{this.Quality.spriteFrame=t})),l.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name.replace(/^\./,"")}`).then((t=>{this.Icon.spriteFrame=t}))}InitSimple(t,e=!0){this.Init(t,null,e),this.Button.enabled=!1,this.Bottom.active=!1}Reset(){this.Button.enabled=!0,this.Bottom.active=!0,this.Select.active=!1}SetSelect(t){this.Select.active=this.data==t}"头盔"(t){this.data=t,this.Init(t),this.Icon.node.setScale(o(.5,.5))}"防弹衣"(t){this.data=t,this.Init(t),this.Icon.node.setScale(o(.8,.8))}"手枪"(t){this.data=t,this.Init(t),this.Icon.node.setScale(o(.8,.8))}"突击步枪"(t){this.data=t,this.Init(t)}"冲锋枪"(t){this.data=t,this.Init(t)}"射手步枪"(t){this.data=t,this.Init(t)}"栓动步枪"(t){this.data=t,this.Init(t)}"轻机枪"(t){this.data=t,this.Init(t)}"霰弹枪"(t){this.data=t,this.Init(t)}"投掷物"(t){this.data=t,this.Init(t)}"子弹"(t){this.data=t,this.Init(t),this.Icon.node.setScale(o(.8,.8))}"药品"(t){this.data=t,this.Init(t),this.Icon.node.setScale(I.GetScale(t.Type))}OnButtonClick(){c.AudioClipPlay(p.Audio.ButtonClick),this.cb&&this.cb(this.data)}})||y);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_ItemDetailPanel.ts",["cc","./XGTW_ValueBar.ts","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./GameManager.ts","./PoolManager.ts","./XGTW_Data.ts","./ProjectEventManager.ts"],(function(e){var t,a,n,s,l,i,o,u,r,h,c,d,B,m,p,G,D,f;return{setters:[function(e){t=e.cclegacy,a=e.Component,n=e.Sprite,s=e.Label,l=e.v3,i=e._decorator},function(e){o=e.default},function(e){u=e.XGTW_AudioManager},function(e){r=e.BundleManager},function(e){h=e.default},function(e){c=e.XGTW_ItemType,d=e.XGTW_Constant},function(e){B=e.XGTW_UIManager},function(e){m=e.GameManager},function(e){p=e.PoolManager},function(e){G=e.XGTW_ItemData},function(e){D=e.ProjectEventManager,f=e.ProjectEvent}],execute:function(){var I;t._RF.push({},"30606HcbbVDwYXuKkkHTsWV","XGTW_ItemDetailPanel",void 0);const{ccclass:g,property:C}=i;e("default",g("XGTW_ItemDetailPanel")(I=class extends a{constructor(...e){super(...e),this.TitleLabel=null,this.DescLabel=null,this.PriceLabel=null,this.Icon=null,this.ValuesContent=null,this.valueBars=[]}onLoad(){this.Icon=h.GetComponent("Icon",this.node,n),this.TitleLabel=h.GetComponent("TitleLabel",this.node,s),this.DescLabel=h.GetComponent("DescLabel",this.node,s),this.PriceLabel=h.GetComponent("PriceLabel",this.node,s),this.ValuesContent=h.GetNode("ValuesContent",this.node)}Show(e){D.emit(f.弹出窗口,m.GameData.gameName),this.TitleLabel.string=`${e.Name}`,this.PriceLabel.string=`参考单价：${e.Price}`,this.DescLabel.string=e.hasOwnProperty("Desc")?`${e.Desc}`:"";let t=2;e.Type==c[c.头盔]&&(t=1.6,this.DescLabel.string=`防护等级：${e.Lv}`),e.Type==c[c.防弹衣]&&(t=1.8,this.DescLabel.string=`防护等级：${e.Lv}`),e.Type==c[c.子弹]&&(t=1.6,this.DescLabel.string=`${e.Name}`),this.Icon.node.setScale(l(t,t)),this.RefreshValues(e),r.LoadSpriteFrame(m.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name}`).then((e=>{this.Icon.spriteFrame=e}))}RefreshValues(e){let t=!1;this.valueBars.forEach((e=>p.PutNode(e)));let a=c[`${e.Type}`];G.IsGun(a)&&(t=!0,p.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((t=>{t.getComponent(o).Init(e.Damage/90,"伤害"),this.valueBars.push(t)})),p.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((t=>{t.getComponent(o).Init((1.5-e.FireRate)/1.5,"射速"),this.valueBars.push(t)})),p.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((t=>{t.getComponent(o).Init(e.Recoil/.5,"后坐力"),this.valueBars.push(t)}))),G.IsEquip(a)&&(t=!0,p.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((t=>{t.getComponent(o).Init(e.Lv/5,"防护等级"),this.valueBars.push(t)})),p.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((t=>{t.getComponent(o).Init(e.Durability/100,"耐久度"),this.valueBars.push(t)}))),G.IsMedicine(a)&&(t=!0,p.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((t=>{t.getComponent(o).Init(e.HP/500,"血量"),this.valueBars.push(t)})),p.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/ValueBar",this.ValuesContent).then((t=>{t.getComponent(o).Init((6-e.Time)/6,"速度"),this.valueBars.push(t)}))),this.Icon.node.setPosition(t?-200:0,0)}OnButtonClick(e){switch(u.AudioClipPlay(d.Audio.ButtonClick),e.target.name){case"Mask":case"CloseButton":B.Instance.HidePanel(d.Panel.ItemDetailPanel)}}})||I);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_ItemInfoPanel.ts",["cc","./XGTW_InventoryPanel.ts","./XGTW_Item.ts","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./UIManager.ts","./GameManager.ts","./PoolManager.ts","./Tools.ts","./XGTW_Data.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(t){var e,i,a,s,n,o,h,l,r,d,u,c,m,p,f,b,I,G,T,y,C,S,g;return{setters:[function(t){e=t.cclegacy,i=t.Component,a=t.Label,s=t.Slider,n=t.Sprite,o=t.UITransform,h=t._decorator},function(t){l=t.InventoryType},function(t){r=t.default},function(t){d=t.XGTW_AudioManager},function(t){u=t.BundleManager},function(t){c=t.default},function(t){m=t.XGTW_ItemType,p=t.XGTW_Constant},function(t){f=t.XGTW_UIManager},function(t){b=t.UIManager},function(t){I=t.GameManager},function(t){G=t.PoolManager},function(t){T=t.Tools},function(t){y=t.XGTW_ItemData},function(t){C=t.XGTW_DataManager},function(t){S=t.ProjectEventManager,g=t.ProjectEvent}],execute:function(){var P;e._RF.push({},"7fd28mm6/hOX4eDWuWKbSp/","XGTW_ItemInfoPanel",void 0);const{ccclass:B,property:L}=h;t("default",B("XGTW_ItemInfoPanel")(P=class extends i{constructor(...t){super(...t),this.NameLabel=null,this.PriceLabel=null,this.DescLabel=null,this.SliderCountLabel=null,this.SliderMaxCountLabel=null,this.WeightLabel=null,this.Durable=null,this.DurableLabel=null,this.ConfirmButtonLabel=null,this.Slider=null,this.SliderBar=null,this.Item=null,this.Accessories=null,this.SellButton=null,this.PutButton=null,this.count=1,this.maxCount=999,this.data=null,this.item=null,this.formShop=!1,this.cb=null}onLoad(){this.NameLabel=c.GetComponent("NameLabel",this.node,a),this.PriceLabel=c.GetComponent("PriceLabel",this.node,a),this.DescLabel=c.GetComponent("DescLabel",this.node,a),this.SliderCountLabel=c.GetComponent("SliderCountLabel",this.node,a),this.SliderMaxCountLabel=c.GetComponent("SliderMaxCountLabel",this.node,a),this.WeightLabel=c.GetComponent("WeightLabel",this.node,a),this.DurableLabel=c.GetComponent("DurableLabel",this.node,a),this.ConfirmButtonLabel=c.GetComponent("ConfirmButtonLabel",this.node,a),this.Slider=c.GetComponent("Slider",this.node,s),this.SliderBar=c.GetComponent("SliderBar",this.node,n),this.Item=c.GetNode("Item",this.node),this.Durable=c.GetNode("Durable",this.node),this.Accessories=c.GetNode("Accessories",this.node),this.SellButton=c.GetNode("SellButton",this.node),this.PutButton=c.GetNode("PutButton",this.node)}Show(t,e,i=null){S.emit(g.弹出窗口,I.GameData.gameName),this.node.active||(this.node.active=!0),this.data=t,this.formShop=e,this.cb=i,this.count=1,this.NameLabel.string=`${y.GetFullName(t)}`,this.item&&G.PutNode(this.item.node),G.GetNodeByBundle(I.GameData.DefaultBundle,"Prefabs/UI/Item",this.Item).then((e=>{this.item=e.getComponent(r),this.item.InitSimple(t)})),this.DurableLabel.string=`${t.Durable}/${t.Durable}`,this.Durable.active=-1!=t.Durable,this.SellButton.active=!e,this.PutButton.active=!e,this.ConfirmButtonLabel.node.parent.active=!0,this.ConfirmButtonLabel.string=e?"购买":"装备",e||(this.ConfirmButtonLabel.node.parent.active=y.CanEquip(y.GetItemType(t.Type))),this.ShowSlider(y.IsConsumables(m[t.Type])&&e);let a=y.GetAssories(y.GetItemType(t.Type)).length>0&&!e;this.Accessories.active=a,a&&this.RefreshAssories(),this.RefreshSlider(),this.RefreshPriceAndWeight();let s=a||y.IsConsumables(m[t.Type])||this.ConfirmButtonLabel.node.parent.active?900:650;this.node.getComponent(o).setContentSize(650,s),this.node.active=!1,this.node.active=!0}Hide(){this.node.active&&(this.node.active=!1)}RefreshMoney(){}RefreshPriceAndWeight(){this.WeightLabel.string=`${(this.count*this.data.Weight).toFixed(1)}`,this.PriceLabel.string=""+this.count*this.data.Price}SliderCallback(t,e){this.count=Math.floor(t.progress*this.maxCount),this.RefreshSlider()}RefreshAssories(){let t=y.GetAssories(y.GetItemType(this.data.Type));for(let e=0;e<this.Accessories.children.length;e++){const i=this.Accessories.children[e];if(i.active=t.find((t=>t==i.name)),i.active){i.getChildByName("Icon").getComponent(n).spriteFrame=null;let t=this.data.Assories.find((t=>t.Type==i.name));t&&u.LoadSpriteFrame(I.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{i.getChildByName("Icon").getComponent(n).spriteFrame=t}))}}}ShowSlider(t){this.Slider.node.active=t}RefreshSlider(){if(!this.Slider.node.active)return;this.count=T.Clamp(this.count,1,this.maxCount);let t=this.count/this.maxCount;this.Slider.progress=t,this.SliderBar.fillRange=t,this.SliderCountLabel.string=`${this.count}`,this.data.Count=this.count,this.RefreshPriceAndWeight()}OnButtonClick(t){switch(d.AudioClipPlay(p.Audio.ButtonClick),t.target.name){case"AddButton":this.count++,this.RefreshSlider();break;case"ReduceButton":this.count--,this.RefreshSlider();break;case"ConfirmButton":if(this.formShop)if(C.Money>=this.data.Price){C.Money-=this.data.Price;let t=this.data;y.GetItemType(this.data.Type)==m.抽奖礼包&&(t=this.data.GetItemData()),C.AddPlayerItem(t,this.formShop),f.Instance.ShowPanel(p.Panel.RewardPanel,[t])}else b.ShowTip("金钱不足");else y.IsMainGun(y.GetItemType(this.data.Type))?null==C.PlayerData.Weapon_0?C.AddEquippedItem(l.Weapon_0,this.data):null==C.PlayerData.Weapon_1?C.AddEquippedItem(l.Weapon_1,this.data):C.AddEquippedItem(l.Weapon_0,this.data):y.GetItemType(this.data.Type)==m.手枪?C.AddEquippedItem(l.Pistol,this.data):y.GetItemType(this.data.Type)==m.头盔?C.AddEquippedItem(l.Helmet,this.data):y.GetItemType(this.data.Type)==m.防弹衣?C.AddEquippedItem(l.Bulletproof,this.data):y.GetItemType(this.data.Type)==m.近战?C.AddEquippedItem(l.MeleeWeapon,this.data):y.GetItemType(this.data.Type)==m.背包?C.AddEquippedItem(l.Backpack,this.data):C.AddItemToBackpack(this.data);this.Hide(),this.cb&&this.cb();break;case"SellButton":C.RemovePlayerItem(this.data),C.Money+=this.data.Price*this.data.Count,b.ShowTip("出售成功，获得："+this.data.Price*this.data.Count),this.Hide();break;case"PutButton":C.RemovePlayerItem(this.data),C.RemoveItemFromLockbox(this.data),C.AddItemToBackpack(this.data),this.Hide();break;case"枪口":if(!this.data)return;console.error(this.data.Assories),this.data.Assories.find((t=>y.GetItemType(t.Type)==m.枪口))&&(C.AddPlayerItem(this.data.Assories.find((t=>y.GetItemType(t.Type)==m.枪口)),!1),this.data.Assories=this.data.Assories.filter((t=>y.GetItemType(t.Type)!=m.枪口)))}}})||P);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_ItemNameTitle.ts",["cc","./NodeUtil.ts","./XGTW_Constant.ts"],(function(t){var e,o,n,a,i,c,s,l;return{setters:[function(t){e=t.cclegacy,o=t.Component,n=t.Label,a=t.Sprite,i=t.color,c=t._decorator},function(t){s=t.default},function(t){l=t.XGTW_QualityColorHex}],execute:function(){var r;e._RF.push({},"7ba39ci5ydGcK14FcQS64R/","XGTW_ItemNameTitle",void 0);const{ccclass:u,property:d}=c;t("default",u("XGTW_ItemNameTitle")(r=class extends o{constructor(...t){super(...t),this.Label=null,this.QualityBar=null}onLoad(){this.Label=this.node.getComponent(n),this.QualityBar=s.GetNode("QualityBar",this.node)}Init(){this.QualityBar.getComponent(a).color=i().fromHEX(l.Epic)}start(){}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_KanChaShopPanel.ts",["cc","./XGTW_ZaHuoItem.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./UIManager.ts","./XGTW_UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./PoolManager.ts","./PrefsManager.ts","./XGTW_Data.ts","./XGTW_DataManager.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(e){var t,n,a,i,s,h,o,u,r,c,l,f,g,B,m,P,S,C,T,R,p,d;return{setters:[function(e){t=e.cclegacy,n=e.Component,a=e.Label,i=e.color,s=e.Color,h=e._decorator},function(e){o=e.default},function(e){u=e.XGTW_AudioManager},function(e){r=e.default},function(e){c=e.XGTW_ItemType,l=e.XGTW_Constant},function(e){f=e.UIManager},function(e){g=e.XGTW_UIManager},function(e){B=e.EventManager},function(e){m=e.XGTW_Event},function(e){P=e.PoolManager},function(e){S=e.default},function(e){C=e.XGTW_ItemData},function(e){T=e.XGTW_DataManager},function(e){R=e.GameManager},function(e){p=e.ProjectEventManager,d=e.ProjectEvent}],execute:function(){var G;t._RF.push({},"789e3ZB8k1LtpqbFNE7TlBc","XGTW_KanChaShopPanel",void 0);const{ccclass:y,property:M}=h;e("default",y("XGTW_KanChaShopPanel")(G=class extends n{constructor(...e){super(...e),this.ItemContent=null,this.ZhuangBanButton=null,this.TeShuButton=null,this.MoneyLabel=null,this.SkinPieceLabel=null,this.HuiZhangPieceLabel=null,this.KCQBLabel=null,this.items=[],this.selectItemData=null}onLoad(){this.ZhuangBanButton=r.GetNode("ZhuangBanButton",this.node),this.TeShuButton=r.GetNode("TeShuButton",this.node),this.ItemContent=r.GetNode("ItemContent",this.node),this.MoneyLabel=r.GetComponent("MoneyLabel",this.node,a),this.SkinPieceLabel=r.GetComponent("SkinPieceLabel",this.node,a),this.HuiZhangPieceLabel=r.GetComponent("HuiZhangPieceLabel",this.node,a),this.KCQBLabel=r.GetComponent("KCQBLabel",this.node,a)}Show(){p.emit(d.弹出窗口,R.GameData.gameName),this.RefreshItems(T.ItemDatas.get(c.碎片装扮)),this.RefreshButtonState("ZhuangBanButton"),this.RefreshMoney(),this.RefreshSkinPiece(),this.RefreshHuiZhangPiece(),this.RefreshKCQB()}RefreshItems(e){this.items.forEach((e=>P.PutNode(e)));for(let t=0;t<e.length;t++){const n=e[t];P.GetNodeByBundle(R.GameData.DefaultBundle,"Prefabs/UI/ZaHuoItem",this.ItemContent).then((e=>{e.getComponent(o).Init(n,this.OnItemCallback.bind(this)),this.items.push(e)}))}}OnItemCallback(e){this.selectItemData=e,C.GetItemType(e.Type)==c.碎片装扮&&(S.GetBool(`${e.Type}${e.Name}`)?(f.ShowTip("装扮成功"),T.PlayerData.Skin_Bulletproof=T.GetPieceSkinData(e.Name),B.Scene.emit(m.RefreshEquip)):T.SkinPiece>=e.Price?(S.SetBool(`${e.Type}${e.Name}`,!0),T.SkinPiece-=e.Price):f.ShowTip("碎片不足")),"能源电池"==e.Name&&(T.HuiZhangPiece>=e.Price?(T.EnergyBattery++,T.HuiZhangPiece-=e.Price,f.ShowTip("兑换成功")):f.ShowTip("徽章不足")),"勘察情报"==e.Name&&(T.Money>=e.Price?(T.KCQB++,T.Money-=e.Price,f.ShowTip("兑换成功")):f.ShowTip("金钱不足")),this.items.forEach((e=>e.getComponent(o).Refresh()))}RefreshButtonState(e){this.ZhuangBanButton.getChildByName("Select").active="ZhuangBanButton"==e,this.TeShuButton.getChildByName("Select").active="TeShuButton"==e,this.ZhuangBanButton.getChildByName("Label").getComponent(a).color="ZhuangBanButton"==e?i().fromHEX("#FFAA00"):s.WHITE,this.TeShuButton.getChildByName("Label").getComponent(a).color="TeShuButton"==e?i().fromHEX("#FFAA00"):s.WHITE}OnButtonClick(e){switch(u.AudioClipPlay(l.Audio.ButtonClick),e.target.name){case"ZhuangBanButton":this.RefreshItems(T.ItemDatas.get(c.碎片装扮)),this.RefreshButtonState(e.target.name);break;case"TeShuButton":this.RefreshItems(T.ItemDatas.get(c.特殊道具)),this.RefreshButtonState(e.target.name);break;case"ReturnButton":g.Instance.HidePanel(l.Panel.KanChaShopPanel)}}RefreshMoney(){this.MoneyLabel.string=`${T.Money}`}RefreshSkinPiece(){this.SkinPieceLabel.string=`${T.SkinPiece}`}RefreshHuiZhangPiece(){this.HuiZhangPieceLabel.string=`${T.HuiZhangPiece}`}RefreshKCQB(){this.KCQBLabel.string=`${T.KCQB}`}onEnable(){B.on(m.RefreshMoney,this.RefreshMoney,this),B.on(m.RefreshSkinPiece,this.RefreshSkinPiece,this),B.on(m.RefreshHuiZhangPiece,this.RefreshHuiZhangPiece,this),B.on(m.RefreshKCQB,this.RefreshKCQB,this)}onDisable(){B.off(m.RefreshMoney,this.RefreshMoney,this),B.off(m.RefreshSkinPiece,this.RefreshSkinPiece,this),B.off(m.RefreshHuiZhangPiece,this.RefreshHuiZhangPiece,this),B.off(m.RefreshKCQB,this.RefreshKCQB,this)}})||G);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Missile.ts",["cc","./XGTW_Constant.ts","./PoolManager.ts","./GameManager.ts"],(function(t){var e,o,i,n,s,a,r,d,l,c,g,u,h;return{setters:[function(t){e=t.cclegacy,o=t.Component,i=t.RigidBody2D,n=t.Vec2,s=t.v3,a=t.v2,r=t.BoxCollider2D,d=t.Contact2DType,l=t.find,c=t._decorator},function(t){g=t.XGTW_Constant},function(t){u=t.PoolManager},function(t){h=t.GameManager}],execute:function(){var p;e._RF.push({},"56f97IcgzxOHY8OC8+c6jnz","XGTW_Missile",void 0);const{ccclass:y,property:C}=c;t("default",y("XGTW_Missile")(p=class extends o{constructor(...t){super(...t),this.rigidbody=null,this.target=null}onLoad(){this.rigidbody=this.node.getComponent(i)}Init(t){this.rigidbody.linearVelocity=n.ZERO,this.target=t;let e=s(this.node.right.clone().multiplyScalar(3e3));this.rigidbody.applyForceToCenter(a(e.x,e.y),!0),this.node.getComponent(r).on(d.BEGIN_CONTACT,this.onBeginContact,this)}onBeginContact(t,e,o){if(e.group==g.Group.Obstacle){const t=o.getWorldManifold();u.GetNodeByBundle(h.GameData.DefaultBundle,"Prefabs/MissileExplosion",l("Canvas")).then((e=>{e.setWorldPosition(s(t.points[0].x,t.points[0].y))})),this.scheduleOnce((()=>{u.PutNode(this.node)}))}}update(t){this.target?n.distance(this.node.getWorldPosition(),this.target.getWorldPosition())>3500&&(this.rigidbody.linearVelocity=n.ZERO,u.PutNode(this.node)):(this.rigidbody.linearVelocity=n.ZERO,u.PutNode(this.node))}})||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_PlayerController.ts",["cc","./XGTW_Bullet.ts","./XGTW_DroppedItem.ts","./XGTW_EnemyController.ts","./XGTW_Supplies.ts","./XGTW_GamePanel.ts","./XGTW_HPBar.ts","./BundleManager.ts","./XGTW_Missile.ts","./XGTW_AudioManager.ts","./XGTW_GameManager.ts","./XGTW_UIManager.ts","./XGTW_Constant.ts","./UIManager.ts","./NodeUtil.ts","./GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./Tools.ts","./PoolManager.ts","./XGTW_Data.ts","./XGTW_AchievementManager.ts","./XGTW_DataManager.ts"],(function(e){var t,i,n,s,a,o,l,r,h,u,p,d,m,c,S,f,g,G,D,y,P,T,_,v,B,F,M,C,E,I,H,R,W,A,k,X,N,j,O,q;return{setters:[function(e){t=e.cclegacy,i=e.v2,n=e._decorator,s=e.Component,a=e.RigidBody2D,o=e.CircleCollider2D,l=e.Sprite,r=e.Animation,h=e.Contact2DType,u=e.Vec3,p=e.v3,d=e.misc,m=e.PhysicsSystem2D,c=e.ERaycast2DType},function(e){S=e.default},function(e){f=e.default},function(e){g=e.default},function(e){G=e.default},function(e){D=e.default},function(e){y=e.default},function(e){P=e.BundleManager},function(e){T=e.default},function(e){_=e.XGTW_AudioManager},function(e){v=e.default,B=e.GameMode},function(e){F=e.XGTW_UIManager},function(e){M=e.XGTW_Constant,C=e.XGTW_ItemType},function(e){E=e.UIManager},function(e){I=e.default},function(e){H=e.GameManager},function(e){R=e.EventManager,W=e.MyEvent},function(e){A=e.XGTW_Event},function(e){k=e.Tools},function(e){X=e.PoolManager},function(e){N=e.XGTW_ItemData},function(e){j=e.XGTW_AchievementManager,O=e.XGTW_EAchievement},function(e){q=e.XGTW_DataManager}],execute:function(){var x,J;t._RF.push({},"f037bCUlQ1Ddr1OkOcX8OKb","XGTW_PlayerController",void 0);const{ccclass:w,property:b}=n;let L=e("AniState",function(e){return e.Idle="Idle",e.Move="Move",e.Hit="Hit",e.Die="Die",e}({}));e("default",w("XGTW_PlayerController")(((J=class e extends s{constructor(...e){super(...e),this.rigidbody=null,this.collider=null,this.Doggie=void 0,this.FirePos=void 0,this.Gun=void 0,this.GunSp=void 0,this.HPBar=void 0,this.Skin_Helmet=void 0,this.Skin_Bulletproof=void 0,this.Equip=void 0,this.Equip_Helmet=void 0,this.Equip_Bulletproof=void 0,this.AimLine=void 0,this.GunSpAni=null,this.x=0,this.y=0,this.isFire=!1,this.needFire=!1,this.isCooldown=!0,this.isReload=!1,this.cooldownTimer=0,this.maxSpeed=30,this.speed=30,this.state=L.Idle,this.gun=null,this.fireDir=i(),this.hpBar=null,this.jjRevival=!1,this.jjRevivalTimer=0,this.jjSpeedUp=!1,this.jjSpeedUpTimer=0,this._hp=0,this.hitBullet=null,this.results=null}get HP(){return this._hp}set HP(t){var i;t<=0&&(t=0,j.AddAchievementTimes(O.菜就多练),v.GameMode==B.TEAM?(D.Instance.RefreshTeamScore(0,1),v.Instance.InitPlayer()):(q.PlayerData.Clear(),R.Scene.emit(A.RefreshEquip),this.StopFire(),this.StopMove(),this.PlayAni(L.Die),v.IsGameOver=!0,this.scheduleOnce((()=>{F.Instance.ShowPanel(M.Panel.FailPanel,[this.hitBullet])}),2))),this._hp=k.Clamp(t,0,v.JJMode?e.JJMAXHP:e.MAXHP),R.Scene.emit(A.RefreshHP),null==(i=this.hpBar)||i.Set(t/(v.JJMode?e.JJMAXHP:e.MAXHP))}onLoad(){this.rigidbody=this.node.getComponent(a),this.collider=this.node.getComponent(o),this.Gun=this.node.getChildByName("Gun"),this.GunSp=I.GetComponent("GunSp",this.node,l),this.FirePos=I.GetNode("FirePos",this.node),this.Doggie=I.GetNode("Doggie",this.node),this.Skin_Helmet=I.GetComponent("Skin_Helmet",this.node,l),this.Skin_Bulletproof=I.GetComponent("Skin_Bulletproof",this.node,l),this.Equip=I.GetNode("Equip",this.node),this.Equip_Helmet=I.GetComponent("Equip_Helmet",this.node,l),this.Equip_Bulletproof=I.GetComponent("Equip_Bulletproof",this.node,l),this.AimLine=I.GetNode("AimLine",this.node),this.HPBar=I.GetNode("HPBar",this.node),this.hpBar=this.HPBar.getComponent(y),this.GunSpAni=I.GetComponent("GunSp",this.node,r),this.GunSpAni.on(r.EventType.FINISHED,(()=>{this.isReload=!1,this.needFire&&this.Fire()}),this),this.hpBar.Init(),this.HP=v.JJMode?e.JJMAXHP:e.MAXHP,e.oriPosition.set(i(this.node.getWorldPosition().x,this.node.getWorldPosition().y)),this.collider.on(h.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(h.END_CONTACT,this.onEndContact,this)}start(){this.RefreshEquip()}RefreshEquip(){if(v.JJMode)return this.LoadGun(q.GetJiJiaGun()),void P.LoadSpriteFrame(H.GameData.DefaultBundle,"Res/Sprites/Doggie/个性化装扮/动力装甲").then((e=>{this.Skin_Bulletproof.spriteFrame=e}));this.gun=null,this.GunSp.spriteFrame=null,this.Equip_Helmet.node.active=null!=q.PlayerData.Helmet,null!=q.PlayerData.Helmet&&P.LoadSpriteFrame(H.GameData.DefaultBundle,`Res/Sprites/Doggie/${q.PlayerData.Helmet.Type}/${q.PlayerData.Helmet.Name}`).then((e=>{this.Equip_Helmet.spriteFrame=e})),this.Equip_Bulletproof.node.active=null!=q.PlayerData.Bulletproof,null!=q.PlayerData.Bulletproof&&P.LoadSpriteFrame(H.GameData.DefaultBundle,`Res/Sprites/Doggie/${q.PlayerData.Bulletproof.Type}/${q.PlayerData.Bulletproof.Name}`).then((e=>{this.Equip_Bulletproof.spriteFrame=e})),this.Skin_Helmet.node.active=!this.Equip_Helmet.node.active,this.Skin_Helmet.node.active&&null!=q.PlayerData.Skin_Helmet&&P.LoadSpriteFrame(H.GameData.DefaultBundle,`Res/Sprites/Doggie/${q.PlayerData.Skin_Helmet.Type}/${q.PlayerData.Skin_Helmet.Name}`).then((e=>{this.Skin_Helmet.spriteFrame=e})),this.Skin_Bulletproof.node.active=!this.Equip_Bulletproof.node.active,this.Skin_Bulletproof.node.active&&(null!=q.PlayerData.Skin_Bulletproof?q.IsPieceSkin(q.PlayerData.Skin_Bulletproof.Name)?P.LoadSpriteFrame(H.GameData.DefaultBundle,`Res/Sprites/Items/${q.PlayerData.Skin_Bulletproof.Type}/${q.PlayerData.Skin_Bulletproof.Name}`).then((e=>{this.Skin_Bulletproof.spriteFrame=e})):P.LoadSpriteFrame(H.GameData.DefaultBundle,`Res/Sprites/Doggie/${q.PlayerData.Skin_Bulletproof.Type}/${q.PlayerData.Skin_Bulletproof.Name}`).then((e=>{this.Skin_Bulletproof.spriteFrame=e})):this.Skin_Bulletproof.spriteFrame=null);let e=null;null!=q.PlayerData.Weapon_0?e=q.PlayerData.Weapon_0:null!=q.PlayerData.Weapon_1?e=q.PlayerData.Weapon_1:null!=q.PlayerData.Pistol?e=q.PlayerData.Pistol:null!=q.PlayerData.MeleeWeapon&&(e=q.PlayerData.MeleeWeapon),this.LoadGun(e)}LoadGun(e){if(this.AimLine.active=e&&N.IsSniper(C[`${e.Type}`]),e){let t=q.GetEquipGunSkin(e);t?P.LoadSpriteFrame(H.GameData.DefaultBundle,`Res/Sprites/Doggie/${t.Type}/${t.Name}`).then((e=>{this.GunSp.spriteFrame=e})):P.LoadSpriteFrame(H.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name}`).then((e=>{this.GunSp.spriteFrame=e})),e.Type==C[C.近战]?this.GunSp.node.setScale(u.ONE):this.FirePos.setPosition(p(e.FirePosition.x,e.FirePosition.y)),this.gun=e}}SetDir(e,t,i){v.IsGameOver||(this.x=e,this.y=t,this.isFire||(this.Doggie.scale=p(this.x<0?-1:1,this.Doggie.scale.y),(this.x<0?-1:1)!=this.Gun.scale.x&&(this.Gun.scale=p(this.x<0?-1:1,this.Gun.scale.y),this.Gun.angle=-this.Gun.angle)),this.speed=this.maxSpeed,this.PlayAni(L.Move))}SetGunDir(e){if(v.IsGameOver)return;this.fireDir.set(e),this.isFire&&(this.Doggie.scale=p(e.x<0?-1:1,this.Doggie.scale.y));let t=Math.atan2(e.y,e.x),i=d.radiansToDegrees(t);this.Gun.scale=p(i>90&&i<=180||i<-90&&i>=-180?-1:1,this.Gun.scale.y),this.Gun.angle=i>90&&i<=180||i<-90&&i>=-180?i-180:i}StopMove(){this.x=0,this.y=0,this.rigidbody.enabled&&(this.rigidbody.linearVelocity=i(this.x,this.y)),this.PlayAni(L.Idle)}PlayAni(e){v.IsGameOver||this.state!=e&&(this.state=e)}update(t){v.IsGameOver||(this.jjRevival&&(this.HP+=3,this.jjRevivalTimer+=t,(this.jjRevivalTimer>=3||this.HP==(v.JJMode?e.JJMAXHP:e.MAXHP))&&(this.jjRevivalTimer=0,this.jjRevival=!1)),this.jjSpeedUp&&(this.jjSpeedUpTimer+=t,this.maxSpeed=50,this.jjSpeedUpTimer>=3&&(this.maxSpeed=30,this.jjSpeedUpTimer=0,this.jjSpeedUp=!1)),this.gun&&(this.isCooldown||(this.cooldownTimer+=t,this.cooldownTimer>=this.gun.FireRate&&(this.isCooldown=!0,this.cooldownTimer=0))),this.rigidbody.enabled&&(this.rigidbody.linearVelocity=i(this.x*this.speed,this.y*this.speed)))}TakeDamage(e){this.hitBullet=e;let t=e.weapon.Damage;if(v.IsGameOver)return;let i,n=0;null!=q.PlayerData.Bulletproof&&(i=q.PlayerData.Bulletproof,n+=i.Quality,i.Durable-=t/50,i.Durable<=0&&(q.PlayerData.Bulletproof=null,R.Scene.emit(A.RefreshEquip))),null!=q.PlayerData.Helmet&&(i=q.PlayerData.Helmet,n+=i.Quality,i.Durable-=t/50,i.Durable<=0&&(q.PlayerData.Helmet=null,R.Scene.emit(A.RefreshEquip))),this.HP-=0==n?t:t/n*2}Reload(e){this.gun&&(this.isReload=!0,this.isFire=!1,!this.gun||this.gun.Type!=C[C.栓动步枪]&&this.gun.Type!=C[C.射手步枪]||R.Scene.emit(A.CameraZoomIn),this.unschedule(this.StartFire),this.GunSpAni.play("Reload"),this.gun.BulletCount=e.Count,R.Scene.emit(A.RefreshBulletCount))}Fire(){if(!v.IsGameOver&&(this.isFire=!0,this.needFire=!0,this.gun&&!this.isReload))if(this.gun.BulletCount<=0)E.ShowTip("弹匣没有子弹");else{if(N.IsSniper(C[`${this.gun.Type}`])){let e=this.gun.Type==C[C.栓动步枪]||this.gun.Type==C[C.射手步枪]?600:850;if(R.Scene.emit(A.CameraZoomOut,e),this.gun.Type==C[C.栓动步枪])return}this.isCooldown&&!N.IsSniper(C[`${this.gun.Type}`])&&(this.isCooldown=!1,this.StartFire()),this.schedule(this.StartFire,this.gun.FireRate)}}FireMissile(){if(v.IsGameOver)return;let e=0;for(let t=0;t<4;t++)this.scheduleOnce((()=>{X.GetNodeByBundle(H.GameData.DefaultBundle,"Prefabs/Missile",this.node).then((e=>{v.IsGameOver||(e.setWorldPosition(this.FirePos.getWorldPosition()),e.angle=this.Gun.scale.x<0?this.Gun.angle-180:this.Gun.angle,e.getComponent(T).Init(this.node))}))}),e),e+=.3}MeleeAttack(){let e=this.node.getWorldPosition(),t=e.add(p(this.fireDir.normalize().multiplyScalar(180).x,this.fireDir.normalize().multiplyScalar(180).y));this.results=m.instance.raycast(e,t,c.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(a).group==M.Group.Enemy&&this.results[0].collider.node.getComponent(g).TakeMeleeDamage(this.gun.Damage)}StartFire(){if(v.IsGameOver)return;if(!this.gun)return;if(N.IsMeleeWeapon(N.GetItemType(this.gun.Type)))return void this.MeleeAttack();if(this.gun.BulletCount<=0)return void E.ShowTip("没有子弹");let e=this.gun.Type==C[C.霰弹枪]?5:1;_.AudioClipPlay(M.Audio.Fire),this.gun.BulletCount-=1,R.Scene.emit(A.RefreshBulletCount),this.FirePos.getComponent(r).play("Fire");for(let t=0;t<e;t++)X.GetNodeByBundle(H.GameData.DefaultBundle,"Prefabs/Bullet",this.node.parent,null,this.FirePos.getWorldPosition().clone()).then((t=>{if(v.IsGameOver)return;let i=k.GetRandom(-10*this.gun.Recoil*e,10*this.gun.Recoil*e);t.angle=this.Gun.scale.x<0?this.Gun.angle+i-180:this.Gun.angle+i,t.getComponent(S).Init(this.node,this.gun,q.PlayerData)}));X.GetNodeByBundle(H.GameData.DefaultBundle,"Prefabs/BulletBlank",this.node).then((e=>{v.IsGameOver||(e.setWorldPosition(p(this.FirePos.getWorldPosition().clone().x-50,this.FirePos.getWorldPosition().clone().y)),e.getComponent(S).InitBlank(this.node,i(-5*this.Gun.scale.x,k.GetRandom(5,8)).multiplyScalar(.2)))}))}StopFire(){this.isFire=!1,this.needFire=!1,!this.gun||this.gun.Type!=C[C.栓动步枪]&&this.gun.Type!=C[C.射手步枪]||R.Scene.emit(A.CameraZoomIn),this.unschedule(this.StartFire),this.gun&&this.gun.Type==C[C.栓动步枪]&&this.isCooldown&&(this.StartFire(),this.isCooldown=!1)}onBeginContact(e,t,i){if("Supplies"==t.node.name){let e=t.node.getComponent(G);e&&e.node.active&&R.Scene.emit(A.ShowTakeSupplies,!0,e)}if("DroppedItem"==t.node.name&&R.Scene.emit(A.ShowTakeItem,!0,t.node.getComponent(f)),"Bullet"==t.node.name){let e=t.node.getComponent(S);e&&e.weapon&&this.gun!=e.weapon&&(this.TakeDamage(e),this.scheduleOnce((()=>{X.PutNode(t.node)})))}"Evacuation"==t.node.name&&R.Scene.emit(A.Evacuation,!0)}onEndContact(e,t,i){"Supplies"==t.node.name&&R.Scene.emit(A.ShowTakeSupplies,!1),"DroppedItem"==t.node.name&&R.Scene.emit(A.ShowTakeItem,!1),"Evacuation"==t.node.name&&R.Scene.emit(A.Evacuation,!1)}LogGunData(){let e=I.GetNode("GunSp",this.node);for(let t=1;t<e.children.length;t++){const i=e.children[t];P.LoadJson(H.GameData.DefaultBundle,"Data").then((e=>{e.json.霰弹枪.find((e=>e.Name==i.name))}))}}onEnable(){R.Scene.on(W.MOVEMENT,this.SetDir,this),R.Scene.on(W.MOVEMENT_STOP,this.StopMove,this),R.Scene.on(W.SET_ATTACK_DIR,this.SetGunDir,this),R.Scene.on(W.Start_Fire,this.Fire,this),R.Scene.on(W.Stop_Fire,this.StopFire,this),R.Scene.on(A.RefreshEquip,this.RefreshEquip,this)}onDisable(){R.Scene.off(W.MOVEMENT,this.SetDir,this),R.Scene.off(W.MOVEMENT_STOP,this.StopMove,this),R.Scene.off(W.SET_ATTACK_DIR,this.SetGunDir,this),R.Scene.off(W.Start_Fire,this.Fire,this),R.Scene.off(W.Stop_Fire,this.StopFire,this),R.Scene.off(A.RefreshEquip,this.RefreshEquip,this)}}).MAXHP=600,J.JJMAXHP=2e3,J.oriPosition=i(),x=J))||x);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_RankPanel.ts",["cc","./XGTW_AudioManager.ts","./NodeUtil.ts","./TweenUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./UIManager.ts","./Tools.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts","./GameManager.ts"],(function(n){var e,a,t,i,s,o,l,r,c,k,h,R,u,P,d,g,f,I,T;return{setters:[function(n){e=n.cclegacy,a=n.Component,t=n.Label,i=n.Tween,s=n.tween,o=n.v3,l=n._decorator},function(n){r=n.XGTW_AudioManager},function(n){c=n.default},function(n){k=n.EasingType},function(n){h=n.XGTW_Constant,R=n.XGTW_ItemType},function(n){u=n.XGTW_UIManager},function(n){P=n.UIManager},function(n){d=n.Tools},function(n){g=n.XGTW_DataManager},function(n){f=n.ProjectEventManager,I=n.ProjectEvent},function(n){T=n.GameManager}],execute:function(){var m;e._RF.push({},"f8691k3+VdJq55lA9IUoZ12","XGTW_RankPanel",void 0);const{ccclass:G,property:X}=l;n("default",G("XGTW_RankPanel")(m=class extends a{constructor(...n){super(...n),this.RankIcon=null,this.RankDetialPanel=null,this.RankLabel=null,this.RankPointLabel=null,this.rankRange=[1e3,5e3,1e4,2e4],this.rank=["新兵","专家","王牌","狗区传说"]}onLoad(){this.RankIcon=c.GetNode("RankIcon",this.node),this.RankDetialPanel=c.GetNode("RankDetialPanel",this.node),this.RankLabel=c.GetComponent("RankLabel",this.node,t),this.RankPointLabel=c.GetComponent("RankPointLabel",this.node,t)}Show(){f.emit(I.弹出窗口,T.GameData.gameName),this.RankDetialPanel.active=!1,i.stopAllByTarget(this.RankIcon),this.RankIcon.setScale(3,3),s(this.RankIcon).to(.3,{scale:o(1.5,1.5)},{easing:k.quadIn}).start(),this.Refresh(),g.EXP+=500,g.RankPoint+=500}Refresh(){this.RankPointLabel.string=`段位积分：${g.RankPoint}`;let n=0;g.EXP<=this.rankRange[1]&&(this.RankLabel.string=this.rank[0],n=0),g.EXP>this.rankRange[1]&&g.EXP<=this.rankRange[2]&&(this.RankLabel.string=this.rank[1],n=1),g.EXP>this.rankRange[2]&&g.EXP<=this.rankRange[3]&&(this.RankLabel.string=this.rank[2],n=2),g.EXP>this.rankRange[3]&&(this.RankLabel.string=this.rank[3],n=3);for(let e=0;e<this.RankIcon.children.length;e++)this.RankIcon.children[e].active=n==e}OnButtonClick(n){switch(r.AudioClipPlay(h.Audio.ButtonClick),n.target.name){case"ReturnButton":u.Instance.HidePanel(h.Panel.RankPanel);break;case"BuyTouKuiButton":if(g.RankPoint>=2400){g.RankPoint-=2400;let n=g.ItemDatas.get(R.头盔).find((n=>"IND70战术"==n.Name));g.AddPlayerItem(d.Clone(n)),u.Instance.ShowPanel(h.Panel.RewardPanel,[n]),this.Refresh()}else P.ShowTip("段位积分不足");break;case"BuyKuiJiaButton":if(g.RankPoint>=3e3){g.RankPoint-=3e3;let n=g.ItemDatas.get(R.防弹衣).find((n=>"斯巴达B型防弹衣"==n.Name));g.AddPlayerItem(d.Clone(n)),u.Instance.ShowPanel(h.Panel.RewardPanel,[n]),this.Refresh()}else P.ShowTip("段位积分不足");break;case"BuyGunButton":if(g.RankPoint>=4e3){g.RankPoint-=4e3;let n=g.JunXuItems.find((n=>"AUG-祥瑞"==n.Name));g.AddPlayerItem(d.Clone(n)),u.Instance.ShowPanel(h.Panel.RewardPanel,[n]),this.Refresh()}else P.ShowTip("段位积分不足");break;case"RankDetailButton":this.RankDetialPanel.active=!0;break;case"RankDetialPanelReturnButton":this.RankDetialPanel.active=!1}}})||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_RewardPanel.ts",["cc","./XGTW_Item.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./PoolManager.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(t){var e,n,a,o,s,i,c,u,r,l,d,m;return{setters:[function(t){e=t.cclegacy,n=t.Component,a=t._decorator},function(t){o=t.default},function(t){s=t.XGTW_AudioManager},function(t){i=t.default},function(t){c=t.XGTW_Constant},function(t){u=t.XGTW_UIManager},function(t){r=t.PoolManager},function(t){l=t.GameManager},function(t){d=t.ProjectEventManager,m=t.ProjectEvent}],execute:function(){var P;e._RF.push({},"f2c4cLOWRNPd5u0w2d0Nv8B","XGTW_RewardPanel",void 0);const{ccclass:f,property:G}=a;t("default",f("XGTW_RewardPanel")(P=class extends n{constructor(...t){super(...t),this.Panel=null,this.Content=null,this.Item=null}onLoad(){this.Panel=i.GetNode("Panel",this.node),this.Content=i.GetNode("Content",this.node)}Show(t){d.emit(m.弹出窗口,l.GameData.gameName),this.Item&&r.PutNode(this.Item),r.GetNodeByBundle(l.GameData.DefaultBundle,"Prefabs/UI/Item",this.Content).then((e=>{this.Item=e,e.getComponent(o).InitSimple(t)}))}OnButtonClick(t){switch(s.AudioClipPlay(c.Audio.ButtonClick),t.target.name){case"Mask":u.Instance.HidePanel(c.Panel.RewardPanel)}}})||P);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SearchPanel.ts",["cc","./XGTW_DataManager.ts","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./UIManager.ts","./GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./Banner.ts"],(function(e){var t,s,i,n,h,a,r,o,c,l,u,d,g,f,P,B,S,b;return{setters:[function(e){t=e.cclegacy,s=e.Component,i=e.Sprite,n=e.Label,h=e.v3,a=e.tween,r=e._decorator},function(e){o=e.XGTW_DataManager},function(e){c=e.XGTW_AudioManager},function(e){l=e.BundleManager},function(e){u=e.default},function(e){d=e.XGTW_Constant},function(e){g=e.XGTW_UIManager},function(e){f=e.UIManager},function(e){P=e.GameManager},function(e){B=e.EventManager},function(e){S=e.XGTW_Event},function(e){b=e.default}],execute:function(){var _;t._RF.push({},"9194bLWR1pNDL9z+VSQ55nN","XGTW_SearchPanel",void 0);const{ccclass:G,property:m}=r,I=[2e4,4e4,6e4,8e4,1e5,12e4,14e4,16e4,18e4,2e5],L=[0,2,4,6,8,10,12,14,16,18,20];e("default",G("XGTW_SearchPanel")(_=class extends s{constructor(...e){super(...e),this.ProgressValue=null,this.SearchButton_0=null,this.SearchButton_1=null,this.SearchButton_2=null,this.InfoPanel=null,this.ProgressGetButton=null,this.MoneyLabel=null,this.SkinPieceLabel=null,this.HuiZhangPieceLabel=null,this.KCQBLabel=null,this.ProgressIcon=null,this.Progress=null,this.ProgressLabel=null,this.SearchButton_0_MoneyLabel=null,this.SearchButton_0_QBLabel=null,this.index=0,this.GameIsOver=!1,this.AwardName=["徽章碎片","徽章碎片","徽章碎片","徽章碎片","能源电池","能源电池","皮肤碎片","皮肤碎片"],this.AwardNumber=[1,5,10,15,1,3,1,3],this.IsBeginAnimation=!1}onLoad(){this.ProgressValue=u.GetNode("ProgressValue",this.node),this.SearchButton_0=u.GetNode("SearchButton_0",this.node),this.SearchButton_1=u.GetNode("SearchButton_1",this.node),this.SearchButton_2=u.GetNode("SearchButton_2",this.node),this.InfoPanel=u.GetNode("InfoPanel",this.node),this.ProgressGetButton=u.GetNode("ProgressGetButton",this.node),this.Progress=u.GetNode("Progress",this.node),this.ProgressIcon=u.GetComponent("ProgressIcon",this.node,i),this.ProgressLabel=u.GetComponent("ProgressLabel",this.node,n),this.SearchButton_0_MoneyLabel=u.GetComponent("SearchButton_0_MoneyLabel",this.node,n),this.SearchButton_0_QBLabel=u.GetComponent("SearchButton_0_QBLabel",this.node,n),this.MoneyLabel=u.GetComponent("MoneyLabel",this.node,n),this.SkinPieceLabel=u.GetComponent("SkinPieceLabel",this.node,n),this.HuiZhangPieceLabel=u.GetComponent("HuiZhangPieceLabel",this.node,n),this.KCQBLabel=u.GetComponent("KCQBLabel",this.node,n)}Show(){this.Refresh(),this.RefreshMoney(),this.RefreshSkinPiece(),this.RefreshHuiZhangPiece(),this.RefreshKCQB()}Refresh(){this.ProgressGetButton.active=this.GameIsOver,7==this.index&&(this.ProgressGetButton.active=!0),this.ProgressValue.active=!this.GameIsOver,7==this.index&&(this.ProgressValue.active=!1),this.ProgressValue.children.forEach(((e,t)=>{t<this.index?e.children[0].active=!0:e.children[0].active=!1})),l.LoadSpriteFrame(P.GameData.DefaultBundle,`Res/Sprites/Items/特殊道具/${this.AwardName[this.index]}`).then((e=>{this.ProgressIcon.spriteFrame=e})),0==this.index&&(this.ProgressIcon.spriteFrame=null),this.ProgressLabel.string=`${this.index}`,this.SearchButton_0_MoneyLabel.string=`${I[this.index]}`,this.SearchButton_0_QBLabel.string=`${L[this.index]}`,this.SearchButton_2.active=this.index>=1,this.SearchButton_0.getChildByName("Tip").active=this.index>=1,this.SearchButton_1.getChildByName("Tip").active=this.index>=1}RefreshProgress(e){this.ProgressLabel.string=`${e}`;for(let t=0;t<this.ProgressValue.children.length;t++){const s=this.ProgressValue.children[t];s.getChildByName("Done").active=Number(s.name)<e}}ShowInfoPanel(e){this.InfoPanel.active=e}OnButtonClick(e){switch(c.AudioClipPlay(d.Audio.ButtonClick),e.target.name){case"SearchButton_0":this.reconnaissance(1);break;case"SearchButton_1":this.reconnaissance(2);break;case"SearchButton_2":this.reconnaissance(0);break;case"ReturnButton":g.Instance.HidePanel(d.Panel.SearchPanel);break;case"DuiHuanButton":g.Instance.ShowPanel(d.Panel.KanChaShopPanel);break;case"YiLanButton":this.ShowInfoPanel(!0);break;case"InfoPanelCloseButton":this.ShowInfoPanel(!1);break;case"ProgressGetButton":this.GetAward()}}reconnaissance(e){this.IsBeginAnimation||(this.GameIsOver?f.ShowTip("请先领走奖励！"):7!=this.index?(0==e&&(this.GetIssucceed(20)?this.succeedorfailing(!0):this.succeedorfailing(!1)),1==e&&(o.Money>=I[this.index]&&o.KCQB>=L[this.index]?(o.Money-=I[this.index],o.KCQB-=L[this.index],this.GetIssucceed(40)?this.succeedorfailing(!0):this.succeedorfailing(!1)):f.ShowTip("资源不足！无法勘察！")),2==e&&b.Instance.ShowVideoAd((()=>{this.GetIssucceed(90)?this.succeedorfailing(!0):this.succeedorfailing(!1)}))):f.ShowTip("已经达到最高等级！"))}GetIssucceed(e){return 100*Math.random()<e}succeedorfailing(e){e?(this.Show_reconnaissance(!0),this.index++):(this.Show_reconnaissance(!1),this.index>0&&(this.GameIsOver=!0)),this.Refresh()}Show_reconnaissance(e){let t=1==e?this.node.getChildByPath("UI/勘察成功"):this.node.getChildByPath("UI/勘察失败");t.setScale(h(1,1,1)),t.active=!0,this.IsBeginAnimation=!0,a(t).to(.5,{scale:h(3,3,3)},{easing:"backOut"}).delay(1).call((()=>{t.active=!1,this.IsBeginAnimation=!1})).start()}GetAward(){switch(this.AwardName[this.index]){case"徽章碎片":o.HuiZhangPiece+=this.AwardNumber[this.index],f.ShowTip(`获得徽章碎片×${this.AwardNumber[this.index]}`);break;case"能源电池":o.EnergyBattery+=this.AwardNumber[this.index],f.ShowTip(`获得能源电池×${this.AwardNumber[this.index]}`);break;case"皮肤碎片":o.SkinPiece+=this.AwardNumber[this.index],f.ShowTip(`获得皮肤碎片×${this.AwardNumber[this.index]}`)}this.index=0,this.GameIsOver=!1,this.Refresh()}RefreshMoney(){this.MoneyLabel.string=`${o.Money}`}RefreshSkinPiece(){this.SkinPieceLabel.string=`${o.SkinPiece}`}RefreshHuiZhangPiece(){this.HuiZhangPieceLabel.string=`${o.HuiZhangPiece}`}RefreshKCQB(){this.KCQBLabel.string=`${o.KCQB}`}onEnable(){B.on(S.RefreshMoney,this.RefreshMoney,this),B.on(S.RefreshSkinPiece,this.RefreshSkinPiece,this),B.on(S.RefreshHuiZhangPiece,this.RefreshHuiZhangPiece,this),B.on(S.RefreshKCQB,this.RefreshKCQB,this)}onDisable(){B.off(S.RefreshMoney,this.RefreshMoney,this),B.off(S.RefreshSkinPiece,this.RefreshSkinPiece,this),B.off(S.RefreshHuiZhangPiece,this.RefreshHuiZhangPiece,this),B.off(S.RefreshKCQB,this.RefreshKCQB,this)}})||_);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SeasonItem.ts",["cc","./XGTW_GoodsItem.ts","./NodeUtil.ts","./PrefsManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./PoolManager.ts","./XGTW_DataManager.ts","./GameManager.ts"],(function(t){var e,o,n,s,i,a,d,h,l,c,G,m,I,_,r;return{setters:[function(t){e=t.cclegacy,o=t.Component,n=t.Label,s=t.Sprite,i=t.Color,a=t._decorator},function(t){d=t.default},function(t){h=t.default},function(t){l=t.default},function(t){c=t.XGTW_Constant,G=t.XGTW_ItemType},function(t){m=t.XGTW_UIManager},function(t){I=t.PoolManager},function(t){_=t.XGTW_DataManager},function(t){r=t.GameManager}],execute:function(){var u;e._RF.push({},"f55cavfSlNGSJgaTMABtFYi","XGTW_SeasonItem",void 0);const{ccclass:g,property:C}=a;t("default",g("XGTW_SeasonItem")(u=class extends o{constructor(...t){super(...t),this.TitleLabel=null,this.Content_0=null,this.Content_1=null,this.TitleBG=null,this.Content=null,this.data=void 0,this.goodsItem_1=null,this.goodsItem_2=null,this.index=0}onLoad(){this.TitleLabel=h.GetComponent("TitleLabel",this.node,n),this.Content_0=h.GetNode("Content_0",this.node),this.Content_1=h.GetNode("Content_1",this.node),this.TitleBG=h.GetNode("TitleBG",this.node),this.Content=h.GetNode("Content",this.node)}Init(t,e){this.index=t,this.data=e,this.TitleLabel.string=`${t}`,this.goodsItem_1&&I.PutNode(this.goodsItem_1.node),this.goodsItem_2&&I.PutNode(this.goodsItem_2.node),I.GetNodeByBundle(r.GameData.DefaultBundle,"Prefabs/UI/GoodsItem",this.Content_0).then((t=>{let e=t.getComponent(d);e.Init(this.data.ItemData_1,this.GoodsItemCallback.bind(this)),e.Get.active=_.GetSeasonItemGot(this.index,1),e.Locked.active=_.SeasonLv<this.index,this.goodsItem_1=e})),I.GetNodeByBundle(r.GameData.DefaultBundle,"Prefabs/UI/GoodsItem",this.Content_1).then((t=>{let e=t.getComponent(d);e.Init(this.data.ItemData_2,this.GoodsItemCallback.bind(this)),e.Get.active=_.GetSeasonItemGot(this.index,2),l.GetBool(c.Key.UnlockSeason)?e.Locked.active=_.SeasonLv<this.index:e.Locked.active=!0,this.goodsItem_2=e})),this.TitleBG.getComponent(s).color=_.SeasonLv<this.index?i.BLACK:i.WHITE,this.Content.getComponent(s).color=_.SeasonLv<this.index?i.BLACK:i.WHITE}GoodsItemCallback(t){let e=1;t==this.data.ItemData_1&&(e=1),t==this.data.ItemData_2&&(e=2),_.SetSeasonItemGot(this.index,e),m.Instance.ShowPanel(c.Panel.RewardPanel,[t]),this.Refresh(),t.Type==G[G.金钱]?_.Money+=t.Count:_.AddPlayerItem(t)}Refresh(){this.goodsItem_1&&(this.goodsItem_1.Get.active=_.GetSeasonItemGot(this.index,1),this.goodsItem_1.Locked.active=_.SeasonLv<this.index),this.goodsItem_2&&(this.goodsItem_2.Get.active=_.GetSeasonItemGot(this.index,2),l.GetBool(c.Key.UnlockSeason)?this.goodsItem_2.Locked.active=_.SeasonLv<this.index:this.goodsItem_2.Locked.active=!0),this.TitleBG.getComponent(s).color=_.SeasonLv<this.index?i.BLACK:i.WHITE,this.Content.getComponent(s).color=_.SeasonLv<this.index?i.BLACK:i.WHITE}})||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SelectMapPanel.ts",["cc","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./GameManager.ts"],(function(t){var e,n,o,a,s,i,l,u,h,r,c,M,d,B,p,_;return{setters:[function(t){e=t.cclegacy,n=t._decorator,o=t.Component,a=t.Label,s=t.Sprite,i=t.color},function(t){l=t.XGTW_AudioManager},function(t){u=t.default},function(t){h=t.default},function(t){r=t.XGTW_Constant},function(t){c=t.XGTW_UIManager},function(t){M=t.UIManager,d=t.Panel},function(t){B=t.EventManager},function(t){p=t.XGTW_Event},function(t){_=t.GameManager}],execute:function(){var f,G;e._RF.push({},"3f8f6QxBLRGHIRxBdz3/zXK","XGTW_SelectMapPanel",void 0);const{ccclass:m,property:g}=n;t("default",m("XGTW_SelectMapPanel")(((G=class t extends o{constructor(...t){super(...t),this.DetailPanel=null,this.MapButton_0=null,this.MapButton_1=null,this.MapButton_2=null,this.ModeButton_0=null,this.ModeButton_1=null,this.MapDescLabel=null,this.MapTitleBarLabel=null,this.MapTitleLabel=null,this.index=0}onLoad(){this.DetailPanel=u.GetNode("DetailPanel",this.node),this.MapButton_0=u.GetNode("MapButton_0",this.node),this.MapButton_1=u.GetNode("MapButton_1",this.node),this.MapButton_2=u.GetNode("MapButton_2",this.node),this.ModeButton_0=u.GetNode("ModeButton_0",this.node),this.ModeButton_1=u.GetNode("ModeButton_1",this.node),this.MapDescLabel=u.GetComponent("MapDescLabel",this.node,a),this.MapTitleBarLabel=u.GetComponent("MapTitleBarLabel",this.node,a),this.MapTitleLabel=u.GetComponent("MapTitleLabel",this.node,a)}Show(t=null){this.RefreshButtons()}RefreshButtons(e=-1){if(this.DetailPanel.active=-1!=e,-1!=e){this.index=e,this.DetailPanel.getChildByName("Icons").children.forEach((t=>t.active=t.name==`${e}`));let n=["物资一般","物资一般","物资丰富"];this.MapTitleBarLabel.string=n[e],this.MapTitleLabel.string=t.MapNames[e],h.MapIndex=e,B.Scene.emit(p.RefreshMapButtonLabel)}this.RefreshModeButtons(0),this.RefreshMapButtons(e)}RefreshMapButtons(t){this.MapButton_0.getChildByName("Select").active=0==t,this.MapButton_1.getChildByName("Select").active=1==t,this.MapButton_2.getChildByName("Select").active=2==t}RefreshModeButtons(t){-1!=t&&(h.Mode=t,u.GetNode("Bar",this.ModeButton_0).getComponent(s).color=i().fromHEX(0==t?"#FFAA00":"#838382"),u.GetNode("Bar",this.ModeButton_1).getComponent(s).color=i().fromHEX(1==t?"#FFAA00":"#838382"),u.GetNode("Label",this.ModeButton_0).getComponent(a).color=i().fromHEX(0==t?"#FFAA00":"#838382"),u.GetNode("Label",this.ModeButton_1).getComponent(a).color=i().fromHEX(1==t?"#FFAA00":"#838382"),u.GetNode("Select",this.ModeButton_0).getComponent(s).color=i().fromHEX(0==t?"#5C5D62":"#36373B"),u.GetNode("Select",this.ModeButton_1).getComponent(s).color=i().fromHEX(1==t?"#5C5D62":"#36373B"),this.MapDescLabel.string=0==t?"被淘汰后装备不会掉落，但是除加密箱外背包的物资会掉落！":"除加密箱外背包的物资会掉落！",B.Scene.emit(p.RefreshMapButtonLabel))}OnButtonClick(t){switch(l.AudioClipPlay(r.Audio.ButtonClick),t.target.name){case"MapButton_0":this.RefreshButtons(0);break;case"MapButton_1":this.RefreshButtons(1);break;case"MapButton_2":this.RefreshButtons(2);break;case"ModeButton_0":this.RefreshModeButtons(0);break;case"ModeButton_1":this.RefreshModeButtons(1);break;case"StartButton":M.ShowPanel(d.LoadingPanel,[_.GameData,`XGTW_Lv_${this.index}`]);break;case"ReturnButton":c.Instance.HidePanel(r.Panel.SelectMapPanel);break;case"StartReturnButton":this.DetailPanel.active=!1}}}).MapNames=["死斗竞技场","对峙前线","冰河禁区"],f=G))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_ShopPanel.ts",["cc","./XGTW_Item.ts","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./NodeUtil.ts","./XGTW_UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./Banner.ts","./PoolManager.ts","./XGTW_DataManager.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(e){var t,n,a,o,s,i,r,c,u,h,l,d,f,y,m,M,p,G;return{setters:[function(e){t=e.cclegacy,n=e.Component,a=e.Label,o=e._decorator},function(e){s=e.default},function(e){i=e.XGTW_AudioManager},function(e){r=e.XGTW_ItemType,c=e.XGTW_Constant},function(e){u=e.default},function(e){h=e.XGTW_UIManager},function(e){l=e.EventManager},function(e){d=e.XGTW_Event},function(e){f=e.default},function(e){y=e.PoolManager},function(e){m=e.XGTW_DataManager},function(e){M=e.GameManager},function(e){p=e.ProjectEventManager,G=e.ProjectEvent}],execute:function(){var g;t._RF.push({},"aacf8aZjZVHjJ8OuiNHTyYp","XGTW_ShopPanel",void 0);const{ccclass:C,property:b}=o;e("default",C("XGTW_ShopPanel")(g=class extends n{constructor(...e){super(...e),this.MoneyLabel=null,this.Buttons=null,this.ItemContent=null,this.type=void 0,this.items=[]}onLoad(){this.MoneyLabel=u.GetComponent("MoneyLabel",this.node,a),this.Buttons=u.GetNode("Buttons",this.node),this.ItemContent=u.GetNode("ItemContent",this.node)}Show(e=r.头盔){p.emit(G.弹出窗口,M.GameData.gameName),this.RefreshMoney(),i.AudioClipPlay(c.Audio.ButtonClick),this.type=e,this.RefreshButtons(),this.RefreshItems()}RefreshItems(){this.items.forEach((e=>y.PutNode(e)));let e=m.ItemDatas.get(this.type);for(let t=0;t<e.length;t++){const n=e[t],a=this.type;y.GetNodeByBundle(M.GameData.DefaultBundle,"Prefabs/UI/Item",this.ItemContent).then((e=>{let t=e.getComponent(s);switch(this.items.push(e),a){case r.头盔:t.头盔(n);break;case r.防弹衣:t.防弹衣(n);break;case r.手枪:t.手枪(n);break;case r.突击步枪:t.突击步枪(n);break;case r.冲锋枪:t.冲锋枪(n);break;case r.射手步枪:t.射手步枪(n);break;case r.栓动步枪:t.栓动步枪(n);break;case r.轻机枪:t.轻机枪(n);break;case r.霰弹枪:t.霰弹枪(n);break;case r.投掷物:t.投掷物(n);break;case r.子弹:t.子弹(n);break;case r.药品:t.药品(n)}}))}}RefreshButtons(){this.Buttons.children.forEach((e=>{let t=e.name==r[this.type];e.getChildByName("Selected").active=t}))}RefreshMoney(){this.MoneyLabel.string=`${m.Money}`}OnButtonClick(e){i.AudioClipPlay(c.Audio.ButtonClick),this.type=r[`${e.target.name}`],this.RefreshButtons(),this.RefreshItems()}OnAddMoneyButtonClick(){i.AudioClipPlay(c.Audio.ButtonClick),f.Instance.ShowVideoAd((()=>{i.AudioClipPlay(c.Audio.GetMoney),m.Money+=2e4}))}OnReturnButtonClick(){i.AudioClipPlay(c.Audio.ButtonClick),h.Instance.HidePanel(c.Panel.ShopPanel)}onEnable(){l.on(d.RefreshMoney,this.RefreshMoney,this)}onDisable(){l.off(d.RefreshMoney,this.RefreshMoney,this)}})||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SItem.ts",["cc","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_GameManager.ts","./GameManager.ts"],(function(t){var e,n,a,i,o,s,l,u,c,r,d,h;return{setters:[function(t){e=t.cclegacy,n=t.Component,a=t.Sprite,i=t.Label,o=t._decorator},function(t){s=t.XGTW_AudioManager},function(t){l=t.BundleManager},function(t){u=t.default},function(t){c=t.XGTW_ItemType,r=t.XGTW_Constant},function(t){d=t.default},function(t){h=t.GameManager}],execute:function(){var p;e._RF.push({},"33412NMK+ZAQK6BCxxdo38n","XGTW_SItem",void 0);const{ccclass:m,property:G}=o;t("default",m("XGTW_SItem")(p=class extends n{constructor(...t){super(...t),this.Icon=null,this.Label=null,this.Quality=null,this.data=void 0,this.cb=null}onLoad(){this.Icon=u.GetComponent("Icon",this.node,a),this.Label=u.GetComponent("Label",this.node,i),this.Quality=u.GetNode("Quality",this.node)}Init(t,e=null){this.cb=e,this.data=t,c[`${t.Type}`]==c.个性化枪械?(this.Icon.node.angle=-45,this.Icon.node.setScale(-1,1),l.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化枪械/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}))):c[`${t.Type}`]==c.个性化装扮?(this.Icon.node.angle=0,this.Icon.node.setScale(1,1),l.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化装扮/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}))):l.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name.replace(/^\./,"")}`).then((t=>{this.Icon.spriteFrame=t})),this.Label.string=`${t.Count}`,this.Quality.getComponent(a).color=d.GetQualityColor(t.Quality)}OnButtonClick(){s.AudioClipPlay(r.Audio.ButtonClick),this.cb&&this.cb(this.data)}})||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SkinItem.ts",["cc","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./GameManager.ts","./Banner.ts","./Tools.ts","./XGTW_Data.ts","./XGTW_DataManager.ts"],(function(t){var n,a,e,i,s,o,c,d,h,r,u,l,I,m,G,f,p;return{setters:[function(t){n=t.cclegacy,a=t.Component,e=t.Sprite,i=t.Label,s=t.Vec3,o=t.v3,c=t._decorator},function(t){d=t.XGTW_AudioManager},function(t){h=t.BundleManager},function(t){r=t.default},function(t){u=t.XGTW_Constant},function(t){l=t.XGTW_UIManager},function(t){I=t.GameManager},function(t){m=t.default},function(t){G=t.Tools},function(t){f=t.XGTW_ItemData},function(t){p=t.XGTW_DataManager}],execute:function(){var T;n._RF.push({},"e026d9t7fVCpYbG99gQ9HBQ","XGTW_SkinItem",void 0);const{ccclass:_,property:S}=c;t("default",_("XGTW_SkinItem")(T=class extends a{constructor(...t){super(...t),this.Icon=null,this.Name=null,this.data=void 0}onLoad(){this.Icon=r.GetComponent("Icon",this.node,e),this.Name=r.GetComponent("Name",this.node,i)}Init(t){this.Name.string=`${t.Name}`,this.Icon.node.setScale(s.ONE),h.LoadSpriteFrame(I.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}))}"头盔"(t){this.data=t,this.Init(t),this.Icon.node.setScale(o(.7,.7))}"防弹衣"(t){this.data=t,this.Init(t),this.Icon.node.setScale(o(.8,.8))}"手枪"(t){this.data=t,this.Init(t)}"突击步枪"(t){this.data=t,this.Init(t)}"冲锋枪"(t){this.data=t,this.Init(t)}"射手步枪"(t){this.data=t,this.Init(t)}"栓动步枪"(t){this.data=t,this.Init(t)}"轻机枪"(t){this.data=t,this.Init(t)}"霰弹枪"(t){this.data=t,this.Init(t)}"投掷物"(t){this.data=t,this.Init(t)}"子弹"(t){this.data=t,this.Init(t),this.Icon.node.setScale(o(.8,.8))}"药品"(t){this.data=t,this.Init(t),this.Icon.node.setScale(f.GetScale(t.Type))}OnButtonClick(){d.AudioClipPlay(u.Audio.ButtonClick),m.Instance.ShowVideoAd((()=>{p.AddPlayerItem(G.Clone(this.data)),l.Instance.ShowPanel(u.Panel.RewardPanel,[this.data])}))}})||T);n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SkinShopPanel.ts",["cc","./XGTW_SkinItem.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./PoolManager.ts","./XGTW_DataManager.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(e){var t,n,a,o,s,c,i,r,u,l,m,h,d,f;return{setters:[function(e){t=e.cclegacy,n=e.Component,a=e._decorator},function(e){o=e.default},function(e){s=e.XGTW_AudioManager},function(e){c=e.default},function(e){i=e.XGTW_Constant,r=e.XGTW_ItemType},function(e){u=e.XGTW_UIManager},function(e){l=e.PoolManager},function(e){m=e.XGTW_DataManager},function(e){h=e.GameManager},function(e){d=e.ProjectEventManager,f=e.ProjectEvent}],execute:function(){var k;t._RF.push({},"2e303WQ6NlMeInG96lPu0VF","XGTW_SkinShopPanel",void 0);const{ccclass:G,property:g}=a;e("default",G("XGTW_SkinShopPanel")(k=class extends n{constructor(...e){super(...e),this.ItemContent=null,this.items=[]}onLoad(){this.ItemContent=c.GetNode("ItemContent",this.node)}Show(){d.emit(f.弹出窗口,h.GameData.gameName),s.AudioClipPlay(i.Audio.ButtonClick),this.RefreshItems()}RefreshItems(){this.items.forEach((e=>l.PutNode(e)));for(let e=0;e<m.JunXuItems.length;e++){const t=m.JunXuItems[e];l.GetNodeByBundle(h.GameData.DefaultBundle,"Prefabs/UI/SkinItem",this.ItemContent).then((e=>{let n=e.getComponent(o);switch(this.items.push(e),r[`${t.Type}`]){case r.头盔:n.头盔(t);break;case r.防弹衣:n.防弹衣(t);break;case r.手枪:n.手枪(t);break;case r.突击步枪:n.突击步枪(t);break;case r.冲锋枪:n.冲锋枪(t);break;case r.射手步枪:n.射手步枪(t);break;case r.栓动步枪:n.栓动步枪(t);break;case r.轻机枪:n.轻机枪(t);break;case r.霰弹枪:n.霰弹枪(t);break;case r.投掷物:n.投掷物(t);break;case r.子弹:n.子弹(t);break;case r.药品:n.药品(t)}}))}}OnReturnButtonClick(){s.AudioClipPlay(i.Audio.ButtonClick),u.Instance.HidePanel(i.Panel.SkinShopPanel)}})||k);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SpecialSkinDetailPanel.ts",["cc","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./GameManager.ts","./Banner.ts","./Tools.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(e){var t,a,n,i,o,s,l,r,c,u,d,m,p,h,G,S,f,g,P;return{setters:[function(e){t=e.cclegacy,a=e.Component,n=e.Sprite,i=e.Label,o=e.Tween,s=e.v3,l=e.tween,r=e._decorator},function(e){c=e.XGTW_AudioManager},function(e){u=e.BundleManager},function(e){d=e.default},function(e){m=e.XGTW_Constant},function(e){p=e.XGTW_UIManager},function(e){h=e.GameManager},function(e){G=e.default},function(e){S=e.Tools},function(e){f=e.XGTW_DataManager},function(e){g=e.ProjectEventManager,P=e.ProjectEvent}],execute:function(){var I;t._RF.push({},"3f09cqU0zdGpYNbnCC03Nh0","XGTW_SpecialSkinDetailPanel",void 0);const{ccclass:C,property:M}=r;e("default",C("XGTW_SpecialSkinDetailPanel")(I=class extends a{constructor(...e){super(...e),this.Item=null,this.Mask=null,this.Name=null,this.data=null}onLoad(){this.Item=d.GetComponent("Item",this.node,n),this.Mask=d.GetComponent("Mask",this.node,n),this.Name=d.GetComponent("Name",this.node,i)}Show(e){g.emit(P.弹出窗口,h.GameData.gameName),this.data=e,this.Name.string=`${e.Name}`,u.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Items/GunBG_${e.Name}`).then((e=>{this.Mask.spriteFrame=e})),u.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Items/${e.Type}/${e.Name}`).then((e=>{this.Item.spriteFrame=e})),o.stopAllByTarget(this.Item.node);let t=6;"G18C-矩形几何"==e.Name&&(t=4),this.Item.node.setScale(s(t,t)),l(this.Item.node).to(1,{scale:s(t+1,t+1)}).to(1,{scale:s(t,t)}).union().repeatForever().start(),l(this.Item.node).to(1,{angle:6}).to(1,{angle:-6}).union().repeatForever().start()}OnBuyButtonClick(){c.AudioClipPlay(m.Audio.ButtonClick),G.Instance.ShowVideoAd((()=>{p.Instance.HidePanel(m.Panel.SpecialSkinDetailPanel),f.AddPlayerItem(S.Clone(this.data)),p.Instance.ShowPanel(m.Panel.RewardPanel,[this.data])}))}OnReturnButtonClick(){c.AudioClipPlay(m.Audio.ButtonClick),p.Instance.HidePanel(m.Panel.SpecialSkinDetailPanel)}})||I);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SpecialSkinItem.ts",["cc","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./GameManager.ts"],(function(t){var e,n,a,o,i,s,r,c,l,u,m,d,h;return{setters:[function(t){e=t.cclegacy,n=t.Component,a=t.Sprite,o=t.Label,i=t.Color,s=t._decorator},function(t){r=t.XGTW_AudioManager},function(t){c=t.BundleManager},function(t){l=t.default},function(t){u=t.XGTW_ColorHex,m=t.XGTW_Constant},function(t){d=t.XGTW_UIManager},function(t){h=t.GameManager}],execute:function(){var p;e._RF.push({},"67fb30h0Z5Mer7N11Ak4xVI","XGTW_SpecialSkinItem",void 0);const{ccclass:G,property:f}=s;t("default",G("XGTW_SpecialSkinItem")(p=class extends n{constructor(...t){super(...t),this.Background=null,this.Icon=null,this.Name=null,this.Bottom=null,this.data=void 0}onLoad(){this.Background=l.GetComponent("Background",this.node,a),this.Icon=l.GetComponent("Icon",this.node,a),this.Name=l.GetComponent("Name",this.node,o),this.Bottom=l.GetNode("Bottom",this.node)}Init(t){this.data=t,this.Name.string=`${t.Name}`,c.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Items/GunBG_${t.Name}`).then((t=>{this.Background.spriteFrame=t})),c.LoadSpriteFrame(h.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.Icon.spriteFrame=t}));let e=new i,n=1.5;"AX50-龙影"==t.Name&&i.fromHEX(e,u.RED),"FAL-赛博涂鸦"==t.Name&&i.fromHEX(e,u.PURPLE),"MPX-白金之星"==t.Name&&i.fromHEX(e,u.GOLD),"G18C-矩形几何"==t.Name&&(i.fromHEX(e,u.BROWN),n=.8),this.Icon.node.setScale(-n,n),this.Bottom.getComponent(a).color=e}OnButtonClick(){r.AudioClipPlay(m.Audio.ButtonClick),d.Instance.ShowPanel(m.Panel.SpecialSkinDetailPanel,[this.data])}})||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SpecialSkinShopPanel_.ts",["cc","./XGTW_SeasonItem.ts","./XGTW_ValueBar.ts","./XGTW_AudioManager.ts","./NodeUtil.ts","./PrefsManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./Banner.ts","./PoolManager.ts","./XGTW_DataManager.ts","./GameManager.ts"],(function(e){var t,n,o,a,s,i,l,r,c,u,h,S,f,d,m,G;return{setters:[function(e){t=e.cclegacy,n=e.Component,o=e.Label,a=e.ScrollView,s=e._decorator},function(e){i=e.default},function(e){l=e.default},function(e){r=e.XGTW_AudioManager},function(e){c=e.default},function(e){u=e.default},function(e){h=e.XGTW_Constant},function(e){S=e.XGTW_UIManager},function(e){f=e.default},function(e){d=e.PoolManager},function(e){m=e.XGTW_DataManager},function(e){G=e.GameManager}],execute:function(){var p;t._RF.push({},"6ffedROIE5D5IwzQpimQSaI","XGTW_SpecialSkinShopPanel_",void 0);const{ccclass:B,property:_}=s;e("default",B("XGTW_SpecialSkinShopPanel_")(p=class extends n{constructor(...e){super(...e),this.ItemContent=null,this.SeasonButton=null,this.SeasonLvLabel=null,this.ValueBar=null,this.ScrollView=null,this.items=[]}onLoad(){this.ItemContent=c.GetNode("ItemContent",this.node),this.SeasonButton=c.GetNode("SeasonButton",this.node),this.SeasonLvLabel=c.GetComponent("SeasonLvLabel",this.node,o),this.ValueBar=c.GetComponent("ValueBar",this.node,l),this.ScrollView=c.GetComponent("ScrollView",this.node,a)}Show(){this.RefreshItems(),this.RefreshTitle(),this.SeasonButton.active=!u.GetBool(h.Key.UnlockSeason),this.ScrollView.scrollToPercentHorizontal(m.SeasonLv/80,.1,!0)}RefreshTitle(){this.SeasonLvLabel.string=`${m.SeasonLv}`,this.ValueBar.SetAll(m.EXP%1e3/1e3,m.EXP%1e3+" /1000")}RefreshItems(){if(this.items&&0!=this.items.length)this.items.forEach((e=>e.Refresh()));else{const e=()=>{this.ScrollView.scrollToPercentHorizontal(m.SeasonLv/80,.1,!0)};for(let t=0;t<m.SeasonDatas.length;t++){const n=m.SeasonDatas[t];d.GetNodeByBundle(G.GameData.DefaultBundle,"Prefabs/UI/SeasonItem",this.ItemContent).then((o=>{let a=o.getComponent(i);a.Init(t+1,n),this.items.push(a),t>=m.SeasonDatas.length-1&&e()}))}}}OnButtonClick(e){switch(r.AudioClipPlay(h.Audio.ButtonClick),e.target.name){case"ReturnButton":S.Instance.HidePanel(h.Panel.SeasonPanel);break;case"SeasonButton":f.Instance.ShowVideoAd((()=>{u.SetBool(h.Key.UnlockSeason,!0),this.SeasonButton.active=!1,this.RefreshItems(),this.RefreshTitle()}))}}})||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_SpecialSkinShopPanel.ts",["cc","./XGTW_CommonItem.ts","./XGTW_AudioManager.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./XGTW_GameManager.ts","./XGTW_UIManager.ts","./GameManager.ts","./EventManager.ts","./XGTW_Event.ts","./Banner.ts","./PoolManager.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(t){var e,a,i,s,n,o,l,h,c,u,m,r,B,d,D,p,I,S,G,f,g,T,y,N,P;return{setters:[function(t){e=t.cclegacy,a=t.Component,i=t.Label,s=t.Sprite,n=t.ScrollView,o=t.color,l=t.Color,h=t.v2,c=t._decorator},function(t){u=t.default},function(t){m=t.XGTW_AudioManager},function(t){r=t.BundleManager},function(t){B=t.default},function(t){d=t.XGTW_ItemType,D=t.XGTW_Constant},function(t){p=t.default},function(t){I=t.XGTW_UIManager},function(t){S=t.GameManager},function(t){G=t.EventManager},function(t){f=t.XGTW_Event},function(t){g=t.default},function(t){T=t.PoolManager},function(t){y=t.XGTW_DataManager},function(t){N=t.ProjectEventManager,P=t.ProjectEvent}],execute:function(){var C;e._RF.push({},"c2919+CwqJMAIVJ1pBNwVLP","XGTW_SpecialSkinShopPanel",void 0);const{ccclass:k,property:v}=c;t("default",k("XGTW_SpecialSkinShopPanel")(C=class extends a{constructor(...t){super(...t),this.ItemContent=null,this.GunButton=null,this.SkinButton=null,this.Detail=null,this.DetailLabel=null,this.DetailUseButton=null,this.DetailBuyButton=null,this.DetailUnequippedButton=null,this.LeftPin=null,this.ItemIcon=null,this.StudyDetails=null,this.ScrollView=null,this.TTBB=null,this.ZJWG=null,this.ZLPH=null,this.BroadcastPosition=null,this.items=[],this.selectItemData=null}onLoad(){this.ItemContent=B.GetNode("ItemContent",this.node),this.GunButton=B.GetNode("GunButton",this.node),this.SkinButton=B.GetNode("SkinButton",this.node),this.Detail=B.GetNode("Detail",this.node),this.DetailUseButton=B.GetNode("DetailUseButton",this.node),this.DetailBuyButton=B.GetNode("DetailBuyButton",this.node),this.DetailUnequippedButton=B.GetNode("DetailUnequippedButton",this.node),this.LeftPin=B.GetNode("LeftPin",this.node),this.DetailLabel=B.GetComponent("DetailLabel",this.node,i),this.StudyDetails=B.GetNode("StudyDetails",this.node),this.TTBB=B.GetNode("TTBB",this.node),this.ZJWG=B.GetNode("ZJWG",this.node),this.ZLPH=B.GetNode("ZLPH",this.node),this.BroadcastPosition=B.GetNode("BroadcastPosition",this.node),this.ItemIcon=B.GetComponent("ItemIcon",this.node,s),this.ScrollView=B.GetComponent("ScrollView",this.node,n)}Show(){N.emit(P.弹出窗口,S.GameData.gameName),this.LeftPin.active=!1,this.StudyDetails.active=!1,this.Detail.active=!1,this.RefreshButtonState("GunButton"),this.RefreshItems(y.ItemDatas.get(d.个性化枪械))}RefreshItems(t){this.items.forEach((t=>T.PutNode(t)));for(let e=0;e<t.length;e++){const a=t[e];T.GetNodeByBundle(S.GameData.DefaultBundle,"Prefabs/UI/CommonItem",this.ItemContent).then((t=>{t.getComponent(u).Init(a,this.OnItemCallback.bind(this)),this.items.push(t)}))}}OnItemCallback(t){this.LeftPin.active||(this.LeftPin.active=!0),this.selectItemData=t,this.items.forEach((e=>e.getComponent(u).SetSelect(t))),this.StudyDetails.active=d[`${this.selectItemData.Type}`]==d.个性化枪械,this.RefreshBottomBar(),d[`${t.Type}`]==d.个性化枪械?(this.RefreshDetailButtonState("ZJWG"),this.TTBB.active=t.HasBroadcast,this.ZLPH.active=t.HasBox):d[`${t.Type}`]==d.个性化装扮?r.LoadSpriteFrame(S.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化装扮/${t.Name}`).then((t=>{this.ItemIcon.spriteFrame=t})):r.LoadSpriteFrame(S.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name}`).then((t=>{this.ItemIcon.spriteFrame=t}))}RefreshButtonState(t){this.GunButton.getChildByName("Select").active="GunButton"==t,this.SkinButton.getChildByName("Select").active="SkinButton"==t,this.GunButton.getChildByName("Label").getComponent(i).color="GunButton"==t?o().fromHEX("#FFAA00"):l.WHITE,this.SkinButton.getChildByName("Label").getComponent(i).color="SkinButton"==t?o().fromHEX("#FFAA00"):l.WHITE}RefreshBottomBar(){if(this.Detail.active=!0,this.DetailBuyButton.active=!this.selectItemData.IsUnlock,this.selectItemData.IsUnlock){let t=!1;"个性化枪械"==this.selectItemData.Type&&(t=Boolean(y.PlayerData.EquipGunSkins.find((t=>t.Name==this.selectItemData.Name)))),"个性化装扮"==this.selectItemData.Type&&y.PlayerData.Skin_Bulletproof&&(t=y.PlayerData.Skin_Bulletproof.Name==this.selectItemData.Name),this.DetailUseButton.active=!t,this.DetailUnequippedButton.active=t}else this.DetailUseButton.active=!1,this.DetailUnequippedButton.active=!1;this.Detail.getComponent(s).color=p.GetQualityColor(this.selectItemData.Quality),this.DetailLabel.string=`${this.selectItemData.Name}`}RefreshDetailButtonState(t){this.TTBB.getChildByName("Select").active="TTBB"==t,this.ZJWG.getChildByName("Select").active="ZJWG"==t,this.ZLPH.getChildByName("Select").active="ZLPH"==t,this.TTBB.getChildByName("Label").getComponent(i).color="TTBB"==t?l.WHITE:o().fromHEX("#999999"),this.ZJWG.getChildByName("Label").getComponent(i).color="ZJWG"==t?l.WHITE:o().fromHEX("#999999"),this.ZLPH.getChildByName("Label").getComponent(i).color="ZLPH"==t?l.WHITE:o().fromHEX("#999999"),"ZJWG"==t&&r.LoadSpriteFrame(S.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化枪械/${this.selectItemData.Name}`).then((t=>{this.ItemIcon.spriteFrame=t})),"ZLPH"==t&&this.selectItemData&&this.selectItemData.HasBox&&r.LoadSpriteFrame(S.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化枪械/${this.selectItemData.Name}_Box`).then((t=>{this.ItemIcon.spriteFrame=t})),"TTBB"==t&&this.selectItemData&&this.selectItemData.HasBroadcast&&I.ShowBroadcast("",`${this.selectItemData.Name}_Broadcast`,h(this.BroadcastPosition.getPosition().x,this.BroadcastPosition.getPosition().y))}OnToggleClick(t,e){}OnButtonClick(t){switch(m.AudioClipPlay(D.Audio.ButtonClick),t.target.name){case"GunButton":this.ScrollView.scrollToTop(.1),this.Detail.active=!1,this.RefreshButtonState(t.target.name),this.RefreshItems(y.ItemDatas.get(d.个性化枪械));break;case"SkinButton":this.ScrollView.scrollToTop(.1),this.Detail.active=!1,this.RefreshButtonState(t.target.name),this.RefreshItems(y.ItemDatas.get(d.个性化装扮));break;case"TTBB":case"ZJWG":case"ZLPH":this.RefreshDetailButtonState(t.target.name);break;case"DetailUseButton":console.log("使用",this.selectItemData.Name),"个性化枪械"==this.selectItemData.Type&&y.EquipGunSkin(this.selectItemData),"个性化装扮"==this.selectItemData.Type&&y.EquipDogSkin(this.selectItemData),this.RefreshBottomBar(),G.Scene.emit(f.RefreshEquip);break;case"DetailUnequippedButton":console.log("卸下",this.selectItemData.Type,this.selectItemData.Name),"个性化枪械"==this.selectItemData.Type&&y.UnequipGunSkin(this.selectItemData),"个性化装扮"==this.selectItemData.Type&&y.UnequipDogSkin(this.selectItemData),this.RefreshBottomBar(),G.Scene.emit(f.RefreshEquip);break;case"DetailBuyButton":console.log("购买",this.selectItemData.Name),g.Instance.ShowVideoAd((()=>{this.selectItemData.IsUnlock=!0,this.RefreshBottomBar()}));break;case"ReturnButton":I.Instance.HidePanel(D.Panel.SpecialSkinShopPanel)}}})||C);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_StartPanel.ts",["cc","./XGTW_PlayerController.ts","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./TweenUtil.ts","./BundleManager.ts","./GameManager.ts","./UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./Banner.ts","./AudioManager.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(e){var t,n,a,o,i,s,l,r,u,h,c,P,d,M,f,g,y,G,B,m,S,p,R,I,_,v,C,T,X;return{setters:[function(e){t=e.cclegacy,n=e.Component,a=e.Label,o=e.game,i=e.tween,s=e.v3,l=e.instantiate,r=e.Vec3,u=e._decorator},function(e){h=e.default,c=e.AniState},function(e){P=e.XGTW_AudioManager},function(e){d=e.XGTW_Constant},function(e){M=e.XGTW_UIManager},function(e){f=e.default},function(e){g=e.default},function(e){y=e.EasingType},function(e){G=e.BundleManager},function(e){B=e.GameManager},function(e){m=e.UIManager,S=e.Panel},function(e){p=e.EventManager},function(e){R=e.XGTW_Event},function(e){I=e.default},function(e){_=e.AudioManager,v=e.Audios},function(e){C=e.XGTW_DataManager},function(e){T=e.ProjectEventManager,X=e.ProjectEvent}],execute:function(){var b;t._RF.push({},"2a934RKHnFKoYe2MU8LkP0s","XGTW_StartPanel",void 0);const{ccclass:w,property:E}=u;e("default",w("XGTW_StartPanel")(b=class extends n{constructor(...e){super(...e),this.MoneyLabel=null,this.Player=null,this.playerCtrl=null,this.PrivacyButton=null,this.KeFuButton=null,this.MoreGameButton=null,this.QuitButton=null,this.BottomRightPin=null,this.GDMSButton=null}onLoad(){g.IsGameOver=!1,this.LoadResources(),this.MoneyLabel=f.GetComponent("MoneyLabel",this.node,a),this.Player=f.GetNode("Player",this.node),this.PrivacyButton=f.GetNode("PrivacyButton",this.node),this.KeFuButton=f.GetNode("KeFuButton",this.node),this.MoreGameButton=f.GetNode("MoreGameButton",this.node),this.QuitButton=f.GetNode("QuitButton",this.node),this.BottomRightPin=f.GetNode("BottomRightPin",this.node),this.GDMSButton=f.GetNode("GDMSButton",this.node),this.RefreshMoney(),T.emit(X.游戏开始,B.GameData.gameName),T.emit(X.初始化更多模式按钮,this.GDMSButton)}async LoadResources(){await C.LoadData(),console.log("修狗突围数据加载完成。")}onDestroy(){}start(){o.frameRate=59,this.InitPlayer(),I.RegionMask&&I.Instance.ShowCustomAd(),this.BottomRightPin.children.forEach((e=>e.setPosition(600,e.position.y)));let e=0;for(let t=this.BottomRightPin.children.length-1;t>=0;t--){const n=this.BottomRightPin.children[t];i(n).delay(e).to(1,{position:s(0,n.position.y)},{easing:y.elasticInOut}).start(),e+=.3}}RefreshMoney(){this.MoneyLabel.string=`${C.Money}`}RefreshEquip(){this.playerCtrl&&this.playerCtrl.RefreshEquip()}InitPlayer(){G.LoadPrefab(B.GameData.DefaultBundle,"Player").then((e=>{let t=l(e);t.setParent(this.Player),t.setPosition(r.ZERO),this.playerCtrl=t.getComponent(h),this.playerCtrl.hpBar.node.active=!1,this.playerCtrl.PlayAni(c.Idle)}))}OnButtonClick(e){switch(_.Instance.PlayCommonSFX(v.ButtonClick),e.target.name){case"GeXingHuaButton":M.Instance.ShowPanel(d.Panel.SpecialSkinShopPanel);break;case"HeiShiButton":M.Instance.ShowPanel(d.Panel.HeiShiPanel);break;case"ZhanBeiButton":M.Instance.ShowPanel(d.Panel.InventoryPanel);break;case"SeletMapButton":M.Instance.ShowPanel(d.Panel.SelectMapPanel);break;case"StartGameButton":I.RegionMask?M.Instance.ShowPanel(d.Panel.TreasureBox,[()=>{m.ShowPanel(S.LoadingPanel,g.GetSceneName())}]):m.ShowPanel(S.LoadingPanel,g.GetSceneName());break;case"AddMoneyButton":I.Instance.ShowVideoAd((()=>{P.AudioClipPlay(d.Audio.GetMoney),C.Money+=2e4}));break;case"ReturnButton":T.emit(X.返回主页按钮事件,(()=>{m.ShowPanel(S.LoadingPanel,[B.StartScene],(()=>{T.emit(X.返回主页,B.GameData.gameName)}))}));break;case"DLZJButton":M.Instance.ShowPanel(d.Panel.ZhuangJiaPanel);break;case"KCZXButton":M.Instance.ShowPanel(d.Panel.SearchPanel);break;case"GDMSButton":m.ShowPanel(S.MoreGamePanel)}}onEnable(){p.on(R.RefreshEquip,this.RefreshEquip,this),p.on(R.RefreshMoney,this.RefreshMoney,this)}onDisable(){p.off(R.RefreshEquip,this.RefreshEquip,this),p.off(R.RefreshMoney,this.RefreshMoney,this)}})||b);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_Supplies.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XGTW_SItem.ts","./BundleManager.ts","./NodeUtil.ts","./XGTW_Constant.ts","./GameManager.ts","./UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./Tools.ts","./PoolManager.ts","./XGTW_Data.ts","./XGTW_DataManager.ts"],(function(t){var e,a,n,s,i,o,l,m,r,h,u,p,I,d,D,g,c,G,f,y,C,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t._decorator,i=t.Component,o=t.Sprite,l=t.BoxCollider2D,m=t.view},function(t){r=t.default},function(t){h=t.BundleManager},function(t){u=t.default},function(t){p=t.XGTW_SuppliesType,I=t.XGTW_ItemType},function(t){d=t.GameManager},function(t){D=t.UIManager},function(t){g=t.EventManager},function(t){c=t.XGTW_Event},function(t){G=t.Tools},function(t){f=t.PoolManager},function(t){y=t.XGTW_SuppliesData,C=t.XGTW_ItemData},function(t){S=t.XGTW_DataManager}],execute:function(){var T,R,_;n._RF.push({},"9f307XQxB5MVYDoZnGCDWyN","XGTW_Supplies",void 0);const{ccclass:P,property:B}=s;t("default",P("XGTW_Supplies")((_=e((R=class extends i{constructor(...t){super(...t),a(this,"generateBox",_,this),this.Icon=null,this.collider=null,this.data=null,this.taken=!1,this.Items=null,this.itemDatas=[],this.suppliesItems=[]}onLoad(){this.Icon=u.GetComponent("Icon",this.node,o),this.collider=this.node.getComponent(l),this.Items=u.GetNode("Items",this.node)}start(){this.generateBox&&this.Init()}Init(){let t=Object.keys(p).map((t=>p[t])).filter((t=>"number"==typeof t)),e=t[G.GetRandomInt(0,t.length)];if(e==p.None)return this.collider.enabled=!1,void(this.Icon.spriteFrame=null);this.itemDatas=[];let a=S.SuppliesDatas.get(e);this.data=G.Clone(a[G.GetRandomInt(0,a.length)]),h.LoadSpriteFrame(d.GameData.DefaultBundle,`Res/Sprites/Supplies/${this.data.Type}_${this.data.Name}_0`).then((t=>{this.Icon.spriteFrame=t}));let n,s=y.Out[e],i=0;switch(e){case p.医疗用品:i=G.GetRandomInt(3,10);for(let t=0;t<i;t++)n=G.Clone(S.ItemDatas.get(I.药品)[G.GetRandomInt(0,S.ItemDatas.get(I.药品).length)]),n&&this.itemDatas.push(n);break;case p.弹药箱:i=G.GetRandomInt(3,10);for(let t=0;t<i;t++)n=G.Clone(S.ItemDatas.get(I.子弹)[G.GetRandomInt(0,S.ItemDatas.get(I.子弹).length)]),n&&this.itemDatas.push(n);break;case p.武器箱:let t=G.GetRandomInt(0,7);0==t&&(n=G.Clone(S.ItemDatas.get(I.冲锋枪)[G.GetRandomInt(0,S.ItemDatas.get(I.冲锋枪).length)])),2==t&&(n=G.Clone(S.ItemDatas.get(I.射手步枪)[G.GetRandomInt(0,S.ItemDatas.get(I.射手步枪).length)])),3==t&&(n=G.Clone(S.ItemDatas.get(I.手枪)[G.GetRandomInt(0,S.ItemDatas.get(I.手枪).length)])),4==t&&(n=G.Clone(S.ItemDatas.get(I.栓动步枪)[G.GetRandomInt(0,S.ItemDatas.get(I.栓动步枪).length)])),5==t&&(n=G.Clone(S.ItemDatas.get(I.突击步枪)[G.GetRandomInt(0,S.ItemDatas.get(I.突击步枪).length)])),6==t&&(n=G.Clone(S.ItemDatas.get(I.轻机枪)[G.GetRandomInt(0,S.ItemDatas.get(I.轻机枪).length)])),n&&this.itemDatas.push(n),t=G.GetRandomInt(0,2),0==t&&(n=G.Clone(S.ItemDatas.get(I.头盔)[G.GetRandomInt(0,S.ItemDatas.get(I.头盔).length)])),1==t&&(n=G.Clone(S.ItemDatas.get(I.防弹衣)[G.GetRandomInt(0,S.ItemDatas.get(I.防弹衣).length)])),n&&this.itemDatas.push(n),i=G.GetRandomInt(1,5);for(let t=0;t<i;t++)n=G.Clone(S.ItemDatas.get(I.子弹)[G.GetRandomInt(0,S.ItemDatas.get(I.子弹).length)]),n&&this.itemDatas.push(n);break;case p.保险柜:for(let t=0;t<this.data.Count;t++){let t=s[G.GetRandomInt(0,s.length)];n=G.Clone(S.ItemDatas.get(I.战利品).find((e=>e.Name==t))),n&&this.itemDatas.push(n)}break;case p.储物盒:for(let t=0;t<this.data.Count;t++){let t=s[G.GetRandomInt(0,s.length)];n=G.Clone(S.ItemDatas.get(I.战利品).find((e=>e.Name==t))),n&&this.itemDatas.push(n)}break;case p.电脑:for(let t=0;t<this.data.Count;t++){let t=s[G.GetRandomInt(0,s.length)];n=G.Clone(S.ItemDatas.get(I.战利品).find((e=>e.Name==t))),n&&this.itemDatas.push(n)}}}InitDieBox(t,e,a){this.itemDatas=[],this.itemDatas=a,this.Icon=u.GetComponent("Icon",this.node,o);let n="Common_Box";if(e&&C.IsMainGun(C.GetItemType(e.Type))){let t=S.GetEquipGunSkin(e);t&&t.HasBox&&(n=`${t.Name}_Box`)}this.data=G.Clone(S.SuppliesDatas.get(p.武器箱).find((t=>"小军火箱"==t.Name))),this.data.PlayerName=t,h.LoadSpriteFrame(d.GameData.DefaultBundle,`Res/Sprites/Doggie/个性化枪械/${n}`).then((t=>{this.Icon.spriteFrame=t}))}Take(){this.data&&!this.data.Taken&&this.data.HasOpenState&&(this.data.Taken=!0)}ShowSuppliesItems(t){if(this.Items.active=t,this.itemDatas.length<=0&&D.ShowTip("空空如也"),t){this.suppliesItems.forEach((t=>f.PutNode(t.node))),this.Items.setWorldPosition(m.getVisibleSize().width/2,m.getVisibleSize().height/2+100,0);for(let t=0;t<this.itemDatas.length;t++){const e=this.itemDatas[t];f.GetNodeByBundle(d.GameData.DefaultBundle,"Prefabs/UI/SItem",this.Items).then((t=>{let a=t.getComponent(r);a.Init(e,this.ItemCallback.bind(this)),this.suppliesItems.push(a)}))}}}ItemCallback(t){let e=C.GetItemType(t.Type);const a=()=>{g.Scene.emit(c.RefreshInventoryButtons),g.Scene.emit(c.RefreshEquip),this.itemDatas=this.itemDatas.filter((e=>e!=t)),this.ShowSuppliesItems(!0)};return C.IsMainGun(e)&&null==S.PlayerData.Weapon_0?(S.PlayerData.Weapon_0=t,void a()):C.IsMainGun(e)&&null==S.PlayerData.Weapon_1?(S.PlayerData.Weapon_1=t,void a()):e==I.手枪&&null==S.PlayerData.Pistol?(S.PlayerData.Pistol=t,void a()):e==I.近战&&null==S.PlayerData.MeleeWeapon?(S.PlayerData.MeleeWeapon=t,void a()):e==I.头盔&&null==S.PlayerData.Helmet?(S.PlayerData.Helmet=t,void a()):e==I.防弹衣&&null==S.PlayerData.Bulletproof?(S.PlayerData.Bulletproof=t,void a()):e==I.背包&&null==S.PlayerData.Backpack?(S.PlayerData.Backpack=t,void a()):(S.AddItemToBackpack(t),this.itemDatas=this.itemDatas.filter((e=>e!=t)),void this.ShowSuppliesItems(!0))}}).prototype,"generateBox",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=R))||T);n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./XGTW_Constant.ts","./BundleManager.ts","./GameManager.ts","./PoolManager.ts","./XGTW_Broadcast.ts"],(function(e){var t,a,n,i,o,l,s,p,r,h,c,u,f,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.JsonAsset,o=e._decorator,l=e.Component,s=e.isValid,p=e.find,r=e.instantiate},function(e){h=e.XGTW_Constant},function(e){c=e.BundleManager},function(e){u=e.GameManager},function(e){f=e.PoolManager},function(e){_=e.default}],execute:function(){var P,g,D,d,w,S;n._RF.push({},"4f3056kv9hDDbynAVGwj2O0","XGTW_UIManager",void 0);const{ccclass:y,property:C}=o;e("XGTW_UIManager",(P=y("XGTW_UIManager"),g=C(i),P(((S=class e extends l{constructor(...e){super(...e),a(this,"SceneDate",w,this),this._panelDict={},this._loadingPanelDict={},this._arrPopupDialog=[]}static get Instance(){return this._instance||(this._instance=new e),this._instance}onLoad(){e._instance=this}isPanelShowing(e){if(!this._panelDict.hasOwnProperty(e))return!1;let t=this._panelDict[e];return s(t)&&t.active&&t.parent}ShowPanel(e,t,a,n=h.PRIORITY.NORMAL){if(this._loadingPanelDict[e])return;let i=e.lastIndexOf("/"),o="XGTW_"+e.slice(i+1);if(t||(t=[]),this._panelDict.hasOwnProperty(e)){let n=this._panelDict[e];if(s(n)){n.parent=p("Canvas"),n.active=!0;let e=n.getComponent(o),i=n.getComponent(o.charAt(0).toUpperCase()+o.slice(1));if(e&&e.Show)e.Show.apply(e,t),a&&a(e);else{if(!i||!i.Show)throw`查找不到脚本文件${o}`;i.Show.apply(i,t),a&&a(i)}return}}this._loadingPanelDict[e]=!0,c.LoadUI(u.GameData.DefaultBundle,e,((n,i)=>{let l=!1;this._loadingPanelDict[e]||(l=!0),this._loadingPanelDict[e]=!1,this._panelDict[e]=i;let s=i.getComponent(o),p=i.getComponent(o.charAt(0).toUpperCase()+o.slice(1));if(s&&s.Show)s.Show.apply(s,t),a&&a(s);else{if(!p||!p.Show)throw`查找不到脚本文件${o} 或者脚本中没有 Show() 方法...`;p.Show.apply(p,t),a&&a(p)}l&&this.HidePanel(e)}))}ShowBundlePanel(e,t,a,n){if(this._loadingPanelDict[`${e}/${t}`])return;let i=t.lastIndexOf("/"),o=t.slice(i+1);if(a||(a=[]),this._panelDict.hasOwnProperty(`${e}/${t}`)){let i=this._panelDict[`${e}/${t}`];if(s(i)){i.parent=p("Canvas"),i.active=!0;let e=i.getComponent(o),t=i.getComponent(o.charAt(0).toUpperCase()+o.slice(1));if(e&&e.Show)e.Show.apply(e,a),n&&n(e);else{if(!t||!t.Show)throw`查找不到脚本文件${o}`;t.Show.apply(t,a),n&&n(t)}return}}this._loadingPanelDict[`${e}/${t}`]=!0,c.LoadPrefab(e,t).then((i=>{let l=r(i);l.setPosition(0,0,0),p("Canvas").addChild(l);let s=!1;this._loadingPanelDict[`${e}/${t}`]||(s=!0),this._loadingPanelDict[`${e}/${t}`]=!1,this._panelDict[`${e}/${t}`]=l;let h=l.getComponent(o),c=l.getComponent(o.charAt(0).toUpperCase()+o.slice(1));if(h&&h.Show)h.Show.apply(h,a),n&&n(h);else{if(!c||!c.Show)throw`查找不到脚本文件${o} 或者脚本中没有 Show() 方法...`;c.Show.apply(c,a),n&&n(c)}s&&this.HidePanel(`${e}/${t}`)}))}HidePanel(e,t){if(this._panelDict.hasOwnProperty(e)){let a=this._panelDict[e];if(a&&s(a)){let e=a.getComponent("animationUI");e?e.close((()=>{a.parent=null,t&&"function"==typeof t&&t()})):(a.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._loadingPanelDict[e]=!1}RefreshPanel(e,t){let a=e.lastIndexOf("/"),n=e.slice(a+1);if(t||(t=[]),this._panelDict.hasOwnProperty(e)){let a=this._panelDict[e];if(s(a)){a.parent=p("Canvas"),a.active=!0;let e=a.getComponent(n),i=a.getComponent(n.charAt(0).toUpperCase()+n.slice(1));if(e&&e.Refresh)e.Refresh.apply(e,t);else{if(!i||!i.Refresh)throw`查找不到脚本文件${n}`;i.Refresh.apply(i,t)}return}}}pushToPopupSeq(e,t,a){let n={panelPath:e,scriptName:t,param:a,isShow:!1};this._arrPopupDialog.push(n),this._checkPopupSeq()}insertToPopupSeq(e,t,a){let n={panelPath:t,param:a,isShow:!1};this._arrPopupDialog.splice(e,0,n)}shiftFromPopupSeq(e){this.HidePanel(e,(()=>{this._arrPopupDialog[0]&&this._arrPopupDialog[0].panelPath===e&&(this._arrPopupDialog.shift(),this._checkPopupSeq())}))}_checkPopupSeq(){if(this._arrPopupDialog.length>0){let e=this._arrPopupDialog[0];e.isShow||(this.ShowPanel(e.panelPath,e.param),this._arrPopupDialog[0].isShow=!0)}}static ShowBroadcast(e,t,a,n=.75,i=2){f.GetNodeByBundle(u.GameData.DefaultBundle,h.Path.Broadcast,p("Canvas")).then((o=>o.getComponent(_).Show(e,t,a,n,i)))}})._instance=void 0,w=t((d=S).prototype,"SceneDate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=d))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_ValueBar.ts",["cc","./NodeUtil.ts","./Tools.ts"],(function(t){var e,l,a,i,o,s,n,r,u;return{setters:[function(t){e=t.cclegacy,l=t.Component,a=t.Sprite,i=t.Label,o=t.Color,s=t.color,n=t._decorator},function(t){r=t.default},function(t){u=t.Tools}],execute:function(){var c;e._RF.push({},"221cfpR8XxHWY6Khq8HSGV+","XGTW_ValueBar",void 0);const{ccclass:h,property:G}=n;t("default",h("XGTW_ValueBar")(c=class extends l{constructor(...t){super(...t),this.ValueBarFG=null,this.TitleLabel=null}onLoad(){this.ValueBarFG=r.GetComponent("ValueBarFG",this.node,a),this.TitleLabel=r.GetComponent("TitleLabel",this.node,i)}Init(t=1,e="",l=o.WHITE){this.ValueBarFG=r.GetComponent("ValueBarFG",this.node,a),this.TitleLabel=r.GetComponent("TitleLabel",this.node,i),this.ValueBarFG.color=l,this.TitleLabel.string=e,this.Set(t)}Set(t){t=u.Clamp(t,0,1),this.ValueBarFG.fillRange=t,"耐久度"==this.TitleLabel.string&&(this.ValueBarFG.color=s(255,255*t,255*t,255))}SetAll(t,e=""){t=u.Clamp(t,0,1),this.ValueBarFG.fillRange=t,this.TitleLabel.string=e,"耐久度"==this.TitleLabel.string&&(this.ValueBarFG.color=s(255,255*t,255*t,255))}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_WeaponInfoPanel.ts",["cc","./XGTW_Item.ts","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./NodeUtil.ts","./PoolManager.ts","./Tools.ts","./XGTW_Data.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(t){var e,i,n,a,s,o,l,h,r,u,d,c,m,b,f,g,C;return{setters:[function(t){e=t.cclegacy,i=t.Component,n=t.Label,a=t.Slider,s=t.Sprite,o=t._decorator},function(t){l=t.default},function(t){h=t.XGTW_AudioManager},function(t){r=t.XGTW_ItemType,u=t.XGTW_Constant},function(t){d=t.default},function(t){c=t.PoolManager},function(t){m=t.Tools},function(t){b=t.XGTW_ItemData},function(t){f=t.GameManager},function(t){g=t.ProjectEventManager,C=t.ProjectEvent}],execute:function(){var p;e._RF.push({},"f40a7aUuRJMu6/gX1xZARYV","XGTW_WeaponInfoPanel",void 0);const{ccclass:S,property:G}=o;t("default",S("XGTW_WeaponInfoPanel")(p=class extends i{constructor(...t){super(...t),this.NameLabel=null,this.PriceLabel=null,this.SliderCountLabel=null,this.SliderMaxCountLabel=null,this.WeightLabel=null,this.Durable=null,this.DurableLabel=null,this.Slider=null,this.SliderBar=null,this.Item=null,this.count=1,this.maxCount=999,this.data=null,this.item=null}onLoad(){this.NameLabel=d.GetComponent("NameLabel",this.node,n),this.PriceLabel=d.GetComponent("PriceLabel",this.node,n),this.SliderCountLabel=d.GetComponent("SliderCountLabel",this.node,n),this.SliderMaxCountLabel=d.GetComponent("SliderMaxCountLabel",this.node,n),this.WeightLabel=d.GetComponent("WeightLabel",this.node,n),this.DurableLabel=d.GetComponent("DurableLabel",this.node,n),this.Slider=d.GetComponent("Slider",this.node,a),this.SliderBar=d.GetComponent("SliderBar",this.node,s),this.Item=d.GetNode("Item",this.node),this.Durable=d.GetNode("Durable",this.node)}Show(t){g.emit(C.弹出窗口,f.GameData.gameName),this.node.active||(this.node.active=!0),this.data=t,this.count=1,this.NameLabel.string=`${this.data.Name}`,this.item?this.item.InitSimple(t):c.GetNodeByBundle(f.GameData.DefaultBundle,"Prefabs/UI/Item",this.Item).then((e=>{this.item=e.getComponent(l),this.item.InitSimple(t)})),this.DurableLabel.string=`${t.Durable}/${t.Durable}`,this.Durable.active=-1!=t.Durable,this.Slider.node.active=b.IsConsumables(r[t.Type]),this.RefreshSlider(),this.RefreshPriceAndWeight()}Hide(){this.node.active&&(this.node.active=!1)}RefreshMoney(){}RefreshPriceAndWeight(){this.WeightLabel.string=`${(this.count*this.data.Weight).toFixed(1)}`,this.PriceLabel.string=""+this.count*this.data.Price}SliderCallback(t,e){this.count=Math.floor(t.progress*this.maxCount),this.RefreshSlider()}RefreshSlider(){this.count=m.Clamp(this.count,1,this.maxCount);let t=this.count/this.maxCount;this.Slider.progress=t,this.SliderBar.fillRange=t,this.SliderCountLabel.string=`${this.count}`,this.RefreshPriceAndWeight()}OnButtonClick(t){switch(h.AudioClipPlay(u.Audio.ButtonClick),t.target.name){case"AddButton":this.count++,this.RefreshSlider();break;case"ReduceButton":this.count--,this.RefreshSlider()}}})||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_WinPanel.ts",["cc","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./NodeUtil.ts","./UIManager.ts","./GameManager.ts","./XGTW_DataManager.ts","./ProjectEventManager.ts"],(function(t){var a,n,e,o,c,s,i,r,l,u,g,M,k,G,d;return{setters:[function(t){a=t.cclegacy,n=t.Component,e=t.Tween,o=t.UIOpacity,c=t.tween,s=t._decorator},function(t){i=t.XGTW_AudioManager},function(t){r=t.XGTW_Constant},function(t){l=t.default},function(t){u=t.UIManager,g=t.Panel},function(t){M=t.GameManager},function(t){k=t.XGTW_DataManager},function(t){G=t.ProjectEventManager,d=t.ProjectEvent}],execute:function(){var f;a._RF.push({},"3c4ffU30cBLlI5GZMPyCT8Q","XGTW_WinPanel",void 0);const{ccclass:p,property:m}=s;t("default",p("XGTW_WinPanel")(f=class extends n{constructor(...t){super(...t),this.BlackMask=null}onLoad(){this.BlackMask=l.GetNode("BlackMask",this.node)}Show(){G.emit(d.游戏结束,M.GameData.gameName),k.EXP+=1e3,k.RankPoint+=1e3,e.stopAllByTarget(this.BlackMask),this.BlackMask.getComponent(o).opacity=255,c(this.BlackMask.getComponent(o)).to(1,{opacity:0}).start()}OnButtonClick(t){switch(i.AudioClipPlay(r.Audio.ButtonClick),t.target.name){case"EndButton":u.ShowPanel(g.LoadingPanel,[M.GameData,M.GameData.startScene])}}})||f);a._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_XunZhangPanel.ts",["cc","./XGTW_AudioManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./NodeUtil.ts","./PoolManager.ts","./XGTW_AchievementManager.ts","./XGTW_AchievementItem.ts","./GameManager.ts","./ProjectEventManager.ts"],(function(e){var t,n,a,o,s,i,c,u,r,h,m,l,f;return{setters:[function(e){t=e.cclegacy,n=e.Component,a=e._decorator},function(e){o=e.XGTW_AudioManager},function(e){s=e.XGTW_Constant},function(e){i=e.XGTW_UIManager},function(e){c=e.default},function(e){u=e.PoolManager},function(e){r=e.XGTW_AchievementManager},function(e){h=e.default},function(e){m=e.GameManager},function(e){l=e.ProjectEventManager,f=e.ProjectEvent}],execute:function(){var g;t._RF.push({},"79e00VoqWVC4LkzqeDHtXYh","XGTW_XunZhangPanel",void 0);const{ccclass:d,property:G}=a;e("default",d("XGTW_XunZhangPanel")(g=class extends n{constructor(...e){super(...e),this.ItemContent=null,this.items=[]}onLoad(){this.ItemContent=c.GetNode("ItemContent",this.node)}Show(){l.emit(f.弹出窗口,m.GameData.gameName),this.RefreshItems()}RefreshItems(){this.items&&0!=this.items.length?this.items.forEach((e=>e.Refresh())):r.AchievementMap.forEach(((e,t)=>{u.GetNodeByBundle(m.GameData.DefaultBundle,"Prefabs/UI/AchievementItem",this.ItemContent).then((t=>{let n=t.getComponent(h);n.Init(e),this.items.push(n)}))}))}OnButtonClick(e){switch(o.AudioClipPlay(s.Audio.ButtonClick),e.target.name){case"ReturnButton":i.Instance.HidePanel(s.Panel.XunZhangPanel)}}})||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_ZaHuoItem.ts",["cc","./XGTW_AudioManager.ts","./BundleManager.ts","./XGTW_Constant.ts","./NodeUtil.ts","./GameManager.ts","./PrefsManager.ts","./XGTW_Data.ts"],(function(t){var e,i,a,n,o,s,h,u,c,l,d,r,m,p;return{setters:[function(t){e=t.cclegacy,i=t.Component,a=t.Sprite,n=t.Label,o=t.Button,s=t._decorator},function(t){h=t.XGTW_AudioManager},function(t){u=t.BundleManager},function(t){c=t.XGTW_ItemType,l=t.XGTW_Constant},function(t){d=t.default},function(t){r=t.GameManager},function(t){m=t.default},function(t){p=t.XGTW_ItemData}],execute:function(){var G;e._RF.push({},"102cdtHtTpL7JidoSJNIZBb","XGTW_ZaHuoItem",void 0);const{ccclass:y,property:T}=s;t("default",y("XGTW_ZaHuoItem")(G=class extends i{constructor(...t){super(...t),this.Button=null,this.Icon=null,this.Quality=null,this.Price=null,this.Name=null,this.Bottom=null,this.Money=null,this.Piece=null,this.HuiZhang=null,this.data=void 0,this.cb=null}onLoad(){this.Icon=d.GetComponent("Icon",this.node,a),this.Quality=d.GetComponent("Quality",this.node,a),this.Price=d.GetComponent("Price",this.node,n),this.Name=d.GetComponent("Name",this.node,n),this.Bottom=d.GetNode("Bottom",this.node),this.Money=d.GetNode("Money",this.node),this.Piece=d.GetNode("Piece",this.node),this.HuiZhang=d.GetNode("HuiZhang",this.node),this.Button=this.node.getComponent(o)}Init(t,e=null){this.onLoad(),this.data=t,this.cb=e,this.Name.string=`${t.Name}`,this.Piece.active=p.GetItemType(this.data.Type)==c.碎片装扮,this.HuiZhang.active="能源电池"==this.data.Name,this.Money.active="勘察情报"==this.data.Name,this.Price.string=`${t.Price}`,p.GetItemType(this.data.Type)==c.碎片装扮&&(this.Price.node.active=!m.GetBool(`${t.Type}${t.Name}`),this.Piece.active=!m.GetBool(`${t.Type}${t.Name}`)),u.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Quality/Quality_${t.Quality}`).then((t=>{this.Quality.spriteFrame=t})),u.LoadSpriteFrame(r.GameData.DefaultBundle,`Res/Sprites/Items/${t.Type}/${t.Name.replace(/^\./,"")}`).then((t=>{this.Icon.spriteFrame=t}))}Refresh(){p.GetItemType(this.data.Type)==c.碎片装扮&&(this.Price.node.active=!m.GetBool(`${this.data.Type}${this.data.Name}`),this.Piece.active=!m.GetBool(`${this.data.Type}${this.data.Name}`))}OnButtonClick(){h.AudioClipPlay(l.Audio.ButtonClick),this.cb&&this.cb(this.data)}})||G);e._RF.pop()}}}));

System.register("chunks:///_virtual/XGTW_ZhuangJiaPanel.ts",["cc","./XGTW_AudioManager.ts","./NodeUtil.ts","./XGTW_GameManager.ts","./XGTW_Constant.ts","./XGTW_UIManager.ts","./UIManager.ts","./EventManager.ts","./XGTW_Event.ts","./XGTW_DataManager.ts"],(function(t){var e,n,a,i,r,o,s,u,h,l,c,g,y;return{setters:[function(t){e=t.cclegacy,n=t.Component,a=t.Label,i=t._decorator},function(t){r=t.XGTW_AudioManager},function(t){o=t.default},function(t){s=t.default},function(t){u=t.XGTW_Constant},function(t){h=t.XGTW_UIManager},function(t){l=t.UIManager},function(t){c=t.EventManager},function(t){g=t.XGTW_Event},function(t){y=t.XGTW_DataManager}],execute:function(){var E;e._RF.push({},"e2f6fVGS3pEbadCFPWmb8KF","XGTW_ZhuangJiaPanel",void 0);const{ccclass:f,property:p}=i;t("default",f("XGTW_ZhuangJiaPanel")(E=class extends n{constructor(...t){super(...t),this.TipLabel=null,this.EnergyBatteryLabel=null,this.EquipButton=null}onLoad(){this.EquipButton=o.GetNode("EquipButton",this.node),this.TipLabel=o.GetComponent("TipLabel",this.node,a),this.EnergyBatteryLabel=o.GetComponent("EnergyBatteryLabel",this.node,a)}Show(){this.RefreshEnergyBattery(),this.RefreshEquipButton()}RefreshEquipButton(){this.EquipButton.getChildByName("0").active=!s.JJMode,this.EquipButton.getChildByName("1").active=s.JJMode,this.EquipButton.getChildByName("Tip").active=!s.JJMode}RefreshEnergyBattery(){this.EnergyBatteryLabel.string=`${y.EnergyBattery}`,this.TipLabel.string=`(${y.EnergyBattery}/1)`}onEnable(){c.on(g.RefreshEnergyBattery,this.RefreshEnergyBattery,this)}onDisable(){c.off(g.RefreshEnergyBattery,this.RefreshEnergyBattery,this)}OnButtonClick(t){switch(r.AudioClipPlay(u.Audio.ButtonClick),t.target.name){case"EquipButton":if(s.JJMode)return void l.ShowTip("已启用");if(y.EnergyBattery<1)return l.ShowTip("资源不足"),void h.Instance.ShowPanel(u.Panel.EnergyTipPanel);l.ShowTip("启用成功"),y.EnergyBattery-=1,s.JJMode=!0,c.Scene.emit(g.RefreshEquip),this.RefreshEquipButton();break;case"ReturnButton":h.Instance.HidePanel(u.Panel.ZhuangJiaPanel)}}})||E);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/0_XGTW', 'chunks:///_virtual/0_XGTW'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});