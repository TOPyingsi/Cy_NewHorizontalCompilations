System.register("chunks:///_virtual/51_TaiKongWaJue_Bundle",["./TaiKongWaJue_Audio.ts","./TaiKongWaJue_CubeGroup.ts","./TaiKongWaJue_CubeManager.ts","./TaiKongWaJue_GameUI.ts","./TaiKongWaJue_PackPanel.ts","./TaiKongWaJue_PlayerController.ts","./TaiKongWaJue_SellPanel.ts","./TaiKongWaJue_UpgradePanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/TaiKongWaJue_Audio.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var t,e,o,n,a,r,s;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){o=i.cclegacy,n=i.AudioClip,a=i._decorator,r=i.Component,s=i.AudioSource}],execute:function(){var u,c,l,p,d,h;o._RF.push({},"257a4C8oXRKRL+GhEglo0zP","TaiKongWaJue_Audio",void 0);const{ccclass:g,property:f}=a;i("TaiKongWaJue_Audio",(u=g("TaiKongWaJue_Audio"),c=f([n]),u(((h=class i extends r{constructor(...i){super(...i),e(this,"clips",d,this),this.audio=void 0}static get Instance(){return this.instance}onLoad(){i.instance=this}start(){this.audio=this.getComponent(s)}update(i){}PlayAudio(i){let t=this.clips.find(((t,e,o)=>{if(t.name==i)return t}));this.audio.playOneShot(t)}}).instance=void 0,d=t((p=h).prototype,"clips",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=p))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/TaiKongWaJue_CubeGroup.ts",["cc","./PoolManager.ts","./TaiKongWaJue_CubeManager.ts","./TaiKongWaJue_PlayerController.ts","./TaiKongWaJue_GameUI.ts","./TaiKongWaJue_Audio.ts"],(function(e){var t,s,i,o,n,r,a,u,c,l,d,h;return{setters:[function(e){t=e.cclegacy,s=e.Component,i=e.v3,o=e.Collider,n=e.randomRangeInt,r=e.randomRange,a=e._decorator},function(e){u=e.PoolManager},function(e){c=e.TaiKongWaJue_CubeManager},function(e){l=e.TaiKongWaJue_PlayerController},function(e){d=e.TaiKongWaJue_GameUI},function(e){h=e.TaiKongWaJue_Audio}],execute:function(){var p;t._RF.push({},"3ef7cPwzqhCPocwfzUIhTe3","TaiKongWaJue_CubeGroup",void 0);const{ccclass:g,property:b}=a;e("TaiKongWaJue_CubeGroup",g("TaiKongWaJue_CubeGroup")(p=class extends s{constructor(...e){super(...e),this.cubes=[],this.groupPos=void 0,this.treasures=[]}Init(e,t,s){if(this.groupPos=e,this.node.setWorldPosition(i(this.groupPos.x,24*this.groupPos.y,this.groupPos.z)),null==t||null==s)for(let e=0;e<11;e++){this.cubes.push([]);for(let t=0;t<24;t++){this.cubes[e].push([]);for(let s=0;s<24;s++)if(0==e||10==e||0==s||23==s){let n=u.GetNodeByPrefab(c.Instance.cubePrefab,this.node.children[0]);n.setPosition(i(e,t,s)),n.children[3].active=!0,n.getComponent(o).enabled=!0,this.cubes[e][t].push(new f(n,y.Based))}else if(0==this.groupPos.y&&23==t){let n=u.GetNodeByPrefab(c.Instance.cubePrefab,this.node.children[0]);n.setPosition(i(e,t,s)),0==this.groupPos.y?n.children[0].active=!0:n.children[1].active=!0,n.getComponent(o).enabled=!0,this.cubes[e][t].push(new f(n,y.Collided))}else this.cubes[e][t].push(new f(null,y.Hided))}}else for(let e=0;e<11;e++){this.cubes.push([]);for(let n=0;n<24;n++){this.cubes[e].push([]);for(let r=0;r<24;r++)if(23!=n)this.cubes[e][n].push(new f(null,y.Hided));else if(e<t-1||e>t+1||r<s-1||r>s+1)this.cubes[e][n].push(new f(null,y.Hided));else if(0==e||10==e||0==r||23==r){let t=u.GetNodeByPrefab(c.Instance.cubePrefab,this.node.children[0]);t.setPosition(i(e,n,r)),t.children[3].active=!0,t.getComponent(o).enabled=!0,this.cubes[e][n].push(new f(t,y.Based))}else{let t=u.GetNodeByPrefab(c.Instance.cubePrefab,this.node.children[0]);t.setPosition(i(e,n,r)),t.children[2].active=!0,t.getComponent(o).enabled=!0,this.cubes[e][n].push(new f(t,y.Collided))}}}let a=this.groupPos.y<2?1e3:2e3;for(let e=0;e<a;e++){let e=n(0,c.Instance.treasPrefab.length),t=u.GetNodeByPrefab(c.Instance.treasPrefab[e],this.node.children[1]),s=i(n(0,11),n(0,24),n(0,24));t.setPosition(s);let o=i(r(0,360),r(0,360),r(0,360));t.setRotationFromEuler(o);let a=new P(e,s,t);this.treasures.push(a)}}Dig(e){let t=e.getPosition(),s=this.cubes[t.x][t.y][t.z];if(s.state!=y.Based)if(s.hp--,s.hp<=0+parseInt(localStorage.getItem("DAHCV_Dig"))){s.cube=null,s.state=y.Destroyed;for(let t=0;t<e.children.length;t++){e.children[t].active=!1}e.getComponent(o).enabled=!1,e.active=!1,u.PutNode(e),this.CheckDig(t.x,t.y,t.z),h.Instance.PlayAudio("dig")}else h.Instance.PlayAudio("dig2")}CheckDig(e,t,s){for(let n=e-1;n<e+2;n++)for(let r=t-1;r<t+2;r++)for(let t=s-1;t<s+2;t++){if(r<0){let t=c.Instance.cubeGroups.find(((e,t,s)=>{if(e.groupPos.y==this.groupPos.y-1)return e}));t?t.CheckSingleDig(e,23,s):c.Instance.Init(this.groupPos.y-1,e,s);continue}if(r>23){let t=c.Instance.cubeGroups.find(((e,t,s)=>{if(e.groupPos.y==this.groupPos.y+1)return e}));t||0==this.groupPos.y?t&&t.CheckSingleDig(e,23,s):c.Instance.Init(this.groupPos.y-1,e,s);continue}let a=this.cubes[n][r][t];if(a.state!=y.Hided)continue;let l=u.GetNodeByPrefab(c.Instance.cubePrefab,this.node.children[0]);l.setPosition(i(n,r,t)),l.getComponent(o).enabled=!0,0==this.groupPos.y?(a.hp=1,0==n||10==n||0==t||23==t?(l.children[3].active=!0,this.cubes[n][r][t].state=y.Based):(l.children[1].active=!0,this.cubes[n][r][t].state=y.Collided)):(a.hp=5,l.children[2].active=!0,this.cubes[n][r][t].state=y.Collided),a.state=y.Collided}}CheckSingleDig(e,t,s){for(let n=e-1;n<e+1;n++)for(let e=s-1;e<s+1;e++){let s=this.cubes[n][t][e];if(s.state!=y.Hided)continue;let r=u.GetNodeByPrefab(c.Instance.cubePrefab,this.node.children[0]);r.setPosition(i(n,t,e)),r.getComponent(o).enabled=!0,0==this.groupPos.y?(s.hp=1,0==n||10==n||0==e||23==e?(r.children[3].active=!0,this.cubes[n][t][e].state=y.Based):(r.children[1].active=!0,this.cubes[n][t][e].state=y.Collided)):(s.hp=5,r.children[2].active=!0,this.cubes[n][t][e].state=y.Collided),s.state=y.Collided}}DigTreasure(e){let t=-1,s=this.treasures.find(((s,i,o)=>{if(s.node==e)return t=i,s}));d.Instance.GetTrea(s.type),u.PutNode(e),this.treasures.splice(t,1);let i=l.Instance.Treasures;i[s.type]++,l.Instance.Treasures=i}})||p);class f{constructor(e,t){this.cube=void 0,this.state=void 0,this.hp=1,this.cube=e,this.state=t}}class P{constructor(e,t,s){this.type=void 0,this.pos=void 0,this.node=void 0,this.type=e,this.pos=t,this.node=s}}e("TreasureType",function(e){return e[e["煤炭"]=0]="煤炭",e[e["绿宝石"]=1]="绿宝石",e[e["金块"]=2]="金块",e[e["紫宝石"]=3]="紫宝石",e[e["红宝石"]=4]="红宝石",e[e["钻石"]=5]="钻石",e}({}));let y=e("CubeType",function(e){return e[e.Hided=0]="Hided",e[e.Collided=1]="Collided",e[e.Destroyed=2]="Destroyed",e[e.Based=3]="Based",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TaiKongWaJue_CubeManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./TaiKongWaJue_CubeGroup.ts"],(function(e){var t,r,n,a,i,o,u,s,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Prefab,i=e._decorator,o=e.Component,u=e.find,s=e.v3},function(e){c=e.PoolManager},function(e){l=e.TaiKongWaJue_CubeGroup}],execute:function(){var b,p,f,g,h,P,d,_,y,C;n._RF.push({},"15d8bDkBmlK/bgovlzntkX5","TaiKongWaJue_CubeManager",void 0);const{ccclass:G,property:m}=i;e("TaiKongWaJue_CubeManager",(b=G("TaiKongWaJue_CubeManager"),p=m(a),f=m(a),g=m([a]),b(((C=class e extends o{constructor(...e){super(...e),r(this,"cubePrefab",d,this),r(this,"cubeGroupPrefab",_,this),r(this,"treasPrefab",y,this),this.cubeGroups=[]}static get Instance(){return this.instance}onLoad(){e.instance=this}start(){this.Init()}update(e){}Init(e=0,t=null,r=null){let n=c.GetNodeByPrefab(this.cubeGroupPrefab,u("World")).getComponent(l);n.Init(s(3,e,-3),t,r),this.cubeGroups.push(n)}}).instance=void 0,d=t((P=C).prototype,"cubePrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(P.prototype,"cubeGroupPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(P.prototype,"treasPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=P))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/TaiKongWaJue_GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaiKongWaJue_PlayerController.ts","./UIManager.ts","./GameManager.ts","./Banner.ts","./ProjectEventManager.ts"],(function(e){var t,i,a,l,n,o,s,r,h,c,u,p,d,y,g,m,P,b,T,v,f,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,l=e.Node,n=e.Sprite,o=e._decorator,s=e.Component,r=e.v3,h=e.clamp,c=e.UITransform,u=e.Vec3,p=e.Label,d=e.director,y=e.UIOpacity,g=e.Animation},function(e){m=e.TaiKongWaJue_PlayerController},function(e){P=e.UIManager,b=e.Panel},function(e){T=e.GameManager},function(e){v=e.default},function(e){f=e.ProjectEventManager,C=e.ProjectEvent}],execute:function(){var E,S,I,w,O,U,z,_,M,B,F,j,H,G,k,N,x,D,L,W,R,A,J,K,V,Z,q,Q,X,Y,$,ee,te,ie,ae,le,ne,oe;a._RF.push({},"027ffBxh7xGl7Nr88zNGFH+","TaiKongWaJue_GameUI",void 0);const{ccclass:se,property:re}=o;e("TaiKongWaJue_GameUI",(E=se("TaiKongWaJue_GameUI"),S=re(l),I=re(l),w=re(l),O=re(l),U=re(l),z=re(l),_=re(l),M=re(l),B=re(l),F=re(l),j=re(l),H=re(l),G=re(l),k=re(l),N=re(l),x=re(n),D=re(n),E(((oe=class e extends s{constructor(...e){super(...e),i(this,"touchPanel",R,this),i(this,"joyBase",A,this),i(this,"fly",J,this),i(this,"packPanel",K,this),i(this,"sellPanel",V,this),i(this,"upgradePanel",Z,this),i(this,"diePanel",q,this),i(this,"fullPack",Q,this),i(this,"getTrea",X,this),i(this,"needElc",Y,this),i(this,"needO2",$,this),i(this,"sell",ee,this),i(this,"upgrade",te,this),i(this,"more",ie,this),i(this,"home",ae,this),i(this,"elc",le,this),i(this,"o2",ne,this),this.pastPos=null,this.delta=void 0,this.treaNames=["煤炭","绿宝石","金块","紫宝石","红宝石","钻石"]}static get Instance(){return this.instance}onLoad(){e.instance=this,f.emit(C.游戏开始,"太空挖掘")}start(){this.touchPanel.on(l.EventType.TOUCH_START,this.CameraTouchStart,this),this.touchPanel.on(l.EventType.TOUCH_MOVE,this.CameraTouchMove,this),this.joyBase.on(l.EventType.TOUCH_START,this.PlayerTouchStart,this),this.joyBase.on(l.EventType.TOUCH_MOVE,this.PlayerTouchMove,this),this.joyBase.on(l.EventType.TOUCH_END,this.PlayerTouchEnd,this),this.joyBase.on(l.EventType.TOUCH_CANCEL,this.PlayerTouchEnd,this),this.fly.on(l.EventType.TOUCH_START,this.FlyTouchStart,this),this.fly.on(l.EventType.TOUCH_END,this.FlyTouchEnd,this),this.fly.on(l.EventType.TOUCH_CANCEL,this.FlyTouchEnd,this),f.emit(C.初始化更多模式按钮,this.more)}update(e){}CameraTouchStart(e){this.pastPos=e.getUILocation()}CameraTouchMove(e){var t=e.getUILocation().subtract(this.pastPos).multiplyScalar(.1),i=r(m.Instance.node.children[0].eulerAngles);i.add3f(t.y,-t.x,0),i.x=h(i.x,-90,90),m.Instance.node.children[0].setRotationFromEuler(i),this.pastPos=e.getUILocation()}PlayerTouchStart(){m.Instance.isMove=!0}PlayerTouchMove(e){var t=this.joyBase.children[0],i=e.getUILocation(),a=this.joyBase.getWorldPosition(),l=r(i.x-a.x,i.y-a.y,0),n=this.joyBase.getComponent(c).width/2;l.length()>n?(l=l.normalize().multiplyScalar(n),t.setPosition(l)):t.setWorldPosition(r(i.x,i.y)),this.delta=l}FlyTouchStart(e){m.Instance.isFly=!0}FlyTouchEnd(e){m.Instance.isFly=!1}PlayerTouchEnd(){this.joyBase.children[0].setPosition(u.ZERO),m.Instance.isMove=!1}Dig(){m.Instance.Dig()}BackPack(){this.packPanel.active=!0}FullPack(){this.fullPack.active=!0,this.unschedule(this.CloseFull),this.scheduleOnce(this.CloseFull,2)}CloseFull(){this.fullPack.active=!1}GetTrea(e){this.getTrea.active=!0,this.getTrea.children[0].getComponent(p).string=this.treaNames[e],this.unschedule(this.CloseGet),this.scheduleOnce(this.CloseGet,2)}CloseGet(){this.getTrea.active=!1}Sell(){this.sellPanel.active=!0,f.emit(C.弹出窗口,"太空挖掘")}Upgrade(){this.upgradePanel.active=!0,f.emit(C.弹出窗口,"太空挖掘")}ShowElc(){this.elc.fillRange=m.Instance.elc/(10*(parseInt(localStorage.getItem("DAHCV_Elc"))+1))}ShowNeedElc(){this.needElc.active=!0,this.unschedule(this.CloseElc),this.scheduleOnce(this.CloseElc,2)}CloseElc(){this.needElc.active=!1}Mode(){v.IsShowServerBundle?P.ShowPanel(b.MoreGamePanel,!1):d.loadScene(T.StartScene),f.emit(C.弹出窗口,"太空挖掘")}Back(){f.emit(C.返回主页按钮事件,(()=>{P.ShowPanel(b.LoadingPanel,T.StartScene,(()=>{f.emit(C.返回主页,"太空挖掘")}))}))}ShowHome(){this.sell.active=!0,this.upgrade.active=!0}CloseHome(){this.sell.active=!1,this.upgrade.active=!1}Die(){this.CloseFull(),m.Instance.Treasures=[0,0,0,0,0,0],this.diePanel.children[1].getComponent(y).opacity=0,this.diePanel.children[2].getComponent(y).opacity=0,this.diePanel.active=!0,this.diePanel.getComponent(g).play(),m.Instance.node.setWorldPosition(this.home.getWorldPosition())}CloseDie(){this.diePanel.active=!1}ShowO2(){this.o2.fillRange=m.Instance.o2/60}ShowNeedO2(){this.needO2.active=!0,this.scheduleOnce(this.CloseO2,.8)}CloseO2(){this.needO2.active=!1}}).instance=void 0,R=t((W=oe).prototype,"touchPanel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(W.prototype,"joyBase",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(W.prototype,"fly",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(W.prototype,"packPanel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(W.prototype,"sellPanel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(W.prototype,"upgradePanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(W.prototype,"diePanel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(W.prototype,"fullPack",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(W.prototype,"getTrea",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(W.prototype,"needElc",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(W.prototype,"needO2",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(W.prototype,"sell",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(W.prototype,"upgrade",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(W.prototype,"more",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(W.prototype,"home",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(W.prototype,"elc",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(W.prototype,"o2",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=W))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/TaiKongWaJue_PackPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaiKongWaJue_PlayerController.ts"],(function(e){var t,l,i,a,n,o,r,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,n=e.Node,o=e._decorator,r=e.Component},function(e){c=e.TaiKongWaJue_PlayerController}],execute:function(){var s,u,p,g,h,b,y,d,f;i._RF.push({},"07ee5ZYhdVFAKwe8cKR6r7E","TaiKongWaJue_PackPanel",void 0);const{ccclass:_,property:P}=o;e("TaiKongWaJue_packPanel",(s=_("TaiKongWaJue_packPanel"),u=P(a),p=P(a),g=P(n),s((y=t((b=class extends r{constructor(...e){super(...e),l(this,"coinLabel",y,this),l(this,"fillLabel",d,this),l(this,"layout",f,this)}onEnable(){this.Init()}start(){}update(e){}Init(){let e=localStorage.getItem("DAHCV_Coins"),t=40+10*parseInt(localStorage.getItem("DAHCV_Fill"));this.coinLabel.string=""!=e&&null!=e?e:"0";let l=c.Instance.Treasures,i=0;for(let e=0;e<l.length;e++){const t=l[e];t>0?(this.layout.children[e].active=!0,this.layout.children[e].children[1].children[0].getComponent(a).string=t.toString(),i+=t):this.layout.children[e].active=!1}this.fillLabel.string=`容量：${i}/${t}`}Back(){this.node.active=!1}}).prototype,"coinLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(b.prototype,"fillLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(b.prototype,"layout",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=b))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/TaiKongWaJue_PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaiKongWaJue_GameUI.ts","./TaiKongWaJue_CubeGroup.ts","./TaiKongWaJue_Audio.ts"],(function(e){var t,i,s,o,r,l,n,a,c,g,h,u,d,y,m,C,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){s=e.cclegacy,o=e.Node,r=e.Camera,l=e._decorator,n=e.Component,a=e.RigidBody,c=e.CapsuleCollider,g=e.v3,h=e.Vec3,u=e.geometry,d=e.PhysicsSystem,y=e.Animation},function(e){m=e.TaiKongWaJue_GameUI},function(e){C=e.TaiKongWaJue_CubeGroup},function(e){p=e.TaiKongWaJue_Audio}],execute:function(){var I,S,_,D,A,V,H,f,T;s._RF.push({},"b0e39heyVtGGJkeQSaSnQm+","TaiKongWaJue_PlayerController",void 0);const{ccclass:O,property:v}=l;e("TaiKongWaJue_PlayerController",(I=O("TaiKongWaJue_PlayerController"),S=v(o),_=v(r),I(((T=class e extends n{constructor(...e){super(...e),i(this,"point",V,this),i(this,"UICamera",H,this),i(this,"speed",f,this),this.rig=void 0,this.isMove=!1,this.isFly=!1,this.isO2=!1,this.elc=50,this.o2=60,this.treasures=[0,0,0,0,0,0]}static get Instance(){return this.instance}onLoad(){e.instance=this}get Treasures(){return this.treasures}set Treasures(e){this.treasures=e,localStorage.setItem("DAHCV_Treasures",JSON.stringify(this.treasures))}start(){this.rig=this.node.getComponent(a),this.rig.useCCD=!0,""==localStorage.getItem("DAHCV_Treasures")||null==localStorage.getItem("DAHCV_Treasures")?this.treasures=[0,0,0,0,0,0]:this.treasures=JSON.parse(localStorage.getItem("DAHCV_Treasures")),""!=localStorage.getItem("DAHCV_Dig")&&null!=localStorage.getItem("DAHCV_Dig")||localStorage.setItem("DAHCV_Dig","0"),""!=localStorage.getItem("DAHCV_Fill")&&null!=localStorage.getItem("DAHCV_Fill")||localStorage.setItem("DAHCV_Fill","0"),""!=localStorage.getItem("DAHCV_Elc")&&null!=localStorage.getItem("DAHCV_Elc")||localStorage.setItem("DAHCV_Elc","0"),""!=localStorage.getItem("DAHCV_Fly")&&null!=localStorage.getItem("DAHCV_Fly")||localStorage.setItem("DAHCV_Fly","0"),""!=localStorage.getItem("DAHCV_Video")&&null!=localStorage.getItem("DAHCV_Video")||localStorage.setItem("DAHCV_Video","2"),this.elc=10*(1+parseInt(localStorage.getItem("DAHCV_Elc")));let e=this.node.getComponent(c);e.on("onTriggerEnter",this.onTriggerEnter,this),e.on("onTriggerExit",this.onTriggerExit,this),this.schedule(this.UseO2,1)}update(e){var t;if(this.isMove&&(null==(t=m.Instance.delta)?void 0:t.length())>1){let e=g();e=h.normalize(e,m.Instance.delta).multiplyScalar(this.speed);let t=g();this.rig.getLinearVelocity(t),this.isFly?(this.rig.useGravity=!1,this.node.getPosition().y<28?t.y=2:t.y=0):this.rig.useGravity=!0,e.z=-e.y,e.y=t.y;let i=h.angle(h.FORWARD,g(this.node.children[0].forward.x,0,this.node.children[0].forward.z).normalize());this.node.children[0].eulerAngles.y<0&&(i=this.node.children[0].eulerAngles.y%360>=-180?-i:i),this.node.children[0].eulerAngles.y>0&&(i=this.node.children[0].eulerAngles.y%360>=180?-i:i),h.rotateY(e,e,h.ZERO,i),this.rig.setLinearVelocity(e)}else if(this.isFly){this.rig.useGravity=!1;let e=g();this.node.getPosition().y<28?e.y=2:e.y=0,this.rig.setLinearVelocity(e)}else this.rig.useGravity=!0;this.isO2&&(this.o2=Math.min(this.o2+1,60),m.Instance.ShowO2())}UseO2(){if(!this.isO2){if(this.o2<=0)return m.Instance.Die();this.o2--,m.Instance.ShowO2(),this.o2<20&&m.Instance.ShowNeedO2()}}Dig(){let e=new u.Ray,t=this.node.children[0].getComponent(r),i=g();if(this.UICamera.worldToScreen(this.point.getWorldPosition(),i),t.screenPointToRay(i.x,i.y,e),d.instance.raycastClosest(e,4294967295,3)){if(0==this.elc)return m.Instance.ShowNeedElc();if(this.elc--,m.Instance.ShowElc(),this.node.children[0].children[0].getComponent(y).play(),console.log(d.instance.raycastClosestResult.collider.getMask()),d.instance.raycastClosestResult.collider.getGroup()==1<<19){let e=d.instance.raycastClosestResult.collider.node;e.parent.parent.getComponent(C).Dig(e)}else if(d.instance.raycastClosestResult.collider.getGroup()==1<<20){let e=0;for(let t=0;t<this.treasures.length;t++){e+=this.treasures[t]}if(e>=40+10*parseInt(localStorage.getItem("DAHCV_Fill")))return m.Instance.FullPack();let t=d.instance.raycastClosestResult.collider.node;t.parent.parent.getComponent(C).DigTreasure(t),p.Instance.PlayAudio("trea")}}}onTriggerEnter(e){"Home"==e.otherCollider.node.name?m.Instance.ShowHome():"O2"==e.otherCollider.node.name&&(this.isO2=!0)}onTriggerExit(e){"Home"==e.otherCollider.node.name?m.Instance.CloseHome():"O2"==e.otherCollider.node.name&&(this.isO2=!1)}}).instance=void 0,V=t((A=T).prototype,"point",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(A.prototype,"UICamera",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(A.prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=A))||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/TaiKongWaJue_SellPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaiKongWaJue_PlayerController.ts","./TaiKongWaJue_Audio.ts"],(function(e){var t,l,i,n,a,o,r,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Label,a=e.Node,o=e._decorator,r=e.Component},function(e){s=e.TaiKongWaJue_PlayerController},function(e){u=e.TaiKongWaJue_Audio}],execute:function(){var c,g,h,p,b,m,d,y,_,S,f;i._RF.push({},"bc13ePXpoBMSbFlYUWncYeX","TaiKongWaJue_SellPanel",void 0);const{ccclass:C,property:I}=o;e("TaiKongWaJue_SellPanel",(c=C("TaiKongWaJue_SellPanel"),g=I(n),h=I(n),p=I(a),b=I(a),c((y=t((d=class extends r{constructor(...e){super(...e),l(this,"coinLabel",y,this),l(this,"allLabel",_,this),l(this,"layout",S,this),l(this,"sell",f,this),this.allNum=0}onEnable(){this.Init()}start(){}update(e){}Init(){let e=localStorage.getItem("DAHCV_Coins");""!=e&&null!=e?this.coinLabel.string=e:(this.coinLabel.string="0",localStorage.setItem("DAHCV_Coins","0"));let t=s.Instance.Treasures;this.allNum=0;for(let e=0;e<t.length;e++){const l=t[e];if(l>0){let t=this.layout.children[e];t.active=!0,t.children[0].getComponent(n).string=l.toString(),t.children[4].children[0].getComponent(n).string=(l*(e+1)).toString(),this.allNum+=l*(e+1)}else this.layout.children[e].active=!1}this.sell.active=0!=this.allNum,this.allLabel.string=this.allNum.toString()}Back(){this.node.active=!1}Sell(){let e=parseInt(localStorage.getItem("DAHCV_Coins"));e+=this.allNum,localStorage.setItem("DAHCV_Coins",e.toString()),s.Instance.Treasures=[0,0,0,0,0,0],this.Init(),u.Instance.PlayAudio("sell")}}).prototype,"coinLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(d.prototype,"allLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(d.prototype,"layout",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(d.prototype,"sell",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=d))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/TaiKongWaJue_UpgradePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaiKongWaJue_Audio.ts","./TaiKongWaJue_GameUI.ts","./TaiKongWaJue_PlayerController.ts","./Banner.ts","./UIManager.ts"],(function(e){var t,n,a,o,l,i,r,s,c,g,u,I,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,o=e.Label,l=e.Node,i=e._decorator,r=e.Component,s=e.Sprite},function(e){c=e.TaiKongWaJue_Audio},function(e){g=e.TaiKongWaJue_GameUI},function(e){u=e.TaiKongWaJue_PlayerController},function(e){I=e.default},function(e){d=e.UIManager}],execute:function(){var h,p,C,S,_,m,A,V,D;a._RF.push({},"30b906Bo4xB/q/ihXMEzisu","TaiKongWaJue_UpgradePanel",void 0);const{ccclass:y,property:H}=i;e("TaiKongWaJue_UpgradePanel",(h=y("TaiKongWaJue_UpgradePanel"),p=H(o),C=H(l),S=H(l),h((A=t((m=class extends r{constructor(...e){super(...e),n(this,"coinLabel",A,this),n(this,"layout",V,this),n(this,"video",D,this),this.needCoins=void 0}onEnable(){this.Init()}start(){}update(e){}Init(){this.needCoins=[];let e=localStorage.getItem("DAHCV_Coins");this.coinLabel.string=""!=e&&null!=e?e:"0";let t=[parseInt(localStorage.getItem("DAHCV_Dig")),parseInt(localStorage.getItem("DAHCV_Fill")),parseInt(localStorage.getItem("DAHCV_Elc")),parseInt(localStorage.getItem("DAHCV_Fly"))];for(let e=0;e<this.layout.children.length;e++){const n=this.layout.children[e];n.children[2].getComponent(s).fillRange=t[e]/10,n.children[4].children[1].getComponent(o).string=(100*(t[e]+1)).toString(),this.needCoins.push(100*(t[e]+1)),n.children[4].active=10!=t[e]}let n=localStorage.getItem("DAHCV_Video");this.video.children[0].active="0"==n,this.video.children[1].getComponent(o).string="免费X"+n}Upgrade(e){let t=e.target.parent.getSiblingIndex(),n=this.needCoins[t],a=parseInt(localStorage.getItem("DAHCV_Coins")),o=["Dig","Fill","Elc","Fly"];if(a>=n){a-=n,localStorage.setItem("DAHCV_Coins",a.toString());let e=parseInt(localStorage.getItem("DAHCV_"+o[t]));e++,localStorage.setItem("DAHCV_"+o[t],e.toString()),this.Init(),c.Instance.PlayAudio("sell"),2==t&&this.Charge()}else d.ShowTip("金币不足")}Back(){this.node.active=!1}Charge(){let e=parseInt(localStorage.getItem("DAHCV_Coins"));e>=1?(e-=1,localStorage.setItem("DAHCV_Coins",e.toString()),u.Instance.elc=10*(1+parseInt(localStorage.getItem("DAHCV_Elc"))),g.Instance.ShowElc(),c.Instance.PlayAudio("sell"),this.Init()):d.ShowTip("金币不足")}ChargeVideo(){let e=parseInt(localStorage.getItem("DAHCV_Video"));if(e>0)e--,u.Instance.elc=10*(1+parseInt(localStorage.getItem("DAHCV_Elc"))),g.Instance.ShowElc(),c.Instance.PlayAudio("sell"),localStorage.setItem("DAHCV_Video",e.toString()),this.Init();else{let t=this;I.Instance.ShowVideoAd((()=>{e=2,u.Instance.elc=10*(1+parseInt(localStorage.getItem("DAHCV_Elc"))),g.Instance.ShowElc(),c.Instance.PlayAudio("sell"),localStorage.setItem("DAHCV_Video",e.toString()),t.Init()}))}}}).prototype,"coinLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(m.prototype,"layout",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(m.prototype,"video",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=m))||_));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/51_TaiKongWaJue_Bundle', 'chunks:///_virtual/51_TaiKongWaJue_Bundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});