System.register("chunks:///_virtual/30_SJZ",["./SJZ_AniFinishRecycle.ts","./SJZ_AudioManager.ts","./SJZ_Bullet.ts","./SJZ_CameraController.ts","./SJZ_CharacterController.ts","./SJZ_CharacterEnemy.ts","./SJZ_CharacterEnemyRocketSoldier.ts","./SJZ_CharacterFengYi.ts","./SJZ_CharacterLS.ts","./SJZ_CharacterSYD.ts","./SJZ_CharacterStickman.ts","./SJZ_Constant.ts","./SJZ_Data.ts","./SJZ_DataManager.ts","./SJZ_Evacuation.ts","./SJZ_Evacuations.ts","./SJZ_GameInit.ts","./SJZ_GameManager.ts","./SJZ_GunFire.ts","./SJZ_InteractItem.ts","./SJZ_InventoryGrid.ts","./SJZ_LootManager.ts","./SJZ_LvManager.ts","./SJZ_Missile.ts","./SJZ_PlayerData.ts","./SJZ_PoolManager.ts","./SJZ_Showcase.ts","./SJZ_Showcases.ts","./SJZ_SortingChildren.ts","./SJZ_Supplies.ts","./SJZ_AccessoriesPanel.ts","./SJZ_ArrowGuide.ts","./SJZ_BackpackInventory.ts","./SJZ_ChestRigInventory.ts","./SJZ_CommonItem.ts","./SJZ_ContainerInventory.ts","./SJZ_FloatingText.ts","./SJZ_GameItemUI.ts","./SJZ_GameOverPanel.ts","./SJZ_GamePanel.ts","./SJZ_GridCell.ts","./SJZ_HPBar.ts","./SJZ_Inventory.ts","./SJZ_InventoryPanel.ts","./SJZ_Item.ts","./SJZ_ItemInfoPanel.ts","./SJZ_Joystick.ts","./SJZ_OutputItem.ts","./SJZ_OutputPanel.ts","./SJZ_PlayerInventory.ts","./SJZ_RewardPanel.ts","./SJZ_SafeBoxInventory.ts","./SJZ_SafeBoxPanel.ts","./SJZ_SelectMapPanel.ts","./SJZ_SelectSafeBoxPanel.ts","./SJZ_SellInventory.ts","./SJZ_SellPanel.ts","./SJZ_ShopPanel.ts","./SJZ_SingleInventory.ts","./SJZ_SkinItem.ts","./SJZ_SkinShopPanel.ts","./SJZ_TutorialPanel.ts","./SJZ_UIManager.ts","./SJZ_UpgradePanel.ts","./SJZ_WeaponContent.ts","./SJZ_WorkbenchPanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SJZ_AccessoriesPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_Data.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./BundleManager.ts","./GameManager.ts","./SJZ_GameManager.ts","./SJZ_AudioManager.ts","./ProjectEventManager.ts","./EventManager.ts","./SJZ_GridCell.ts","./Tools.ts","./SJZ_DataManager.ts"],(function(e){var t,a,s,n,o,c,i,r,h,l,d,A,p,y,D,g,_,m,u,I,C;return{setters:[function(e){t=e.cclegacy,a=e.Sprite,s=e.Label,n=e.UITransform,o=e._decorator},function(e){c=e.default},function(e){i=e.PanelBase},function(e){r=e.SJZ_ItemType},function(e){h=e.SJZ_UIManager},function(e){l=e.SJZ_Constant},function(e){d=e.BundleManager},function(e){A=e.GameManager},function(e){p=e.SJZ_GameManager},function(e){y=e.SJZ_AudioManager,D=e.SJZ_Audio},function(e){g=e.ProjectEventManager,_=e.ProjectEvent},function(e){m=e.EventManager},function(e){u=e.GridCellState},function(e){I=e.Tools},function(e){C=e.SJZ_DataManager}],execute:function(){var S;t._RF.push({},"703518y13hMA6UdSaTbfwkA","SJZ_AccessoriesPanel",void 0);const{ccclass:P,property:T}=o;e("default",P("SJZ_AccessoriesPanel")(S=class extends i{constructor(...e){super(...e),this.Panel=null,this.Icon=null,this.Accessor_0=null,this.Accessor_1=null,this.Accessor_2=null,this.InventoryNd=null,this.Desc0Label=null,this.Desc1Label=null,this.Desc2Label=null,this.data=null,this.callback=null,this.targetInventory=null}onLoad(){this.Panel=c.GetNode("Panel",this.node),this.Icon=c.GetComponent("Icon",this.node,a),this.Desc0Label=c.GetComponent("Desc0Label",this.node,s),this.Desc1Label=c.GetComponent("Desc1Label",this.node,s),this.Desc2Label=c.GetComponent("Desc2Label",this.node,s),this.InventoryNd=c.GetNode("InventoryNd",this.node),this.Accessor_0=c.GetComponent("Accessor_0",this.node,n),this.Accessor_1=c.GetComponent("Accessor_1",this.node,n),this.Accessor_2=c.GetComponent("Accessor_2",this.node,n)}Reset(){this.Icon.spriteFrame=null,this.Desc0Label.string=""}Show(e,t){h.Instance.HidePanel(l.Panel.InventoryPanel),this.data=e,super.Show(this.Panel),this.targetInventory&&this.targetInventory.node.destroy();let a=t&&t(this.InventoryNd);this.targetInventory=a,this.Reset(),d.LoadSpriteFrame(A.GameData.DefaultBundle,`Res/Items/${e.ImageId}`).then((e=>{this.Icon.spriteFrame=e,p.SetImagePreferScale(this.Icon,500,200)})),this.RefreshAccessoriesInfo(),g.emit(_.页面转换,A.GameData.gameName)}OnDragStart(e){this.targetInventory.OnDragStart(e)}OnDragging(e,t){this.targetInventory.OnDragging(e,t),this.DragAccessory(e,t)}OnDragEnd(e,t){this.targetInventory.OnDragEnd(e,t),this.EquipAccessory(e,t)}OnButtonClick(e){switch(y.Instance.PlaySFX(D.ButtonClick),e.target.name){case"CloseButton":h.Instance.HidePanel(l.Panel.AccessoriesPanel);break;case"Accessor_0":this.data.WeaponData.Accessory_0&&(C.PlayerData.AddItemToInventory(I.Clone(this.data.WeaponData.Accessory_0)),this.data.WeaponData.Accessory_0=null,this.RefreshAccessoriesInfo());break;case"Accessor_1":this.data.WeaponData.Accessory_1&&(C.PlayerData.AddItemToInventory(I.Clone(this.data.WeaponData.Accessory_1)),this.data.WeaponData.Accessory_1=null,this.RefreshAccessoriesInfo());break;case"Accessor_2":this.data.WeaponData.Accessory_2&&(C.PlayerData.AddItemToInventory(I.Clone(this.data.WeaponData.Accessory_2)),this.data.WeaponData.Accessory_2=null,this.RefreshAccessoriesInfo())}}DragAccessory(e,t){this.Accessor_0.getBoundingBoxToWorld().contains(t)?this.SetPutTipState(this.Accessor_0.node.getChildByName("PutTip").getComponent(a),e.data.Type==r.Accessory?u.CanPut:u.CanntPut):this.ClearPutTipState(this.Accessor_0.node.getChildByName("PutTip").getComponent(a)),this.Accessor_1.getBoundingBoxToWorld().contains(t)?this.SetPutTipState(this.Accessor_1.node.getChildByName("PutTip").getComponent(a),e.data.Type==r.Accessory?u.CanPut:u.CanntPut):this.ClearPutTipState(this.Accessor_1.node.getChildByName("PutTip").getComponent(a)),this.Accessor_2.getBoundingBoxToWorld().contains(t)?this.SetPutTipState(this.Accessor_2.node.getChildByName("PutTip").getComponent(a),e.data.Type==r.Accessory?u.CanPut:u.CanntPut):this.ClearPutTipState(this.Accessor_2.node.getChildByName("PutTip").getComponent(a))}EquipAccessory(e,t){const s=I.Clone(e.data);this.Accessor_0.getBoundingBoxToWorld().contains(t)&&s.Type==r.Accessory&&(this.data.WeaponData.Accessory_0&&(C.PlayerData.AddItemToInventory(I.Clone(this.data.WeaponData.Accessory_0)),this.data.WeaponData.Accessory_0=null),C.PlayerData.RemoveItemFromInventory(e.data),this.data.WeaponData.Accessory_0=s),this.ClearPutTipState(this.Accessor_0.node.getChildByName("PutTip").getComponent(a)),this.Accessor_1.getBoundingBoxToWorld().contains(t)&&e.data.Type==r.Accessory&&(this.data.WeaponData.Accessory_1&&C.PlayerData.AddItemToInventory(this.data.WeaponData.Accessory_1),C.PlayerData.RemoveItemFromInventory(e.data),this.data.WeaponData.Accessory_1=s),this.ClearPutTipState(this.Accessor_1.node.getChildByName("PutTip").getComponent(a)),this.Accessor_2.getBoundingBoxToWorld().contains(t)&&e.data.Type==r.Accessory&&(this.data.WeaponData.Accessory_2&&C.PlayerData.AddItemToInventory(this.data.WeaponData.Accessory_2),C.PlayerData.RemoveItemFromInventory(e.data),this.data.WeaponData.Accessory_2=s),this.ClearPutTipState(this.Accessor_2.node.getChildByName("PutTip").getComponent(a)),this.RefreshAccessoriesInfo()}RefreshAccessoriesInfo(){if(!this.data)return;let e=this.Accessor_0.node.getChildByName("ItemLabel").getComponent(s),t=this.Accessor_0.node.getChildByName("Icon").getComponent(a);e.string="芯片配件",t.spriteFrame=null,this.Desc0Label.string="",this.data.WeaponData.Accessory_0&&(e.string=this.data.WeaponData.Accessory_0.Name,this.Desc0Label.string=`${this.data.WeaponData.Accessory_0.Name}\n\n增加后坐力：${this.data.WeaponData.Accessory_0.AccessoryData.RecoilUp}\n减少后坐力：${this.data.WeaponData.Accessory_0.AccessoryData.RecoilDown}\n增加换弹速度：${this.data.WeaponData.Accessory_0.AccessoryData.ReloadingSpeedUp}\n减少换弹速度：${this.data.WeaponData.Accessory_0.AccessoryData.ReloadingSpeedDown}\n视野倍数：${this.data.WeaponData.Accessory_0.AccessoryData.Magnificationlens}`,d.LoadSpriteFrame(A.GameData.DefaultBundle,`Res/Items/${this.data.WeaponData.Accessory_0.ImageId}`).then((e=>{t.spriteFrame=e,p.SetImagePreferScale(t,130,130)})));let n=this.Accessor_1.node.getChildByName("ItemLabel").getComponent(s),o=this.Accessor_1.node.getChildByName("Icon").getComponent(a);n.string="芯片配件",o.spriteFrame=null,this.Desc1Label.string="",this.data.WeaponData.Accessory_1&&(n.string=this.data.WeaponData.Accessory_1.Name,this.Desc1Label.string=`${this.data.WeaponData.Accessory_1.Name}\n\n增加后坐力：${this.data.WeaponData.Accessory_1.AccessoryData.RecoilUp}\n减少后坐力：${this.data.WeaponData.Accessory_1.AccessoryData.RecoilDown}\n增加换弹速度：${this.data.WeaponData.Accessory_1.AccessoryData.ReloadingSpeedUp}\n减少换弹速度：${this.data.WeaponData.Accessory_1.AccessoryData.ReloadingSpeedDown}\n视野倍数：${this.data.WeaponData.Accessory_1.AccessoryData.Magnificationlens}`,d.LoadSpriteFrame(A.GameData.DefaultBundle,`Res/Items/${this.data.WeaponData.Accessory_1.ImageId}`).then((e=>{o.spriteFrame=e,p.SetImagePreferScale(o,130,130)})));let c=this.Accessor_2.node.getChildByName("ItemLabel").getComponent(s),i=this.Accessor_2.node.getChildByName("Icon").getComponent(a);c.string="芯片配件",i.spriteFrame=null,this.Desc2Label.string="",this.data.WeaponData.Accessory_2&&(c.string=this.data.WeaponData.Accessory_2.Name,this.Desc2Label.string=`${this.data.WeaponData.Accessory_2.Name}\n\n增加后坐力：${this.data.WeaponData.Accessory_2.AccessoryData.RecoilUp}\n减少后坐力：${this.data.WeaponData.Accessory_2.AccessoryData.RecoilDown}\n增加换弹速度：${this.data.WeaponData.Accessory_2.AccessoryData.ReloadingSpeedUp}\n减少换弹速度：${this.data.WeaponData.Accessory_2.AccessoryData.ReloadingSpeedDown}\n视野倍数：${this.data.WeaponData.Accessory_2.AccessoryData.Magnificationlens}`,d.LoadSpriteFrame(A.GameData.DefaultBundle,`Res/Items/${this.data.WeaponData.Accessory_2.ImageId}`).then((e=>{i.spriteFrame=e,p.SetImagePreferScale(i,130,130)})))}SetPutTipState(e,t){e.color=I.GetColorFromHex(t)}ClearPutTipState(e){e.color=I.GetColorFromHex(u.None)}onEnable(){m.on(l.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),m.on(l.Event.ON_ITEM_DRAGGING,this.OnDragging,this),m.on(l.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}onDisable(){m.off(l.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),m.off(l.Event.ON_ITEM_DRAGGING,this.OnDragging,this),m.off(l.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}})||S);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_AniFinishRecycle.ts",["cc","./SJZ_PoolManager.ts"],(function(n){var t,e,i,s,o;return{setters:[function(n){t=n.cclegacy,e=n.Component,i=n.Animation,s=n._decorator},function(n){o=n.SJZ_PoolManager}],execute:function(){var c;t._RF.push({},"41e63/w3bBBeZGHRzy5vT4f","SJZ_AniFinishRecycle",void 0);const{ccclass:a,property:r}=s;n("default",a("SJZ_AniFinishRecycle")(c=class extends e{constructor(...n){super(...n),this.ani=null}onEnable(){this.ani=this.node.getComponent(i),this.ani.on(i.EventType.FINISHED,this.Put,this),this.ani.play()}onDisable(){var n;null==(n=this.ani)||n.off(i.EventType.FINISHED,this.Put,this)}Put(){o.Instance.Put(this.node)}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_ArrowGuide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./NodeUtil.ts","./SJZ_Constant.ts"],(function(t){var e,i,n,o,r,s,a,u,l,c,h,d,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.v3,r=t._decorator,s=t.Component,a=t.tween,u=t.Vec3,l=t.Tween,c=t.math},function(t){h=t.EventManager},function(t){d=t.default},function(t){p=t.SJZ_Constant}],execute:function(){var g,f,A,T,_,w,I;n._RF.push({},"33ae9ei0TtKIriZHmPGUQY8","SJZ_ArrowGuide",void 0);const{ccclass:v,property:y}=r,H=o();t("SJZ_ArrowGuide",(g=v("SJZ_ArrowGuide"),f=y({type:Number}),A=y({type:Number}),g((w=e((_=class extends s{constructor(...t){super(...t),this.Arrow=null,i(this,"floatHeight",w,this),i(this,"duration",I,this),this.target=null}onLoad(){this.Arrow=d.GetNode("Arrow",this.node),H.set(this.node.position.clone()),this.HIDE_TUTORIAL(),h.on(p.Event.SHOW_TUTORIAL,this.SHOW_TUTORIAL,this),h.on(p.Event.HIDE_TUTORIAL,this.HIDE_TUTORIAL,this)}SHOW_TUTORIAL(t){t&&(this.node.active=!0,this.target=t,a(this.Arrow).repeatForever(a().to(this.duration,{position:new u(H.x+this.floatHeight,H.y,H.z)},{easing:"sineInOut"}).to(this.duration,{position:H},{easing:"sineInOut"})).start())}HIDE_TUTORIAL(){this.node.active=!1,l.stopAllByTarget(this.Arrow)}update(t){if(!this.target)return;let e=this.target.worldPosition.clone().subtract(this.node.worldPosition.clone()).normalize(),i=c.toDegree(Math.atan2(e.y,e.x));this.node.angle=i}}).prototype,"floatHeight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),I=e(_.prototype,"duration",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),T=_))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var o,i,t,s,n,r,u;return{setters:[function(e){o=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){t=e.cclegacy,s=e.AudioClip,n=e._decorator,r=e.Component,u=e.AudioSource}],execute:function(){var l,c,a,p,S,h;t._RF.push({},"9b15cJ9RZ1FX6Hi2tnvAEgH","SJZ_AudioManager",void 0);const{ccclass:d,property:f}=n;e("SJZ_Audio",function(e){return e.BG="BG",e.ButtonClick="ButtonClick",e.Equip="Equip",e.Fire="Fire",e.GetMoney="GetMoney",e.Reload="Reload",e.Unequip="Unequip",e.MissileExplosion="MissileExplosion",e.MissileFire="MissileFire",e.SafeBoxBG="SafeBoxBG",e.SafeBoxT="SafeBoxT",e.SafeBoxF="SafeBoxF",e}({})),e("SJZ_AudioManager",(l=d("SJZ_AudioManager"),c=f([s]),l(((h=class e extends r{constructor(...e){super(...e),this.bgmSource=null,this.sfxSource=null,i(this,"clips",S,this)}onLoad(){e.Instance=this,this.bgmSource=this.node.addComponent(u),this.sfxSource=this.node.addComponent(u),this.bgmSource.playOnAwake=!1,this.sfxSource.playOnAwake=!1,this.bgmSource.loop=!0,this.sfxSource.loop=!1}PlayBGM(e){let o=this.clips.find((o=>o.name==e));o?(this.bgmSource.clip=o,this.scheduleOnce((()=>{this.bgmSource.play()}))):console.error(`没有这个音效：${e}`)}PlaySFX(e,o=1){let i=this.clips.find((o=>o.name==e));i?this.sfxSource.playOneShot(i,o):console.error(`没有这个音效：${e}`)}StopBGM(){this.bgmSource.stop()}SetBGMVolume(e){this.bgmSource.volume=e}SetSFXVolume(e){this.sfxSource.volume=e}}).Instance=null,S=o((p=h).prototype,"clips",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),a=p))||a));t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_BackpackInventory.ts",["cc","./NodeUtil.ts","./SJZ_DataManager.ts","./SJZ_Constant.ts","./SJZ_Data.ts","./SJZ_GridCell.ts","./SJZ_PoolManager.ts","./Tools.ts","./SJZ_Inventory.ts","./BundleManager.ts","./GameManager.ts","./SJZ_GameManager.ts","./SJZ_UIManager.ts","./UIManager.ts","./EventManager.ts","./SJZ_AudioManager.ts"],(function(a){var t,e,n,i,r,o,s,c,l,p,u,h,D,k,S,I,m,P,g,d,y;return{setters:[function(a){t=a.cclegacy,e=a.UITransform,n=a.Label,i=a.Sprite,r=a._decorator},function(a){o=a.default},function(a){s=a.SJZ_DataManager},function(a){c=a.SJZ_Constant},function(a){l=a.SJZ_ItemType},function(a){p=a.GridCellState},function(a){u=a.SJZ_PoolManager},function(a){h=a.Tools},function(a){D=a.default},function(a){k=a.BundleManager},function(a){S=a.GameManager},function(a){I=a.SJZ_GameManager},function(a){m=a.SJZ_UIManager},function(a){P=a.UIManager},function(a){g=a.EventManager},function(a){d=a.SJZ_AudioManager,y=a.SJZ_Audio}],execute:function(){var B;t._RF.push({},"7a2c0xdEEVGh7+kCjnPYjsr","SJZ_BackpackInventory",void 0);const{ccclass:C,property:f}=r;a("default",C("SJZ_BackpackInventory")(B=class extends D{constructor(...a){super(...a),this.Item=null,this.ItemLabel=null,this.Icon=null,this.PutTip=null,this.ndTrans=null,this.inBox=!1}onLoad(){this.Item=o.GetComponent("Item",this.node,e),this.ItemLabel=o.GetComponent("ItemLabel",this.node,n),this.ItemContent=o.GetNode("ItemContent",this.node),this.ItemContentTrans=this.ItemContent.getComponent(e),this.Icon=o.GetComponent("Icon",this.node,i),this.PutTip=o.GetComponent("PutTip",this.node,i),this.ndTrans=this.node.getComponent(e)}Refresh(){let a=s.PlayerData.BackpackData;if(a){let t=a.EquipData.CarryingSpace.width,e=a.EquipData.CarryingSpace.height;this.ItemContentTrans.setContentSize(t*c.itemSize,e*c.itemSize),this.ndTrans.setContentSize(170+t*c.itemSize+20,150+e*c.itemSize),this.ItemLabel.string=a.Name,k.LoadSpriteFrame(S.GameData.DefaultBundle,`Res/Items/${a.ImageId}`).then((a=>{this.Icon.spriteFrame=a,I.SetImagePreferScale(this.Icon,130,130)})),super.Init(a.EquipData.ItemData,s.PlayerData.BackpackGrid)}else this.ClearItems(),this.Icon.spriteFrame=null,this.ItemContentTrans.setContentSize(0,0),this.ndTrans.setContentSize(170,250),this.ItemLabel.string="背包"}EquipBackpack(a){s.PlayerData.EquipBackpack(a),this.Refresh()}CanEquipBackpack(a,t){if(this.Item.getBoundingBoxToWorld().contains(t)){this.inBox=!0;let t=a.Type==l.Backpack&&null==s.PlayerData.BackpackData;return this.SetPutTipState(t?p.CanPut:p.CanntPut),t}return this.inBox&&(this.ClearPutTipState(),this.inBox=!1),!1}SetPutTipState(a){this.PutTip.color=h.GetColorFromHex(a)}ClearPutTipState(){this.PutTip.color=h.GetColorFromHex(p.None)}OnDragStart(a){s.PlayerData.BackpackData&&super.OnDragStart(a)}OnDragging(a,t){this.CanEquipBackpack(a.data,t),s.PlayerData.BackpackData&&super.OnDragging(a,t)}OnDragEnd(a,t){if(this.CanEquipBackpack(a.data,t))return this.ClearPutTipState(),a.RemoveItemFromAndResetLastInventory(),this.EquipBackpack(a.data),u.Instance.Put(a.node),s.SaveData(),void I.Instance.HideTipCells();this.ClearPutTipState(),s.PlayerData.BackpackData&&super.OnDragEnd(a,t)}OnButtonClick(a){switch(d.Instance.PlaySFX(y.ButtonClick),a.target.name){case"Item":if(!s.PlayerData.BackpackData)return;m.Instance.ShowPanel(c.Panel.ItemInfoPanel,[s.PlayerData.BackpackData,!0,a=>{"Sell"==a&&(s.PlayerData.BackpackData&&0==s.PlayerData.BackpackData.EquipData.ItemData.length?(P.ShowTip(`出售成功，获得${s.PlayerData.BackpackData.Price.toLocaleString()}`),d.Instance.PlaySFX(y.GetMoney),s.PlayerData.Money+=s.PlayerData.BackpackData.Price,s.PlayerData.BackpackData=null,this.Refresh()):s.PlayerData.BackpackData.EquipData.ItemData.length>0&&P.ShowTip("出售失败，背包中还有物品")),"Takeoff"==a&&(s.PlayerData.BackpackData&&0==s.PlayerData.BackpackData.EquipData.ItemData.length?(s.PlayerData.AddItemToInventory(s.PlayerData.BackpackData)?(g.Scene.emit(c.Event.REFRESH_INVENTORY_ITEMS),d.Instance.PlaySFX(y.Unequip),s.PlayerData.BackpackData=null):P.ShowTip("放入失败"),this.Refresh()):s.PlayerData.BackpackData.EquipData.ItemData.length>0&&P.ShowTip("放入失败，背包中还有物品"))}])}}})||B);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Bullet.ts",["cc","./SJZ_Constant.ts","./SJZ_PoolManager.ts"],(function(t){var i,e,n,o,s,a,l,r,d,c,g,h,u;return{setters:[function(t){i=t.cclegacy,e=t.Component,n=t.RigidBody2D,o=t.v3,s=t.v2,a=t.BoxCollider2D,l=t.Contact2DType,r=t.Vec2,d=t.find,c=t.misc,g=t._decorator},function(t){h=t.SJZ_Constant},function(t){u=t.SJZ_PoolManager}],execute:function(){var p;i._RF.push({},"201c1UdRpNNsqSCkIG2EcHc","SJZ_Bullet",void 0);const{ccclass:y,property:C}=g;t("default",y("SJZ_Bullet")(p=class extends e{constructor(...t){super(...t),this.rigidbody=null,this.target=null,this.weapon=null,this.ammo=null,this.playerData=null}onLoad(){this.rigidbody=this.node.getComponent(n)}Init(t,i,e,n){this.target=t,this.weapon=i,this.ammo=e,this.playerData=n;let r=o(this.node.right.clone().multiplyScalar(500));this.rigidbody.applyForceToCenter(s(r.x,r.y),!0),this.node.getComponent(a).on(l.BEGIN_CONTACT,this.onBeginContact,this)}InitBlank(t,i){this.rigidbody.linearVelocity=r.ZERO,this.rigidbody.angularVelocity=0,this.target=t,this.rigidbody.applyLinearImpulseToCenter(i,!0),this.rigidbody.applyTorque(.5,!0)}onBeginContact(t,i,e){if(i.group==h.Group.Obstacle){const t=e.getWorldManifold();let i=u.Instance.Get(h.Prefab.Explosion,d("Canvas"));i.setWorldPosition(o(t.points[0].x,t.points[0].y)),i.angle=c.radiansToDegrees(s(0,1).signAngle(t.normal.negative()))-90,this.scheduleOnce((()=>{u.Instance.Put(this.node)}))}}update(t){this.target?r.distance(this.node.getWorldPosition(),this.target.node.getWorldPosition())>3500&&(this.rigidbody.linearVelocity=r.ZERO,u.Instance.Put(this.node)):(this.rigidbody.linearVelocity=r.ZERO,u.Instance.Put(this.node))}})||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CameraController.ts",["cc","./TweenUtil.ts","./Tools.ts","./SJZ_LvManager.ts"],(function(t){var o,e,n,s,a,i,r,l,c,h,p;return{setters:[function(t){o=t.cclegacy,e=t.v3,n=t._decorator,s=t.Component,a=t.Camera,i=t.Tween,r=t.tween,l=t.Vec2},function(t){c=t.EasingType},function(t){h=t.Tools},function(t){p=t.SJZ_LvManager}],execute:function(){var d,u;o._RF.push({},"a4524NUihZDNKeezWxC3kG5","SJZ_CameraController",void 0);const{ccclass:m,property:g}=n,y=e(),C=e(),I=e(),P=e();t("default",m("SJZ_CameraController")(((u=class t extends s{constructor(...t){super(...t),this.camera=null,this.stopFollow=!1,this.target=null}onLoad(){t.Instance=this,this.camera=this.node.getComponent(a),this.node.setWorldPosition(p.Instance.playerPosition.worldPosition.x,p.Instance.playerPosition.worldPosition.y,this.node.worldPosition.z)}Move(t){this.stopFollow=!0,this.node.getPosition(P),P.add(t.negative().multiplyScalar(5)),P.set(e(h.Clamp(P.x,-p.Instance.MapSize.x,p.Instance.MapSize.x),h.Clamp(P.y,-p.Instance.MapSize.y,p.Instance.MapSize.y))),this.node.setPosition(e(P.x,P.y,1e3))}ZoomIn(){i.stopAllByTarget(this.camera),r(this.camera).to(.2,{orthoHeight:540},{easing:c.quadIn}).start()}ZoomOut(t=600,o=null){i.stopAllByTarget(this.camera),r(this.camera).to(.2,{orthoHeight:t},{easing:c.quadIn}).start(),r(this.camera.node).to(.3,{position:e(this.camera.node.position.x,this.camera.node.position.y+1,this.camera.node.position.z)}).call((()=>{o&&o()})).start()}update(t){this.stopFollow||this.target&&(this.node.getWorldPosition(y),this.target.getWorldPosition(C),l.lerp(I,y,C,.3),this.node.setWorldPosition(e(I.x,I.y,1e3)))}}).Instance=null,d=u))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CharacterController.ts",["cc","./NodeUtil.ts","./SJZ_GameManager.ts","./EventManager.ts","./SJZ_Constant.ts","./SJZ_PoolManager.ts","./Tools.ts","./SJZ_Bullet.ts","./SJZ_Data.ts","./SJZ_LvManager.ts","./SJZ_FloatingText.ts","./SJZ_DataManager.ts"],(function(t){var e,i,n,a,s,o,r,l,h,p,c,m,d,u,g,S,M,f,A,k,I,y;return{setters:[function(t){e=t.cclegacy,i=t.v3,n=t.Component,a=t.v2,s=t.RigidBody2D,o=t.CircleCollider2D,r=t.sp,l=t.UITransform,h=t.Vec2,p=t.math,c=t._decorator},function(t){m=t.default},function(t){d=t.SJZ_GameManager},function(t){u=t.EventManager},function(t){g=t.SJZ_Constant},function(t){S=t.SJZ_PoolManager},function(t){M=t.Tools},function(t){f=t.default},function(t){A=t.SJZ_ItemType},function(t){k=t.SJZ_LvManager},function(t){I=t.SJZ_FloatingText},function(t){y=t.SJZ_DataManager}],execute:function(){var _;e._RF.push({},"87080LXpwtGpL7PEH9YxxIV","SJZ_CharacterController",void 0);const{ccclass:C,property:D}=c,v=i();let P=t("PlayerAniState",function(t){return t.None="None",t.Idle="待机",t.Hit="受击",t.Shoot="开枪",t.Dead="死亡",t.Move="移动",t.Attack="近战",t.Reload="换弹",t.Roll="翻滚",t.LS_Idle="leisi/Standby",t.LS_Shoot="leisi/sj",t.LS_Move="leisi/walk-loop",t.LS_Attack="leisi/zhouji",t}({}));t("default",C("SJZ_CharacterController")(_=class extends n{constructor(...t){super(...t),this.MaxHP=600,this.rigidbody=null,this.collider=null,this.character=null,this.spine=null,this.spineTrans=null,this.gunBone=null,this.hpBar=null,this.isPlayer=!1,this.isFire=!1,this.maxSpeed=20,this.speed=20,this.dir=a(),this.fireDir=a(),this.aniMap=new Map,this.weapon=null,this.reloadCallback=null,this.useMelee=!1,this.results=null,this._hp=0}get HP(){return this._hp}set HP(t){var e;t<=0&&(t=0,this.Die()),this._hp=M.Clamp(t,0,this.MaxHP),null==(e=this.hpBar)||e.Set(this._hp/this.MaxHP)}onLoad(){this.rigidbody=this.node.getComponent(s),this.collider=this.node.getComponent(o),this.character=m.GetNode("Character",this.node),this.spine=m.GetComponent("Spine",this.node,r.Skeleton),this.spineTrans=this.spine.node.getComponent(l),this.gunBone=this.spine.findBone("rotation"),this.SetAniMix(P.Idle,P.Move),this.SetAniMix(P.Hit,P.Shoot)}SetAniMix(t,e){var i,n;null==(i=this.spine)||i.setMix(t,e,.2),null==(n=this.spine)||n.setMix(e,t,.2)}SetGun(t){if(this.weapon=t,t){this.useMelee=!1;let e=t.Name;M.IsEmptyStr(y.GetGunUseSkin(t.Name))||(e=`${y.GetGunUseSkin(t.Name)}`),this.spine.setAttachment("gun",e)}}SetMeelee(){this.useMelee=!0,this.spine.setAttachment("gun","刀")}SetEquipment(t="",e="",i=""){console.log("装备：","头盔="+t,"护甲="+e,"背包="+i),this.spine.setAttachment("tk",t),this.spine.setAttachment("hj",e),this.spine.setAttachment("bb",i)}Reload(t=null){this.reloadCallback=t,this.PlayAni(1,P.Reload,!1)}SetDir(t,e,n){this.dir.set(t,e),this.isFire||(this.character.scale=i(t<0?-1:1,1)),this.speed=n*this.maxSpeed,this.PlayAni(0,P.Move)}StopMove(){this.speed=0,this.dir.set(h.ZERO),this.rigidbody.enabled&&(this.rigidbody.linearVelocity=a(this.dir.x,this.dir.y)),this.PlayAni(0,P.Idle)}SetGunDir(t){if(d.IsGameOver)return;this.fireDir.set(t),this.character.scale=i(t.x<0?-1:1,1);const e=this.character.scale.x<0?-1:1,n=t.x*e;let a=180*Math.atan2(t.y,n)/Math.PI;this.gunBone.rotation=a}SetSkin(t){this.spine.setSkin(t)}Fire(){d.IsGameOver||(this.isFire=!0,this.schedule(this.StartFire,.1))}StartFire(){if(d.IsGameOver)return;if(this.useMelee&&this.PlayAni(1,P.Attack),!this.weapon)return;if(!this.weapon.WeaponData.Ammo||this.weapon.WeaponData.Ammo.Count<=0)return void this.StopAni(1);this.useMelee||this.PlayAni(1,P.Shoot);this.weapon.WeaponData.Ammo.Count-=1,u.Scene.emit(g.Event.REFRESH_WEAON_CONTENT);const t=this.spine.findBone(this.weapon.Name);for(let e=0;e<1;e++){let e=S.Instance.Get(g.Prefab.Bullet,k.Instance.Layer_Effects);e.setWorldPosition(this.spineTrans.convertToWorldSpaceAR(v.set(t.worldX,t.worldY,0))),e.angle=this.character.scale.x<0?180-this.gunBone.rotation:this.gunBone.rotation,e.getComponent(f).Init(this,this.weapon,this.weapon.WeaponData.Ammo,null)}let e=S.Instance.Get(g.Prefab.BulletBlank,k.Instance.Layer_Effects);this.spineTrans.convertToWorldSpaceAR(v.set(t.worldX,t.worldY,0),v),e.setWorldPosition(v),e.getComponent(f).InitBlank(this,a(-5*this.character.scale.x,M.GetRandom(5,8)).multiplyScalar(.2))}Die(){}StopFire(){this.isFire=!1,this.unschedule(this.StartFire),this.StopAni(1)}PlayAni(t,e,i=!0,n=1){if(d.IsGameOver)return;if(this.aniMap.has(t)||this.aniMap.set(t,null),this.aniMap.get(t)&&this.aniMap.get(t).animation.name==e&&this.aniMap.get(t).timeScale==n)return;const a=this.spine.setAnimation(t,e,i);a?(a.timeScale=n,this.aniMap.set(t,a)):console.error(`${this.node.name} 上没有 ${e} 状态`)}StopAni(t){var e;this.aniMap.set(t,null),null==(e=this.spine)||e.clearTrack(t)}TakeDamage(t,e){if(d.IsGameOver)return;let n=t.WeaponData.Damage/2,a=S.Instance.Get(g.Prefab.FloatingText,this.node);a.setWorldPosition(i(this.node.worldPosition.x+20*p.random(),this.node.worldPosition.y+100+20*p.random(),0)),a.getComponent(I).Show(`-${n}`,"#FF0000","#AC0000",.3),this.HP-=n}MeleeAttack(){}TakeMeleeDamage(t){let e=S.Instance.Get(g.Prefab.FloatingText,this.node);e.setWorldPosition(i(this.node.worldPosition.x+20*p.random(),this.node.worldPosition.y+100+20*p.random(),0)),e.getComponent(I).Show(`-${t}`,"#FF0000","#AC0000",.3),this.HP-=t}update(t){this.rigidbody.enabled&&(this.rigidbody.linearVelocity=a(this.dir.x*this.speed,this.dir.y*this.speed))}AddSpineListener(){this.spine.setStartListener((t=>{t.animation&&t.animation.name})),this.spine.setInterruptListener((t=>{var e=t.animation?t.animation.name:"";console.log("[track %s][animation %s] interrupt.",t.trackIndex,e)})),this.spine.setEndListener((t=>{var e=t.animation?t.animation.name:"";console.log("[track %s][animation %s] end.",t.trackIndex,e)})),this.spine.setDisposeListener((t=>{var e=t.animation?t.animation.name:"";console.log("[track %s][animation %s] will be disposed.",t.trackIndex,e)})),this.spine.setCompleteListener((t=>{t.animation&&t.animation.name,Math.floor(t.trackTime/t.animationEnd)})),this.spine.setEventListener(((t,e)=>{t.animation&&t.animation.name;e.data.name,"Replenish"==e.data.name&&(this.reloadCallback&&this.reloadCallback(),this.reloadCallback=null),"jj1"==e.data.name&&this.MeleeAttack(),"jj2"==e.data.name&&this.MeleeAttack()}))}CheckSpine(){for(let t=0;t<y.ItemDataMap.get(A.Weapon).length;t++){let e=y.ItemDataMap.get(A.Weapon)[t];this.spine.getAttachment("gun",e.Name)||console.error(`找不到枪皮肤 Name: ${e.Name}`),this.spine.findBone(e.Name)||console.error(`找不到枪口骨骼 Name: ${e.Name}`)}for(let t=0;t<y.ItemDataMap.get(A.Helmet).length;t++){this.spine.getAttachment("tk",y.ItemDataMap.get(A.Helmet)[t].Name)||console.error(y.ItemDataMap.get(A.Helmet)[t].Name)}for(let t=0;t<y.ItemDataMap.get(A.BodyArmor).length;t++){this.spine.getAttachment("hj",y.ItemDataMap.get(A.BodyArmor)[t].Name)||console.error(y.ItemDataMap.get(A.BodyArmor)[t].Name)}for(let t=0;t<y.ItemDataMap.get(A.Backpack).length;t++){this.spine.getAttachment("bb",y.ItemDataMap.get(A.Backpack)[t].Name)||console.error(y.ItemDataMap.get(A.Backpack)[t].Name)}}DebugSlot(){var t,e,i,n;this.spine.debugSlots=!(null!=(t=this.spine)&&t.debugSlots),this.spine.debugBones=!(null!=(e=this.spine)&&e.debugBones),this.spine.debugMesh=!(null!=(i=this.spine)&&i.debugMesh),this.spine.useTint=!(null!=(n=this.spine)&&n.useTint)}})||_);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CharacterEnemy.ts",["cc","./SJZ_CharacterController.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./SJZ_GameManager.ts","./SJZ_Data.ts","./SJZ_PoolManager.ts","./SJZ_Bullet.ts","./Tools.ts","./SJZ_HPBar.ts","./SJZ_LvManager.ts","./SJZ_Supplies.ts","./SJZ_AudioManager.ts"],(function(t){var e,n,i,s,o,a,r,l,h,d,c,p,u,m,g,S,f,y,D,C,P,T,_,I,v;return{setters:[function(t){e=t.cclegacy,n=t.v3,i=t.Contact2DType,s=t.Vec2,o=t.PhysicsSystem2D,a=t.ERaycast2DType,r=t.RigidBody2D,l=t.v2,h=t.math,d=t.misc,c=t._decorator},function(t){p=t.default,u=t.PlayerAniState},function(t){m=t.SJZ_Constant},function(t){g=t.SJZ_DataManager},function(t){S=t.SJZ_GameManager},function(t){f=t.SJZ_ItemType},function(t){y=t.SJZ_PoolManager},function(t){D=t.default},function(t){C=t.Tools},function(t){P=t.default},function(t){T=t.SJZ_LvManager},function(t){_=t.default},function(t){I=t.SJZ_AudioManager,v=t.SJZ_Audio}],execute:function(){var A;e._RF.push({},"8dbd8rd7WhA+Y3U8svOwB4Y","SJZ_CharacterEnemy",void 0);const{ccclass:Z,property:w}=c,J=n(),W=n();t("default",Z("SJZ_CharacterEnemy")(A=class extends p{constructor(...t){super(...t),this.results=null,this.isDie=!1,this.needMove=!1,this.lostTargetTime=3,this.lostTargetTimer=0}onLoad(){super.onLoad(),this.speed=10,this.MaxHP=100,this.HP=100,this.isDie=!1,this.collider.on(i.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(i.END_CONTACT,this.onEndContact,this);let t=y.Instance.Get(m.Prefab.HPBar,this.node);this.hpBar=t.getComponent(P),this.hpBar.Init(),this.AddSpineListener()}start(){this.RefreshEquip()}RefreshEquip(){this.weapon=g.ItemDataMap.get(f.Weapon).find((t=>"野牛"==t.Name));let t=g.GetItemDataByType(f.Ammo,51314);this.weapon.WeaponData.Ammo=t,this.weapon.WeaponData.Ammo.Count=this.weapon.WeaponData.Clip,this.SetGun(this.weapon)}SetDir(t,e,n){super.SetDir(t,e,n)}SetGunDir(t){super.SetGunDir(t)}StopMove(){super.StopMove()}Die(){this.StopFire(),this.isDie||(this.isDie=!0,this.PlayAni(0,u.Dead,!1),T.Instance.matchData.KilledPE++)}InitDeadBox(){this.scheduleOnce((()=>{this.node.destroy()}));let t=y.Instance.Get(m.Prefab.Supplies,T.Instance.Layer_Supplies);t.setWorldPosition(this.node.getWorldPosition()),t.getComponent(_).InitCharacterCase(!1)}update(t){if(!S.IsGameOver&&S.Instance.player)if(this.isDie)this.rigidbody.linearVelocity=s.ZERO;else{if(S.Instance.player.node.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone()).length()>3e3||this.lostTargetTimer>this.lostTargetTime)return this.StopFire(),void(this.lostTargetTimer=0);if(this.results=o.instance.raycast(this.node.worldPosition,S.Instance.player.node.worldPosition,a.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(r).group==m.Group.Player){const t=this.results[0].collider.node;this.lostTargetTimer=0,J.set(t.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone())),W.set(J),J.normalize(),this.dir.set(J.x,J.y),W.length()<900?(W.length()<500&&(this.needMove=!1),this.SetGunDir(l(J.x,J.y)),this.Fire()):this.needMove=!0}else this.lostTargetTimer+=t;this.needMove?(this.PlayAni(0,u.Move),super.update(t)):(this.PlayAni(0,u.Idle),this.rigidbody.linearVelocity=s.ZERO)}}Fire(){if(!this.isFire){if(S.IsGameOver)return;this.isFire=!0,this.schedule(this.StartFire,.1)}}StartFire(){if(S.IsGameOver)return;if(!this.weapon)return;if(this.weapon.WeaponData.Ammo.Count<=0)return void this.Reload((()=>{this.scheduleOnce((()=>{this.weapon.WeaponData.Ammo.Count=this.weapon.WeaponData.Clip}),2*(h.random()+.3))}));I.Instance.PlaySFX(v.Fire,.3),this.PlayAni(1,u.Shoot);this.weapon.WeaponData.Ammo.Count-=1;const t=this.spine.findBone(this.weapon.Name);for(let e=0;e<1;e++){let e=y.Instance.Get(m.Prefab.Bullet,this.node);e.setWorldPosition(this.spineTrans.convertToWorldSpaceAR(J.set(t.worldX,t.worldY,0))),e.angle=this.character.scale.x<0?180-this.gunBone.rotation:this.gunBone.rotation,e.getComponent(D).Init(this,this.weapon,C.Clone(this.weapon.WeaponData.Ammo),null)}let e=y.Instance.Get(m.Prefab.BulletBlank,this.node);this.spineTrans.convertToWorldSpaceAR(J.set(t.worldX,t.worldY,0),J),e.setWorldPosition(J),e.getComponent(D).InitBlank(this,l(-5*this.character.scale.x,C.GetRandom(5,8)).multiplyScalar(.2))}StopFire(){this.isFire=!1,this.unschedule(this.StartFire),this.StopAni(1)}AddSpineListener(){this.spine.setEventListener(((t,e)=>{"Replenish"==e.data.name&&(this.reloadCallback&&this.reloadCallback(),this.reloadCallback=null),"die"==e.data.name&&this.InitDeadBox()}))}onBeginContact(t,e,i){if("Bullet"==e.node.name){let t=e.node.getComponent(D);if(t.target.rigidbody.group==m.Group.Enemy)return;const s=i.getWorldManifold();let o=y.Instance.Get(m.Prefab.Explosion,T.Instance.Game);o.setWorldPosition(n(s.points[0].x,s.points[0].y)),o.angle=d.radiansToDegrees(l(0,1).signAngle(s.normal.negative()))-90,t&&t.weapon&&(this.TakeDamage(t.weapon,t.ammo),this.scheduleOnce((()=>{y.Instance.Put(e.node)})))}}onEndContact(t,e,n){}onDestroy(){}})||A);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CharacterEnemyRocketSoldier.ts",["cc","./SJZ_CharacterController.ts","./SJZ_Constant.ts","./SJZ_GameManager.ts","./SJZ_PoolManager.ts","./SJZ_Bullet.ts","./SJZ_HPBar.ts","./SJZ_LvManager.ts","./SJZ_Supplies.ts","./SJZ_Missile.ts","./SJZ_AudioManager.ts"],(function(e){var t,i,n,s,o,r,a,l,h,d,c,u,p,S,f,g,y,C,P,m,_,D;return{setters:[function(e){t=e.cclegacy,i=e.v3,n=e.Contact2DType,s=e.Vec2,o=e.PhysicsSystem2D,r=e.ERaycast2DType,a=e.RigidBody2D,l=e.v2,h=e.misc,d=e._decorator},function(e){c=e.default,u=e.PlayerAniState},function(e){p=e.SJZ_Constant},function(e){S=e.SJZ_GameManager},function(e){f=e.SJZ_PoolManager},function(e){g=e.default},function(e){y=e.default},function(e){C=e.SJZ_LvManager},function(e){P=e.default},function(e){m=e.default},function(e){_=e.SJZ_AudioManager,D=e.SJZ_Audio}],execute:function(){var I;t._RF.push({},"6a45c05NR5A/rFXbEJCWzoM","SJZ_CharacterEnemyRocketSoldier",void 0);const{ccclass:v,property:M}=d,Z=i(),J=i();e("default",v("SJZ_CharacterEnemyRocketSoldier")(I=class extends c{constructor(...e){super(...e),this.results=null,this.isDie=!1,this.needMove=!1,this.fireBone=null,this.fireCooldown=0,this.cooldown=1.5}onLoad(){super.onLoad(),this.speed=10,this.MaxHP=100,this.HP=100,this.isDie=!1,this.collider.on(n.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(n.END_CONTACT,this.onEndContact,this);let e=f.Instance.Get(p.Prefab.HPBar,this.node);this.hpBar=e.getComponent(y),this.hpBar.Init(),this.fireBone=this.spine.findBone("fire"),this.AddSpineListener()}start(){this.RefreshEquip()}RefreshEquip(){}SetDir(e,t,i){super.SetDir(e,t,i)}SetGunDir(e){super.SetGunDir(e)}StopMove(){super.StopMove()}Die(){this.isDie||(this.isDie=!0,this.PlayAni(0,u.Dead,!1),C.Instance.matchData.KilledPE++)}InitDeadBox(){this.scheduleOnce((()=>{this.node.destroy()}));let e=f.Instance.Get(p.Prefab.Supplies,C.Instance.Layer_Supplies);e.setWorldPosition(this.node.getWorldPosition()),e.getComponent(P).InitCharacterCase(!1)}update(e){if(!S.IsGameOver&&S.Instance.player)if(this.isDie)this.rigidbody.linearVelocity=s.ZERO;else if(S.Instance.player.node.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone()).length()>3e3)this.StopFire();else{if(this.results=o.instance.raycast(this.node.worldPosition,S.Instance.player.node.worldPosition,r.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(a).group==p.Group.Player){const e=this.results[0].collider.node;Z.set(e.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone())),J.set(Z),Z.normalize(),this.dir.set(Z.x,Z.y),J.length()<900?(J.length()<500&&(this.needMove=!1),this.SetGunDir(l(Z.x,Z.y)),this.Fire()):this.needMove=!0}this.needMove?(this.PlayAni(0,u.Move),super.update(e)):(this.PlayAni(0,u.Idle),this.rigidbody.linearVelocity=s.ZERO)}}Fire(){if(!this.isFire){if(S.IsGameOver)return;this.isFire=!0,this.schedule(this.StartFire,.1)}}StartFire(){if(!S.IsGameOver&&(this.fireCooldown+=.1,this.fireCooldown>=this.cooldown)){this.PlayAni(1,u.Shoot,!1),_.Instance.PlaySFX(D.MissileFire),this.scheduleOnce((()=>{this.StopAni(1)}),.5);let e=f.Instance.Get(p.Prefab.Missile,C.Instance.Game);e.setWorldPosition(this.spineTrans.convertToWorldSpaceAR(Z.set(this.fireBone.worldX,this.fireBone.worldY,0))),e.angle=this.character.scale.x<0?180-this.gunBone.rotation:this.gunBone.rotation,e.getComponent(m).Init(this.node),this.fireCooldown=0}}StopFire(){this.isFire=!1,this.unschedule(this.StartFire),this.StopAni(1)}AddSpineListener(){this.spine.setEventListener(((e,t)=>{"Replenish"==t.data.name&&(this.reloadCallback&&this.reloadCallback(),this.reloadCallback=null),"die"==t.data.name&&this.InitDeadBox()}))}onBeginContact(e,t,n){if("Bullet"==t.node.name){const e=n.getWorldManifold();let s=f.Instance.Get(p.Prefab.Explosion,C.Instance.Game);s.setWorldPosition(i(e.points[0].x,e.points[0].y)),s.angle=h.radiansToDegrees(l(0,1).signAngle(e.normal.negative()))-90;let o=t.node.getComponent(g);if(o.target.rigidbody.group==p.Group.Enemy)return;o&&o.weapon&&(this.TakeDamage(o.weapon,o.ammo),this.scheduleOnce((()=>{f.Instance.Put(t.node)})))}}onEndContact(e,t,i){}onDestroy(){}})||I);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CharacterFengYi.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SJZ_CharacterController.ts","./EventManager.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./SJZ_Data.ts","./SJZ_Bullet.ts","./SJZ_PoolManager.ts","./SJZ_GamePanel.ts","./SJZ_LvManager.ts","./SJZ_GameManager.ts","./SJZ_FloatingText.ts","./Tools.ts","./SJZ_UIManager.ts","./SJZ_AudioManager.ts","./UIManager.ts"],(function(t){var e,i,a,n,o,s,r,l,h,c,p,d,u,m,S,_,D,g,f,y,P,E,R,v,T,I,M,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.v3,o=t._decorator,s=t.Contact2DType,r=t.v2,l=t.PhysicsSystem2D,h=t.ERaycast2DType,c=t.math,p=t.misc},function(t){d=t.default,u=t.PlayerAniState},function(t){m=t.EventManager},function(t){S=t.SJZ_Constant},function(t){_=t.SJZ_DataManager},function(t){D=t.SJZ_AmmoData},function(t){g=t.default},function(t){f=t.SJZ_PoolManager},function(t){y=t.default},function(t){P=t.SJZ_LvManager},function(t){E=t.SJZ_GameManager},function(t){R=t.SJZ_FloatingText},function(t){v=t.Tools},function(t){T=t.SJZ_UIManager},function(t){I=t.SJZ_AudioManager,M=t.SJZ_Audio},function(t){A=t.UIManager}],execute:function(){var F,C,W,w,G;a._RF.push({},"eba64U4vj9Jx4CUtGDB771o","SJZ_CharacterFengYi",void 0);const{ccclass:B,property:J}=o,b=n();t("default",B("SJZ_CharacterFengYi")((W=e((C=class extends d{constructor(...t){super(...t),this.guideTarget=null,i(this,"rollSpeed",W,this),i(this,"rollDuration",w,this),i(this,"rollRotationSpeed",G,this),this._wasForcedRollDirection=!1,this._isRolling=!1,this._rollTimer=0,this._targetRotation=0,this._currentRotation=0,this._rotationDirection=1}get HP(){return this._hp}set HP(t){var e;t<=0&&("训练场"==P.Instance.MapName?t=1:(t=0,this.Die())),this._hp=v.Clamp(t,0,this.MaxHP),null==(e=this.hpBar)||e.Set(this._hp/this.MaxHP)}Die(){this.PlayAni(0,u.Dead,!1),E.IsGameOver=!0,this.StopFire(),this.StopMove(),this.scheduleOnce((()=>{_.PlayerData.ClearBackpack(),T.Instance.ShowPanel(S.Panel.GameOverPanel,[!1,P.Instance.matchData])}),2)}onLoad(){super.onLoad(),this.collider.on(s.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(s.END_CONTACT,this.onEndContact,this),this.AddSpineListener(),this.RigistEvent(),this.HP=600}start(){this.spine.setSkin("dog"),this.hpBar=y.Instance.HPBar,this.RefreshEquip()}RefreshEquip(){let t="",e="",i="";_.PlayerData.Weapon_Helmet&&(t=_.PlayerData.Weapon_Helmet.Name),_.PlayerData.Weapon_BodyArmor&&(e=_.PlayerData.Weapon_BodyArmor.Name),_.PlayerData.BackpackData&&(i=_.PlayerData.BackpackData.Name);let a=this.weapon;a||(_.PlayerData.Weapon_Primary?a=_.PlayerData.Weapon_Primary:_.PlayerData.Weapon_Secondary?a=_.PlayerData.Weapon_Secondary:_.PlayerData.Weapon_Pistol&&(a=_.PlayerData.Weapon_Pistol)),a?this.SetGun(a):this.SetMeelee(),this.SetEquipment(t,e,i)}Roll(){if(this._isRolling)return;this._isRolling=!0,this._rollTimer=this.rollDuration,this._wasForcedRollDirection=0===this.dir.length(),this.character.getChildByName("Spine").active=!1,this.character.getChildByName("roll").active=!0;const t=this.dir.length()>0?this.dir:r(this.character.scale.x<0?-1:1,0);this._rotationDirection=t.x<0?1:-1,this._targetRotation=360*this._rotationDirection,this._currentRotation=0,this.dir=t.normalize(),this.speed=this.rollSpeed}SetDir(t,e,i){E.IsGameOver||(this._isRolling?this.dir.set(t,e):super.SetDir(t,e,i))}SetGunDir(t){E.IsGameOver||super.SetGunDir(t)}StopMove(){super.StopMove()}update(t){if(!E.IsGameOver){if(this._isRolling){if(this.dir.length()>0){const t=this.dir.x<0?1:-1;t!==this._rotationDirection&&(this._rotationDirection=t,this._targetRotation=this._currentRotation+360*t)}const e=(this._targetRotation-this._currentRotation)/this._rollTimer*t;this._currentRotation+=e,this.character.angle=this._currentRotation,this._rollTimer-=t,this._rollTimer<=0&&(this._isRolling=!1,this.character.angle=0,this.StopAni(1),this.character.getChildByName("Spine").active=!0,this.character.getChildByName("roll").active=!1,!this._wasForcedRollDirection&&this.dir.length()>0?this.speed=this.maxSpeed:this.StopMove())}super.update(t)}}Fire(){E.IsGameOver||(this.isFire=!0,this.schedule(this.StartFire,.1))}MeleeAttack(){console.log("近战攻击");let t=this.node.getWorldPosition().clone(),e=t.clone().add(n(this.fireDir.normalize().multiplyScalar(180).x,this.fireDir.normalize().multiplyScalar(180).y));this.results=l.instance.raycast(t,e,h.Closest),this.results&&this.results.length>=1&&this.results[0].collider.group==S.Group.Enemy&&this.results[0].collider.node.getComponent(d).TakeMeleeDamage(10)}Reload(t){this.reloadCallback=t,I.Instance.PlaySFX(M.Reload),this.PlayAni(1,u.Reload,!1)}StartFire(){if(E.IsGameOver)return;if(this.useMelee)return void this.PlayAni(1,u.Attack);if(!this.weapon)return;if(!this.weapon.WeaponData.Ammo)return void this.StopAni(1);if(this.weapon.WeaponData.Ammo.Count<=0)return this.StopFire(),void A.ShowTip("没有子弹");this.useMelee||(I.Instance.PlaySFX(M.Fire),this.PlayAni(1,u.Shoot));this.weapon.WeaponData.Ammo.Count-=1,m.Scene.emit(S.Event.REFRESH_WEAON_CONTENT);const t=this.spine.findBone(this.weapon.Name);for(let e=0;e<1;e++){let e=f.Instance.Get(S.Prefab.Bullet,P.Instance.Layer_Effects);e.setWorldPosition(this.spineTrans.convertToWorldSpaceAR(b.set(t.worldX,t.worldY,0))),e.angle=this.character.scale.x<0?180-this.gunBone.rotation:this.gunBone.rotation,e.getComponent(g).Init(this,this.weapon,this.weapon.WeaponData.Ammo,null)}let e=f.Instance.Get(S.Prefab.BulletBlank,P.Instance.Layer_Effects);this.spineTrans.convertToWorldSpaceAR(b.set(t.worldX,t.worldY,0),b),e.setWorldPosition(b),e.getComponent(g).InitBlank(this,r(-5*this.character.scale.x,v.GetRandom(5,8)).multiplyScalar(.2))}StopFire(){super.StopFire()}TakeDamage(t,e){if(E.IsGameOver)return;let i=t.WeaponData.Damage/4;const a=(t,i,a)=>{let o=Math.floor(a*(1-D.GetDamage(e.AmmoData,i))/2);t.Durability-=o,t.Durability=p.clampf(t.Durability,0,99999);let s=f.Instance.Get(S.Prefab.FloatingText,P.Instance.Game);return s.setWorldPosition(n(this.node.worldPosition.x+20*c.random(),this.node.worldPosition.y+100+20*c.random(),0)),s.getComponent(R).Show(`护甲 -${o}`,"#FFAD00","#AC0000",.3),m.Scene.emit(S.Event.REFRESH_WEAON_CONTENT),a*D.GetDamage(e.AmmoData,i)};let o=!1;if(_.PlayerData.Weapon_Helmet&&c.random()<.5){o=!0;let t=_.PlayerData.Weapon_Helmet.Quality;_.PlayerData.Weapon_Helmet.EquipData.Durability>0&&(i=a(_.PlayerData.Weapon_Helmet.EquipData,t,i))}if(_.PlayerData.Weapon_BodyArmor&&!o&&c.random()<.5){let t=_.PlayerData.Weapon_BodyArmor.Quality;_.PlayerData.Weapon_BodyArmor.EquipData.Durability>0&&(i=a(_.PlayerData.Weapon_BodyArmor.EquipData,t,i))}let s=f.Instance.Get(S.Prefab.FloatingText,this.node);s.setWorldPosition(n(this.node.worldPosition.x+20*c.random(),this.node.worldPosition.y+100+20*c.random(),0)),s.getComponent(R).Show(`-${i}`,"#FF0000","#AC0000",.3),this.HP-=i}onBeginContact(t,e,i){if(e.node.name,e.node.name,"Bullet"==e.node.name){let t=e.node.getComponent(g);if(t.weapon==E.Instance.player.weapon)return;const a=i.getWorldManifold();let o=f.Instance.Get(S.Prefab.Explosion,P.Instance.Game);o.setWorldPosition(n(a.points[0].x,a.points[0].y)),o.angle=p.radiansToDegrees(r(0,1).signAngle(a.normal.negative()))-90,t&&t.weapon&&(this.TakeDamage(t.weapon,t.ammo),this.scheduleOnce((()=>{f.Instance.Put(e.node)})))}if("Missile"==e.node.name){const t=i.getWorldManifold();I.Instance.PlaySFX(M.MissileExplosion),f.Instance.Get(S.Prefab.MissileExplosion,P.Instance.Game).setWorldPosition(n(t.points[0].x,t.points[0].y)),this.scheduleOnce((()=>{f.Instance.Put(e.node)}));let a=f.Instance.Get(S.Prefab.FloatingText,this.node);a.setWorldPosition(n(this.node.worldPosition.x+20*c.random(),this.node.worldPosition.y+100+20*c.random(),0)),a.getComponent(R).Show("-30","#FF0000","#AC0000",.3),this.HP-=30}e.node.name}onEndContact(t,e,i){e.node.name,e.node.name,e.node.name}onDisable(){this.UnrigistEvent()}onDestroy(){E.Instance.player=null}RigistEvent(){m.Scene.on(S.Event.MOVEMENT,this.SetDir,this),m.Scene.on(S.Event.Roll,this.Roll,this),m.Scene.on(S.Event.MOVEMENT_STOP,this.StopMove,this),m.Scene.on(S.Event.SET_ATTACK_DIR,this.SetGunDir,this),m.Scene.on(S.Event.FIRE_START,this.Fire,this),m.Scene.on(S.Event.FIRE_STOP,this.StopFire,this),m.Scene.on(S.Event.REFRESH_EUIP,this.RefreshEquip,this)}UnrigistEvent(){m.Scene.off(S.Event.MOVEMENT,this.SetDir,this),m.Scene.off(S.Event.Roll,this.Roll,this),m.Scene.off(S.Event.MOVEMENT_STOP,this.StopMove,this),m.Scene.off(S.Event.SET_ATTACK_DIR,this.SetGunDir,this),m.Scene.off(S.Event.FIRE_START,this.Fire,this),m.Scene.off(S.Event.FIRE_STOP,this.StopFire,this),m.Scene.off(S.Event.REFRESH_EUIP,this.RefreshEquip,this)}}).prototype,"rollSpeed",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),w=e(C.prototype,"rollDuration",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),G=e(C.prototype,"rollRotationSpeed",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),F=C))||F);a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CharacterLS.ts",["cc","./SJZ_CharacterController.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./SJZ_GameManager.ts","./SJZ_Data.ts","./SJZ_PoolManager.ts","./SJZ_Bullet.ts","./Tools.ts","./SJZ_HPBar.ts","./SJZ_LvManager.ts","./SJZ_Supplies.ts","./SJZ_AudioManager.ts"],(function(t){var e,i,n,s,o,a,r,l,h,c,d,u,p,g,m,S,f,y,D,P,_,C,I,T,Z;return{setters:[function(t){e=t.cclegacy,i=t.v3,n=t.Contact2DType,s=t.Vec2,o=t.PhysicsSystem2D,a=t.ERaycast2DType,r=t.RigidBody2D,l=t.v2,h=t.math,c=t.misc,d=t._decorator},function(t){u=t.default,p=t.PlayerAniState},function(t){g=t.SJZ_Constant},function(t){m=t.SJZ_DataManager},function(t){S=t.SJZ_GameManager},function(t){f=t.SJZ_ItemType},function(t){y=t.SJZ_PoolManager},function(t){D=t.default},function(t){P=t.Tools},function(t){_=t.default},function(t){C=t.SJZ_LvManager},function(t){I=t.default},function(t){T=t.SJZ_AudioManager,Z=t.SJZ_Audio}],execute:function(){var v;e._RF.push({},"e83a2XILiBIX4ivypHfNg4s","SJZ_CharacterLS",void 0);const{ccclass:G,property:J}=d,B=i(),W=i();t("default",G("SJZ_CharacterLS")(v=class extends u{constructor(...t){super(...t),this.isDie=!1,this.needMove=!1,this.lostTargetTime=3,this.lostTargetTimer=0,this.ani=p.LS_Idle}onLoad(){super.onLoad(),this.speed=12,this.MaxHP=100,this.HP=100,this.isDie=!1,this.collider.on(n.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(n.END_CONTACT,this.onEndContact,this);let t=y.Instance.Get(g.Prefab.HPBar,this.node);t.setPosition(0,170),this.hpBar=t.getComponent(_),this.hpBar.Init()}start(){this.RefreshEquip()}RefreshEquip(){let t=m.ItemDataMap.get(f.Weapon).find((t=>"S12K"==t.Name)),e=m.GetItemDataByType(f.Ammo,50851);e||console.error("找不到子弹数据 ID：51102"),t.WeaponData.Ammo=e,t.WeaponData.Ammo.Count=t.WeaponData.Clip,this.SetGun(t)}SetDir(t,e,i){super.SetDir(t,e,i)}SetGunDir(t){super.SetGunDir(t)}Die(){this.isDie||(this.isDie=!0,this.InitDeadBox(),C.Instance.matchData.KilledPE++)}InitDeadBox(){this.scheduleOnce((()=>{this.node.destroy()}));let t=y.Instance.Get(g.Prefab.Supplies,C.Instance.Game);t.setWorldPosition(this.node.getWorldPosition()),t.getComponent(I).InitCharacterCase(!0)}update(t){if(!S.IsGameOver&&S.Instance.player)if(this.isDie)this.rigidbody.linearVelocity=s.ZERO;else{if(S.Instance.player.node.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone()).length()>3e3||this.lostTargetTimer>this.lostTargetTime)return this.StopFire(),this.needMove=!1,void(this.lostTargetTimer=0);if(this.results=o.instance.raycast(this.node.worldPosition,S.Instance.player.node.worldPosition,a.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(r).group==g.Group.Player){const t=this.results[0].collider.node;this.lostTargetTimer=0,B.set(t.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone())),W.set(B),B.normalize(),this.dir.set(B.x,B.y),this.needMove=!0,W.length()<300?(this.needMove=!1,this.Fire()):W.length()<900&&(this.ani=p.LS_Move,this.Fire()),this.SetGunDir(l(B.x,B.y))}else this.lostTargetTimer+=t;this.needMove?(this.PlayAni(0,this.ani),super.update(t)):(this.PlayAni(0,p.LS_Idle),this.rigidbody.linearVelocity=s.ZERO)}}Fire(){if(!this.isFire){if(S.IsGameOver)return;this.isFire=!0,this.schedule(this.StartFire,1)}}StartFire(){if(S.IsGameOver)return;if(!this.weapon)return;if(this.weapon.WeaponData.Ammo.Count<=0)return void this.Reload((()=>{this.scheduleOnce((()=>{this.weapon.WeaponData.Ammo.Count=this.weapon.WeaponData.Clip}),2*(h.random()+.3))}));console.error("射击"),this.PlayAni(1,p.LS_Shoot),T.Instance.PlaySFX(Z.Fire,.3);const t=this.spine.findBone(this.weapon.Name);for(let e=0;e<5;e++){let e=y.Instance.Get(g.Prefab.Bullet,this.node);e.setWorldPosition(this.spineTrans.convertToWorldSpaceAR(B.set(t.worldX,t.worldY,0)));let i=P.GetRandom(-10,10);e.angle=this.character.scale.x<0?180-this.gunBone.rotation+i:this.gunBone.rotation+i,e.getComponent(D).Init(this,this.weapon,P.Clone(this.weapon.WeaponData.Ammo),null)}let e=y.Instance.Get(g.Prefab.BulletBlank,this.node);this.spineTrans.convertToWorldSpaceAR(B.set(t.worldX,t.worldY,0),B),e.setWorldPosition(B),e.getComponent(D).InitBlank(this,l(-5*this.character.scale.x,P.GetRandom(5,8)).multiplyScalar(.2))}StopFire(){this.isFire=!1,this.unschedule(this.StartFire),this.StopAni(1)}onBeginContact(t,e,n){if("Bullet"==e.node.name){const t=n.getWorldManifold();let s=y.Instance.Get(g.Prefab.Explosion,C.Instance.Game);s.setWorldPosition(i(t.points[0].x,t.points[0].y)),s.angle=c.radiansToDegrees(l(0,1).signAngle(t.normal.negative()))-90;let o=e.node.getComponent(D);if(o.target.rigidbody.group==g.Group.Enemy)return;o&&o.weapon&&(this.TakeDamage(o.weapon,o.ammo),this.scheduleOnce((()=>{y.Instance.Put(e.node)})))}}onEndContact(t,e,i){}onDestroy(){}})||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CharacterStickman.ts",["cc","./SJZ_CharacterController.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./SJZ_GameManager.ts","./SJZ_Data.ts","./SJZ_PoolManager.ts","./SJZ_Bullet.ts","./Tools.ts","./SJZ_HPBar.ts","./SJZ_LvManager.ts","./SJZ_Supplies.ts"],(function(t){var e,n,i,s,o,a,r,l,h,c,d,p,u,m,S,g,f,D,C,P,y,I,_;return{setters:[function(t){e=t.cclegacy,n=t.v3,i=t.Contact2DType,s=t.Vec2,o=t.PhysicsSystem2D,a=t.ERaycast2DType,r=t.RigidBody2D,l=t.v2,h=t.math,c=t.misc,d=t._decorator},function(t){p=t.default,u=t.PlayerAniState},function(t){m=t.SJZ_Constant},function(t){S=t.SJZ_DataManager},function(t){g=t.SJZ_GameManager},function(t){f=t.SJZ_ItemType},function(t){D=t.SJZ_PoolManager},function(t){C=t.default},function(t){P=t.Tools},function(t){y=t.default},function(t){I=t.SJZ_LvManager},function(t){_=t.default}],execute:function(){var v;e._RF.push({},"47e83M9kBBILZsqnw2Ijnx+","SJZ_CharacterStickman",void 0);const{ccclass:Z,property:B}=d,W=n(),A=n();t("default",Z("SJZ_CharacterStickman")(v=class extends p{constructor(...t){super(...t),this.results=null,this.isDie=!1,this.needMove=!1}onLoad(){super.onLoad(),this.speed=10,this.MaxHP=100,this.HP=100,this.isDie=!1,this.collider.on(i.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(i.END_CONTACT,this.onEndContact,this);let t=D.Instance.Get(m.Prefab.HPBar,this.node);this.hpBar=t.getComponent(y),this.hpBar.Init(),this.AddSpineListener()}start(){this.RefreshEquip()}RefreshEquip(){let t=S.ItemDataMap.get(f.Weapon).find((t=>"野牛"==t.Name)),e=S.ItemDataMap.get(f.Ammo).find((t=>51602==t.ID));t.WeaponData.Ammo=e,t.WeaponData.Ammo.Count=t.WeaponData.Clip,this.SetGun(t)}SetDir(t,e,n){super.SetDir(t,e,n)}SetGunDir(t){super.SetGunDir(t)}StopMove(){super.StopMove()}Die(){this.isDie||(this.isDie=!0,this.PlayAni(0,u.Dead,!1),I.Instance.matchData.KilledPE++)}InitDeadBox(){this.scheduleOnce((()=>{this.node.destroy()}));let t=D.Instance.Get(m.Prefab.Supplies,I.Instance.Game);t.setWorldPosition(this.node.getWorldPosition()),t.getComponent(_).InitCharacterCase(!1)}update(t){if(!g.IsGameOver&&g.Instance.player)if(this.isDie)this.rigidbody.linearVelocity=s.ZERO;else if(g.Instance.player.node.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone()).length()>3e3)this.StopFire();else{if(this.results=o.instance.raycast(this.node.worldPosition,g.Instance.player.node.worldPosition,a.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(r).group==m.Group.Player){const t=this.results[0].collider.node;W.set(t.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone())),A.set(W),W.normalize(),this.dir.set(W.x,W.y),A.length()<900?(A.length()<500&&(this.needMove=!1),this.SetGunDir(l(W.x,W.y)),this.Fire()):this.needMove=!0}this.needMove?(this.PlayAni(0,u.Move),super.update(t)):(this.PlayAni(0,u.Idle),this.rigidbody.linearVelocity=s.ZERO)}}Fire(){if(!this.isFire){if(g.IsGameOver)return;this.isFire=!0,this.schedule(this.StartFire,.1)}}StartFire(){if(g.IsGameOver)return;if(!this.weapon)return;if(this.weapon.WeaponData.Ammo.Count<=0)return void this.Reload((()=>{this.scheduleOnce((()=>{this.weapon.WeaponData.Ammo.Count=this.weapon.WeaponData.Clip}),2*(h.random()+.3))}));this.PlayAni(1,u.Shoot);this.weapon.WeaponData.Ammo.Count-=1;const t=this.spine.findBone(this.weapon.Name);for(let e=0;e<1;e++){let e=D.Instance.Get(m.Prefab.Bullet,this.node);e.setWorldPosition(this.spineTrans.convertToWorldSpaceAR(W.set(t.worldX,t.worldY,0))),e.angle=this.character.scale.x<0?180-this.gunBone.rotation:this.gunBone.rotation,e.getComponent(C).Init(this.node,this.weapon,P.Clone(this.weapon.WeaponData.Ammo),null)}let e=D.Instance.Get(m.Prefab.BulletBlank,this.node);this.spineTrans.convertToWorldSpaceAR(W.set(t.worldX,t.worldY,0),W),e.setWorldPosition(W),e.getComponent(C).InitBlank(this.node,l(-5*this.character.scale.x,P.GetRandom(5,8)).multiplyScalar(.2))}StopFire(){this.isFire=!1,this.unschedule(this.StartFire),this.StopAni(1)}AddSpineListener(){this.spine.setEventListener(((t,e)=>{"Replenish"==e.data.name&&(this.reloadCallback&&this.reloadCallback(),this.reloadCallback=null),"die"==e.data.name&&this.InitDeadBox()}))}onBeginContact(t,e,i){if("Bullet"==e.node.name){const t=i.getWorldManifold();let s=D.Instance.Get(m.Prefab.Explosion,I.Instance.Game);s.setWorldPosition(n(t.points[0].x,t.points[0].y)),s.angle=c.radiansToDegrees(l(0,1).signAngle(t.normal.negative()))-90;let o=e.node.getComponent(C);o&&o.weapon&&(this.TakeDamage(o.weapon,o.ammo),this.scheduleOnce((()=>{D.Instance.Put(e.node)})))}}onEndContact(t,e,n){}onDestroy(){}})||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CharacterSYD.ts",["cc","./SJZ_CharacterController.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./SJZ_GameManager.ts","./SJZ_Data.ts","./SJZ_PoolManager.ts","./SJZ_Bullet.ts","./Tools.ts","./SJZ_HPBar.ts","./SJZ_LvManager.ts","./SJZ_Supplies.ts","./SJZ_AudioManager.ts"],(function(t){var e,i,n,s,o,a,r,l,h,d,c,u,p,g,m,S,f,D,y,C,P,I,T,_,A;return{setters:[function(t){e=t.cclegacy,i=t.v3,n=t.Contact2DType,s=t.Vec2,o=t.PhysicsSystem2D,a=t.ERaycast2DType,r=t.RigidBody2D,l=t.v2,h=t.math,d=t.misc,c=t._decorator},function(t){u=t.default,p=t.PlayerAniState},function(t){g=t.SJZ_Constant},function(t){m=t.SJZ_DataManager},function(t){S=t.SJZ_GameManager},function(t){f=t.SJZ_ItemType},function(t){D=t.SJZ_PoolManager},function(t){y=t.default},function(t){C=t.Tools},function(t){P=t.default},function(t){I=t.SJZ_LvManager},function(t){T=t.default},function(t){_=t.SJZ_AudioManager,A=t.SJZ_Audio}],execute:function(){var M;e._RF.push({},"e8e694zF1RDxaPg24ecTJkU","SJZ_CharacterSYD",void 0);const{ccclass:v,property:Z}=c,J=i(),G=i();t("default",v("SJZ_CharacterSYD")(M=class extends u{constructor(...t){super(...t),this.isDie=!1,this.needMove=!1,this.lostTargetTime=3,this.lostTargetTimer=0,this.ani=p.Idle}onLoad(){super.onLoad(),this.speed=12,this.MaxHP=100,this.HP=100,this.isDie=!1,this.collider.on(n.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(n.END_CONTACT,this.onEndContact,this);let t=D.Instance.Get(g.Prefab.HPBar,this.node);this.hpBar=t.getComponent(P),this.hpBar.Init(),this.SetAniMix(p.Idle,p.Move),this.SetAniMix(p.Move,p.Roll),this.SetAniMix(p.Idle,p.Roll),this.SetAniMix(p.Hit,p.Shoot),this.AddSpineListener()}start(){this.RefreshEquip()}RefreshEquip(){let t=m.ItemDataMap.get(f.Weapon).find((t=>"M249"==t.Name)),e=m.GetItemDataByType(f.Ammo,50851);e||console.error("找不到子弹数据 ID：51102"),t.WeaponData.Ammo=e,t.WeaponData.Ammo.Count=t.WeaponData.Clip,this.SetGun(t)}SetDir(t,e,i){super.SetDir(t,e,i)}SetGunDir(t){super.SetGunDir(t)}Die(){this.isDie||(this.isDie=!0,this.PlayAni(0,p.Dead,!1),I.Instance.matchData.KilledPE++)}InitDeadBox(){this.scheduleOnce((()=>{this.node.destroy()}));let t=D.Instance.Get(g.Prefab.Supplies,I.Instance.Game);t.setWorldPosition(this.node.getWorldPosition()),t.getComponent(T).InitCharacterCase(!0)}update(t){if(!S.IsGameOver&&S.Instance.player)if(this.isDie)this.rigidbody.linearVelocity=s.ZERO;else{if(S.Instance.player.node.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone()).length()>3e3||this.lostTargetTimer>this.lostTargetTime)return this.StopFire(),this.needMove=!1,void(this.lostTargetTimer=0);if(this.results=o.instance.raycast(this.node.worldPosition,S.Instance.player.node.worldPosition,a.Closest),this.results&&this.results.length>=1&&this.results[0].collider.node.getComponent(r).group==g.Group.Player){const t=this.results[0].collider.node;this.lostTargetTimer=0,J.set(t.getWorldPosition().clone().subtract(this.node.getWorldPosition().clone())),G.set(J),J.normalize(),this.dir.set(J.x,J.y),this.needMove=!0,G.length()<300?(this.needMove=!1,this.Fire()):G.length()<600?(this.ani=p.Roll,this.StopFire()):G.length()<900&&(this.ani=p.Move,this.Fire()),this.SetGunDir(l(J.x,J.y))}else this.lostTargetTimer+=t;this.needMove?(this.PlayAni(0,this.ani),super.update(t)):(this.PlayAni(0,p.Idle),this.rigidbody.linearVelocity=s.ZERO)}}Fire(){if(!this.isFire){if(S.IsGameOver)return;this.isFire=!0,this.schedule(this.StartFire,.1)}}StartFire(){if(S.IsGameOver)return;if(!this.weapon)return;if(this.weapon.WeaponData.Ammo.Count<=0)return void this.Reload((()=>{this.scheduleOnce((()=>{this.weapon.WeaponData.Ammo.Count=this.weapon.WeaponData.Clip}),2*(h.random()+.3))}));this.PlayAni(1,p.Shoot),_.Instance.PlaySFX(A.Fire,.3);this.weapon.WeaponData.Ammo.Count-=1;const t=this.spine.findBone(this.weapon.Name);for(let e=0;e<1;e++){let e=D.Instance.Get(g.Prefab.Bullet,this.node);e.setWorldPosition(this.spineTrans.convertToWorldSpaceAR(J.set(t.worldX,t.worldY,0))),e.angle=this.character.scale.x<0?180-this.gunBone.rotation:this.gunBone.rotation,e.getComponent(y).Init(this,this.weapon,C.Clone(this.weapon.WeaponData.Ammo),null)}let e=D.Instance.Get(g.Prefab.BulletBlank,this.node);this.spineTrans.convertToWorldSpaceAR(J.set(t.worldX,t.worldY,0),J),e.setWorldPosition(J),e.getComponent(y).InitBlank(this,l(-5*this.character.scale.x,C.GetRandom(5,8)).multiplyScalar(.2))}StopFire(){this.isFire=!1,this.unschedule(this.StartFire),this.StopAni(1)}AddSpineListener(){this.spine.setEventListener(((t,e)=>{"Replenish"==e.data.name&&(this.reloadCallback&&this.reloadCallback(),this.reloadCallback=null),"die"==e.data.name&&this.InitDeadBox()}))}onBeginContact(t,e,n){if("Bullet"==e.node.name){const t=n.getWorldManifold();let s=D.Instance.Get(g.Prefab.Explosion,I.Instance.Game);s.setWorldPosition(i(t.points[0].x,t.points[0].y)),s.angle=d.radiansToDegrees(l(0,1).signAngle(t.normal.negative()))-90;let o=e.node.getComponent(y);if(o.target.rigidbody.group==g.Group.Enemy)return;o&&o.weapon&&(this.TakeDamage(o.weapon,o.ammo),this.scheduleOnce((()=>{D.Instance.Put(e.node)})))}}onEndContact(t,e,i){}onDestroy(){}})||M);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_ChestRigInventory.ts",["cc","./NodeUtil.ts","./SJZ_DataManager.ts","./SJZ_Constant.ts","./SJZ_Data.ts","./SJZ_GridCell.ts","./SJZ_PoolManager.ts","./Tools.ts","./SJZ_Inventory.ts","./BundleManager.ts","./GameManager.ts","./SJZ_GameManager.ts","./EventManager.ts","./SJZ_UIManager.ts","./UIManager.ts","./SJZ_AudioManager.ts"],(function(t){var e,a,n,i,s,r,o,l,h,u,g,C,D,S,c,m,I,p,P,d,R;return{setters:[function(t){e=t.cclegacy,a=t.UITransform,n=t.Label,i=t.Sprite,s=t._decorator},function(t){r=t.default},function(t){o=t.SJZ_DataManager},function(t){l=t.SJZ_Constant},function(t){h=t.SJZ_ItemType},function(t){u=t.GridCellState},function(t){g=t.SJZ_PoolManager},function(t){C=t.Tools},function(t){D=t.default},function(t){S=t.BundleManager},function(t){c=t.GameManager},function(t){m=t.SJZ_GameManager},function(t){I=t.EventManager},function(t){p=t.SJZ_UIManager},function(t){P=t.UIManager},function(t){d=t.SJZ_AudioManager,R=t.SJZ_Audio}],execute:function(){var y;e._RF.push({},"1ee465ppjxNO4oIWxYw5uN4","SJZ_ChestRigInventory",void 0);const{ccclass:f,property:T}=s;t("default",f("SJZ_ChestRigInventory")(y=class extends D{constructor(...t){super(...t),this.Item=null,this.ItemLabel=null,this.Icon=null,this.PutTip=null,this.ndTrans=null,this.inBox=!1}onLoad(){this.Item=r.GetComponent("Item",this.node,a),this.ItemLabel=r.GetComponent("ItemLabel",this.node,n),this.ItemContent=r.GetNode("ItemContent",this.node),this.ItemContentTrans=this.ItemContent.getComponent(a),this.Icon=r.GetComponent("Icon",this.node,i),this.PutTip=r.GetComponent("PutTip",this.node,i),this.ndTrans=this.node.getComponent(a)}Refresh(){let t=o.PlayerData.ChestRigData;if(t){let e=t.EquipData.CarryingSpace.width,a=t.EquipData.CarryingSpace.height;this.ItemContentTrans.setContentSize(e*l.itemSize,a*l.itemSize),this.ndTrans.setContentSize(170+e*l.itemSize+20,150+a*l.itemSize),this.ItemLabel.string=t.Name,S.LoadSpriteFrame(c.GameData.DefaultBundle,`Res/Items/${t.ImageId}`).then((t=>{this.Icon.spriteFrame=t,m.SetImagePreferScale(this.Icon,130,130)})),super.Init(t.EquipData.ItemData,o.PlayerData.ChestRigGrid)}else this.ClearItems(),this.Icon.spriteFrame=null,this.ItemContentTrans.setContentSize(0,0),this.ndTrans.setContentSize(170,250),this.ItemLabel.string="胸挂"}EquipChestRig(t){o.PlayerData.EquipChestRig(t),this.Refresh()}CanEquipChestRig(t,e){if(this.Item.getBoundingBoxToWorld().contains(e)){this.inBox=!0;let e=t.Type==h.ChestRig&&null==o.PlayerData.ChestRigData;return this.SetPutTipState(e?u.CanPut:u.CanntPut),e}return this.inBox&&(this.ClearPutTipState(),this.inBox=!1),!1}SetPutTipState(t){this.PutTip.color=C.GetColorFromHex(t)}ClearPutTipState(){this.PutTip.color=C.GetColorFromHex(u.None)}OnDragStart(t){o.PlayerData.ChestRigData&&super.OnDragStart(t)}OnDragging(t,e){this.CanEquipChestRig(t.data,e),o.PlayerData.ChestRigData&&super.OnDragging(t,e)}OnDragEnd(t,e){if(this.CanEquipChestRig(t.data,e))return this.ClearPutTipState(),t.RemoveItemFromAndResetLastInventory(),this.EquipChestRig(t.data),g.Instance.Put(t.node),o.SaveData(),void m.Instance.HideTipCells();this.ClearPutTipState(),o.PlayerData.ChestRigData&&super.OnDragEnd(t,e)}OnButtonClick(t){switch(d.Instance.PlaySFX(R.ButtonClick),t.target.name){case"Item":if(!o.PlayerData.ChestRigData)return;p.Instance.ShowPanel(l.Panel.ItemInfoPanel,[o.PlayerData.ChestRigData,!0,t=>{"Sell"==t&&(o.PlayerData.ChestRigData&&0==o.PlayerData.ChestRigData.EquipData.ItemData.length?(P.ShowTip(`出售成功，获得${o.PlayerData.ChestRigData.Price.toLocaleString()}`),o.PlayerData.Money+=o.PlayerData.ChestRigData.Price,o.PlayerData.ChestRigData=null,this.Refresh()):o.PlayerData.ChestRigData.EquipData.ItemData.length>0&&P.ShowTip("出售失败，胸挂中还有物品")),"Takeoff"==t&&(o.PlayerData.ChestRigData&&0==o.PlayerData.ChestRigData.EquipData.ItemData.length?(o.PlayerData.AddItemToInventory(o.PlayerData.ChestRigData)?(I.Scene.emit(l.Event.REFRESH_INVENTORY_ITEMS),o.PlayerData.ChestRigData=null):P.ShowTip("放入失败"),this.Refresh()):o.PlayerData.ChestRigData.EquipData.ItemData.length>0&&P.ShowTip("放入失败，胸挂中还有物品"))}])}}})||y);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_CommonItem.ts",["cc","./NodeUtil.ts","./SJZ_Data.ts","./BundleManager.ts","./SJZ_GameManager.ts","./GameManager.ts","./SJZ_AudioManager.ts"],(function(t){var e,a,n,s,i,o,l,c,h,u,r,d,m,g,b;return{setters:[function(t){e=t.cclegacy,a=t.Component,n=t.Label,s=t.Sprite,i=t.RichText,o=t.Button,l=t._decorator},function(t){c=t.default},function(t){h=t.SJZ_ItemType,u=t.SJZ_ItemData},function(t){r=t.BundleManager},function(t){d=t.SJZ_GameManager},function(t){m=t.GameManager},function(t){g=t.SJZ_AudioManager,b=t.SJZ_Audio}],execute:function(){var p;e._RF.push({},"3921ftt/FtBRq8BSCDyMnI8","SJZ_CommonItem",void 0);const{ccclass:I,property:S}=l;t("default",I("SJZ_CommonItem")(p=class extends a{constructor(...t){super(...t),this.Background=null,this.Icon=null,this.NameLabel=null,this.DescLabel=null,this.Button=null,this.data=null,this.callback=null}onLoad(){this.NameLabel=c.GetComponent("NameLabel",this.node,n),this.Background=c.GetComponent("Background",this.node,s),this.Icon=c.GetComponent("Icon",this.node,s),this.DescLabel=c.GetComponent("DescLabel",this.node,i),this.Button=this.node.getComponent(o)}Refresh(){this.NameLabel.string=this.data.Name,r.LoadSpriteFrame(m.GameData.DefaultBundle,`Res/Items/${this.data.ImageId}`).then((t=>{this.Icon.spriteFrame=t,d.SetImagePreferScale(this.Icon,100,100)})),this.Background.color=d.GetColorHexByQuality(this.data.Quality),this.data.Type==h.Ammo?this.DescLabel.string=`${this.data.Count}`:u.IsConsumable(this.data.Type)?this.DescLabel.string=`${this.data.ConsumableData.Durability}`:this.DescLabel.string=this.data.Desc}InitDisplay(t){this.data=t,this.Button.enabled=!1,this.Icon.spriteFrame=null,this.Refresh()}SetDescStr(t){this.DescLabel.string=t}Init(t,e){this.data=t,this.callback=e,this.Button.enabled=!0,this.Refresh()}OnButtonClick(){g.Instance.PlaySFX(b.ButtonClick),this.callback&&this.callback(this.data)}})||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Constant.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"b3146/ICf1Emb0tHWrKbGFj","SJZ_Constant",void 0);e("SJZ_Quality",function(e){return e[e.None=0]="None",e[e.Common=1]="Common",e[e.Uncommon=2]="Uncommon",e[e.Rare=3]="Rare",e[e.Superior=4]="Superior",e[e.Legendary=5]="Legendary",e[e.Mythic=6]="Mythic",e}({})),e("SJZ_QualityColorHex",function(e){return e.None="#FFFFFF00",e.Common="#FFFFFF3C",e.Uncommon="#2FA1703C",e.Rare="#276ABF3C",e.Superior="#7430B93C",e.Legendary="#E09A1A3C",e.Mythic="#F03A393C",e}({}));class a{}e("SJZ_Constant",a),a.SearchTime=[0,.2,.5,1,1.5,2,2.5],a.itemSize=100,a.MapInfo={"零号大坝":{Name:"零号大坝",EntryCosts:[0,112500],LevelRequirements:[0,12],TimeLimit:"25:00",MapName:"SJZ_Lv_1"},"长弓溪谷":{Name:"长弓溪谷",EntryCosts:[0,112500],LevelRequirements:[0,12],TimeLimit:"25:00",MapName:"SJZ_Lv_2"},"烽火荣都":{Name:"烽火荣都",EntryCosts:[0,212500],LevelRequirements:[0,12],TimeLimit:"30:00",MapName:"SJZ_Lv_3"}},a.Audio={BG:"BG",BG2:"BG2",Equip:"Equip",Unequip:"Unequip",Fire:"Fire",GetMoney:"GetMoney",Reload:"Reload",ButtonClick:"ButtonClick"},a.WorkbenchName=["","武器台","护甲台","子弹台","药品台"],a.Scene={Main:"Main"},a.Path={Tip:"Prefabs/UI/Tip",Broadcast:"Prefabs/UI/Broadcast",FloatingText:"Prefabs/UI/FloatingText"},a.Panel={InventoryPanel:"Panel/InventoryPanel",ItemInfoPanel:"Panel/ItemInfoPanel",ShopPanel:"Panel/ShopPanel",SelectSafeBoxPanel:"Panel/SelectSafeBoxPanel",SelectMapPanel:"Panel/SelectMapPanel",SafeBoxPanel:"Panel/SafeBoxPanel",GameOverPanel:"Panel/GameOverPanel",UpgradePanel:"Panel/UpgradePanel",OutputPanel:"Panel/OutputPanel",SellPanel:"Panel/SellPanel",WorkbenchPanel:"Panel/WorkbenchPanel",RewardPanel:"Panel/RewardPanel",SkinShopPanel:"Panel/SkinShopPanel",AccessoriesPanel:"Panel/AccessoriesPanel",TutorialPanel:"Panel/TutorialPanel"},a.Prefab={Item:"Item",CommonItem:"CommonItem",SkinItem:"SkinItem",GridCell:"GridCell",Bullet:"Bullet",BulletBlank:"BulletBlank",Missile:"Missile",MissileExplosion:"MissileExplosion",Explosion:"Explosion",GunFire:"GunFire",HPBar:"HPBar",Supplies:"Supplies",OutputItem:"OutputItem",FloatingText:"FloatingText"},a.Key={FirstInGame:"FirstInGame",isHavePassTutorial:"isHavePassTutorial",Money:"Money",EnergyBattery:"EnergyBattery",KCQB:"KCQB",SkinPiece:"SkinPiece",HuiZhangPiece:"HuiZhangPiece",EXP:"EXP",RankPoint:"RankPoint",Items:"Items",PlayerData:"PlayerData",AgreePolicy:"AgreePoliaacy",GameData:"GameData",UnlockSeason:"Season",FreeReward:"FreeReward",AchievementTimes:"AchievementTimes",FirstPutInventory:"FirstPutInventory"},a.Event={REFRESH_MONEY:"REFRESH_MONEY",REFRESH_INVENTORY_ITEMS:"REFRESH_INVENTORY_ITEMS",REFRESH_BACKPACK_ITEMS:"REFRESH_BACKPACK_ITEMS",REFRESH_CONTENT_SIZE:"REFRESH_CONTENT_SIZE",REFRESH_EUIP:"REFRESH_EUIP",REFRESH_EUIP_ITEMS:"REFRESH_INVENTORY_ITEMS",REFRESH_GAME_ITEM_UI:"REFRESH_GAME_ITEM_UI",REFRESH_WEAON_CONTENT:"REFRESH_WEAON_CONTENT",MOVEMENT:"MOVEMENT",MOVEMENT_STOP:"MOVEMENT_STOP",SET_ATTACK_DIR:"SET_ATTACK_DIR",FIRE_START:"FIRE_START",FIRE_STOP:"FIRE_STOP",SHOW_INTERACT_BUTTON:"SHOW_INTERACT_BUTTON",Roll:"Roll",SHOW_EVACUATION:"SHOW_EVACUATION",HIDE_EVACUATION:"HIDE_EVACUATION",SHOW_TUTORIAL:"SHOW_TUTORIAL",HIDE_TUTORIAL:"HIDE_TUTORIAL",ON_ITEM_DRAGSTART:"ON_ITEM_DRAGSTART",ON_ITEM_DRAGGING:"ON_ITEM_DRAGGING",ON_ITEM_DRAGEND:"ON_ITEM_DRAGEND"},a.Group={Player:2,Enemy:4,Bullet:8,Obstacle:16,Interact:32},a.FirstOpenSafeBox=["勋章","摄影机"],a.FirstOpenWeaponBox=["沙漠之鹰","稳定型芯片A"],a.Showcases=["摄影机","显卡","军用无人机","军用电台","笔记本电脑","刀片服务器","高速磁盘阵列","G.T.I卫星通信天线","飞行记录仪","军用控制终端","曼德尔超算单元","便携军用雷达","军用信息终端","绝密服务器","云存储阵列","呼吸机","自动体外除颤器","复苏呼吸机","医疗机械人","强化碳纤维板","军用炮弹","奥莉薇娅香槟","名贵机械表","扫拖一体机器人","强力吸尘器","高级咖啡豆","黄金瞪羚","克劳迪乌斯半身像","棘龙爪化石","滑膛枪展品","万足金条","赛伊德的怀表","主战坦克模型","步战车模型","万金泪冠","“天圆地方”","“纵横”","雷斯的留声机","实验数据","量子存储","火箭燃料","非洲之心","装甲车电池","动力电池组"],n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_ContainerInventory.ts",["cc","./NodeUtil.ts","./SJZ_Constant.ts","./SJZ_Data.ts","./SJZ_Inventory.ts"],(function(t){var n,e,i,o,r,s,a,u;return{setters:[function(t){n=t.cclegacy,e=t.Label,i=t.UITransform,o=t._decorator},function(t){r=t.default},function(t){s=t.SJZ_Constant},function(t){a=t.SJZ_ContainerType},function(t){u=t.default}],execute:function(){var c;n._RF.push({},"01b48jCmBdEWp0JGmTnYXp6","SJZ_ContainerInventory",void 0);const{ccclass:d,property:h}=o;t("default",d("SJZ_ContainerInventory")(c=class extends u{constructor(...t){super(...t),this.BarLabel=null,this.ndTrans=null,this.inBox=!1,this.type=a.BirdNest}onLoad(){this.BarLabel=r.GetComponent("BarLabel",this.node,e),this.ItemContent=r.GetNode("ItemContent",this.node),this.ItemContentTrans=this.ItemContent.getComponent(i),this.ndTrans=this.node.getComponent(i)}InitContainer(t){let n=t.Size.width,e=t.Size.height;this.ItemContentTrans.setContentSize(n*s.itemSize,e*s.itemSize),this.ndTrans.setContentSize(40+n*s.itemSize,120+e*s.itemSize),this.BarLabel.string=t.Name,super.InitLootContainer(t.ItemData,n,e)}OnDragStart(t){super.OnDragStart(t)}OnDragging(t,n){super.OnDragging(t,n)}OnDragEnd(t,n){super.OnDragEnd(t,n)}})||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Data.ts",["cc","./SJZ_DataManager.ts","./Tools.ts"],(function(t){var i,e,s;return{setters:[function(t){i=t.cclegacy},function(t){e=t.SJZ_DataManager},function(t){s=t.Tools}],execute:function(){i._RF.push({},"d31f7LONQVEmq9MP96ktczN","SJZ_Data",void 0);let a=t("SJZ_ItemType",function(t){return t[t.None=0]="None",t[t.Helmet=1]="Helmet",t[t.BodyArmor=2]="BodyArmor",t[t.Weapon=3]="Weapon",t[t.Accessory=4]="Accessory",t[t.Ammo=5]="Ammo",t[t.ChestRig=6]="ChestRig",t[t.Backpack=7]="Backpack",t[t.ArmorItem=8]="ArmorItem",t[t.MedicalItem=9]="MedicalItem",t[t.Electronic=10]="Electronic",t[t.Medical=11]="Medical",t[t.ToolMaterial=12]="ToolMaterial",t[t.FurnitureItem=13]="FurnitureItem",t[t.CraftCollectible=14]="CraftCollectible",t[t.IntelDocument=15]="IntelDocument",t[t.EnergyFuel=16]="EnergyFuel",t}({})),r=t("SJZ_WeaponType",function(t){return t[t.MeleeWeapon=0]="MeleeWeapon",t[t.Pistol=1]="Pistol",t[t.AssaultRifle=2]="AssaultRifle",t[t.SubmachineGun=3]="SubmachineGun",t[t.MarksmanRifle=4]="MarksmanRifle",t[t.BoltActionRifle=5]="BoltActionRifle",t[t.LightMachineGun=6]="LightMachineGun",t[t.Shotgun=7]="Shotgun",t}({}));t("SJZ_CollectibleType",function(t){return t.Electronic="电子物品",t.Medical="医疗道具",t.ToolMaterial="工具材料",t.FurnitureItem="家具物品",t.CraftCollectible="工艺藏品",t.IntelDocument="资料情报",t.EnergyFuel="能源燃料",t}({})),t("SJZ_ContainerType",function(t){return t[t.AviationCrate=0]="AviationCrate",t[t.DeliveryBox=1]="DeliveryBox",t[t.BirdNest=2]="BirdNest",t[t.SafeBox=3]="SafeBox",t[t.ComputerCase=4]="ComputerCase",t[t.WeaponCase=5]="WeaponCase",t[t.CharactorCase=6]="CharactorCase",t}({})),t("SJZ_WorkbenchType",function(t){return t[t.Weapon=1]="Weapon",t[t.Armor=2]="Armor",t[t.Ammo=3]="Ammo",t[t.Medical=4]="Medical",t}({}));t("SJZ_ItemData",class{constructor(t,i,e,s,r,n,h,o,u,l){this.Type=a.None,this.Count=1,this.Point={x:0,y:0},this.Size={width:0,height:0},this.WeaponData=null,this.EquipData=null,this.AmmoData=null,this.ConsumableData=null,this.AccessoryData=null,this.Searched=!0,this.ID=t,this.type=i,this.Name=e,this.Price=s,this.Quality=r,this.size=n,this.Weight=h,this.ImageId=o,this.Desc=u,this.NotShow=l,this.Type=i,this.Size={width:Number(n.split("_")[0]),height:Number(n.split("_")[1])},i==a.Ammo&&(this.Count=60)}static IsGun(t){return t==a.Weapon}static IsEquip(t){return t==a.Helmet||t==a.BodyArmor||t==a.ChestRig||t==a.Backpack}static IsConsumable(t){return t==a.MedicalItem||t==a.ArmorItem}static IsCollection(t){return t==a.Electronic||t==a.Medical||t==a.ToolMaterial||t==a.FurnitureItem||t==a.CraftCollectible||t==a.IntelDocument||t==a.EnergyFuel}});t("SJZ_WeaponData",class{constructor(t,i,e,a,r,n,h,o,u,l,c,m,p,y,D){this.Required=[],this.Quantity=[],this.Ammo=null,this.Accessory_0=null,this.Accessory_1=null,this.Accessory_2=null,this.ID=t,this.Type=i,this.Quality=e,this.Name=a,this.AmmoType=r,this.PriceFluctuation=n,this.Damage=h,this.Precision=o,this.Recoil=u,this.Clip=l,this.FiringRate=c,this.ReloadDuration=m,this.required=p,this.quantity=y,this.Duration=D,s.IsEmptyStr(p)||(this.Required=p.trim().split(",").map((t=>Number(t)))),s.IsEmptyStr(y)||(this.Quantity=y.trim().split(",").map((t=>Number(t))))}get Data(){return e.ItemDataMap.get(a.Weapon).find((t=>t.Name==this.Name))}static IsMain(t){return t==r.AssaultRifle||t==r.SubmachineGun||t==r.MarksmanRifle||t==r.BoltActionRifle||t==r.LightMachineGun||t==r.Shotgun}static IsPistol(t){return t==r.Pistol}static IsMelee(t){return t==r.MeleeWeapon}});t("SJZ_AmmoData",class{constructor(t,i,e,a,r,n,h,o,u,l,c,m){this.Required=[],this.Quantity=[],this.ID=t,this.Type=i,this.Name=e,this.Lv1Damage=a,this.Lv2Damage=r,this.Lv3Damage=n,this.Lv4Damage=h,this.Lv5Damage=o,this.Lv6Damage=u,this.required=l,this.quantity=c,this.Duration=m,s.IsEmptyStr(l)||(this.Required=l.toString().trim().split(",").map((t=>Number(t)))),s.IsEmptyStr(l)||(this.Quantity=c.toString().trim().split(",").map((t=>Number(t))))}static GetDamage(t,i){switch(i){case 1:return t.Lv1Damage;case 2:return t.Lv2Damage;case 3:return t.Lv3Damage;case 4:return t.Lv4Damage;case 5:return t.Lv5Damage}}});t("SJZ_EquipData",class{constructor(t,i,e,a,r,n,h,o){this.Required=[],this.Quantity=[],this.MaxDurability=0,this.CarryingSpace={width:0,height:0},this.Grid=null,this.ItemData=[],this.ID=t,this.Name=i,this.Durability=e,this.HpMaxLoss=a,this.required=n,this.quantity=h,this.Duration=o,this.CarryingSpace={width:Number(r.split("_")[0]),height:Number(r.split("_")[1])},this.MaxDurability=this.Durability,s.IsEmptyStr(n)||(this.Required=n.toString().trim().split(",").map((t=>Number(t)))),s.IsEmptyStr(n)||(this.Quantity=h.toString().trim().split(",").map((t=>Number(t))))}});t("SJZ_ConsumableData",class{constructor(t,i,e,a,r,n,h,o,u){this.Required=[],this.Quantity=[],this.ID=t,this.Name=i,this.ReplySpeed=e,this.Durability=a,this.ReplyCoefficient=r,this.CostTime=n,this.required=h,this.quantity=o,this.Duration=u,s.IsEmptyStr(h)||(this.Required=h.toString().trim().split(",").map((t=>Number(t)))),s.IsEmptyStr(h)||(this.Quantity=o.toString().trim().split(",").map((t=>Number(t))))}});t("SJZ_AccessoryData",class{constructor(t,i,e,s,a,r,n,h,o){this.ID=t,this.SubID=i,this.Name=e,this.AccessoryType=s,this.RecoilUp=a,this.RecoilDown=r,this.ReloadingSpeedUp=n,this.ReloadingSpeedDown=h,this.Magnificationlens=o}});t("SJZ_SafeBoxData",class{constructor(t){this.CarryingSpace={width:0,height:0},this.ItemData=[],this.CarryingSpace={width:Number(t.split("_")[0]),height:Number(t.split("_")[1])}}});t("SJZ_ContainerData",class{constructor(t,i,e){this.Size={width:0,height:0},this.ItemData=[],this.Type=t,this.Name=i,this.Size={width:Number(e.split("_")[0]),height:Number(e.split("_")[1])}}});t("SJZ_ContainerLootData",class{constructor(t,i,e,s){this.ID=t,this.Type=i,this.Name=e,this.Probability=s}});t("SJZ_WorkbenchData",class{constructor(t,i,e,a,r,n,h){this.Requirements=[],this.QuantityDemanded=[],this.Making=[],this.Type=t,this.Lv=i,this.Cost=e,this.CostTime=a,this.requirements=r,this.quantityDemanded=n,this.making=h,s.IsEmptyStr(r)||(this.Requirements=r.toString().split(",").map((t=>Number(t)))),s.IsEmptyStr(n)||(this.QuantityDemanded=n.toString().split(",").map((t=>Number(t)))),s.IsEmptyStr(h)||(this.Making=h.toString().split(",").map((t=>Number(t))))}});t("SJZ_MatchData",class{constructor(t,i,e,s,a,r){this.MapName=t,this.EvacuationSite=i,this.Time=e,this.Reward=s,this.KilledPE=a,this.KilledPC=r}});t("SJZ_PrizePoolData",class{constructor(t,i,e,s){this.ID=t,this.Name=i,this.Probability=e,this.AwardType=s}});t("SJZ_SkinData",class{constructor(t,i,e){this.ID=t,this.Name=i,this.GunName=e}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_DataManager.ts",["cc","./PrefsManager.ts","./BundleManager.ts","./GameManager.ts","./SJZ_Data.ts","./SJZ_Constant.ts","./SJZ_PlayerData.ts","./Tools.ts","./SJZ_InventoryGrid.ts"],(function(e){var a,t,o,n,i,r,s,l,D,m,p,u,c,y,h,d,f,I,S,g,C;return{setters:[function(e){a=e.cclegacy},function(e){t=e.default},function(e){o=e.BundleManager},function(e){n=e.GameManager},function(e){i=e.SJZ_ContainerType,r=e.SJZ_ContainerLootData,s=e.SJZ_WeaponData,l=e.SJZ_AmmoData,D=e.SJZ_EquipData,m=e.SJZ_ConsumableData,p=e.SJZ_AccessoryData,u=e.SJZ_ContainerData,c=e.SJZ_WorkbenchData,y=e.SJZ_SkinData,h=e.SJZ_PrizePoolData,d=e.SJZ_ItemData,f=e.SJZ_ItemType},function(e){I=e.SJZ_Constant},function(e){S=e.SJZ_PlayerData},function(e){g=e.Tools},function(e){C=e.SJZ_InventoryGrid}],execute:function(){a._RF.push({},"c705fG0SUhLt7HSr8K8emp/","SJZ_DataManager",void 0);class _{static LoadData(){if(_.ItemDataMap=new Map,_.ContainerLootMap=new Map,_.WeaponData=[],_.AmmoData=[],_.EquipData=[],_.ConsumableData=[],_.AccessoryData=[],_.ContainerData=[],_.WorkbenchData=new Map,_.SkinData=[],_.PrizePoolData=[],t.GetItem(I.Key.PlayerData)){let e=JSON.parse(t.GetItem(I.Key.PlayerData));this.PlayerData=new S(e.Money,e.InventoryItemData,e.Weapon_Primary,e.Weapon_Secondary,e.Weapon_Pistol,e.Weapon_Melee,e.Weapon_Helmet,e.Weapon_BodyArmor,e.PocketData,e.ChestRigData,e.BackpackData,e.SafeBox,e.ShowcaseData)}else this.PlayerData=new S;return console.log("[玩家数据]:",this.PlayerData),new Promise(((e,a)=>{Promise.all([o.LoadJson(n.GameData.DefaultBundle,"ContainerLoot"),o.LoadJson(n.GameData.DefaultBundle,"Weapons"),o.LoadJson(n.GameData.DefaultBundle,"Ammo"),o.LoadJson(n.GameData.DefaultBundle,"Equips"),o.LoadJson(n.GameData.DefaultBundle,"Consumable"),o.LoadJson(n.GameData.DefaultBundle,"GunEquipment"),o.LoadJson(n.GameData.DefaultBundle,"Containers"),o.LoadJson(n.GameData.DefaultBundle,"Workbench"),o.LoadJson(n.GameData.DefaultBundle,"skin"),o.LoadJson(n.GameData.DefaultBundle,"PrizePool")]).then((([e,a,t,d,f,I,S,g,C,B])=>{let G=e.json;_.ContainerLootMap.set(i.AviationCrate,[]),_.ContainerLootMap.set(i.DeliveryBox,[]),_.ContainerLootMap.set(i.BirdNest,[]),_.ContainerLootMap.set(i.SafeBox,[]),_.ContainerLootMap.set(i.ComputerCase,[]),_.ContainerLootMap.set(i.WeaponCase,[]);for(let e=0;e<G.武器箱.length;e++){const a=G.武器箱[e];_.ContainerLootMap.get(i.WeaponCase).push(new r(a.ID,a.Type,a.Name,a.Probability))}for(let e=0;e<G.机箱.length;e++){const a=G.机箱[e];_.ContainerLootMap.get(i.ComputerCase).push(new r(a.ID,a.Type,a.Name,a.Probability))}for(let e=0;e<G.保险箱.length;e++){const a=G.保险箱[e];_.ContainerLootMap.get(i.SafeBox).push(new r(a.ID,a.Type,a.Name,a.Probability))}for(let e=0;e<G.鸟窝.length;e++){const a=G.鸟窝[e];_.ContainerLootMap.get(i.BirdNest).push(new r(a.ID,a.Type,a.Name,a.Probability))}for(let e=0;e<G.快递盒.length;e++){const a=G.快递盒[e];_.ContainerLootMap.get(i.DeliveryBox).push(new r(a.ID,a.Type,a.Name,a.Probability))}for(let e=0;e<G.航空箱.length;e++){const a=G.航空箱[e];_.ContainerLootMap.get(i.AviationCrate).push(new r(a.ID,a.Type,a.Name,a.Probability))}console.log("ContainerLootMap",_.ContainerLootMap);let T=a.json;for(let e=0;e<T.length;e++){const a=T[e];_.WeaponData.push(new s(a.ID,a.Type,a.Quality,a.Name,a.AmmoType,a.PriceFluctuation,a.Damage,a.Precision,a.Recoil,a.Clip,a.FiringRate,a.ReloadDuration,a.Required,a.quantity,a.Duration))}console.log("WeaponData",_.WeaponData);let M=t.json;for(let e=0;e<M.length;e++){const a=M[e];_.AmmoData.push(new l(a.ID,a.Type,a.Name,a.Lv1Damage,a.Lv2Damage,a.Lv3Damage,a.Lv4Damage,a.Lv5Damage,a.Lv6Damage,a.Required,a.quantity,a.Duration))}console.log("AmmoData",_.AmmoData);let P=d.json;for(let e=0;e<P.length;e++){const a=P[e];_.EquipData.push(new D(a.ID,a.Name,a.Durability,a.HpMaxLoss,a.CarryingSpace,a.Required,a.quantity,a.Duration))}console.log("EquipData",_.EquipData);let k=f.json;for(let e=0;e<k.length;e++){const a=k[e];_.ConsumableData.push(new m(a.ID,a.name,a.replySpeed,a.Durability,a.replyCoefficient,a.costTime,a.Required,a.quantity,a.Duration))}console.log("ConsumableData",_.ConsumableData);let b=I.json;for(let e=0;e<b.length;e++){const a=b[e];_.AccessoryData.push(new p(a.ID,a.SubID,a.Name,a.AccessoryType,a.RecoilUp,a.RecoilDown,a.ReloadingSpeedUp,a.ReloadingSpeedDown,a.Magnificationlens))}console.log("AccessoryData",_.AccessoryData);let L=S.json;for(let e=0;e<L.length;e++){const a=L[e];_.ContainerData.push(new u(a.Type,a.Name,a.Size))}console.log("ContainerData",_.ContainerData);let A=g.json;for(let e=0;e<A.length;e++){const a=A[e];_.WorkbenchData.has(a.Type)||_.WorkbenchData.set(a.Type,[]),_.WorkbenchData.get(a.Type).push(new c(a.Type,a.Lv,a.Cost,a.CostTime,a.Requirements,a.QuantityDemanded,a.Making))}console.log("WorkbenchData",_.WorkbenchData);let N=C.json;for(let e=0;e<N.length;e++){const a=N[e];_.SkinData.push(new y(a.ID,a.Name,a.GunName))}console.log("SkinData",_.SkinData);let w=B.json;for(let e=0;e<w.length;e++){const a=w[e];_.PrizePoolData.push(new h(a.ID,a.Name,a.Probability,a.AwardType))}return console.log("PrizePoolData",_.PrizePoolData),o.LoadJson(n.GameData.DefaultBundle,"Items")})).then((a=>{let t=a.json;for(let e=0;e<t.length;e++){const a=t[e];_.ItemDataMap.has(a.Type)||_.ItemDataMap.set(a.Type,[]);let o=new d(a.ID,a.Type,a.Name,a.Price,a.Quality,a.Size,a.Weight,a.ImageId,a.Desc,a.NotShow);o.Type==f.Weapon&&(o.WeaponData=g.Clone(_.WeaponData.find((e=>e.ID==o.ID)))),o.Type==f.Accessory&&(o.AccessoryData=g.Clone(_.AccessoryData.find((e=>e.ID==o.ID)))),o.Type==f.Ammo&&(o.AmmoData=g.Clone(_.AmmoData.find((e=>e.ID==o.ID)))),d.IsEquip(o.Type)&&(o.EquipData=g.Clone(_.EquipData.find((e=>e.ID==o.ID)))),d.IsConsumable(o.Type)&&(o.ConsumableData=g.Clone(_.ConsumableData.find((e=>e.ID==o.ID)))),-1!==I.Showcases.findIndex((e=>e==o.Name))&&_.ShowcaseData.push(o),_.ItemDataMap.get(a.Type).push(o)}console.log("ShowcaseData",_.ShowcaseData),console.log("ItemData",_.ItemDataMap),e([])})).catch((e=>{console.error("加载数据出错",e),a(e)}))}))}static GetItemDataByType(e,a,t=!0){if(!this.ItemDataMap.has(e))return console.error(`Item 表中没有该物品 Type：${e}`),null;let o=_.ItemDataMap.get(e).find((e=>e.ID==a));return o||console.error(`Item 表中没有该物品 ID：${a}`),t?g.Clone(o):o}static GetItemDataByTypeName(e,a,t=!0){if(!this.ItemDataMap.has(e))return console.error(`Item 表中没有该物品 Type：${e}`),null;let o=_.ItemDataMap.get(e).find((e=>e.Name==a));return o||console.error(`Item 表中没有该物品 Name：${a}`),t?g.Clone(o):o}static GetItemDataByName(e,a=!0){let t=null;for(const[o,n]of _.ItemDataMap)if(t=n.find((a=>a.Name==e)),t)return a&&(t=g.Clone(t)),t;return t||console.error(`Item 表中没有该物品 Name：${e}`),null}static GetItemDataByID(e){let a=null;for(const[t,o]of _.ItemDataMap)if(a=o.find((a=>a.ID==e)),a)return a;return a||console.error(`Item 表中没有该物品 ID：${e}`),null}static CheckTable(){for(const e of this.ContainerLootMap.keys())this.ContainerLootMap.get(e).forEach((e=>{_.ItemDataMap.get(e.Type).find((e=>e.ID==e.ID))||console.error("Item表中无法找到ContainerLoot表中的：",e.Name)}))}static CloneItemData(e){return g.Clone(e)}static GetRandomAmmoByType(e){let a=_.AmmoData.filter((a=>a.Type==e)),t=_.ItemDataMap.get(f.Ammo).find((e=>e.ID==a[Math.floor(Math.random()*a.length)].ID));return _.CloneItemData(t)}static SetDefaultEquip(e){e.Weapon_Helmet=this.GetItemDataByTypeName(f.Helmet,"老式钢盔"),e.Weapon_BodyArmor=this.GetItemDataByTypeName(f.BodyArmor,"轻型防弹衣"),e.EquipChestRig(this.GetItemDataByTypeName(f.ChestRig,"G01战术弹挂")),e.EquipBackpack(this.GetItemDataByTypeName(f.Backpack,"雨林猎手背包")),e.Weapon_Primary=this.GetItemDataByTypeName(f.Weapon,"M4A1"),e.Weapon_Primary.WeaponData.Ammo=this.GetItemDataByType(f.Ammo,50833);let a=[];for(let e=0;e<5;e++)a.push(this.GetItemDataByType(f.Ammo,50833));let t=this.GetItemDataByTypeName(f.MedicalItem,"户外医疗箱");this.FillContainer(e.ChestRigGrid,a,e.ChestRigData.EquipData.ItemData),this.FillContainer(e.BackpackGrid,[t],e.BackpackData.EquipData.ItemData)}static FillContainer(e,a,t){let o=e.width*e.height,n=[];for(let t=0;t<a.length;t++){let i=a[t];for(let a=0;a<o;a++){let t=a%e.width,o=Math.floor(a/e.width);if(0==e.grid[o][t]&&C.CanPlaceItem(e,t,o,i.Size.width,i.Size.height)){C.PlaceItem(e,t,o,i.Size.width,i.Size.height),i.Point.x=t,i.Point.y=o,n.push(i);break}}}a=n,t.push(...n)}static GetGunUseSkin(e,a=""){return t.GetString(`Gun_Skin_Use_${e}`,a)}static SetGunUseSkin(e,a){return t.SetString(`Gun_Skin_Use_${e}`,a)}static GetGunSkinUnlock(e){return t.GetBool(`Gun_Skin_Unlock_${e}`)}static SetGunSkinUnlock(e,a=!0){return t.SetBool(`Gun_Skin_Unlock_${e}`,a)}static GetSafeBoxUnlock(e){switch(e){case"SafeBox_1":return t.GetNumber(`SafeBox_AdTimes_${e}`,0)>=3;case"SafeBox_2":return t.GetNumber(`SafeBox_AdTimes_${e}`,0)>=6;case"SafeBox_3":return t.GetNumber(`SafeBox_AdTimes_${e}`,0)>=9}return!0}static GetSafeBoxAdTimes(e){return t.GetNumber(`SafeBox_AdTimes_${e}`,0)}static SetSafeBoxAdTimes(e,a){return t.SetNumber(`SafeBox_AdTimes_${e}`,a)}static SaveData(){console.log("存储数据",I.Key.PlayerData),t.SetItem(I.Key.PlayerData,JSON.stringify(this.PlayerData))}}e("SJZ_DataManager",_),_.Names=[],_.ItemDataMap=void 0,_.ContainerLootMap=void 0,_.EquipData=void 0,_.WeaponData=void 0,_.ConsumableData=void 0,_.AccessoryData=void 0,_.AmmoData=void 0,_.ContainerData=void 0,_.PlayerData=void 0,_.ShowcaseData=[],_.WorkbenchData=void 0,_.SkinData=void 0,_.PrizePoolData=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Evacuation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SJZ_Constant.ts","./EventManager.ts","./SJZ_LvManager.ts","./SJZ_DataManager.ts"],(function(t){var n,e,a,o,i,c,r,s,l,u,p,C;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){a=t.cclegacy,o=t.CCString,i=t._decorator,c=t.Component,r=t.BoxCollider2D,s=t.Contact2DType},function(t){l=t.SJZ_Constant},function(t){u=t.EventManager},function(t){p=t.SJZ_LvManager},function(t){C=t.SJZ_DataManager}],execute:function(){var E,h,S,f,_;a._RF.push({},"0f9c1xiSf5AioPi8qWkSpv+","SJZ_Evacuation",void 0);const{ccclass:d,property:v}=i;t("default",(E=d("SJZ_Evacuation"),h=v(o),E((_=n((f=class extends c{constructor(...t){super(...t),this.collider=null,e(this,"EvacuationSite",_,this)}onLoad(){this.collider=this.node.getComponent(r)}onBeginContact(t,n,e){if(n.group==l.Group.Player){p.Instance.matchData.EvacuationSite=this.EvacuationSite;let t="",n=C.PlayerData.GetBackpackItem("摄影机")&&C.PlayerData.GetBackpackItem("稳定型芯片A");"训练场"==p.Instance.MapName&&(n||(t="还有容器没被搜索")),u.Scene.emit(l.Event.SHOW_EVACUATION,t)}}onEndContact(t,n,e){n.group==l.Group.Player&&u.Scene.emit(l.Event.HIDE_EVACUATION)}onEnable(){this.collider.on(s.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(s.END_CONTACT,this.onEndContact,this)}onDisable(){this.collider.off(s.BEGIN_CONTACT,this.onBeginContact,this),this.collider.off(s.END_CONTACT,this.onEndContact,this)}}).prototype,"EvacuationSite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=f))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Evacuations.ts",["cc","./Tools.ts"],(function(e){var t,n,o,c;return{setters:[function(e){t=e.cclegacy,n=e.Component,o=e._decorator},function(e){c=e.Tools}],execute:function(){var s;t._RF.push({},"d917e9RFF5OZ5We1Rx99wau","SJZ_Evacuations",void 0);const{ccclass:i,property:a}=o;e("default",i("SJZ_Evacuations")(s=class extends n{onLoad(){if(this.node.children.length>2){let e=[];e.push(c.GetRandomInt(0,this.node.children.length)),e.push(c.GetRandomInt(0,this.node.children.length));for(let t=0;t<this.node.children.length;t++)this.node.children[t].active=-1!=e.indexOf(t)}}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_FloatingText.ts",["cc","./SJZ_PoolManager.ts","./Tools.ts"],(function(t){var e,o,n,a,s,l,i,c,h,r,d,p;return{setters:[function(t){e=t.cclegacy,o=t.Component,n=t.Label,a=t.Vec3,s=t.UIOpacity,l=t.Tween,i=t.tween,c=t.v3,h=t.math,r=t._decorator},function(t){d=t.SJZ_PoolManager},function(t){p=t.Tools}],execute:function(){var g;e._RF.push({},"b777dDaRlVCga0AL1IbCVCk","SJZ_FloatingText",void 0);const{ccclass:b,property:u}=r;t("SJZ_FloatingText",b("SJZ_FloatingText")(g=class extends o{constructor(...t){super(...t),this.label=null}onLoad(){this.label=this.node.getChildByName("Label").getComponent(n)}Show(t,e,o,n=.35,i=1){switch(this.node.setScale(a.ONE),this.label.color=p.GetColorFromHex(e),this.label.outlineColor=p.GetColorFromHex(o),this.label.string=t,this.label.node.getComponent(s)?this.label.node.getComponent(s).opacity=255:this.label.node.addComponent(s),l.stopAllByTarget(this.node),l.stopAllByTarget(this.label.node),i){case 1:this.ShowTween1(n);break;case 2:this.ShowTween2(n);break;default:this.ShowTween1(n)}}ShowTween1(t){this.node.setScale(a.ZERO),i(this.node).to(.2,{scale:a.ONE},{easing:"backOut"}).delay(t).call((()=>i(this.label.node.getComponent(s)).to(.25,{opacity:100}).start())).to(.25,{position:c(this.node.position.x+100*h.random()*(h.random()>.5?-1:1),this.node.position.y+150)}).call((()=>d.Instance.Put(this.node))).start()}ShowTween2(t){i(this.label.node.getComponent(s)).delay(t).to(.25,{opacity:0}).start(),i(this.node).delay(t).to(.25,{position:c(0,250)}).call((()=>{d.Instance.Put(this.node)})).start()}})||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_GameInit.ts",["cc","./SJZ_DataManager.ts","./UIManager.ts"],(function(a){var t,n,e,c,r,o;return{setters:[function(a){t=a.cclegacy,n=a.Component,e=a._decorator},function(a){c=a.SJZ_DataManager},function(a){r=a.UIManager,o=a.Panel}],execute:function(){var s;t._RF.push({},"b630bmAjHhEMLnzXCBuF2Mq","SJZ_GameInit",void 0);const{ccclass:i,property:u}=e;a("SJZ_GameInit",i("SJZ_GameInit")(s=class extends n{start(){c.LoadData().then((()=>{r.ShowPanel(o.LoadingPanel,"SJZ_Start")}))}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_GameItemUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./NodeUtil.ts","./GameManager.ts","./SJZ_WeaponContent.ts","./SJZ_DataManager.ts","./SJZ_GameManager.ts","./Tools.ts"],(function(e){var t,a,n,o,i,s,r,l,m,c,u,p,h,y,_,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Enum,i=e._decorator,s=e.Component,r=e.Sprite,l=e.Label,m=e.size},function(e){c=e.BundleManager},function(e){u=e.default},function(e){p=e.GameManager},function(e){h=e.SJZ_WeaponContentType},function(e){y=e.SJZ_DataManager},function(e){_=e.SJZ_GameManager},function(e){d=e.Tools}],execute:function(){var S,f,D,b,g;n._RF.push({},"801199553dCi7A1MNnM3h7R","SJZ_GameItemUI",void 0);const{ccclass:P,property:I}=i;e("default",(S=P("SJZ_GameItemUI"),f=I({type:o(h)}),S((g=t((b=class extends s{constructor(...e){super(...e),this.Selected=null,this.Icon=null,this.Name_Lb=null,this.Bullet_Lb=null,a(this,"type",g,this)}onLoad(){this.Selected=u.GetNode("Selected",this.node),this.Icon=u.GetComponent("Icon",this.node,r),this.Name_Lb=u.GetComponent("Name_Lb",this.node,l),this.Bullet_Lb=u.GetComponent("Bullet_Lb",this.node,l)}Refresh(){let e=null,t=m();switch(this.Icon.spriteFrame=null,this.type){case h.Primary:e=y.PlayerData.Weapon_Primary,t=m(300,125),this.Name_Lb.string=e?e.Name:"主武器";break;case h.Secondary:e=y.PlayerData.Weapon_Secondary,t=m(300,125),this.Name_Lb.string=e?e.Name:"副武器";break;case h.Pistol:e=y.PlayerData.Weapon_Pistol,t=m(150,60),this.Name_Lb.string=e?e.Name:"手枪";break;case h.Melee:e=y.PlayerData.Weapon_Melee,t=m(150,60),c.LoadSpriteFrame(p.GameData.DefaultBundle,"Res/Items/刀").then((e=>{this.Icon.spriteFrame=e,_.SetImagePreferScale(this.Icon,t.width,t.height,15)})),this.Name_Lb.string=e?e.Name:"刀具"}if(e){let a=e.ImageId;d.IsEmptyStr(y.GetGunUseSkin(e.Name))||(a=`${y.GetGunUseSkin(e.Name)}`),c.LoadSpriteFrame(p.GameData.DefaultBundle,`Res/Items/${a}`).then((e=>{this.Icon.spriteFrame=e,_.SetImagePreferScale(this.Icon,t.width,t.height,15)}))}this.RefreshAmmoCount()}RefreshAmmoCount(){this.Bullet_Lb.string="";let e=null;switch(this.type){case h.Primary:if(e=y.PlayerData.Weapon_Primary,e){let t=0;e.WeaponData.Ammo&&(t=e.WeaponData.Ammo.Count),this.Bullet_Lb.string=`${t}/${y.PlayerData.GetAmmoCountByType(e.WeaponData.AmmoType)}`}break;case h.Secondary:if(e=y.PlayerData.Weapon_Secondary,e){let t=0;e.WeaponData.Ammo&&(t=e.WeaponData.Ammo.Count),this.Bullet_Lb.string=`${t}/${y.PlayerData.GetAmmoCountByType(e.WeaponData.AmmoType)}`}break;case h.Pistol:if(e=y.PlayerData.Weapon_Pistol,e){let t=0;e.WeaponData.Ammo&&(t=e.WeaponData.Ammo.Count),this.Bullet_Lb.string=`${t}/${y.PlayerData.GetAmmoCountByType(e.WeaponData.AmmoType)}`}break;case h.Melee:this.Bullet_Lb.string=""}}RefreshSelected(e){this.Selected.active=this.type==e}}).prototype,"type",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.Primary}}),D=b))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SJZ_Item.ts","./SJZ_Constant.ts","./Tools.ts","./SJZ_GridCell.ts","./SJZ_InventoryGrid.ts","./SJZ_PoolManager.ts","./SJZ_UIManager.ts"],(function(e){var t,o,n,i,r,a,l,s,c,h,u,d,S,P,m,f,p,g,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Prefab,r=e._decorator,a=e.Component,l=e.PhysicsSystem2D,s=e.director,c=e.UITransform},function(e){h=e.default},function(e){u=e.SJZ_Constant,d=e.SJZ_QualityColorHex,S=e.SJZ_Quality},function(e){P=e.Tools},function(e){m=e.SJZ_GridCell,f=e.GridCellState},function(e){p=e.SJZ_InventoryGrid},function(e){g=e.SJZ_PoolManager},function(e){C=e.SJZ_UIManager}],execute:function(){var y,I,G,_,w,z;n._RF.push({},"61770Pz/PJLV6FHaWwc3YLI","SJZ_GameManager",void 0);const{ccclass:b,property:J}=r;e("SJZ_GameManager",(y=b("SJZ_GameManager"),I=J([i]),y(((z=class e extends a{constructor(...e){super(...e),this.player=null,o(this,"poolPrefabs",w,this),this.prefabMap=new Map,this.cells=[],this.killedPCCount=0,this.killedPECount=0}onLoad(){e.Instance=this;for(let e=0;e<this.poolPrefabs.length;e++)this.prefabMap.set(this.poolPrefabs[e].name,this.poolPrefabs[e]),g.Instance.Preload(this.poolPrefabs[e],50);l.instance.debugDrawFlags=0,s.addPersistRootNode(this.node)}ShowTipCells(e,t,o){this.cells.forEach((e=>{e.isValid?g.Instance.Put(e.node):console.error("cell 失效")})),this.cells=[];for(let n=0;n<t.length;n++){let i=g.Instance.Get(u.Prefab.GridCell,o.node),r=p.GridPointToWorldPosition(t[n],o);i.setWorldPosition(r);let a=i.getComponent(m);a.SetState(e?f.CanPut:f.CanntPut),this.cells.push(a)}}HideTipCells(){this.cells.forEach((e=>{g.Instance.Put(e.node)})),this.cells=[]}static FillContainer(e,t,o){for(let n=0;n<e.length;n++){let i=g.Instance.Get(u.Prefab.Item,o.node);i.getComponent(h).Init(e[n]),i.setPosition(e[n].Point.x*u.itemSize+u.itemSize/2,-e[n].Point.y*u.itemSize-u.itemSize/2),p.PlaceItem(t,e[n].Point.x,e[n].Point.y,e[n].Size.width,e[n].Size.height)}}static FillContainerByData(e,t){let o=t.width*t.height,n=[];for(let i=0;i<e.length;i++){let r=e[i];for(let e=0;e<o;e++){let o=e%t.width,i=Math.floor(e/t.width);if(0==t.grid[i][o]&&p.CanPlaceItem(t,o,i,r.Size.width,r.Size.height)){p.PlaceItem(t,o,i,r.Size.width,r.Size.height),r.Point.x=o,r.Point.y=i,n.push(r);break}}}e=n}static FillLootContainer(e,t){let o=t.width*t.height,n=[];for(let i=0;i<e.length;i++){let r=e[i];for(let e=0;e<o;e++){let o=e%t.width,i=Math.floor(e/t.width);if(0==t.grid[i][o]&&p.CanPlaceItem(t,o,i,r.Size.width,r.Size.height)){p.PlaceItem(t,o,i,r.Size.width,r.Size.height),r.Point.x=o,r.Point.y=i,n.push(r);break}}}e.length=0,e.push(...n)}static GetColorHexByQuality(e){switch(e){case S.None:case S.Common:return P.GetColorFromHex(d.Common);case S.Uncommon:return P.GetColorFromHex(d.Uncommon);case S.Rare:return P.GetColorFromHex(d.Rare);case S.Superior:return P.GetColorFromHex(d.Superior);case S.Legendary:return P.GetColorFromHex(d.Legendary);case S.Mythic:return P.GetColorFromHex(d.Mythic);default:return P.GetColorFromHex(d.Common)}}static SetImagePreferScale(e,t,o,n=15){let i=(t-n)/e.getComponent(c).contentSize.width,r=(o-n)/e.getComponent(c).contentSize.height,a=i>r?r:i;e.node.setScale(a,a,1)}OnButtonClick(e){switch(e.target.name){case"ShopPanelButton":C.Instance.ShowPanel(u.Panel.ShopPanel)}}}).Instance=null,z.IsGameOver=!1,w=t((_=z).prototype,"poolPrefabs",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=_))||G));n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_GameOverPanel.ts",["cc","./NodeUtil.ts","./UIManager.ts","./GameManager.ts","./ProjectEventManager.ts","./PanelBase.ts","./Tools.ts","./SJZ_DataManager.ts","./SJZ_AudioManager.ts","./SJZ_LvManager.ts","./SJZ_Constant.ts","./SJZ_GameManager.ts"],(function(e){var a,t,l,n,i,s,o,h,P,r,c,u,m,b,D,d,L,g,M;return{setters:[function(e){a=e.cclegacy,t=e.RichText,l=e.Label,n=e.sys,i=e._decorator},function(e){s=e.default},function(e){o=e.UIManager,h=e.Panel},function(e){P=e.GameManager},function(e){r=e.ProjectEventManager,c=e.ProjectEvent},function(e){u=e.PanelBase},function(e){m=e.Tools},function(e){b=e.SJZ_DataManager},function(e){D=e.SJZ_AudioManager,d=e.SJZ_Audio},function(e){L=e.SJZ_LvManager},function(e){g=e.SJZ_Constant},function(e){M=e.SJZ_GameManager}],execute:function(){var p;a._RF.push({},"71fd7qytuhGX4O7xjIgwuhf","SJZ_GameOverPanel",void 0);const{ccclass:G,property:S}=i;e("default",G("SJZ_GameOverPanel")(p=class extends u{constructor(...e){super(...e),this.Panel=null,this.DetailPanel=null,this.PanelResultRichText=null,this.PanelCheliLabel=null,this.PanelTimeLabel=null,this.DetailPanelResultRichText=null,this.DetailPanelMapLabel=null,this.DetailPanelCheliLabel=null,this.DetailPanelTimeLabel=null,this.DetailPanlMoneyLabel=null,this.DetailPanlKillPLabel=null,this.DetailPanlKillELabel=null,this.data=null}onLoad(){this.Panel=s.GetNode("Panel",this.node),this.DetailPanel=s.GetNode("DetailPanel",this.node),this.PanelResultRichText=s.GetComponent("PanelResultRichText",this.node,t),this.PanelCheliLabel=s.GetComponent("PanelCheliLabel",this.node,l),this.PanelTimeLabel=s.GetComponent("PanelTimeLabel",this.node,l),this.DetailPanelResultRichText=s.GetComponent("DetailPanelResultRichText",this.node,t),this.DetailPanelMapLabel=s.GetComponent("DetailPanelMapLabel",this.node,l),this.DetailPanelCheliLabel=s.GetComponent("DetailPanelCheliLabel",this.node,l),this.DetailPanelTimeLabel=s.GetComponent("DetailPanelTimeLabel",this.node,l),this.DetailPanlMoneyLabel=s.GetComponent("DetailPanlMoneyLabel",this.node,l),this.DetailPanlKillPLabel=s.GetComponent("DetailPanlKillPLabel",this.node,l),this.DetailPanlKillELabel=s.GetComponent("DetailPanlKillELabel",this.node,l)}Show(e,a){M.IsGameOver=!0,D.Instance.StopBGM(),b.SaveData(),super.Show(this.Panel),this.data=a,this.DetailPanel.active=!1,this.RefreshPanel(e),this.RefreshDetailPanel(e),"训练场"==L.Instance.matchData.MapName&&n.localStorage.setItem(g.Key.isHavePassTutorial,!0),r.emit(c.游戏结束,P.GameData.gameName)}RefreshPanel(e){this.PanelResultRichText.string=`<b><color=${e?"#95f0a6":"#bd4b41"}>${e?"撤离成功":"撤离失败"}</color></b>`,this.PanelCheliLabel.string=this.data.MapName,this.PanelTimeLabel.string=m.FormatTime(this.data.Time)}RefreshDetailPanel(e){this.DetailPanelResultRichText.string=`<b><color=${e?"#95f0a6":"#bd4b41"}>${e?"撤离成功":"撤离失败"}</color></b>`,this.DetailPanelMapLabel.string=this.data.MapName,this.DetailPanelCheliLabel.string=this.data.EvacuationSite,this.DetailPanelTimeLabel.string=m.FormatTime(this.data.Time),this.DetailPanlMoneyLabel.string=`${this.data.Reward.toLocaleString()}`,this.DetailPanlKillPLabel.string=`${this.data.KilledPC}`,this.DetailPanlKillELabel.string=`${this.data.KilledPE}`}OnButtonClick(e){switch(D.Instance.PlaySFX(d.ButtonClick),e.target.name){case"Panel":this.Panel.active=!1,this.DetailPanel.active=!0;break;case"ContinueButton":o.ShowPanel(h.LoadingPanel,[P.GameData,P.GameData.startScene])}}})||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_GamePanel.ts",["cc","./BundleManager.ts","./NodeUtil.ts","./UIManager.ts","./GameManager.ts","./EventManager.ts","./SJZ_HPBar.ts","./SJZ_Constant.ts","./SJZ_UIManager.ts","./SJZ_DataManager.ts","./SJZ_PlayerInventory.ts","./SJZ_Data.ts","./SJZ_GameManager.ts","./SJZ_CommonItem.ts","./SJZ_PoolManager.ts","./SJZ_GameItemUI.ts","./SJZ_LvManager.ts","./SJZ_CameraController.ts","./Tools.ts","./SJZ_AudioManager.ts","./ProjectEventManager.ts"],(function(t){var e,a,n,o,i,s,l,h,c,m,r,u,I,d,p,y,S,C,M,B,E,D,v,f,P,_,A,b,T,w,R,G,U,N,g;return{setters:[function(t){e=t.cclegacy,a=t._decorator,n=t.Component,o=t.Label,i=t.Sprite,s=t.Node,l=t.Color,h=t.Tween,c=t.tween,m=t.v3,r=t.instantiate,u=t.Vec3},function(t){I=t.BundleManager},function(t){d=t.default},function(t){p=t.UIManager,y=t.Panel},function(t){S=t.GameManager},function(t){C=t.EventManager},function(t){M=t.default},function(t){B=t.SJZ_Constant},function(t){E=t.SJZ_UIManager},function(t){D=t.SJZ_DataManager},function(t){v=t.default},function(t){f=t.SJZ_ItemType},function(t){P=t.SJZ_GameManager},function(t){_=t.default},function(t){A=t.SJZ_PoolManager},function(t){b=t.default},function(t){T=t.SJZ_LvManager},function(t){w=t.default},function(t){R=t.Tools},function(t){G=t.SJZ_AudioManager,U=t.SJZ_Audio},function(t){N=t.ProjectEventManager,g=t.ProjectEvent}],execute:function(){var k,W;e._RF.push({},"5c959nOmGVKmJ0UZ03ckCIP","SJZ_GamePanel",void 0);const{ccclass:H,property:O}=a;t("default",H("SJZ_GamePanel")(((W=class t extends n{constructor(...t){super(...t),this.InteractButton=null,this.Evacuation=null,this.EvacuationTitle=null,this.EvacuationCountDownLabel=null,this.EvacuationBG=null,this.UseItem=null,this.UseItemFill=null,this.UseItemIcon=null,this.MapButton=null,this.BottomBar=null,this.Joystick=null,this.ReturnButton=null,this.MoreGameButton=null,this.BroadcastPosition=null,this.Weapon_0=null,this.Weapon_1=null,this.Pistol=null,this.MeleeWeapon=null,this.ReloadButton=null,this.AmmoButton=null,this.AmmoScrollView=null,this.UseMedicineButton=null,this.MedicineButton=null,this.MedicineScrollView=null,this.NormalBar=null,this.HPBar=null,this.mapMode=!1,this.interactCallback=null,this.countDown=5,this.startCount=!1,this.medItems=[],this.medTimer=0,this.ammoItems=[],this.touchs=[]}onLoad(){t.Instance=this,this.InteractButton=d.GetNode("InteractButton",this.node),this.Evacuation=d.GetNode("Evacuation",this.node),this.EvacuationTitle=d.GetComponent("EvacuationTitle",this.node,o),this.EvacuationCountDownLabel=d.GetComponent("EvacuationCountDownLabel",this.node,o),this.EvacuationBG=d.GetComponent("EvacuationBG",this.node,i),this.UseItem=d.GetNode("UseItem",this.node),this.UseItemFill=d.GetComponent("UseItemFill",this.node,i),this.UseItemIcon=d.GetComponent("UseItemIcon",this.node,i),this.MapButton=d.GetNode("MapButton",this.node),this.BottomBar=d.GetNode("BottomBar",this.node),this.Joystick=d.GetNode("Joystick",this.node),this.ReturnButton=d.GetNode("ReturnButton",this.node),this.MoreGameButton=d.GetNode("MoreGameButton",this.node),this.BroadcastPosition=d.GetNode("BroadcastPosition",this.node),this.NormalBar=d.GetNode("NormalBar",this.node),this.HPBar=d.GetComponent("HPBar",this.node,M),this.Weapon_0=d.GetComponent("Weapon_0",this.node,b),this.Weapon_1=d.GetComponent("Weapon_1",this.node,b),this.Pistol=d.GetComponent("Pistol",this.node,b),this.MeleeWeapon=d.GetComponent("MeleeWeapon",this.node,b),this.ReloadButton=d.GetNode("ReloadButton",this.node),this.AmmoButton=d.GetNode("AmmoButton",this.node),this.AmmoScrollView=d.GetNode("AmmoScrollView",this.node),this.UseMedicineButton=d.GetNode("UseMedicineButton",this.node),this.MedicineButton=d.GetNode("MedicineButton",this.node),this.MedicineScrollView=d.GetNode("MedicineScrollView",this.node),this.node.on(s.EventType.TOUCH_START,this.OnTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.OnTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.OnTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.OnTouchEnd,this)}onDestroy(){}start(){this.HPBar.Init(l.WHITE),this.RefreshGameItemUI(),this.ShowInteractButton(!1),this.MoreGameButton.active="特勤处"==T.Instance.MapName,N.emit(g.初始化更多模式按钮,this.MoreGameButton)}ShowInteractButton(t,e=null){this.interactCallback=e,this.InteractButton.active=t}ShowEvacuation(t=""){this.Evacuation.active=!0,this.EvacuationCountDownLabel.string="",R.IsEmptyStr(t)?(this.EvacuationTitle.string="正在撤离",this.startCount=!0,this.countDown=5):this.EvacuationTitle.string=t,this.EvacuationBG.color=R.IsEmptyStr(t)?l.GREEN:l.RED}HideEvacution(){this.Evacuation.active=!1,this.countDown=5,this.startCount=!1}RefreshGameItemUI(){this.Weapon_0.Refresh(),this.Weapon_1.Refresh(),this.Pistol.Refresh(),this.MeleeWeapon.Refresh()}RefreshAmmoCount(){this.Weapon_0.RefreshAmmoCount(),this.Weapon_1.RefreshAmmoCount(),this.Pistol.RefreshAmmoCount()}RefreshMedItems(){this.medItems.forEach((t=>A.Instance.Put(t.node))),this.medItems=[];let t=D.PlayerData.GetBackpackAllItemByType(f.MedicalItem);if(t.push(...D.PlayerData.GetBackpackAllItemByType(f.ArmorItem)),t.length>0)for(let e=0;e<t.length;e++){let a=A.Instance.Get(B.Prefab.CommonItem,this.MedicineScrollView.getChildByPath("view/MedicineContent")).getComponent(_);a.Init(t[e],this.MedCallback.bind(this)),this.medItems.push(a)}}MedCallback(t){if(t.Type==f.MedicalItem){let e=P.Instance.player;e&&e.HP<e.MaxHP?this.ShowUseItem(!0,t,(t=>{let a=e.MaxHP-e.HP;a>t.ConsumableData.Durability?(a=t.ConsumableData.Durability,D.PlayerData.RemoveItemFromBackpack(t)):t.ConsumableData.Durability-=a,this.RefreshMedItems(),e.HP+=a})):p.ShowTip("血量已满")}t.Type==f.ArmorItem&&(null!=D.PlayerData.Weapon_Helmet&&t.Name.includes("头盔")?this.ShowUseItem(!0,t,(t=>{let e=D.PlayerData.Weapon_Helmet.EquipData,a=e.MaxDurability-e.Durability;a>t.ConsumableData.Durability?(a=t.ConsumableData.Durability,D.PlayerData.RemoveItemFromBackpack(t)):t.ConsumableData.Durability-=a,e.MaxDurability=Math.ceil(e.MaxDurability-a*(1-e.HpMaxLoss)),e.Durability+a>e.MaxDurability?e.Durability=e.MaxDurability:e.Durability+=a,this.RefreshMedItems()})):null!=D.PlayerData.Weapon_BodyArmor&&t.Name.includes("护甲")?this.ShowUseItem(!0,t,(t=>{let e=D.PlayerData.Weapon_BodyArmor.EquipData,a=e.MaxDurability-e.Durability;a>t.ConsumableData.Durability?(a=t.ConsumableData.Durability,D.PlayerData.RemoveItemFromBackpack(t)):t.ConsumableData.Durability-=a,e.MaxDurability=Math.ceil(e.MaxDurability-a*(1-e.HpMaxLoss)),e.Durability+a>e.MaxDurability?e.Durability=e.MaxDurability:e.Durability+=a,this.RefreshMedItems()})):p.ShowTip("未装备"))}ShowUseItem(t,e=null,a=null){this.UseItem.active=t,t?(h.stopAllByTarget(this.UseItemFill),this.UseItemFill.fillRange=1,I.LoadSpriteFrame(S.GameData.DefaultBundle,`Res/Items/${e.ImageId}`).then((t=>{this.UseItemIcon.spriteFrame=t,P.SetImagePreferScale(this.UseItemIcon,180,180)})),c(this.UseItemFill).to(e.ConsumableData.CostTime,{fillRange:0}).call((()=>{a&&a(e),this.ShowUseItem(!1)})).start()):h.stopAllByTarget(this.UseItemFill)}Reload(){if(P.Instance.player.weapon){const t=P.Instance.player.weapon.WeaponData;let e=t.Clip;if(t.Ammo&&(e=t.Clip-t.Ammo.Count),0==e)return;let a=D.PlayerData.GetAmmoByType(t.AmmoType,e);a?P.Instance.player.Reload((()=>{a.Count>e?a.Count-=e:e=a.Count,P.Instance.player.weapon.WeaponData.Ammo||(P.Instance.player.weapon.WeaponData.Ammo=R.Clone(a)),P.Instance.player.weapon.WeaponData.Ammo.Count+=e,C.Scene.emit(B.Event.REFRESH_WEAON_CONTENT)})):p.ShowTip("没有弹药")}else p.ShowTip("未装备武器")}RefreshAmmoItems(){this.ammoItems.forEach((t=>A.Instance.Put(t.node))),this.ammoItems=[];let t=D.PlayerData.GetBackpackAllItemByType(f.Ammo);if(t.length>0)for(let e=0;e<t.length;e++){let a=A.Instance.Get(B.Prefab.CommonItem,this.AmmoScrollView.getChildByPath("view/AmmoContent")).getComponent(_);a.Init(t[e],this.AmmoItemCallback.bind(this)),this.ammoItems.push(a)}}AmmoItemCallback(t){let e=P.Instance.player.weapon.WeaponData;e&&t.AmmoData.Type==e.AmmoType?P.Instance.player.Reload((()=>{let a=e.Clip;e.Ammo&&(a=e.Clip-e.Ammo.Count),0!=a&&(t.Count>a?t.Count-=a:(a=t.Count,D.PlayerData.RemoveItemFromBackpack(t),this.RefreshAmmoItems()),P.Instance.player.weapon.WeaponData.Ammo||(P.Instance.player.weapon.WeaponData.Ammo=R.Clone(t)),P.Instance.player.weapon.WeaponData.Ammo.Count+=a,C.Scene.emit(B.Event.REFRESH_WEAON_CONTENT),this.RefreshAmmoItems())})):p.ShowTip("换弹失败")}RefreshHPBar(t){this.HPBar.Set(t)}update(t){this.startCount&&(this.countDown-=t,this.countDown<=0&&(this.countDown=0,this.startCount=!1,T.Instance.matchData.Reward=D.PlayerData.GetTotalValue(),E.Instance.ShowPanel(B.Panel.GameOverPanel,[!0,T.Instance.matchData])),this.EvacuationCountDownLabel.string=`${this.countDown.toFixed(2)}`)}OnTouchStart(t){this.mapMode}OnTouchMove(t){this.mapMode&&w.Instance.Move(m(t.getDelta().clone().x,t.getDelta().clone().y))}OnTouchEnd(t){this.mapMode}OnMapButtonClick(){this.mapMode=!this.mapMode,this.BottomBar.active=!this.mapMode,this.Joystick.active=!this.mapMode,this.mapMode?(w.Instance.stopFollow=!0,w.Instance.ZoomOut(2e3,(()=>{}))):(this.touchs=[],w.Instance.stopFollow=!1,w.Instance.ZoomIn())}OnButtonClick(t){switch(G.Instance.PlaySFX(U.ButtonClick),t.target.name){case"InteractButton":this.interactCallback&&this.interactCallback();break;case"RollButton":C.Scene.emit(B.Event.Roll);break;case"Weapon_0":D.PlayerData.Weapon_Primary&&P.Instance.player.SetGun(D.PlayerData.Weapon_Primary);break;case"Weapon_1":D.PlayerData.Weapon_Secondary&&P.Instance.player.SetGun(D.PlayerData.Weapon_Secondary);break;case"Pistol":D.PlayerData.Weapon_Pistol&&P.Instance.player.SetGun(D.PlayerData.Weapon_Pistol);break;case"MeleeWeapon":P.Instance.player.SetMeelee();break;case"MedicineButton":case"UseMedicineButton":this.MedicineScrollView.active=!this.MedicineScrollView.active,this.MedicineScrollView.active&&this.RefreshMedItems(),this.MedicineButton.getChildByName("MedicineButtonIcon").setScale(this.MedicineScrollView.active?.4:-.4,.4,1);break;case"ReloadButton":this.Reload();break;case"AmmoButton":this.AmmoScrollView.active=!this.AmmoScrollView.active,this.AmmoScrollView.active&&this.RefreshAmmoItems(),this.AmmoButton.getChildByName("AmmoButtonIcon").setScale(this.AmmoScrollView.active?.4:-.4,.4,1);break;case"BackpackButton":"特勤处"==T.Instance.MapName?I.LoadPrefab(S.GameData.DefaultBundle,"UI/PlayerInventory").then((t=>{E.Instance.ShowPanel(B.Panel.InventoryPanel,[e=>{let a=r(t);a.setParent(e),a.setPosition(u.ZERO);let n=a.getComponent(v);return n.InitPlayerInventory(),n}])})):E.Instance.ShowPanel(B.Panel.InventoryPanel,[null]);break;case"UseItemCancelButton":this.ShowUseItem(!1,null,null);break;case"ReturnButton":N.emit(g.返回主页按钮事件,(()=>{p.ShowPanel(y.LoadingPanel,S.StartScene,(()=>{N.emit(g.返回主页,"三角洲")}))}))}}onEnable(){C.Scene.on(B.Event.SHOW_INTERACT_BUTTON,this.ShowInteractButton,this),C.Scene.on(B.Event.SHOW_EVACUATION,this.ShowEvacuation,this),C.Scene.on(B.Event.HIDE_EVACUATION,this.HideEvacution,this),C.Scene.on(B.Event.REFRESH_GAME_ITEM_UI,this.RefreshGameItemUI,this),C.Scene.on(B.Event.REFRESH_WEAON_CONTENT,this.RefreshAmmoCount,this)}onDisable(){C.Scene.off(B.Event.SHOW_INTERACT_BUTTON,this.ShowInteractButton,this),C.Scene.off(B.Event.SHOW_EVACUATION,this.ShowEvacuation,this),C.Scene.off(B.Event.HIDE_EVACUATION,this.HideEvacution,this),C.Scene.off(B.Event.REFRESH_GAME_ITEM_UI,this.RefreshGameItemUI,this),C.Scene.off(B.Event.REFRESH_WEAON_CONTENT,this.RefreshAmmoCount,this)}}).Instance=null,k=W))||k);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_GridCell.ts",["cc","./NodeUtil.ts","./Tools.ts"],(function(t){var o,e,n,r,s,c,l,i;return{setters:[function(t){o=t.cclegacy,e=t.Component,n=t.Vec2,r=t.UITransform,s=t.Sprite,c=t._decorator},function(t){l=t.default},function(t){i=t.Tools}],execute:function(){var u;o._RF.push({},"d68e0bR+1REtIJLJYJlkAX1","SJZ_GridCell",void 0);const{ccclass:a,property:d}=c;let C=t("GridCellState",function(t){return t.None="#FFFFFF00",t.CanPut="#A4FFA43C",t.CanntPut="#FFA4A43C",t}({}));t("SJZ_GridCell",a("SJZ_GridCell")(u=class extends e{constructor(...t){super(...t),this.Trans=null,this.Background=null,this.pos=new n}onLoad(){this.Trans=this.node.getComponent(r),this.Background=l.GetComponent("Background",this.node,s)}SetState(t){this.Background.color=i.GetColorFromHex(t)}ClearState(){this.Background.color=i.GetColorFromHex(C.None)}})||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_GunFire.ts",["cc","./SJZ_PoolManager.ts"],(function(e){var n,s,t,i,o,u;return{setters:[function(e){n=e.cclegacy,s=e.Component,t=e.sp,i=e.UITransform,o=e._decorator},function(e){u=e.SJZ_PoolManager}],execute:function(){var l;n._RF.push({},"4e3c6TpNZROf5VKTxt9hX0+","SJZ_GunFire",void 0);const{ccclass:p,property:r}=o;e("default",p("SJZ_GunFire")(l=class extends s{constructor(...e){super(...e),this.spine=null,this.spineTrans=null}onLoad(){this.spine=this.node.getComponent(t.Skeleton),this.spineTrans=this.spine.node.getComponent(i)}Play(){this.spine.setAnimation(0,"animation",!1)}Stop(){var e;null==(e=this.spine)||e.clearTrack(0)}SetAniMix(e,n){var s,t;null==(s=this.spine)||s.setMix(e,n,.2),null==(t=this.spine)||t.setMix(n,e,.2)}onEnable(){this.AddSpineListener()}AddSpineListener(){this.spine.setCompleteListener((e=>{u.Instance.Put(this.node)}))}DebugSlot(){var e,n,s,t;this.spine.debugSlots=!(null!=(e=this.spine)&&e.debugSlots),this.spine.debugBones=!(null!=(n=this.spine)&&n.debugBones),this.spine.debugMesh=!(null!=(s=this.spine)&&s.debugMesh),this.spine.useTint=!(null!=(t=this.spine)&&t.useTint)}})||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_HPBar.ts",["cc","./NodeUtil.ts","./Tools.ts"],(function(t){var o,e,r,s,n,a,c;return{setters:[function(t){o=t.cclegacy,e=t.Component,r=t.Sprite,s=t.Color,n=t._decorator},function(t){a=t.default},function(t){c=t.Tools}],execute:function(){var i;o._RF.push({},"20f74B2Bu5BN4v9o07OHZ7a","SJZ_HPBar",void 0);const{ccclass:l,property:u}=n;t("default",l("SJZ_HPBar")(i=class extends e{constructor(...t){super(...t),this.HPBarFG=null}onLoad(){this.HPBarFG=a.GetComponent("HPBarFG",this.node,r)}Init(t=s.RED){this.HPBarFG.color=t,this.Set(1)}Set(t){t=c.Clamp(t,0,1),this.HPBarFG.fillRange=t}})||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_InteractItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SJZ_Constant.ts","./EventManager.ts","./SJZ_UIManager.ts","./SJZ_DataManager.ts","./SJZ_Data.ts","./UIManager.ts"],(function(e){var n,a,t,c,o,l,r,i,s,P,S,h,T;return{setters:[function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){t=e.cclegacy,c=e._decorator,o=e.Component,l=e.BoxCollider2D,r=e.Contact2DType},function(e){i=e.SJZ_Constant},function(e){s=e.EventManager},function(e){P=e.SJZ_UIManager},function(e){S=e.SJZ_DataManager},function(e){h=e.SJZ_WorkbenchType},function(e){T=e.UIManager}],execute:function(){var I,p,b;t._RF.push({},"b827aLfDiNL2rDGwGLHU9Yw","SJZ_InteractItem",void 0);const{ccclass:u,property:_}=c;e("default",u("SJZ_InteractItem")((b=n((p=class extends o{constructor(...e){super(...e),a(this,"generateBox",b,this),this.collider=null,this.taken=!1}onLoad(){this.collider=this.node.getComponent(l),this.collider.on(r.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(r.END_CONTACT,this.onEndContact,this)}start(){this.generateBox&&this.Init()}Init(){}InitDieBox(e,n,a){}Take(){}ShowSuppliesItems(e){}ItemCallback(e){}onBeginContact(e,n,a){if(n.group==i.Group.Player)switch(this.node.name){case"停机坪":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{P.Instance.ShowPanel(i.Panel.SelectMapPanel)}));break;case"NPC_商人":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{P.Instance.ShowPanel(i.Panel.ShopPanel)}));break;case"NPC_出售商人":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{P.Instance.ShowPanel(i.Panel.SellPanel)}));break;case"NPC_皮肤商人":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{P.Instance.ShowPanel(i.Panel.SkinShopPanel)}));break;case"武器台":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{P.Instance.ShowPanel(i.Panel.WorkbenchPanel,["武器台：可以制作武器。",{cb:()=>{P.Instance.ShowPanel(i.Panel.UpgradePanel,[h.Weapon])},text:"升级"},{cb:()=>{0==S.PlayerData.GetWorkbenchLv(h.Weapon)?T.ShowTip("武器台等级为0，无法进行制造。"):P.Instance.ShowPanel(i.Panel.OutputPanel,[h.Weapon])},text:"使用"},{cb:()=>{P.Instance.HidePanel(i.Panel.WorkbenchPanel)},text:"离开"}])}));break;case"护甲台":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{P.Instance.ShowPanel(i.Panel.WorkbenchPanel,["护甲台：可以制作护甲。",{cb:()=>{P.Instance.ShowPanel(i.Panel.UpgradePanel,[h.Armor])},text:"升级"},{cb:()=>{0==S.PlayerData.GetWorkbenchLv(h.Armor)?T.ShowTip("护甲台等级为0，无法进行制造。"):P.Instance.ShowPanel(i.Panel.OutputPanel,[h.Armor])},text:"使用"},{cb:()=>{P.Instance.HidePanel(i.Panel.WorkbenchPanel)},text:"离开"}])}));break;case"子弹台":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{S.PlayerData.GetWorkbenchLv(h.Ammo);P.Instance.ShowPanel(i.Panel.WorkbenchPanel,["子弹台：可以制作子弹。",{cb:()=>{P.Instance.ShowPanel(i.Panel.UpgradePanel,[h.Ammo])},text:"升级"},{cb:()=>{0==S.PlayerData.GetWorkbenchLv(h.Ammo)?T.ShowTip("子弹台等级为0，无法进行制造。"):P.Instance.ShowPanel(i.Panel.OutputPanel,[h.Ammo])},text:"使用"},{cb:()=>{P.Instance.HidePanel(i.Panel.WorkbenchPanel)},text:"离开"}])}));break;case"药品台":s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!0,(()=>{S.PlayerData.GetWorkbenchLv(h.Medical);P.Instance.ShowPanel(i.Panel.WorkbenchPanel,["药品台：可以制作药品。",{cb:()=>{P.Instance.ShowPanel(i.Panel.UpgradePanel,[h.Medical])},text:"升级"},{cb:()=>{0==S.PlayerData.GetWorkbenchLv(h.Medical)?T.ShowTip("药品台等级为0，无法进行制造。"):P.Instance.ShowPanel(i.Panel.OutputPanel,[h.Medical])},text:"使用"},{cb:()=>{P.Instance.HidePanel(i.Panel.WorkbenchPanel)},text:"离开"}])}))}}onEndContact(e,n,a){n.group==i.Group.Player&&s.Scene.emit(i.Event.SHOW_INTERACT_BUTTON,!1)}}).prototype,"generateBox",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=p))||I);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Inventory.ts",["cc","./SJZ_InventoryGrid.ts","./SJZ_Item.ts","./SJZ_DataManager.ts","./SJZ_GameManager.ts","./SJZ_Constant.ts","./SJZ_Data.ts","./SJZ_PoolManager.ts","./Tools.ts","./PrefsManager.ts","./SJZ_Showcases.ts","./EventManager.ts","./SJZ_LvManager.ts"],(function(t){var e,i,n,a,s,r,o,h,d,l,m,I,S,c,g,y,u,f;return{setters:[function(t){e=t.cclegacy,i=t.v3,n=t.v2,a=t.Component,s=t._decorator},function(t){r=t.SJZ_InventoryGrid},function(t){o=t.default},function(t){h=t.SJZ_DataManager},function(t){d=t.SJZ_GameManager},function(t){l=t.SJZ_Constant,m=t.SJZ_Quality},function(t){I=t.SJZ_ItemData},function(t){S=t.SJZ_PoolManager},function(t){c=t.Tools},function(t){g=t.default},function(t){y=t.default},function(t){u=t.EventManager},function(t){f=t.SJZ_LvManager}],execute:function(){var C;e._RF.push({},"7d819Wmy4dFUbNWlfKV1g7N","SJZ_Inventory",void 0);const{ccclass:P,property:x}=s,v=i(),z=n();t("default",P("SJZ_Inventory")(C=class extends a{constructor(...t){super(...t),this.ItemContent=null,this.ItemContentTrans=null,this.data=[],this.items=[],this.gridCtrl=null,this.lastResult=n(-1,-1),this.stopSearch=!1}Init(t,e){this.data=t,this.gridCtrl=e,this.ClearItems();for(let e=0;e<t.length;e++){let i=S.Instance.Get(l.Prefab.Item,this.ItemContentTrans.node),n=i.getComponent(o);n.Init(t[e]),n.belongInventory=this,i.setPosition(t[e].Point.x*l.itemSize+l.itemSize/2,-t[e].Point.y*l.itemSize-l.itemSize/2),this.items.push(n),r.PlaceItem(this.gridCtrl,t[e].Point.x,t[e].Point.y,t[e].Size.width,t[e].Size.height)}let i=this.items.filter((t=>!t.data.Searched));const n=t=>{t>=i.length||this.stopSearch||i[t].Search((()=>{n(t+1)}))};n(0)}InitLootContainer(t,e,i){this.data=t,this.gridCtrl=new r(e,i),this.ClearItems(),d.FillLootContainer(this.data,this.gridCtrl);for(let t=0;t<this.data.length;t++){const e=this.data[t];let i=S.Instance.Get(l.Prefab.Item,this.ItemContentTrans.node);i.setPosition(e.Point.x*l.itemSize+l.itemSize/2,-e.Point.y*l.itemSize-l.itemSize/2);let n=i.getComponent(o);n.Init(e),n.belongInventory=this,this.items.push(n)}let n=this.items.filter((t=>!t.data.Searched));const a=t=>{t>=n.length||this.stopSearch||n[t].Search((()=>{a(t+1)}))};a(0)}AddItem(t){let e=this.gridCtrl.width*this.gridCtrl.height;for(let i=0;i<e;i++){let e=i%this.gridCtrl.width,n=Math.floor(i/this.gridCtrl.width);if(0==this.gridCtrl.grid[n][e]&&r.CanPlaceItem(this.gridCtrl,e,n,t.Size.width,t.Size.height)){r.PlaceItem(this.gridCtrl,e,n,t.Size.width,t.Size.height),t.Point.x=e,t.Point.y=n;let i=S.Instance.Get(l.Prefab.Item,this.ItemContentTrans.node);i.setPosition(t.Point.x*l.itemSize+l.itemSize/2,-t.Point.y*l.itemSize-l.itemSize/2);let a=i.getComponent(o);return a.Init(t),this.items.push(a),!0}}return!1}ClearItems(){this.items&&0!=this.items.length&&(this.items.forEach((t=>{t.node.parent==this.ItemContentTrans.node&&S.Instance.Put(t.node)})),this.items.length=0,r.ClearGrid(this.gridCtrl))}AddItemToArray(t){-1===this.data.findIndex((e=>e===t))&&this.data.push(t)}RemoveItemFromArray(t){if(-1!==this.items.findIndex((e=>e.data===t))){let e=this.items.find((e=>e.data===t));c.RemoveItemFromArray(this.items,e),S.Instance.Put(e.node)}-1!==this.data.findIndex((e=>e===t))&&c.RemoveItemFromArray(this.data,t)}OnDragStart(t){t.isShopItem||-1!==this.data.findIndex((e=>e===t.data))&&r.RemoveItem(this.gridCtrl,t.data.Point.x,t.data.Point.y,t.data.Size.width,t.data.Size.height)}OnDragging(t,e){if(t.isShopItem)return;if(this.ItemContentTrans.convertToNodeSpaceAR(v.set(e.x,e.y),v),v.x<0||v.x>this.ItemContentTrans.width||-v.y<0||-v.y>this.ItemContentTrans.height)return;if(z.set(v.x,v.y),z.set(Math.floor(z.x/100),Math.floor(-z.y/100)),z.x<0||z.y<0)return;let i=r.CanPlaceItem(this.gridCtrl,z.x,z.y,t.data.Size.width,t.data.Size.height),n=r.GetPlaceItemPoints(this.gridCtrl,z.x,z.y,t.data.Size.width,t.data.Size.height);z.x==this.lastResult.x&&z.y==this.lastResult.y||(this.lastResult.set(z),d.Instance.ShowTipCells(i,n,this.ItemContentTrans))}OnDragEnd(t,e){if(t.isShopItem)return;if(this.lastResult.set(-1,-1),this.ItemContentTrans.convertToNodeSpaceAR(v.set(e.x,e.y),v),d.Instance.HideTipCells(),v.x<0||v.x>this.ItemContentTrans.width||-v.y<0||-v.y>this.ItemContentTrans.height)return;if(z.set(v.x,v.y),z.set(Math.floor(z.x/100),Math.floor(-z.y/100)),r.CanPlaceItem(this.gridCtrl,z.x,z.y,t.data.Size.width,t.data.Size.height)){if(this.data==h.PlayerData.InventoryItemData&&t.data.Quality>=m.Mythic&&I.IsCollection(t.data.Type)&&g.GetBool(l.Key.FirstPutInventory,!0)&&y.Instance.GetTarget(t.data.Name)){let e=y.Instance.GetTarget(t.data.Name,(()=>{g.SetBool(l.Key.FirstPutInventory,!1),u.Scene.emit(l.Event.SHOW_TUTORIAL,f.Instance.GuideTarget)}));e&&u.Scene.emit(l.Event.SHOW_TUTORIAL,e.node)}-1==this.data.findIndex((e=>e===t.data))&&(t.belongInventory.RemoveItemFromArray(t.data),t.belongInventory=this,this.AddItemToArray(t.data)),t.data.Point.x=z.x,t.data.Point.y=z.y,r.PlaceItem(this.gridCtrl,z.x,z.y,t.data.Size.width,t.data.Size.height),t.node.setParent(this.ItemContent),v.set(100*z.x+50,100*-z.y-50,0),t.node.setPosition(v),this.items.push(t)}else-1!==this.data.findIndex((e=>e===t.data))&&r.PlaceItem(this.gridCtrl,t.data.Point.x,t.data.Point.y,t.data.Size.width,t.data.Size.height);h.SaveData()}})||C);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_InventoryGrid.ts",["cc","./SJZ_Constant.ts"],(function(t){var e,r,i,o;return{setters:[function(t){e=t.cclegacy,r=t.v2,i=t.v3},function(t){o=t.SJZ_Constant}],execute:function(){e._RF.push({},"a638daBfPtNnrY8mk/lG2EN","SJZ_InventoryGrid",void 0);t("SJZ_InventoryGrid",class{constructor(t,e){this.width=void 0,this.height=void 0,this.grid=[],this.width=t,this.height=e,this.grid=Array.from({length:e},(()=>Array.from({length:t},(()=>0))))}static GetPlaceItemPoints(t,e,i,o,n){let s=[];for(let l=e;l<e+o;l++)if(!(l>t.width-1))for(let e=i;e<i+n;e++)e>t.height-1||s.push(r(l,e));return s}static CanPlaceItem(t,e,r,i,o){if(e+i>t.width||r+o>t.height)return!1;for(let n=e;n<e+i;n++)for(let e=r;e<r+o;e++)if(0!=t.grid[e][n])return!1;return!0}static PlaceItem(t,e,r,i,o){for(let n=e;n<e+i;n++)for(let e=r;e<r+o;e++)t.grid[e][n]=1}static RemoveItem(t,e,r,i,o){for(let n=e;n<e+i;n++)for(let e=r;e<r+o;e++)t.grid[e][n]=0}static ClearGrid(t){let e=t.grid;for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)1===e[t][r]&&(e[t][r]=0)}static GridPointToWorldPosition(t,e){let r=i(t.x*o.itemSize,-t.y*o.itemSize,0);return e.convertToWorldSpaceAR(r)}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_InventoryPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_DataManager.ts","./EventManager.ts","./SJZ_Constant.ts","./SJZ_BackpackInventory.ts","./SJZ_WeaponContent.ts","./SJZ_SingleInventory.ts","./SJZ_UIManager.ts","./SJZ_ChestRigInventory.ts","./SJZ_SafeBoxInventory.ts","./UIManager.ts","./SJZ_AudioManager.ts","./SJZ_GameManager.ts","./ProjectEventManager.ts","./GameManager.ts"],(function(e){var t,n,a,o,r,i,s,l,h,y,c,g,p,_,D,P,I,S,d,E,f,W,m;return{setters:[function(e){t=e.cclegacy,n=e.Label,a=e.ScrollView,o=e._decorator},function(e){r=e.default},function(e){i=e.PanelBase},function(e){s=e.SJZ_DataManager},function(e){l=e.EventManager},function(e){h=e.SJZ_Constant},function(e){y=e.default},function(e){c=e.SJZ_WeaponContent,g=e.SJZ_WeaponContentType},function(e){p=e.default},function(e){_=e.SJZ_UIManager},function(e){D=e.default},function(e){P=e.default},function(e){I=e.UIManager},function(e){S=e.SJZ_AudioManager,d=e.SJZ_Audio},function(e){E=e.SJZ_GameManager},function(e){f=e.ProjectEventManager,W=e.ProjectEvent},function(e){m=e.GameManager}],execute:function(){var v;t._RF.push({},"dc57fMCYIxIwLmofKqRH0qH","SJZ_InventoryPanel",void 0);const{ccclass:u,property:R}=o;e("default",u("SJZ_InventoryPanel")(v=class extends i{constructor(...e){super(...e),this.Content=null,this.ItemContent=null,this.PocketInventorys=null,this.InventoryNd=null,this.MoneyLabel=null,this.TotalValueLabel=null,this.BackpackScrollView=null,this.Weapon_Primary=null,this.Weapon_Secondary=null,this.Weapon_Pistol=null,this.Weapon_Melee=null,this.Weapon_Helmet=null,this.Weapon_BodyArmor=null,this.singleInventorys=[],this.ChestRigInventory=null,this.BackpackInventory=null,this.SafeBoxInventory=null,this.targetInventory=null}onLoad(){this.Content=r.GetNode("Content",this.node),this.ItemContent=r.GetNode("ItemContent",this.node),this.TotalValueLabel=r.GetComponent("TotalValueLabel",this.node,n),this.MoneyLabel=r.GetComponent("MoneyLabel",this.node,n),this.BackpackScrollView=r.GetComponent("BackpackScrollView",this.node,a),this.PocketInventorys=r.GetNode("PocketInventorys",this.node),this.InventoryNd=r.GetNode("InventoryNd",this.node),this.ChestRigInventory=r.GetComponent("ChestRigInventory",this.node,D),this.BackpackInventory=r.GetComponent("BackpackInventory",this.node,y),this.SafeBoxInventory=r.GetComponent("SafeBoxInventory",this.node,P),this.Weapon_Primary=r.GetComponent("Weapon_Primary",this.node,c),this.Weapon_Secondary=r.GetComponent("Weapon_Secondary",this.node,c),this.Weapon_Pistol=r.GetComponent("Weapon_Pistol",this.node,c),this.Weapon_Melee=r.GetComponent("Weapon_Melee",this.node,c),this.Weapon_Helmet=r.GetComponent("Weapon_Helmet",this.node,c),this.Weapon_BodyArmor=r.GetComponent("Weapon_BodyArmor",this.node,c)}start(){for(let e=0;e<this.PocketInventorys.children.length;e++){let t=this.PocketInventorys.children[e].getComponent(p);s.PlayerData.PocketData[e]||(s.PlayerData.PocketData[e]=[]),t.InitSingle(s.PlayerData.PocketData[e],s.PlayerData.SingleGrids[e]),this.singleInventorys.push(t)}}Show(e){this.targetInventory&&this.targetInventory.node.destroy();let t=e&&e(this.InventoryNd);this.targetInventory=t;for(let e=0;e<this.singleInventorys.length;e++){let t=this.singleInventorys[e];s.PlayerData.PocketData[e]||(s.PlayerData.PocketData[e]=[]),t.InitSingle(s.PlayerData.PocketData[e],s.PlayerData.SingleGrids[e])}this.ChestRigInventory.Refresh(),this.BackpackInventory.Refresh(),this.SafeBoxInventory.Refresh(),this.Weapon_Primary.Init(g.Primary),this.Weapon_Secondary.Init(g.Secondary),this.Weapon_Pistol.Init(g.Pistol),this.Weapon_Melee.Init(g.Melee),this.Weapon_Helmet.Init(g.Helmet),this.Weapon_BodyArmor.Init(g.BodyArmor),this.RefreshTotalValue(),this.RefreshMoney(),this.RefreshWeaponContentLabel(),f.emit(W.页面转换,m.GameData.gameName)}RefreshWeaponContentLabel(){this.Weapon_Primary.RefreshContentLabel(),this.Weapon_Secondary.RefreshContentLabel(),this.Weapon_Pistol.RefreshContentLabel(),this.Weapon_Melee.RefreshContentLabel(),this.Weapon_Helmet.RefreshContentLabel(),this.Weapon_BodyArmor.RefreshContentLabel()}OnDragStart(e){this.BackpackScrollView.enabled=!1,this.targetInventory&&this.targetInventory.OnDragStart(e),this.ChestRigInventory.OnDragStart(e),this.BackpackInventory.OnDragStart(e),this.SafeBoxInventory.OnDragStart(e),this.Weapon_Primary.OnDragStart(e),this.Weapon_Secondary.OnDragStart(e),this.Weapon_Pistol.OnDragStart(e),this.Weapon_Melee.OnDragStart(e),this.Weapon_Helmet.OnDragStart(e),this.Weapon_BodyArmor.OnDragStart(e),this.singleInventorys.forEach((t=>{t.OnDragStart(e)}))}OnDragging(e,t){this.targetInventory&&this.targetInventory.OnDragging(e,t),this.ChestRigInventory.OnDragging(e,t),this.BackpackInventory.OnDragging(e,t),this.SafeBoxInventory.OnDragging(e,t),this.Weapon_Primary.OnDragging(e,t),this.Weapon_Secondary.OnDragging(e,t),this.Weapon_Pistol.OnDragging(e,t),this.Weapon_Melee.OnDragging(e,t),this.Weapon_Helmet.OnDragging(e,t),this.Weapon_BodyArmor.OnDragging(e,t),this.singleInventorys.forEach((n=>{n.OnDragging(e,t)}))}OnDragEnd(e,t){this.BackpackScrollView.enabled=!0,this.targetInventory&&this.targetInventory.OnDragEnd(e,t),this.ChestRigInventory.OnDragEnd(e,t),this.BackpackInventory.OnDragEnd(e,t),this.SafeBoxInventory.OnDragEnd(e,t),this.Weapon_Primary.OnDragEnd(e,t),this.Weapon_Secondary.OnDragEnd(e,t),this.Weapon_Pistol.OnDragEnd(e,t),this.Weapon_Melee.OnDragEnd(e,t),this.Weapon_Helmet.OnDragEnd(e,t),this.Weapon_BodyArmor.OnDragEnd(e,t),this.singleInventorys.forEach((n=>{n.OnDragEnd(e,t)})),this.RefreshTotalValue(),l.Scene.emit(h.Event.REFRESH_GAME_ITEM_UI),l.Scene.emit(h.Event.REFRESH_WEAON_CONTENT),l.Scene.emit(h.Event.REFRESH_EUIP)}RefreshMoney(){this.MoneyLabel.string=`${s.PlayerData.Money.toLocaleString()}`}RefreshTotalValue(){let e=0;if(s.PlayerData.Weapon_Primary&&(e+=s.PlayerData.Weapon_Primary.Price),s.PlayerData.Weapon_Secondary&&(e+=s.PlayerData.Weapon_Secondary.Price),s.PlayerData.Weapon_Pistol&&(e+=s.PlayerData.Weapon_Pistol.Price),s.PlayerData.Weapon_Helmet&&(e+=s.PlayerData.Weapon_Helmet.Price),s.PlayerData.Weapon_BodyArmor&&(e+=s.PlayerData.Weapon_BodyArmor.Price),s.PlayerData.PocketData)for(let t=0;t<s.PlayerData.PocketData.length;t++){const n=s.PlayerData.PocketData[t];n[0]&&(e+=n[0].Price)}if(s.PlayerData.ChestRigData){e+=s.PlayerData.ChestRigData.Price;for(let t=0;t<s.PlayerData.ChestRigData.EquipData.ItemData.length;t++){let t=s.PlayerData.ChestRigData.EquipData.ItemData;for(let n=0;n<t.length;n++)t[n]&&(e+=t[n].Price)}}if(s.PlayerData.BackpackData){e+=s.PlayerData.BackpackData.Price;for(let t=0;t<s.PlayerData.BackpackData.EquipData.ItemData.length;t++){let t=s.PlayerData.BackpackData.EquipData.ItemData;for(let n=0;n<t.length;n++)t[n]&&(e+=t[n].Price)}}if(s.PlayerData.SafeBox)for(let t=0;t<s.PlayerData.SafeBox.ItemData.length;t++){let t=s.PlayerData.SafeBox.ItemData;for(let n=0;n<t.length;n++)t[n]&&(e+=t[n].Price)}this.TotalValueLabel.string="总价值："+s.PlayerData.GetTotalValue().toLocaleString()}OnButtonClick(e){S.Instance.PlaySFX(d.ButtonClick);const t=(e,t,n)=>{const a=e[t];_.Instance.ShowPanel(h.Panel.ItemInfoPanel,[a,!0,o=>{"Sell"==o&&(I.ShowTip(`出售成功，获得${a.Price.toLocaleString()}`),s.PlayerData.Money+=a.Price,e[t]=null,E.Instance.player.weapon==a&&(E.Instance.player.weapon=null),l.Scene.emit(h.Event.REFRESH_EUIP),l.Scene.emit(h.Event.REFRESH_GAME_ITEM_UI)),"Takeoff"==o&&(s.PlayerData.AddItemToInventory(a)?(e[t]=null,E.Instance.player.weapon==a&&(E.Instance.player.weapon=null),l.Scene.emit(h.Event.REFRESH_EUIP),l.Scene.emit(h.Event.REFRESH_GAME_ITEM_UI)):I.ShowTip("放入失败")),n.RefreshWeaponContent(),n.RefreshContentLabel(),this.RefreshTotalValue()}])};switch(e.target.name){case"Weapon_Primary":s.PlayerData.Weapon_Primary&&t(s.PlayerData,"Weapon_Primary",this.Weapon_Primary);break;case"Weapon_Pistol":s.PlayerData.Weapon_Pistol&&t(s.PlayerData,"Weapon_Pistol",this.Weapon_Pistol);break;case"Weapon_Secondary":s.PlayerData.Weapon_Secondary&&t(s.PlayerData,"Weapon_Secondary",this.Weapon_Secondary);break;case"Weapon_Helmet":s.PlayerData.Weapon_Helmet&&t(s.PlayerData,"Weapon_Helmet",this.Weapon_Helmet);break;case"Weapon_BodyArmor":s.PlayerData.Weapon_BodyArmor&&t(s.PlayerData,"Weapon_BodyArmor",this.Weapon_BodyArmor);break;case"ReturnButton":_.Instance.HidePanel(h.Panel.InventoryPanel)}}onEnable(){l.on(h.Event.REFRESH_WEAON_CONTENT,this.RefreshWeaponContentLabel,this),l.on(h.Event.REFRESH_MONEY,this.RefreshMoney,this),l.on(h.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),l.on(h.Event.ON_ITEM_DRAGGING,this.OnDragging,this),l.on(h.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}onDisable(){l.off(h.Event.REFRESH_WEAON_CONTENT,this.RefreshWeaponContentLabel,this),l.off(h.Event.REFRESH_MONEY,this.RefreshMoney,this),l.off(h.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),l.off(h.Event.ON_ITEM_DRAGGING,this.OnDragging,this),l.off(h.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}})||v);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Item.ts",["cc","./NodeUtil.ts","./SJZ_Data.ts","./SJZ_Constant.ts","./SJZ_GameManager.ts","./EventManager.ts","./BundleManager.ts","./GameManager.ts"],(function(t){var e,i,n,s,o,a,h,c,r,l,d,m,u,I,S,g,p,T,C,v,y;return{setters:[function(t){e=t.cclegacy,i=t.Component,n=t.v3,s=t.UITransform,o=t.Sprite,a=t.Widget,h=t.UIOpacity,c=t.Label,r=t.Vec3,l=t.Tween,d=t.tween,m=t.find,u=t.Node,I=t._decorator},function(t){S=t.default},function(t){g=t.SJZ_ItemType},function(t){p=t.SJZ_Constant},function(t){T=t.SJZ_GameManager},function(t){C=t.EventManager},function(t){v=t.BundleManager},function(t){y=t.GameManager}],execute:function(){var D;e._RF.push({},"b2b8dg/gyxJ2Jdow/XqALmf","SJZ_Item",void 0);const{ccclass:_,property:E}=I;t("default",_("SJZ_Item")(D=class t extends i{constructor(...t){super(...t),this.trans=null,this.Background=null,this.BackgroundTrans=null,this.BackgroundWidget=null,this.Unsearch=null,this.UnsearchWidget=null,this.ItemDetail=null,this.Icon_Display=null,this.Icon=null,this.NameLabel=null,this.NameLabelTrans=null,this.DescLabel=null,this.SearchIcon=null,this.data=null,this.offset=n(),this.searchTimer=0,this.angle=0,this.canDrag=!0,this.isShopItem=!1,this.touchCallback=null,this.belongInventory=null}get Center(){return n(this.data.Size.width/2*p.itemSize-p.itemSize/2,-(this.data.Size.height/2*p.itemSize-p.itemSize/2))}onLoad(){this.trans=this.node.getComponent(s),this.Background=S.GetComponent("Background",this.node,o),this.BackgroundTrans=this.Background.getComponent(s),this.BackgroundWidget=this.Background.getComponent(a),this.Unsearch=S.GetNode("Unsearch",this.node),this.UnsearchWidget=this.Unsearch.getComponent(a),this.ItemDetail=S.GetComponent("ItemDetail",this.node,h),this.Icon_Display=S.GetComponent("Icon_Display",this.node,o),this.Icon=S.GetComponent("Icon",this.node,o),this.NameLabel=S.GetComponent("NameLabel",this.node,c),this.NameLabelTrans=this.NameLabel.getComponent(s),this.DescLabel=S.GetComponent("DescLabel",this.node,c),this.SearchIcon=S.GetNode("SearchIcon",this.node)}Init(e){this.data=e,this.NameLabel.string=e.Name,this.DescLabel.string="",this.trans.setContentSize(p.itemSize*e.Size.width,p.itemSize*e.Size.height),this.trans.setAnchorPoint(1/(2*e.Size.width),1-1/(2*e.Size.height)),this.BackgroundWidget.updateAlignment(),this.UnsearchWidget.updateAlignment(),this.NameLabelTrans.setContentSize(2*this.trans.contentSize.width-20,this.NameLabelTrans.contentSize.height),v.LoadSpriteFrame(y.GameData.DefaultBundle,`Res/Items/${e.ImageId}`).then((i=>{this.Icon_Display.spriteFrame=i,this.Icon.spriteFrame=i,this.Icon_Display.node.setPosition(r.ZERO),this.Icon.node.setPosition(r.ZERO),t.SetItemImageScale(this.Icon_Display,e.Size.width,e.Size.height),t.SetItemImageScale(this.Icon,e.Size.width,e.Size.height)})),this.canDrag=e.Searched,this.NameLabel.node.active=e.Searched,this.SearchIcon.active=!1,this.Unsearch.active=!e.Searched,this.ItemDetail.node.active=e.Searched,e.Searched?(this.Background.color=T.GetColorHexByQuality(e.Quality),this.data.Type==g.Ammo&&(this.DescLabel.string=`${this.data.Count}`)):(this.angle=0,this.SearchIcon.setPosition(this.Center)),this.isShopItem=!1,this.touchCallback=null}RemoveItemFromAndResetLastInventory(){this.belongInventory&&(this.belongInventory.RemoveItemFromArray(this.data),this.belongInventory=null)}InitShopItem(t,e){this.onLoad(),this.Init(t),this.isShopItem=!0,this.touchCallback=e}Search(t=null){clearInterval(this.searchTimer),this.SearchIcon.active=!0,this.searchTimer=setInterval(this.SearchAni.bind(this),20),this.scheduleOnce((()=>{clearInterval(this.searchTimer),this.data.Searched=!0,this.Unsearch.active=!1,this.SearchIcon.active=!1,this.Background.color=T.GetColorHexByQuality(this.data.Quality),this.ItemDetail.node.active=!0,this.NameLabel.node.active=!0,this.ItemDetail.node.setScale(1.5,1.5,1.5),l.stopAllByTarget(this.ItemDetail.node),d(this.ItemDetail.node).to(.05,{scale:r.ONE}).call((()=>{this.canDrag=!0})).start(),t&&t()}),p.SearchTime[this.data.Quality])}SearchAni(){this.angle+=.2;const t=this.Center.x+10*Math.sin(this.angle),e=this.Center.y+10*Math.cos(this.angle);this.SearchIcon.setPosition(new r(t,e,0))}onTouchStart(t){if(!this.canDrag||this.isShopItem)return;let e=this.Icon.node.worldPosition.clone();this.Icon.node.setParent(m("Canvas")),this.Icon.node.setWorldPosition(e),C.Scene.emit(p.Event.ON_ITEM_DRAGSTART,this,t.touch.getUILocation())}onTouchMove(t){if(!this.canDrag||this.isShopItem)return;const e=t.touch.getUILocation(),i=n(this.data.Size.width/2*p.itemSize-p.itemSize/2,-(this.data.Size.height/2*p.itemSize-p.itemSize/2));this.Icon.node.setWorldPosition(n(e.x+i.x,e.y+i.y)),C.Scene.emit(p.Event.ON_ITEM_DRAGGING,this,t.touch.getUILocation())}onTouchEnd(t){if(this.isShopItem)return void(this.touchCallback&&this.touchCallback(this.data));if(!this.canDrag)return;this.Icon.node.setParent(this.Icon_Display.node.parent),this.Icon.node.setPosition(this.Icon_Display.node.position);const e=t.touch.getUILocation();C.Scene.emit(p.Event.ON_ITEM_DRAGEND,this,e)}onTouchCancel(t){if(!this.canDrag)return;this.Icon.node.setParent(this.Icon_Display.node.parent),this.Icon.node.setPosition(this.Icon_Display.node.position);const e=t.touch.getUILocation();C.Scene.emit(p.Event.ON_ITEM_DRAGEND,this,e)}onEnable(){this.node.on(u.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this.onTouchCancel,this)}onDisable(){clearInterval(this.searchTimer),this.node.off(u.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(u.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(u.EventType.TOUCH_CANCEL,this.onTouchCancel,this)}static SetItemImageScale(t,e,i){let n=t.getComponent(s).contentSize.width,o=t.getComponent(s).contentSize.height,a=(e*p.itemSize-25)/n,h=(i*p.itemSize-25)/o,c=a>h?h:a;t.node.setScale(c,c,1)}})||D);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_ItemInfoPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_Data.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./BundleManager.ts","./GameManager.ts","./SJZ_GameManager.ts","./SJZ_DataManager.ts","./SJZ_AudioManager.ts","./ProjectEventManager.ts","./SJZ_PlayerInventory.ts"],(function(e){var t,n,a,s,l,o,i,c,u,r,h,I,d,P,f,m,g,S,_,b,B;return{setters:[function(e){t=e.cclegacy,n=e.Sprite,a=e.Label,s=e._decorator,l=e.instantiate,o=e.Vec3},function(e){i=e.default},function(e){c=e.PanelBase},function(e){u=e.SJZ_ItemData,r=e.SJZ_ItemType},function(e){h=e.SJZ_UIManager},function(e){I=e.SJZ_Constant},function(e){d=e.BundleManager},function(e){P=e.GameManager},function(e){f=e.SJZ_GameManager},function(e){m=e.SJZ_DataManager},function(e){g=e.SJZ_AudioManager,S=e.SJZ_Audio},function(e){_=e.ProjectEventManager,b=e.ProjectEvent},function(e){B=e.default}],execute:function(){var Z;t._RF.push({},"880f3/H8jlPua0a/zJdnzXQ","SJZ_ItemInfoPanel",void 0);const{ccclass:p,property:G}=s;e("default",p("SJZ_ItemInfoPanel")(Z=class extends c{constructor(...e){super(...e),this.Panel=null,this.Icon=null,this.TitleLabel=null,this.MoneyLabel=null,this.DescLabel=null,this.Buttons=null,this.Button=null,this.Button_GaiZhuang=null,this.data=null,this.callback=null}onLoad(){this.Panel=i.GetNode("Panel",this.node),this.Icon=i.GetComponent("Icon",this.node,n),this.TitleLabel=i.GetComponent("TitleLabel",this.node,a),this.MoneyLabel=i.GetComponent("MoneyLabel",this.node,a),this.DescLabel=i.GetComponent("DescLabel",this.node,a),this.Button=i.GetNode("Button",this.node),this.Buttons=i.GetNode("Buttons",this.node),this.Button_GaiZhuang=i.GetNode("Button_GaiZhuang",this.node)}Reset(){this.DescLabel.string=""}Show(e,t=!1,n=null){if(super.Show(this.Panel),this.data=e,this.callback=n,this.Reset(),this.Button.active=!t,this.Buttons.active=t,this.Button_GaiZhuang.active=u.IsGun(e.Type),this.TitleLabel.string=`${e.Name}`,this.MoneyLabel.string=`${e.Price}`,e.Type==r.Weapon){let t=m.AmmoData.filter((t=>t.Type==e.WeaponData.AmmoType)),n="";for(let e=0;e<t.length;e++)n+=`\t\t\t${t[e].Name}\n`;this.DescLabel.string=`子弹类型：\n${n}`}d.LoadSpriteFrame(P.GameData.DefaultBundle,`Res/Items/${e.ImageId}`).then((e=>{this.Icon.spriteFrame=e,f.SetImagePreferScale(this.Icon,300,300)})),_.emit(b.页面转换,P.GameData.gameName)}OnButtonClick(e){switch(g.Instance.PlaySFX(S.ButtonClick),e.target.name){case"Mask":h.Instance.HidePanel(I.Panel.ItemInfoPanel);break;case"Button_Sell":this.callback&&this.callback("Sell"),h.Instance.HidePanel(I.Panel.ItemInfoPanel);break;case"Button_Takeoff":this.callback&&this.callback("Takeoff"),h.Instance.HidePanel(I.Panel.ItemInfoPanel);break;case"Button_GaiZhuang":d.LoadPrefab(P.GameData.DefaultBundle,"UI/PlayerInventory").then((e=>{h.Instance.ShowPanel(I.Panel.AccessoriesPanel,[this.data,t=>{let n=l(e);n.setParent(t),n.setPosition(o.ZERO);let a=n.getComponent(B);return a.InitPlayerInventory(),a}])}));break;case"CloseButton":h.Instance.HidePanel(I.Panel.ItemInfoPanel);break;case"Button":this.callback&&this.callback(this.data),h.Instance.HidePanel(I.Panel.ItemInfoPanel)}}})||Z);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Joystick.ts",["cc","./EventManager.ts","./SJZ_Constant.ts"],(function(t){var e,o,i,s,n,h,c,a,_,T,E,u,k;return{setters:[function(t){e=t.cclegacy,o=t.Component,i=t.Vec2,s=t.Node,n=t.UITransform,h=t.Vec3,c=t.v2,a=t.input,_=t.Input,T=t.KeyCode,E=t._decorator},function(t){u=t.EventManager},function(t){k=t.SJZ_Constant}],execute:function(){var l;e._RF.push({},"a00d9JFDTRDArslrKqNw8TC","SJZ_Joystick",void 0);const{ccclass:y,property:r}=E;t("SJZ_Joystick",y("SJZ_Joystick")(l=class extends o{constructor(...t){super(...t),this._joystickBase=null,this._joystickDot=null,this._attack=null,this._attackDot=null,this._movementTouch=null,this._attackMovementTouch=null,this._keys=[],this._dir=new i(0,0)}onLoad(){let t=this.node.getChildByName("JoystickArea");t.on(s.EventType.TOUCH_START,this.OnTouchStart,this),t.on(s.EventType.TOUCH_MOVE,this.OnTouchMove,this),t.on(s.EventType.TOUCH_END,this.OnTouchEnd,this),t.on(s.EventType.TOUCH_CANCEL,this.OnTouchEnd,this),this._joystickBase=this.node.getChildByName("JoystickBase"),this._joystickDot=this._joystickBase.getChildByName("JoystickDot"),this._attack=this.node.getChildByName("Attack"),this._attackDot=this._attack.getChildByName("AttackDot"),this._attack.on(s.EventType.TOUCH_START,this.OnAttackTouchStart,this),this._attack.on(s.EventType.TOUCH_MOVE,this.OnAttackTouchMove,this),this._attack.on(s.EventType.TOUCH_END,this.OnAttackTouchEnd,this),this._attack.on(s.EventType.TOUCH_CANCEL,this.OnAttackTouchEnd,this)}start(){}OnTouchStart(t){let e=t.getTouches();for(let t=0;t<e.length;++t){let o=e[t];o.getUILocationX(),o.getUILocationY();this._movementTouch||(this._joystickDot.setPosition(0,0,0),this._movementTouch=o)}}OnTouchMove(t){let e=t.getTouches();for(let t=0;t<e.length;++t){let o=e[t];if(this._movementTouch&&o.getID()==this._movementTouch.getID()){let t=o.getUILocationX(),e=o.getUILocationY(),i=this._joystickBase.position,s=t-this.node.getComponent(n).width/2-i.x,h=e-this.node.getComponent(n).height/2-i.y,c=Math.sqrt(s*s+h*h);if(c<=0)return;let a=s/c,_=h/c,T=this._joystickBase.getComponent(n).width/2;c>T&&(c=T,s=a*T,h=_*T),this._joystickDot.setPosition(s,h,0),u.Scene.emit(k.Event.MOVEMENT,a,_,c/T)}}}OnTouchEnd(t){let e=t.getTouches();for(let t=0;t<e.length;++t){let o=e[t];this._movementTouch&&o.getID()==this._movementTouch.getID()&&(u.Scene.emit(k.Event.MOVEMENT_STOP),this._movementTouch=null,this._joystickDot.setPosition(h.ZERO))}}OnAttackTouchStart(t){let e=t.getTouches();u.Scene.emit(k.Event.FIRE_START);for(let t=0;t<e.length;++t){let o=e[t];o.getUILocationX(),o.getUILocationY();this._attackMovementTouch||(this._attackDot.setPosition(0,0,0),this._attackMovementTouch=o)}}OnAttackTouchMove(t){let e=t.getTouches();for(let t=0;t<e.length;++t){let o=e[t];if(this._attackMovementTouch&&o.getID()==this._attackMovementTouch.getID()){let t=o.getUILocationX(),e=o.getUILocationY(),i=this._attack.position,s=t-this.node.getComponent(n).width/2-i.x,h=e-this.node.getComponent(n).height/2-i.y,a=Math.sqrt(s*s+h*h);if(a<=0)return;let _=s/a,T=h/a,E=this._attack.getComponent(n).width/2;a>E&&(a=E,s=_*E,h=T*E),this._attackDot.setPosition(s,h,0),u.Scene.emit(k.Event.SET_ATTACK_DIR,c(_,T))}}}OnAttackTouchEnd(t){let e=t.getTouches();u.Scene.emit(k.Event.FIRE_STOP);for(let t=0;t<e.length;++t){let o=e[t];this._attackMovementTouch&&o.getID()==this._attackMovementTouch.getID()&&(this._attackMovementTouch=null,this._attackDot.setPosition(h.ZERO))}}onEnable(){a.on(_.EventType.KEY_DOWN,this.onKeyDown,this),a.on(_.EventType.KEY_UP,this.onKeyUp,this)}onDisable(){a.off(_.EventType.KEY_DOWN,this.onKeyDown,this),a.off(_.EventType.KEY_UP,this.onKeyUp,this)}onKeyDown(t){let e=t.keyCode;e!=T.KEY_A&&e!=T.KEY_S&&e!=T.KEY_D&&e!=T.KEY_W||-1==this._keys.indexOf(e)&&(this._keys.push(e),this.updateDirection()),e.SPACE}onKeyUp(t){let e=t.keyCode;if(e==T.KEY_A||e==T.KEY_S||e==T.KEY_D||e==T.KEY_W){let t=this._keys.indexOf(e);if(-1!=t){switch(this._keys.splice(t,1),e){case T.KEY_A:case T.KEY_D:this._dir.x=0;break;case T.KEY_W:case T.KEY_S:this._dir.y=0}this.updateDirection()}}}updateDirection(){this._keys.some((t=>t==T.KEY_A))&&(this._dir.x=-1),this._keys.some((t=>t==T.KEY_D))&&(this._dir.x=1),this._keys.some((t=>t==T.KEY_W))&&(this._dir.y=1),this._keys.some((t=>t==T.KEY_S))&&(this._dir.y=-1),u.Scene.emit(k.Event.MOVEMENT,this._dir.x,this._dir.y,1)}})||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_LootManager.ts",["cc","./SJZ_DataManager.ts"],(function(t){var e,o,n;return{setters:[function(t){e=t.cclegacy,o=t.misc},function(t){n=t.SJZ_DataManager}],execute:function(){e._RF.push({},"efe09Ela5pP36tc7FLulAKc","SJZ_LootManager",void 0);t("SJZ_LootManager",class{static GetContainerResult(t){const e=n.ContainerLootMap.get(t);if(!e)return console.warn(`No drop table found for container: ${t}`),[];const r=[];let a=o.clampf(Math.round(5*Math.random()),1,5);for(let t=0;t<a;t++){const t=this.GetRandomItem(e);if(t){let e=n.GetItemDataByType(t.Type,t.ID);e?(e.Searched=!1,r.push(e)):console.error("找不到数据",t)}}return r}static GetRandomItem(t){const e=t.reduce(((t,e)=>t+e.Probability),0);if(e<=0)return null;const o=Math.random()*e;let n=0;for(const e of t)if(n+=e.Probability,o<=n)return e;return null}static GetRandomItemInPrizePool(){let t=n.PrizePoolData;const e=t.reduce(((t,e)=>t+e.Probability),0);if(e<=0)return null;const o=Math.random()*e;let r=0;for(const e of t)if(r+=e.Probability,o<=r)return e;return null}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_LvManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SJZ_Constant.ts","./SJZ_GameManager.ts","./PrefsManager.ts","./UIManager.ts","./SJZ_DataManager.ts","./BundleManager.ts","./GameManager.ts","./SJZ_CharacterController.ts","./SJZ_CameraController.ts","./SJZ_Data.ts","./SJZ_AudioManager.ts","./EventManager.ts","./SJZ_UIManager.ts","./Tools.ts"],(function(e){var t,a,n,i,r,s,o,l,u,c,h,p,d,g,f,m,y,S,M,I,_,G,b,C,L,P,J,T,Z,D,v,z;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Node,r=e.TiledMap,s=e.CCString,o=e.Vec2,l=e._decorator,u=e.Component,c=e.sys,h=e.RigidBody2D,p=e.ERigidBody2DType,d=e.BoxCollider2D,g=e.UITransform,f=e.v2,m=e.instantiate},function(e){y=e.SJZ_Constant},function(e){S=e.SJZ_GameManager},function(e){M=e.default},function(e){I=e.UIManager,_=e.Panel},function(e){G=e.SJZ_DataManager},function(e){b=e.BundleManager},function(e){C=e.GameManager},function(e){L=e.default},function(e){P=e.default},function(e){J=e.SJZ_MatchData},function(e){T=e.SJZ_AudioManager,Z=e.SJZ_Audio},function(e){D=e.EventManager},function(e){v=e.SJZ_UIManager},function(e){z=e.Tools}],execute:function(){var w,B,N,E,x,A,O,U,R,H,W,F,K,k,j,q,V,X,$,Q;n._RF.push({},"1a4fc/XAuhL6oZwzoJiW2k7","SJZ_LvManager",void 0);const{ccclass:Y,property:ee}=l;e("SJZ_LvManager",(w=Y("SJZ_LvManager"),B=ee(i),N=ee(i),E=ee(r),x=ee(i),A=ee(i),O=ee({type:[i]}),U=ee(s),R=ee(o),w(((Q=class e extends u{constructor(...e){super(...e),a(this,"Game",F,this),a(this,"UI",K,this),a(this,"tiledMap",k,this),a(this,"playerPosition",j,this),a(this,"GuideTarget",q,this),a(this,"Guides",V,this),this.guideIndex=-1,a(this,"MapName",X,this),a(this,"MapSize",$,this),this.Layer_Supplies=null,this.Layer_Characters=null,this.Layer_Effects=null,this.matchData=null}onLoad(){S.IsGameOver=!1,e.Instance=this,this.InitMap(),this.Layer_Supplies=this.Game.getChildByName("Supplies"),this.Layer_Characters=this.Game.getChildByName("Characters"),this.Layer_Effects=this.Game.getChildByName("Effects"),this.Layer_Supplies||console.error("Game 下面没有叫 Supplies 的节点"),this.Layer_Characters||console.error("Game 下面没有叫 Characters 的节点"),this.Layer_Effects||console.error("Game 下面没有叫 Effects 的节点"),this.matchData=new J(this.MapName,"",0,0,0,0),this.matchData.MapName=this.MapName,"特勤处"==this.MapName?T.Instance.PlayBGM(Z.BG):T.Instance.StopBGM()}start(){this.InitPlayer();const e=c.localStorage.getItem(y.Key.isHavePassTutorial);console.log(e),"训练场"===this.matchData.MapName||e&&null!=e&&"false"!==e?(console.log("不是第一次"),M.GetBool(y.Key.FirstPutInventory,!0)&&"特勤处"==this.matchData.MapName&&v.Instance.ShowPanel(y.Panel.TutorialPanel)):(console.log("第一次进入游戏"),c.localStorage.setItem(y.Key.isHavePassTutorial,!1),G.SetDefaultEquip(G.PlayerData),I.ShowPanel(_.LoadingPanel,"SJZ_Tutorial"))}InitMap(){let e=this.tiledMap.getTileSize(),t=this.tiledMap.getLayer("Obstacle");for(let a=0;a<t.getLayerSize().width;a++)for(let n=0;n<t.getLayerSize().height;n++){let i=t.getTiledTileAt(a,n,!0);if(0!=i.grid){let t=i.node.addComponent(h);t.type=p.Static;let a=i.node.addComponent(d);t.group=y.Group.Obstacle,a.group=y.Group.Obstacle,i.node.getComponent(g).setContentSize(e.width,e.height),a.offset=f(e.width/2,e.height/2),a.size=e,a.apply()}}}InitPlayer(){S.Instance.player&&S.Instance.player.destroy(),b.LoadPrefab(C.GameData.DefaultBundle,"Player").then((t=>{let a=m(t);a.setParent(this.Layer_Characters),a.setWorldPosition(this.playerPosition.worldPosition),S.Instance.player=a.getComponent(L),P.Instance.target=a,e.Instance.Guides&&e.Instance.Guides.length>0?this.AddGuideIndex():e.Instance.GuideTarget&&D.Scene.emit(y.Event.SHOW_TUTORIAL,e.Instance.GuideTarget)}))}AddGuideIndex(){this.guideIndex=z.Clamp(this.guideIndex+1,0,this.Guides.length-1),console.log(`显示第 ${this.guideIndex} 个引导`),D.Scene.emit(y.Event.SHOW_TUTORIAL,e.Instance.Guides[this.guideIndex])}update(e){S.IsGameOver||(this.matchData.Time+=e)}}).Instance=null,F=t((W=Q).prototype,"Game",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(W.prototype,"UI",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(W.prototype,"tiledMap",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(W.prototype,"playerPosition",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(W.prototype,"GuideTarget",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(W.prototype,"Guides",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=t(W.prototype,"MapName",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$=t(W.prototype,"MapSize",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return f()}}),H=W))||H));n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Missile.ts",["cc","./SJZ_PoolManager.ts","./SJZ_Constant.ts","./SJZ_LvManager.ts","./SJZ_AudioManager.ts"],(function(t){var i,n,o,e,s,a,r,c,l,d,g,u,h,p;return{setters:[function(t){i=t.cclegacy,n=t.Component,o=t.RigidBody2D,e=t.Vec2,s=t.v3,a=t.v2,r=t.BoxCollider2D,c=t.Contact2DType,l=t._decorator},function(t){d=t.SJZ_PoolManager},function(t){g=t.SJZ_Constant},function(t){u=t.SJZ_LvManager},function(t){h=t.SJZ_AudioManager,p=t.SJZ_Audio}],execute:function(){var y;i._RF.push({},"a61a3ZjOlJJWZi0YLKFAtgk","SJZ_Missile",void 0);const{ccclass:Z,property:_}=l;t("default",Z("SJZ_Missile")(y=class extends n{constructor(...t){super(...t),this.rigidbody=null,this.target=null}onLoad(){this.rigidbody=this.node.getComponent(o)}Init(t){this.rigidbody.linearVelocity=e.ZERO,this.target=t;let i=s(this.node.right.clone().multiplyScalar(3e3));this.rigidbody.applyForceToCenter(a(i.x,i.y),!0),this.node.getComponent(r).on(c.BEGIN_CONTACT,this.onBeginContact,this)}onBeginContact(t,i,n){if(i.group==g.Group.Obstacle){const t=n.getWorldManifold();h.Instance.PlaySFX(p.MissileExplosion),d.Instance.Get(g.Prefab.MissileExplosion,u.Instance.Game).setWorldPosition(s(t.points[0].x,t.points[0].y)),this.scheduleOnce((()=>{d.Instance.Put(this.node)}))}}update(t){this.target?e.distance(this.node.getWorldPosition(),this.target.getWorldPosition())>3500&&(this.rigidbody.linearVelocity=e.ZERO,d.Instance.Put(this.node)):(this.rigidbody.linearVelocity=e.ZERO,d.Instance.Put(this.node))}})||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_OutputItem.ts",["cc","./NodeUtil.ts","./SJZ_PoolManager.ts","./SJZ_Constant.ts","./SJZ_CommonItem.ts"],(function(t){var e,s,n,i,o,l,a,c,u;return{setters:[function(t){e=t.cclegacy,s=t.Component,n=t.Label,i=t.Vec3,o=t._decorator},function(t){l=t.default},function(t){a=t.SJZ_PoolManager},function(t){c=t.SJZ_Constant},function(t){u=t.default}],execute:function(){var h;e._RF.push({},"f7807yA3kxDlbyzP1RSzlm8","SJZ_OutputItem",void 0);const{ccclass:m,property:r}=o;t("default",m("SJZ_OutputItem")(h=class extends s{constructor(...t){super(...t),this.Select=null,this.Item=null,this.Label=null,this.data=null,this.item=null,this.cb=null}onLoad(){this.Select=l.GetNode("Select",this.node),this.Item=l.GetNode("Item",this.node),this.Label=l.GetComponent("Label",this.node,n)}Init(t,e){if(this.data=t,this.cb=e,this.Label.string=t.Name,this.Select.active=!1,!this.item){let t=a.Instance.Get(c.Prefab.CommonItem,this.Item);this.item=t.getComponent(u),t.setPosition(i.ZERO)}this.item.InitDisplay(t)}Refresh(t){this.Select.active=t==this.data}OnButtonClick(){this.cb&&this.cb(this.data)}})||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_OutputPanel.ts",["cc","./NodeUtil.ts","./GameManager.ts","./ProjectEventManager.ts","./SJZ_Data.ts","./SJZ_GameManager.ts","./SJZ_DataManager.ts","./SJZ_PoolManager.ts","./SJZ_Constant.ts","./Tools.ts","./SJZ_UIManager.ts","./EventManager.ts","./BundleManager.ts","./PanelBase.ts","./SJZ_OutputItem.ts","./SJZ_CommonItem.ts","./UIManager.ts","./SJZ_AudioManager.ts"],(function(t){var e,a,n,o,i,s,l,u,r,m,h,I,c,d,f,p,M,D,g,y,b,C,S;return{setters:[function(t){e=t.cclegacy,a=t.Label,n=t.Sprite,o=t._decorator},function(t){i=t.default},function(t){s=t.GameManager},function(t){l=t.ProjectEventManager,u=t.ProjectEvent},function(t){r=t.SJZ_ItemType},function(t){m=t.SJZ_GameManager},function(t){h=t.SJZ_DataManager},function(t){I=t.SJZ_PoolManager},function(t){c=t.SJZ_Constant},function(t){d=t.Tools},function(t){f=t.SJZ_UIManager},function(t){p=t.EventManager},function(t){M=t.BundleManager},function(t){D=t.PanelBase},function(t){g=t.default},function(t){y=t.default},function(t){b=t.UIManager},function(t){C=t.SJZ_AudioManager,S=t.SJZ_Audio}],execute:function(){var P;e._RF.push({},"0f8ebkhr7lAK6fGJHIYgb4E","SJZ_OutputPanel",void 0);const{ccclass:N,property:L}=o;t("default",N("SJZ_OutputPanel")(P=class extends D{constructor(...t){super(...t),this.OutputItemContent=null,this.NeedMatContent=null,this.MoneyLabel=null,this.ItemNameLabel=null,this.OutputTimeLabel=null,this.TitleLabel=null,this.Icon=null,this.MatLabel=null,this.OutputButton=null,this.outputItems=[],this.matItems=[],this.data=null,this.time=3610,this.countDownTimer=-1}onLoad(){this.MoneyLabel=i.GetComponent("MoneyLabel",this.node,a),this.ItemNameLabel=i.GetComponent("ItemNameLabel",this.node,a),this.TitleLabel=i.GetComponent("TitleLabel",this.node,a),this.OutputTimeLabel=i.GetComponent("OutputTimeLabel",this.node,a),this.Icon=i.GetComponent("Icon",this.node,n),this.NeedMatContent=i.GetNode("NeedMatContent",this.node),this.OutputItemContent=i.GetNode("OutputItemContent",this.node),this.MatLabel=i.GetNode("MatLabel",this.node),this.OutputButton=i.GetNode("OutputButton",this.node)}StartCountdown(){clearInterval(this.countDownTimer),this.countDownTimer=setInterval(this.Countdown.bind(this),1e3)}Countdown(){this.time--,this.time<=0&&(this.time=0,clearInterval(this.countDownTimer)),this.OutputTimeLabel.string=d.FormatTime(this.time)}Show(t){l.emit(u.弹出窗口,s.GameData.gameName),this.outputItems.forEach((t=>I.Instance.Put(t.node))),this.outputItems=[],this.matItems.forEach((t=>I.Instance.Put(t.node))),this.matItems=[];let e=h.PlayerData.GetWorkbenchLv(t),a=[];for(let n=1;n<=e;n++){let e=h.WorkbenchData.get(t).find((t=>t.Lv==n));for(let t=0;t<e.Making.length;t++){let n=h.GetItemDataByID(e.Making[t]);n&&a.push(n)}}for(let t=0;t<a.length;t++){let e=I.Instance.Get(c.Prefab.OutputItem,this.OutputItemContent).getComponent(g);e.Init(a[t],this.ItemCallback.bind(this)),this.outputItems.push(e)}this.TitleLabel.string=`${c.WorkbenchName[t]}`,this.MatLabel.active=!1,this.OutputButton.active=!1,this.ItemNameLabel.string="选择一项进行制造",this.Icon.spriteFrame=null,this.RefreshMoney(),l.emit(u.页面转换,s.GameData.gameName)}ItemCallback(t){this.data=t,this.RefreshInfo(t),this.outputItems.forEach((e=>e.Refresh(t)))}RefreshInfo(t){if(this.MatLabel.active=!0,this.OutputButton.active=!0,this.ItemNameLabel.string=`${t.Name}`,t.Type==r.Weapon){let e=h.WeaponData.find((e=>e.ID==t.ID));e?this.InitNeedMatItem(e.Required,e.Quantity):console.error(`WeaponData未找到武器数据：${t.Name}`)}if(t.Type==r.Helmet||t.Type==r.BodyArmor){let e=h.EquipData.find((e=>e.ID==t.ID));e?this.InitNeedMatItem(e.Required,e.Quantity):console.error(`EquipData未找到装备数据：${t.Name}`)}if(t.Type==r.Ammo){let e=h.AmmoData.find((e=>e.ID==t.ID));e?this.InitNeedMatItem(e.Required,e.Quantity):console.error(`AmmoData未找到子弹数据：${t.Name,t.ID}`)}if(t.Type==r.ArmorItem||t.Type==r.MedicalItem){let e=h.ConsumableData.find((e=>e.ID==t.ID));console.error(e.ID,e.Name,e.Required,e.Quantity),e?this.InitNeedMatItem(e.Required,e.Quantity):console.error(`ConsumableData未找到消耗品数据：${t.Name}`)}M.LoadSpriteFrame(s.GameData.DefaultBundle,`Res/Items/${t.ImageId}`).then((t=>{this.Icon.spriteFrame=t,m.SetImagePreferScale(this.Icon,800,500)}))}InitNeedMatItem(t,e){this.matItems.forEach((t=>I.Instance.Put(t.node))),this.matItems=[];let a=[];for(let n=0;n<t.length;n++){let o=d.Clone(h.GetItemDataByID(t[n]));o&&(o.Count=e[n],a.push(o))}for(let t=0;t<a.length;t++){let e=I.Instance.Get(c.Prefab.CommonItem,this.NeedMatContent).getComponent(y);e.InitDisplay(a[t]);let n=h.PlayerData.GetInventoryItemCount(a[t].ID),o=`<b><color=${n>=a[t].Count?"#00ff00":"#ff0000"}>${n}/${a[t].Count}</color></b>`;e.SetDescStr(o),this.matItems.push(e)}}RefreshMoney(){this.MoneyLabel.string=`${h.PlayerData.Money}`}OnButtonClick(t){switch(C.Instance.PlaySFX(S.ButtonClick),t.target.name){case"OutputButton":let t=[];for(let e=0;e<this.matItems.length;e++){if(h.PlayerData.GetInventoryItemCount(this.matItems[e].data.ID)<this.matItems[e].data.Count)return void b.ShowTip("材料不足");{let a=h.PlayerData.InventoryItemData.filter((t=>t.ID==this.matItems[e].data.ID));for(let n=0;n<this.matItems[e].data.Count;n++)t.push(a[n])}}for(let e=0;e<t.length;e++)h.PlayerData.RemoveItemFromInventory(t[e]);f.Instance.ShowPanel(c.Panel.RewardPanel,[[this.data]]),this.RefreshInfo(this.data);break;case"MakeAnywayButton":let e=0;for(let t=0;t<this.matItems.length;t++)e+=this.matItems[t].data.Price*this.matItems[t].data.Count;h.PlayerData.Money<e?b.ShowTip(`金钱不足，需要${e}`):(h.PlayerData.Money-=e,f.Instance.ShowPanel(c.Panel.RewardPanel,[[this.data]]));break;case"ReturnButton":f.Instance.HidePanel(c.Panel.OutputPanel)}}onEnable(){p.on(c.Event.REFRESH_MONEY,this.RefreshMoney,this)}onDisable(){p.off(c.Event.REFRESH_MONEY,this.RefreshMoney,this)}})||P);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_PlayerData.ts",["cc","./PrefsManager.ts","./SJZ_Data.ts","./SJZ_InventoryGrid.ts","./EventManager.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./Tools.ts"],(function(t){var a,e,i,h,n,s,o,r,c;return{setters:[function(t){a=t.cclegacy,e=t.misc},function(t){i=t.default},function(t){h=t.SJZ_ItemType},function(t){n=t.SJZ_InventoryGrid},function(t){s=t.EventManager},function(t){o=t.SJZ_Constant},function(t){r=t.SJZ_DataManager},function(t){c=t.Tools}],execute:function(){a._RF.push({},"8eb13TS3gdH77FlfYjDVhxl","SJZ_PlayerData",void 0);t("SJZ_PlayerData",class{constructor(t=1e6,a=[],e=null,i=null,h=null,s=null,o=null,r=null,c=[],D=null,l=null,m=null,p=[]){this.SafeBox={width:2,height:1,ItemData:[]},this.SingleGrids=[],this.ChestRigGrid=null,this.BackpackGrid=null,this.SafeBoxGrid=null,this.InventoryGridCtrl=null,this.money=t,this.InventoryItemData=a,this.Weapon_Primary=e,this.Weapon_Secondary=i,this.Weapon_Pistol=h,this.Weapon_Melee=s,this.Weapon_Helmet=o,this.Weapon_BodyArmor=r,this.PocketData=c,this.ChestRigData=D,this.BackpackData=l,this.safeBox=m,this.ShowcaseData=p,m&&(this.SafeBox=m),this.Money=t,this.InventoryGridCtrl=new n(1,1),this.SingleGrids=[];for(let t=0;t<5;t++)this.SingleGrids.push(new n(1,1));this.ChestRigData&&(this.ChestRigGrid=new n(this.ChestRigData.EquipData.CarryingSpace.width,this.ChestRigData.EquipData.CarryingSpace.height)),this.BackpackData&&(this.BackpackGrid=new n(this.BackpackData.EquipData.CarryingSpace.width,this.BackpackData.EquipData.CarryingSpace.height)),this.SafeBoxGrid=new n(this.SafeBox.width,this.SafeBox.height),this.Init(9,19)}get Money(){return this.money}set Money(t){t=Math.floor(t),this.money=t,s.Scene.emit(o.Event.REFRESH_MONEY)}Init(t,a){this.InventoryGridCtrl=new n(t,a);let e=this.InventoryItemData;for(let t=0;t<e.length;t++)n.PlaceItem(this.InventoryGridCtrl,e[t].Point.x,e[t].Point.y,e[t].Size.width,e[t].Size.height)}EquipChestRig(t){t.Type==h.ChestRig?(this.ChestRigData=t,this.ChestRigGrid=new n(this.ChestRigData.EquipData.CarryingSpace.width,this.ChestRigData.EquipData.CarryingSpace.height)):console.error("无法装备胸挂",t)}UnEquipChestRig(){}EquipBackpack(t){t.Type==h.Backpack?(this.BackpackData=t,this.BackpackGrid=new n(this.BackpackData.EquipData.CarryingSpace.width,this.BackpackData.EquipData.CarryingSpace.height)):console.error("无法装备背包",t)}UnEquipBackpack(){}SetSafeBox(t,a){r.PlayerData.SafeBox={width:t,height:a,ItemData:[]},this.SafeBoxGrid=new n(t,a)}AddItemToBackpack(t){this.BackpackData&&this.BackpackData.EquipData&&r.FillContainer(this.BackpackGrid,[t],this.BackpackData.EquipData.ItemData)}GetWorkbenchLv(t){return i.GetNumber(`WorkbenchLv_${t}`,0)}SetWorkbenchLv(t,a){a=e.clampf(a,1,3),i.SetNumber(`WorkbenchLv_${t}`,a)}AddItemToInventory(t){let a=this.InventoryGridCtrl.width*this.InventoryGridCtrl.height;for(let e=0;e<a;e++){let a=e%this.InventoryGridCtrl.width,i=Math.floor(e/this.InventoryGridCtrl.width);if(0==this.InventoryGridCtrl.grid[i][a]&&n.CanPlaceItem(this.InventoryGridCtrl,a,i,t.Size.width,t.Size.height))return n.PlaceItem(this.InventoryGridCtrl,a,i,t.Size.width,t.Size.height),t.Point.x=a,t.Point.y=i,console.log("仓库添加:",t),this.InventoryItemData.push(t),s.Scene.emit(o.Event.REFRESH_INVENTORY_ITEMS),r.SaveData(),!0}return!1}RemoveItemFromInventory(t){return-1!=this.InventoryItemData.indexOf(t)&&(this.InventoryItemData.splice(this.InventoryItemData.indexOf(t),1),r.SaveData(),n.RemoveItem(this.InventoryGridCtrl,t.Point.x,t.Point.y,t.Size.width,t.Size.height),console.log("仓库移除:",t),s.Scene.emit(o.Event.REFRESH_INVENTORY_ITEMS),!0)}GetInventoryItemCount(t){let a=0,e=this.InventoryItemData.filter((a=>a.ID==t));return e&&(a=e.length),a}AddItemToShowcase(t){this.ShowcaseData.push(t)}RemoveItemFromShowcase(t){-1!=this.ShowcaseData.indexOf(t)&&this.ShowcaseData.splice(this.ShowcaseData.indexOf(t),1)}RemoveItemFromBackpack(t){for(let a=0;a<this.PocketData.length;a++){const e=this.PocketData[a];-1!==e.findIndex((a=>a==t))&&(e.splice(e.indexOf(t),1),n.RemoveItem(this.SingleGrids[a],t.Point.x,t.Point.y,t.Size.width,t.Size.height))}this.ChestRigData&&-1!==this.ChestRigData.EquipData.ItemData.findIndex((a=>a==t))&&(this.ChestRigData.EquipData.ItemData.splice(this.ChestRigData.EquipData.ItemData.indexOf(t),1),n.RemoveItem(this.ChestRigGrid,t.Point.x,t.Point.y,t.Size.width,t.Size.height)),this.BackpackData&&-1!==this.BackpackData.EquipData.ItemData.findIndex((a=>a==t))&&(this.BackpackData.EquipData.ItemData.splice(this.BackpackData.EquipData.ItemData.indexOf(t),1),n.RemoveItem(this.ChestRigGrid,t.Point.x,t.Point.y,t.Size.width,t.Size.height)),this.SafeBox&&-1!==this.SafeBox.ItemData.findIndex((a=>a==t))&&(this.SafeBox.ItemData.splice(this.SafeBox.ItemData.indexOf(t),1),n.RemoveItem(this.SafeBoxGrid,t.Point.x,t.Point.y,t.Size.width,t.Size.height)),s.Scene.emit(o.Event.REFRESH_BACKPACK_ITEMS)}ClearBackpack(){this.Weapon_Primary=null,this.Weapon_Secondary=null,this.Weapon_Pistol=null,this.Weapon_Helmet=null,this.Weapon_BodyArmor=null,this.ChestRigData=null,this.BackpackData=null;for(let t=0;t<this.PocketData.length;t++){const a=this.PocketData[t];a.forEach((a=>{n.RemoveItem(this.SingleGrids[t],a.Point.x,a.Point.y,a.Size.width,a.Size.height)})),a.length=0}r.SaveData()}GetBackpackAllItemByType(t){let a=[];for(let e=0;e<this.PocketData.length;e++){const i=this.PocketData[e].filter((a=>a.Type==t));a.push(...i)}if(this.ChestRigData){const e=this.ChestRigData.EquipData.ItemData.filter((a=>a.Type==t));a.push(...e)}if(this.BackpackData){const e=this.BackpackData.EquipData.ItemData.filter((a=>a.Type==t));a.push(...e)}if(this.SafeBox){const e=this.SafeBox.ItemData.filter((a=>a.Type==t));a.push(...e)}return a}GetBackpackItem(t){let a=null;for(let e=0;e<this.PocketData.length;e++){if(a=this.PocketData[e].find((a=>a.Name==t)),a)return a}return this.ChestRigData&&(a=this.ChestRigData.EquipData.ItemData.find((a=>a.Name==t)),a)||this.BackpackData&&(a=this.BackpackData.EquipData.ItemData.find((a=>a.Name==t)),a)||this.SafeBox&&(a=this.SafeBox.ItemData.find((a=>a.Name==t))),a}GetAmmoByType(t,a){for(let e=0;e<this.PocketData.length;e++){const i=this.PocketData[e],n=i.find((a=>a.Type==h.Ammo&&a.AmmoData.Type==t));if(n)return a>=n.Count&&c.RemoveItemFromArray(i,n),n}if(this.ChestRigData){const e=this.ChestRigData.EquipData.ItemData.find((a=>a.Type==h.Ammo&&a.AmmoData.Type==t));if(e)return a>=e.Count&&c.RemoveItemFromArray(this.ChestRigData.EquipData.ItemData,e),e}if(this.BackpackData){const e=this.BackpackData.EquipData.ItemData.find((a=>a.Type==h.Ammo&&a.AmmoData.Type==t));if(e)return a>=e.Count&&c.RemoveItemFromArray(this.BackpackData.EquipData.ItemData,e),e}if(this.SafeBox){const e=this.SafeBox.ItemData.find((a=>a.Type==h.Ammo&&a.AmmoData.Type==t));if(e)return a>=e.Count&&c.RemoveItemFromArray(this.SafeBox.ItemData,e),e}return null}GetAmmoCountByType(t){let a=0;for(let e=0;e<this.PocketData.length;e++)for(let i=0;i<this.PocketData[e].length;i++){let n=this.PocketData[e][i];n.Type==h.Ammo&&n.AmmoData.Type==t&&(a+=n.Count)}if(this.ChestRigData)for(let e=0;e<this.ChestRigData.EquipData.ItemData.length;e++){let i=this.ChestRigData.EquipData.ItemData[e];i.Type==h.Ammo&&i.AmmoData.Type==t&&(a+=i.Count)}if(this.BackpackData)for(let e=0;e<this.BackpackData.EquipData.ItemData.length;e++){let i=this.BackpackData.EquipData.ItemData[e];i.Type==h.Ammo&&i.AmmoData.Type==t&&(a+=i.Count)}if(this.SafeBox)for(let e=0;e<this.SafeBox.ItemData.length;e++){let i=this.SafeBox.ItemData[e];i.Type==h.Ammo&&i.AmmoData.Type==t&&(a+=i.Count)}return a}GetInventoryItemByType(t){return this.InventoryItemData.filter((a=>a.Type==t))}GetTotalValue(){let t=0;if(this.Weapon_Primary&&(t+=this.Weapon_Primary.Price),this.Weapon_Secondary&&(t+=this.Weapon_Secondary.Price),this.Weapon_Pistol&&(t+=this.Weapon_Pistol.Price),this.Weapon_Helmet&&(t+=this.Weapon_Helmet.Price),this.Weapon_BodyArmor&&(t+=this.Weapon_BodyArmor.Price),this.PocketData)for(let a=0;a<this.PocketData.length;a++){const e=this.PocketData[a];e[0]&&(t+=e[0].Price)}if(this.ChestRigData){t+=this.ChestRigData.Price;for(let a=0;a<this.ChestRigData.EquipData.ItemData.length;a++){let a=this.ChestRigData.EquipData.ItemData;for(let e=0;e<a.length;e++)a[e]&&(t+=a[e].Price)}}if(this.BackpackData){t+=this.BackpackData.Price;for(let a=0;a<this.BackpackData.EquipData.ItemData.length;a++){let a=this.BackpackData.EquipData.ItemData;for(let e=0;e<a.length;e++)a[e]&&(t+=a[e].Price)}}if(this.SafeBox)for(let a=0;a<this.SafeBox.ItemData.length;a++){let a=this.SafeBox.ItemData;for(let e=0;e<a.length;e++)a[e]&&(t+=a[e].Price)}return Math.floor(t)}}),a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_PlayerInventory.ts",["cc","./NodeUtil.ts","./SJZ_Inventory.ts","./SJZ_DataManager.ts","./EventManager.ts","./SJZ_Constant.ts"],(function(t){var n,e,r,a,o,s,i,l,c;return{setters:[function(t){n=t.cclegacy,e=t.UITransform,r=t.ScrollView,a=t._decorator},function(t){o=t.default},function(t){s=t.default},function(t){i=t.SJZ_DataManager},function(t){l=t.EventManager},function(t){c=t.SJZ_Constant}],execute:function(){var I;n._RF.push({},"d6771RosshFNJAsXmp3r4IZ","SJZ_PlayerInventory",void 0);const{ccclass:u,property:S}=a;t("default",u("SJZ_PlayerInventory")(I=class extends s{constructor(...t){super(...t),this.ScrollView=null}onLoad(){this.ItemContent=o.GetNode("ItemContent",this.node),this.ItemContentTrans=this.ItemContent.getComponent(e),this.ScrollView=o.GetComponent("ScrollView",this.node,r)}InitPlayerInventory(){super.Init(i.PlayerData.InventoryItemData,i.PlayerData.InventoryGridCtrl)}OnDragStart(t){this.ScrollView.enabled=!1,super.OnDragStart(t)}OnDragging(t,n){super.OnDragging(t,n)}OnDragEnd(t,n){this.ScrollView.enabled=!0,super.OnDragEnd(t,n)}onEnable(){l.Scene.on(c.Event.REFRESH_INVENTORY_ITEMS,this.InitPlayerInventory,this)}onDisable(){l.Scene.off(c.Event.REFRESH_INVENTORY_ITEMS,this.InitPlayerInventory,this)}})||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_PoolManager.ts",["cc"],(function(t){var e,s,o;return{setters:[function(t){e=t.cclegacy,s=t.NodePool,o=t.instantiate}],execute:function(){e._RF.push({},"75ec8jqPlpLr618agsIU5y0","SJZ_PoolManager",void 0);class n{constructor(){this._pools=new Map,this._prefabs=new Map}static get Instance(){return this._instance||(this._instance=new n),this._instance}Preload(t,e){const n=t.name;if(this._prefabs.has(n)||this._prefabs.set(n,t),this._pools.has(n)||this._pools.set(n,new s),this._pools.get(n).size()<e)for(let s=0;s<e-this._pools.get(n).size();s++){var i;const e=o(t);e.active=!1,null==(i=this._pools.get(n))||i.put(e)}}Get(t,e,n){const i="string"==typeof t?t:t.name;let a=this._pools.get(i);if(!a){if(!this._prefabs.has(i))return console.error(`Pool ${i} not found!`),null;a=new s,this._pools.set(i,a)}let l=a.get();if(!l||!l.isValid){const t=this._prefabs.get(i);l=o(t)}return l&&(l.active=!0,e&&(l.parent=e),n&&l.setPosition(n),l.emit("object-activated")),l||null}Put(t){const e=t.name;var s;(t.removeFromParent(),t.emit("object-recycled"),this._pools.has(e))?null==(s=this._pools.get(e))||s.put(t):(console.warn(`没有这个对象池：${e}`),t.destroy())}CleanPool(t){const e=this._pools.get(t);e&&(e.clear(),this._pools.delete(t),this._prefabs.delete(t))}CleanAllPools(){this._pools.forEach(((t,e)=>{t.clear(),this._pools.delete(e),this._prefabs.delete(e)}))}}t("SJZ_PoolManager",n),n._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_RewardPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./SJZ_CommonItem.ts","./SJZ_PoolManager.ts","./Tools.ts","./UIManager.ts","./SJZ_AudioManager.ts"],(function(t){var n,e,a,o,s,i,l,c,r,u,h,d,S,P,C,f;return{setters:[function(t){n=t.cclegacy,e=t.Layout,a=t.ScrollView,o=t.Vec3,s=t._decorator},function(t){i=t.default},function(t){l=t.PanelBase},function(t){c=t.SJZ_UIManager},function(t){r=t.SJZ_Constant},function(t){u=t.SJZ_DataManager},function(t){h=t.default},function(t){d=t.SJZ_PoolManager},function(t){S=t.Tools},function(t){P=t.UIManager},function(t){C=t.SJZ_AudioManager,f=t.SJZ_Audio}],execute:function(){var _;n._RF.push({},"8e624QHbdZEq4VFCYH0aaHk","SJZ_RewardPanel",void 0);const{ccclass:Z,property:g}=s;t("default",Z("SJZ_RewardPanel")(_=class extends l{constructor(...t){super(...t),this.Panel=null,this.Content=null,this.ContentLayout=void 0,this.ScrollView=null,this.items=[],this.callback=null}onLoad(){this.Panel=i.GetNode("Panel",this.node),this.Content=i.GetNode("Content",this.node),this.ContentLayout=this.Content.getComponent(e),this.ScrollView=i.GetComponent("ScrollView",this.node,a)}Show(t,n){super.Show(this.Panel),this.items.forEach((t=>d.Instance.Put(t.node))),this.items=[];for(let n=0;n<t.length;n++)this.scheduleOnce((()=>{let e=d.Instance.Get(r.Prefab.CommonItem,this.Content).getComponent(h);e.InitDisplay(t[n]),this.items.push(e),this.ContentLayout.updateLayout(),this.Content.setPosition(o.ZERO),u.PlayerData.AddItemToInventory(S.Clone(t[n]))||(u.PlayerData.Money+=t[n].Price,P.ShowTip(`仓库已满，转化成金钱${t[n].Price}`))}),.1*n);this.callback=n}OnButtonClick(t){switch(C.Instance.PlaySFX(f.ButtonClick),t.target.name){case"Mask":c.Instance.HidePanel(r.Panel.RewardPanel)}}})||_);n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SafeBoxInventory.ts",["cc","./NodeUtil.ts","./SJZ_DataManager.ts","./SJZ_Constant.ts","./SJZ_Inventory.ts","./SJZ_UIManager.ts","./SJZ_AudioManager.ts"],(function(t){var e,n,o,i,a,s,h,c,r,I,l;return{setters:[function(t){e=t.cclegacy,n=t.UITransform,o=t.Label,i=t._decorator},function(t){a=t.default},function(t){s=t.SJZ_DataManager},function(t){h=t.SJZ_Constant},function(t){c=t.default},function(t){r=t.SJZ_UIManager},function(t){I=t.SJZ_AudioManager,l=t.SJZ_Audio}],execute:function(){var d;e._RF.push({},"ed9e9pCvWxCwLW1+XUyFoEc","SJZ_SafeBoxInventory",void 0);const{ccclass:u,property:_}=i;t("default",u("SJZ_SafeBoxInventory")(d=class extends c{constructor(...t){super(...t),this.Item=null,this.ItemLabel=null,this.Icon_0=null,this.Icon_1=null,this.Icon_2=null,this.Icon_3=null,this.ndTrans=null,this.inBox=!1}onLoad(){this.Item=a.GetComponent("Item",this.node,n),this.ItemLabel=a.GetComponent("ItemLabel",this.node,o),this.ItemContent=a.GetNode("ItemContent",this.node),this.ItemContentTrans=this.ItemContent.getComponent(n),this.Icon_0=a.GetNode("Icon_0",this.node),this.Icon_1=a.GetNode("Icon_1",this.node),this.Icon_2=a.GetNode("Icon_2",this.node),this.Icon_3=a.GetNode("Icon_3",this.node),this.ndTrans=this.node.getComponent(n)}Refresh(){let t=s.PlayerData.SafeBox;this.Icon_0.active=2==t.width&&1==t.height,this.Icon_1.active=2==t.width&&2==t.height,this.Icon_2.active=3==t.width&&2==t.height,this.Icon_3.active=3==t.width&&3==t.height;let e=t.width,n=t.height;this.ItemContentTrans.setContentSize(e*h.itemSize,n*h.itemSize),this.ndTrans.setContentSize(170+e*h.itemSize+20,150+n*h.itemSize),super.Init(t.ItemData,s.PlayerData.SafeBoxGrid)}OnDragStart(t){super.OnDragStart(t)}OnDragging(t,e){super.OnDragging(t,e)}OnDragEnd(t,e){super.OnDragEnd(t,e)}OnButtonClick(t){switch(I.Instance.PlaySFX(l.ButtonClick),t.target.name){case"Item":r.Instance.ShowPanel(h.Panel.SelectSafeBoxPanel,[()=>{this.Refresh()}])}}})||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SafeBoxPanel.ts",["cc","./PanelBase.ts","./NodeUtil.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./Tools.ts","./SJZ_AudioManager.ts"],(function(e){var t,s,n,i,o,c,h,l,a,r,d,S,f;return{setters:[function(e){t=e.cclegacy,s=e.v3,n=e.UIOpacity,i=e.Label,o=e.math,c=e._decorator},function(e){h=e.PanelBase},function(e){l=e.default},function(e){a=e.SJZ_UIManager},function(e){r=e.SJZ_Constant},function(e){d=e.Tools},function(e){S=e.SJZ_AudioManager,f=e.SJZ_Audio}],execute:function(){var u;t._RF.push({},"007079T17NM5JB6zwLILY2c","SJZ_SafeBoxPanel",void 0);const{ccclass:x,property:p}=c,B=s(0,0,0);e("SJZ_SafeBoxPanel",x("SJZ_SafeBoxPanel")(u=class extends h{constructor(...e){super(...e),this.Panel=null,this.SafeBox=null,this.speed=300,this.crossIndex=0,this.passworld=["6","D","F","U","P"],this.isStucked=!1,this.stuck=.5,this.callback=null}onLoad(){this.Panel=l.GetNode("Panel",this.node),this.SafeBox=l.GetNode("SafeBox",this.node)}Show(e){S.Instance.PlayBGM(f.SafeBoxBG),this.callback=e,super.Show(this.Panel),this.crossIndex=0,this.isStucked=!1,this.stuck=.5,this.SetCurCol()}lateUpdate(e){for(let t=0;t<this.SafeBox.children.length;t++){let s=this.SafeBox.children[t];if(!(t<=this.crossIndex-1))if(this.isStucked&&t==this.crossIndex)this.stuck-=e,this.stuck<=0&&(this.isStucked=!1,this.stuck=.5);else for(let n=0;n<s.children.length;n++)B.set(s.children[n].position.x,s.children[n].position.y,0),B.y-=e*(this.speed+20*t),B.y<=-300&&(B.y=B.y+600),s.children[n].setPosition(B)}}SetCurCol(){for(let e=0;e<this.SafeBox.children.length;e++)this.SafeBox.children[e].getComponent(n).opacity=this.crossIndex==e?255:80}OnButtonClick(e){switch(S.Instance.PlaySFX(f.ButtonClick),e.target.name){case"Button":let e=0;const t=()=>{S.Instance.PlaySFX(f.SafeBoxF),this.scheduleOnce((()=>{let s=[];for(let e=0;e<this.SafeBox.children[this.crossIndex].children.length;e++)s.push(this.SafeBox.children[this.crossIndex].children[e].getComponent(i).color.clone()),this.SafeBox.children[this.crossIndex].children[e].getComponent(i).color=d.GetColorFromHex("#FF5050");this.scheduleOnce((()=>{for(let e=0;e<this.SafeBox.children[this.crossIndex].children.length;e++)this.SafeBox.children[this.crossIndex].children[e].getComponent(i).color=s[e];e++,e>=2||t()}),.1)}),.1)},c=()=>{S.Instance.StopBGM(),this.scheduleOnce((()=>{for(let e=0;e<this.SafeBox.children.length;e++)this.SafeBox.children[e].getComponent(n).opacity=80;this.scheduleOnce((()=>{for(let e=0;e<this.SafeBox.children.length;e++)this.SafeBox.children[e].getComponent(n).opacity=255;e++,e>=5?(a.Instance.HidePanel(r.Panel.SafeBoxPanel),this.callback&&this.callback()):c()}),.1)}),.1)};if(this.crossIndex==this.passworld.length)return;if(this.isStucked)return;let h=this.SafeBox.children[this.crossIndex],l=h.children.find((e=>Math.abs(e.position.y)<35));if(l)if(l.getComponent(i).string==this.passworld[this.crossIndex]){let e=l.position.y;for(let t=0;t<h.children.length;t++)h.children[t].setPosition(s(h.children[t].position.x,h.children[t].position.y-e,0));S.Instance.PlaySFX(f.SafeBoxT),this.crossIndex=o.clamp(this.crossIndex+1,0,this.passworld.length),this.SetCurCol(),this.crossIndex==this.passworld.length&&c()}else this.isStucked=!0,t();else this.isStucked=!0,t()}}})||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SelectMapPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./Tools.ts","./TweenUtil.ts","./UIManager.ts","./GameManager.ts","./ProjectEventManager.ts","./SJZ_AudioManager.ts","./SJZ_DataManager.ts"],(function(t){var e,i,n,o,a,s,h,l,f,c,r,u,p,m,d,R,S,M,g,y,T,I;return{setters:[function(t){e=t.cclegacy,i=t.RichText,n=t.Sprite,o=t.Tween,a=t.tween,s=t.v3,h=t.Vec3,l=t._decorator},function(t){f=t.default},function(t){c=t.PanelBase},function(t){r=t.SJZ_UIManager},function(t){u=t.SJZ_Constant},function(t){p=t.Tools},function(t){m=t.EasingType},function(t){d=t.UIManager,R=t.Panel},function(t){S=t.GameManager},function(t){M=t.ProjectEventManager,g=t.ProjectEvent},function(t){y=t.SJZ_AudioManager,T=t.SJZ_Audio},function(t){I=t.SJZ_DataManager}],execute:function(){var x;e._RF.push({},"1214afnMj5M4r9B6OvyO3jJ","SJZ_SelectMapPanel",void 0);const{ccclass:P,property:B}=l;t("default",P("SJZ_SelectMapPanel")(x=class extends c{constructor(...t){super(...t),this.Panel=null,this.Map=null,this.Maps=null,this.lhdb=null,this.DifficultyRichText=null,this.EntryCostRichText=null,this.LevelRequirementRichText=null,this.TimeLimitRichText=null,this.RegularButton=null,this.RegularButtonRichText=null,this.SecretButton=null,this.SecretButtonRichText=null,this.mapInfo=null,this.difficulty=0,this.difficultyColorHex=["#00ff00","#ff0000"],this.difficultyStrs=["简单","困难"]}onLoad(){this.Panel=f.GetNode("Panel",this.node),this.Map=f.GetNode("Map",this.node),this.Maps=f.GetNode("Maps",this.node),this.lhdb=f.GetNode("零号大坝",this.node),this.DifficultyRichText=f.GetComponent("DifficultyRichText",this.node,i),this.EntryCostRichText=f.GetComponent("EntryCostRichText",this.node,i),this.LevelRequirementRichText=f.GetComponent("LevelRequirementRichText",this.node,i),this.TimeLimitRichText=f.GetComponent("TimeLimitRichText",this.node,i),this.RegularButton=f.GetComponent("RegularButton",this.node,n),this.RegularButtonRichText=f.GetComponent("RegularButtonRichText",this.node,i),this.SecretButton=f.GetComponent("SecretButton",this.node,n),this.SecretButtonRichText=f.GetComponent("SecretButtonRichText",this.node,i),this.Show()}Show(){this.mapInfo=null,this.ShowInfoPanel(!1),M.emit(g.页面转换,S.GameData.gameName)}ShowMap(t){o.stopAllByTarget(this.Map),a(this.Map).to(.3,{position:t.negative().multiplyScalar(2),scale:s(2,2,1)},{easing:m.sineIn}).start()}ResetMap(){o.stopAllByTarget(this.Map),a(this.Map).to(.3,{position:h.ZERO,scale:h.ONE},{easing:m.sineIn}).start()}ShowInfoPanel(t){this.Panel.active=t,t?(super.Show(this.Panel),this.RefreshPanel()):this.mapInfo=null}RefreshPanel(){null!=this.mapInfo&&(this.RegularButton.color=0==this.difficulty?p.GetColorFromHex("#5EA770"):p.GetColorFromHex("#293E51"),this.SecretButton.color=1==this.difficulty?p.GetColorFromHex("#5EA770"):p.GetColorFromHex("#293E51"),this.RegularButtonRichText.string=`<b><color=${0==this.difficulty?"#ffffff":"#a9a9aa"}>常规行动</color></b>`,this.SecretButtonRichText.string=`<b><color=${1==this.difficulty?"#ffffff":"#a9a9aa"}>机密行动</color></b>`,this.DifficultyRichText.string=`<b><color=${this.difficultyColorHex[this.difficulty]} >${this.difficultyStrs[this.difficulty]}</color></b>`,this.EntryCostRichText.string=`<b><color=#ffffff>${this.mapInfo.EntryCosts[this.difficulty]}</color></b>`,this.LevelRequirementRichText.string=`<b><color=#ffffff>${this.mapInfo.LevelRequirements[this.difficulty]}</color></b>`,this.TimeLimitRichText.string=`<b><color=#ffffff>${this.mapInfo.TimeLimit}</color></b>`,this.Maps.children.forEach((t=>{t.active=t.name==this.mapInfo.Name})))}OnButtonClick(t){switch(y.Instance.PlaySFX(T.ButtonClick),t.target.name){case"Map":this.ShowInfoPanel(!1),this.ResetMap();break;case"零号大坝":if(this.mapInfo==u.MapInfo.零号大坝)return;this.ShowMap(t.target.position.clone()),this.mapInfo=u.MapInfo.零号大坝,this.difficulty=0,this.ShowInfoPanel(!0);break;case"长弓溪谷":if(this.mapInfo==u.MapInfo.长弓溪谷)return;this.ShowMap(t.target.position.clone()),this.mapInfo=u.MapInfo.长弓溪谷,this.difficulty=0,this.ShowInfoPanel(!0);break;case"烽火荣都":if(this.mapInfo==u.MapInfo.烽火荣都)return;this.ShowMap(t.target.position.clone()),this.mapInfo=u.MapInfo.烽火荣都,this.difficulty=0,this.ShowInfoPanel(!0);break;case"RegularButton":this.difficulty=0,this.RefreshPanel();break;case"SecretButton":this.difficulty=1,this.RefreshPanel();break;case"StartButton":I.PlayerData.GetTotalValue()>=this.mapInfo.EntryCosts[this.difficulty]?d.ShowPanel(R.LoadingPanel,this.mapInfo.MapName):d.ShowTip("战备价值不够");break;case"ReturnButton":r.Instance.HidePanel(u.Panel.SelectMapPanel)}}})||x);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SelectSafeBoxPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./UIManager.ts","./Banner.ts","./SJZ_AudioManager.ts"],(function(e){var a,t,n,o,l,s,c,i,S,f,r,B;return{setters:[function(e){a=e.cclegacy,t=e.Label,n=e._decorator},function(e){o=e.default},function(e){l=e.PanelBase},function(e){s=e.SJZ_UIManager},function(e){c=e.SJZ_Constant},function(e){i=e.SJZ_DataManager},function(e){S=e.UIManager},function(e){f=e.default},function(e){r=e.SJZ_AudioManager,B=e.SJZ_Audio}],execute:function(){var h;a._RF.push({},"05a8e9cYYtIf4qNj/jF+i6+","SJZ_SelectSafeBoxPanel",void 0);const{ccclass:d,property:x}=n;e("default",d("SJZ_SelectSafeBoxPanel")(h=class extends l{constructor(...e){super(...e),this.Panel=null,this.Buttons=null,this.callback=null}onLoad(){this.Panel=o.GetNode("Panel",this.node),this.Buttons=o.GetNode("Buttons",this.node)}Show(e){super.Show(this.Panel),this.callback=e,this.Refresh()}Refresh(){for(let e=0;e<this.Buttons.children.length;e++){let a=this.Buttons.children[e],n="",o=!1;switch(a.name){case"SafeBox_0":o=!0,n="普通安全箱";break;case"SafeBox_1":o=i.GetSafeBoxUnlock(a.name),n=o?"进阶安全箱":`(${i.GetSafeBoxAdTimes(a.name)}/3)进阶安全箱`;break;case"SafeBox_2":o=i.GetSafeBoxUnlock(a.name),n=o?"高级安全箱":`(${i.GetSafeBoxAdTimes(a.name)}/6)高级安全箱`;break;case"SafeBox_3":o=i.GetSafeBoxUnlock(a.name),n=o?"顶级安全箱":`(${i.GetSafeBoxAdTimes(a.name)}/9)顶级安全箱`}a.getChildByName("ButtonLabel").getComponent(t).string=n,a.getChildByName("Lock").active=!o,a.getChildByName("Ad").active=!o}}OnButtonClick(e){switch(r.Instance.PlaySFX(B.ButtonClick),e.target.name){case"Mask":s.Instance.HidePanel(c.Panel.SelectSafeBoxPanel);break;case"SafeBox_0":if(i.PlayerData.SafeBox.ItemData.length>0)return void S.ShowTip("安全箱内还有物品");i.PlayerData.SetSafeBox(2,1),this.callback&&this.callback(),s.Instance.HidePanel(c.Panel.SelectSafeBoxPanel),i.SaveData();break;case"SafeBox_1":if(i.GetSafeBoxUnlock(e.target.name)){if(i.PlayerData.SafeBox.ItemData.length>0)return void S.ShowTip("安全箱内还有物品");i.PlayerData.SetSafeBox(2,2),this.callback&&this.callback(),s.Instance.HidePanel(c.Panel.SelectSafeBoxPanel),i.SaveData()}else f.Instance.ShowVideoAd((()=>{let a=i.GetSafeBoxAdTimes(e.target.name);i.SetSafeBoxAdTimes(e.target.name,a+1),this.Refresh()}));break;case"SafeBox_2":if(i.GetSafeBoxUnlock(e.target.name)){if(i.PlayerData.SafeBox.ItemData.length>0)return void S.ShowTip("安全箱内还有物品");i.PlayerData.SetSafeBox(3,2),this.callback&&this.callback(),s.Instance.HidePanel(c.Panel.SelectSafeBoxPanel),i.SaveData()}else f.Instance.ShowVideoAd((()=>{let a=i.GetSafeBoxAdTimes(e.target.name);i.SetSafeBoxAdTimes(e.target.name,a+1),this.Refresh()}));break;case"SafeBox_3":if(i.GetSafeBoxUnlock(e.target.name)){if(i.PlayerData.SafeBox.ItemData.length>0)return void S.ShowTip("安全箱内还有物品");i.PlayerData.SetSafeBox(3,3),this.callback&&this.callback(),s.Instance.HidePanel(c.Panel.SelectSafeBoxPanel),i.SaveData()}else f.Instance.ShowVideoAd((()=>{let a=i.GetSafeBoxAdTimes(e.target.name);i.SetSafeBoxAdTimes(e.target.name,a+1),this.Refresh()}))}}})||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SellInventory.ts",["cc","./NodeUtil.ts","./SJZ_Inventory.ts","./SJZ_InventoryGrid.ts","./SJZ_DataManager.ts","./UIManager.ts"],(function(t){var e,n,a,o,r,s,i,l,h;return{setters:[function(t){e=t.cclegacy,n=t.Label,a=t.UITransform,o=t._decorator},function(t){r=t.default},function(t){s=t.default},function(t){i=t.SJZ_InventoryGrid},function(t){l=t.SJZ_DataManager},function(t){h=t.UIManager}],execute:function(){var c;e._RF.push({},"69f00KPVYhN1peRywmyTr9w","SJZ_SellInventory",void 0);const{ccclass:u,property:y}=o;t("default",u("SJZ_SellInventory")(c=class extends s{constructor(...t){super(...t),this.SellMoneyLabel=null}onLoad(){this.SellMoneyLabel=r.GetComponent("SellMoneyLabel",this.node,n),this.ItemContent=r.GetNode("ItemContent",this.node),this.ItemContentTrans=this.ItemContent.getComponent(a)}Init(){this.data=[],this.gridCtrl=new i(8,7),super.Init(this.data,this.gridCtrl)}RefreshMoney(){this.SellMoneyLabel.string=this.GetTotalMoneny().toLocaleString()}OnDragStart(t){super.OnDragStart(t)}OnDragging(t,e){super.OnDragging(t,e)}OnDragEnd(t,e){super.OnDragEnd(t,e),this.RefreshMoney()}GetTotalMoneny(){let t=0;for(let e=0;e<this.data.length;e++)t+=this.data[e].Price*this.data[e].Count;return t}Sell(){l.PlayerData.Money+=this.GetTotalMoneny(),h.ShowTip(`出售成功，金钱 +${this.GetTotalMoneny().toLocaleString()}`),this.data=[],this.ClearItems(),this.RefreshMoney()}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SellPanel.ts",["cc","./NodeUtil.ts","./GameManager.ts","./ProjectEventManager.ts","./SJZ_DataManager.ts","./SJZ_Constant.ts","./SJZ_UIManager.ts","./EventManager.ts","./SJZ_PlayerInventory.ts","./PanelBase.ts","./SJZ_SellInventory.ts","./SJZ_AudioManager.ts"],(function(n){var t,e,a,o,r,s,i,l,h,g,S,c,u,v,y,E;return{setters:[function(n){t=n.cclegacy,e=n.Label,a=n._decorator},function(n){o=n.default},function(n){r=n.GameManager},function(n){s=n.ProjectEventManager,i=n.ProjectEvent},function(n){l=n.SJZ_DataManager},function(n){h=n.SJZ_Constant},function(n){g=n.SJZ_UIManager},function(n){S=n.EventManager},function(n){c=n.default},function(n){u=n.PanelBase},function(n){v=n.default},function(n){y=n.SJZ_AudioManager,E=n.SJZ_Audio}],execute:function(){var I;t._RF.push({},"47e55frcpBMYZ0TGKvMIXl4","SJZ_SellPanel",void 0);const{ccclass:_,property:f}=a;n("default",_("SJZ_SellPanel")(I=class extends u{constructor(...n){super(...n),this.Inventory=null,this.SellInventory=null,this.MoneyLabel=null}onLoad(){this.Inventory=o.GetComponent("Inventory",this.node,c),this.SellInventory=o.GetComponent("SellInventory",this.node,v),this.MoneyLabel=o.GetComponent("MoneyLabel",this.node,e)}Show(){s.emit(i.弹出窗口,r.GameData.gameName),this.Inventory.InitPlayerInventory(),this.SellInventory.Init(),this.RefreshMoney()}RefreshMoney(){this.MoneyLabel.string=l.PlayerData.Money.toLocaleString()}OnButtonClick(n){switch(y.Instance.PlaySFX(E.ButtonClick),n.target.name){case"SellButton":this.SellInventory.Sell();break;case"ReturnButton":g.Instance.HidePanel(h.Panel.SellPanel)}}OnDragStart(n,t){this.Inventory.OnDragStart(n),this.SellInventory.OnDragStart(n)}OnDragging(n,t){this.Inventory.OnDragging(n,t),this.SellInventory.OnDragging(n,t)}OnDragEnd(n,t){this.Inventory.OnDragEnd(n,t),this.SellInventory.OnDragEnd(n,t)}onEnable(){S.on(h.Event.REFRESH_MONEY,this.RefreshMoney,this),S.on(h.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),S.on(h.Event.ON_ITEM_DRAGGING,this.OnDragging,this),S.on(h.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}onDisable(){S.off(h.Event.REFRESH_MONEY,this.RefreshMoney,this),S.off(h.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),S.off(h.Event.ON_ITEM_DRAGGING,this.OnDragging,this),S.off(h.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}})||I);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_ShopPanel.ts",["cc","./NodeUtil.ts","./GameManager.ts","./ProjectEventManager.ts","./SJZ_Data.ts","./SJZ_Item.ts","./SJZ_GameManager.ts","./SJZ_DataManager.ts","./SJZ_InventoryGrid.ts","./SJZ_PoolManager.ts","./SJZ_Constant.ts","./Tools.ts","./SJZ_UIManager.ts","./EventManager.ts","./SJZ_PlayerInventory.ts","./PanelBase.ts","./UIManager.ts","./SJZ_AudioManager.ts"],(function(t){var e,n,o,s,a,i,h,r,l,c,S,I,m,g,p,y,u,v,f,b,d,M,T,_;return{setters:[function(t){e=t.cclegacy,n=t.Label,o=t.ScrollView,s=t.UITransform,a=t._decorator},function(t){i=t.default},function(t){h=t.GameManager},function(t){r=t.ProjectEventManager,l=t.ProjectEvent},function(t){c=t.SJZ_ItemType},function(t){S=t.default},function(t){I=t.SJZ_GameManager},function(t){m=t.SJZ_DataManager},function(t){g=t.SJZ_InventoryGrid},function(t){p=t.SJZ_PoolManager},function(t){y=t.SJZ_Constant},function(t){u=t.Tools},function(t){v=t.SJZ_UIManager},function(t){f=t.EventManager},function(t){b=t.default},function(t){d=t.PanelBase},function(t){M=t.UIManager},function(t){T=t.SJZ_AudioManager,_=t.SJZ_Audio}],execute:function(){var w;e._RF.push({},"ae8b0L1vzpGY5OVocvOfB4X","SJZ_ShopPanel",void 0);const{ccclass:E,property:C}=a;t("default",E("SJZ_ShopPanel")(w=class extends d{constructor(...t){super(...t),this.Inventory=null,this.Buttons=null,this.ShopItemContent=null,this.ShopScrollView=null,this.ShopItemContentTrans=null,this.ShopInventoryTitleLabel=null,this.MoneyLabel=null,this.itemMap=new Map,this.showAll=!0}onLoad(){this.Inventory=i.GetComponent("Inventory",this.node,b),this.ShopInventoryTitleLabel=i.GetComponent("ShopInventoryTitleLabel",this.node,n),this.MoneyLabel=i.GetComponent("MoneyLabel",this.node,n),this.Buttons=i.GetNode("Buttons",this.node),this.ShopItemContent=i.GetNode("ShopItemContent",this.node),this.ShopScrollView=i.GetComponent("ShopScrollView",this.node,o),this.ShopItemContentTrans=this.ShopItemContent.getComponent(s)}start(){this.InitAllItem()}ShowItems(t){this.ShopScrollView.enabled=!1,this.ShopScrollView.enabled=!0,this.ShopScrollView.scrollToTop();for(let e=0;e<this.ShopItemContent.children.length;e++)this.ShopItemContent.children[e].active=`${t}`==this.ShopItemContent.children[e].name}InitAllItem(){for(let t=0;t<20;t++){let e=null;if(m.ItemDataMap.has(t)&&(e=m.ItemDataMap.get(t).filter((t=>!t.NotShow||this.showAll))),e&&e.length>0){let n=[];e.forEach((t=>n.push(u.Clone(t)))),this.itemMap.has(t)||this.itemMap.set(t,{gridCtrl:new g(8,100),items:[]}),I.FillContainerByData(n,this.itemMap.get(t).gridCtrl);for(let e=0;e<n.length;e++){const o=n[e];let s=p.Instance.Get(y.Prefab.Item,this.ShopItemContent.getChildByName(`${t}`));s.setParent(this.ShopItemContent.getChildByName(`${t}`)),s.setPosition(o.Point.x*y.itemSize+y.itemSize/2,-o.Point.y*y.itemSize-y.itemSize/2);let a=s.getComponent(S);a.InitShopItem(o,this.ItemCallback.bind(this)),this.itemMap.get(t).items.push(a)}}}}ItemCallback(t){v.Instance.ShowPanel(y.Panel.ItemInfoPanel,[t,!1,this.AddToInventory.bind(this)])}AddToInventory(t){if(m.PlayerData.Money>=t.Price){m.PlayerData.Money-=t.Price;let e=m.CloneItemData(t);m.PlayerData.AddItemToInventory(e)?M.ShowTip("添加成功"):M.ShowTip("添加失败")}else M.ShowTip("金钱不足")}Show(){r.emit(l.弹出窗口,h.GameData.gameName),this.Inventory.InitPlayerInventory(),this.RefreshMoney(),this.RefreshButtons("头盔商店")}RefreshInventory(){}RefreshMoney(){this.MoneyLabel.string=`${m.PlayerData.Money}`}RefreshButtons(t){switch(t){case"头盔商店":this.ShopInventoryTitleLabel.string="头盔商店",this.ShowItems(c.Helmet);break;case"防弹衣商店":this.ShopInventoryTitleLabel.string="防弹衣商店",this.ShowItems(c.BodyArmor);break;case"武器商店":this.ShopInventoryTitleLabel.string="武器商店",this.ShowItems(c.Weapon);break;case"弹药商店":this.ShopInventoryTitleLabel.string="弹药商店",this.ShowItems(c.Ammo);break;case"配件商店":this.ShopInventoryTitleLabel.string="配件商店",this.ShowItems(c.Accessory);break;case"胸挂商店":this.ShopInventoryTitleLabel.string="胸挂商店",this.ShowItems(c.ChestRig);break;case"背包商店":this.ShopInventoryTitleLabel.string="背包商店",this.ShowItems(c.Backpack);break;case"护甲道具商店":this.ShopInventoryTitleLabel.string="护甲道具商店",this.ShowItems(c.ArmorItem);break;case"医疗道具商店":this.ShopInventoryTitleLabel.string="医疗道具商店",this.ShowItems(c.MedicalItem);break;case"电子物品收集品":this.ShopInventoryTitleLabel.string="电子物品收集品",this.ShowItems(c.Electronic);break;case"医疗道具收集品":this.ShopInventoryTitleLabel.string="医疗道具收集品",this.ShowItems(c.Medical);break;case"工具材料收集品":this.ShopInventoryTitleLabel.string="工具材料收集品",this.ShowItems(c.ToolMaterial);break;case"家具材料收集品":this.ShopInventoryTitleLabel.string="家具材料收集品",this.ShowItems(c.FurnitureItem);break;case"工艺藏品收集品":this.ShopInventoryTitleLabel.string="工艺藏品收集品",this.ShowItems(c.CraftCollectible);break;case"资料情报收集品":this.ShopInventoryTitleLabel.string="资料情报收集品",this.ShowItems(c.IntelDocument);break;case"能源燃料收集品":this.ShopInventoryTitleLabel.string="能源燃料收集品",this.ShowItems(c.EnergyFuel)}this.Buttons.children.forEach((e=>{e.getChildByName("Selected").active=e.name==t}))}OnButtonClick(t){switch(T.Instance.PlaySFX(_.ButtonClick),t.target.name){case"头盔商店":case"防弹衣商店":case"武器商店":case"弹药商店":case"配件商店":case"胸挂商店":case"背包商店":case"护甲道具商店":case"医疗道具商店":case"电子物品收集品":case"医疗道具收集品":case"工具材料收集品":case"家具材料收集品":case"工艺藏品收集品":case"资料情报收集品":case"能源燃料收集品":this.RefreshButtons(t.target.name);break;case"ReturnButton":v.Instance.HidePanel(y.Panel.ShopPanel)}}OnDragStart(t,e){this.Inventory.OnDragStart(t)}OnDragging(t,e){this.Inventory.OnDragging(t,e)}OnDragEnd(t,e){this.Inventory.OnDragEnd(t,e)}onEnable(){f.on(y.Event.REFRESH_MONEY,this.RefreshMoney,this),f.on(y.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),f.on(y.Event.ON_ITEM_DRAGGING,this.OnDragging,this),f.on(y.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}onDisable(){f.off(y.Event.REFRESH_MONEY,this.RefreshMoney,this),f.off(y.Event.ON_ITEM_DRAGSTART,this.OnDragStart,this),f.off(y.Event.ON_ITEM_DRAGGING,this.OnDragging,this),f.off(y.Event.ON_ITEM_DRAGEND,this.OnDragEnd,this)}})||w);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Showcase.ts",["cc","./NodeUtil.ts","./SJZ_Constant.ts","./BundleManager.ts","./GameManager.ts","./SJZ_GameManager.ts","./TweenUtil.ts","./SJZ_DataManager.ts","./EventManager.ts","./UIManager.ts"],(function(t){var e,a,n,o,s,i,r,c,l,h,u,d,m,I,p,S,g,f;return{setters:[function(t){e=t.cclegacy,a=t.Component,n=t.Label,o=t.Sprite,s=t.BoxCollider2D,i=t.Contact2DType,r=t.tween,c=t.Vec3,l=t._decorator},function(t){h=t.default},function(t){u=t.SJZ_Constant},function(t){d=t.BundleManager},function(t){m=t.GameManager},function(t){I=t.SJZ_GameManager},function(t){p=t.EasingType},function(t){S=t.SJZ_DataManager},function(t){g=t.EventManager},function(t){f=t.UIManager}],execute:function(){var D;e._RF.push({},"3c5bbwP2tZDdohjUr8RbHnD","SJZ_Showcase",void 0);const{ccclass:_,property:C}=l;t("default",_("SJZ_Showcase")(D=class extends a{constructor(...t){super(...t),this.Label=null,this.Icon=null,this.collider=null,this.taken=!1,this.data=null,this.putcallback=null}onLoad(){this.Label=h.GetComponent("Label",this.node,n),this.Icon=h.GetComponent("Icon",this.node,o),this.collider=this.node.getComponent(s),this.collider.on(i.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(i.END_CONTACT,this.onEndContact,this)}Init(t){this.data=t,this.Label.string=`${t.Name}`,this.Icon.spriteFrame=null,this.Refresh()}Refresh(){let t=S.PlayerData.ShowcaseData.find((t=>t.Name==this.data.Name));this.Icon.spriteFrame=null,t&&(d.LoadSpriteFrame(m.GameData.DefaultBundle,`Res/Items/${t.ImageId}`).then((t=>{this.Icon.spriteFrame=t,I.SetImagePreferScale(this.Icon,180,180)})),r(this.Icon.node).to(3,{position:new c(0,10,0)},{easing:p.sineOut}).to(3,{position:new c(0,-50,0)},{easing:p.sineIn}).union().repeatForever().start())}onBeginContact(t,e,a){e.group==u.Group.Player&&g.Scene.emit(u.Event.SHOW_INTERACT_BUTTON,!0,(()=>{let t=S.PlayerData.ShowcaseData.find((t=>t.ID==this.data.ID));t?(S.PlayerData.RemoveItemFromShowcase(t),S.PlayerData.AddItemToInventory(t)):(t=S.PlayerData.InventoryItemData.find((t=>t.Name==this.data.Name)),t?(S.PlayerData.RemoveItemFromInventory(t),S.PlayerData.AddItemToShowcase(t),this.putcallback&&this.putcallback()):f.ShowTip(`仓库里没有找到${this.data.Name}`)),this.Refresh()}))}onEndContact(t,e,a){e.group==u.Group.Player&&g.Scene.emit(u.Event.SHOW_INTERACT_BUTTON,!1)}})||D);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Showcases.ts",["cc","./SJZ_Showcase.ts","./SJZ_DataManager.ts"],(function(t){var e,s,a,n,c;return{setters:[function(t){e=t.cclegacy,s=t._decorator,a=t.Component},function(t){n=t.default},function(t){c=t.SJZ_DataManager}],execute:function(){var o,r;e._RF.push({},"afdb2TyLpJMiqUI5pkrone0","SJZ_Showcases",void 0);const{ccclass:h,property:i}=s;t("default",h("SJZ_Showcases")(((r=class t extends a{constructor(...t){super(...t),this.showcases=[]}onLoad(){t.Instance=this}start(){this.showcases=[];for(let t=0;t<this.node.children.length;t++){let e=this.node.children[t].getComponent(n);e.Init(c.ShowcaseData[t]),this.showcases.push(e)}}GetTarget(t,e=null){let s=this.showcases.find((e=>e.data.Name==t));return s?s.putcallback=e:console.error(`大红展览里面没有 name:  ${t} 的物品`),s}}).Instance=null,o=r))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SingleInventory.ts",["cc","./SJZ_Inventory.ts"],(function(n){var t,e,r,s;return{setters:[function(n){t=n.cclegacy,e=n.UITransform,r=n._decorator},function(n){s=n.default}],execute:function(){var o;t._RF.push({},"6b8b2pAURdAPZGnegXa0edL","SJZ_SingleInventory",void 0);const{ccclass:a,property:i}=r;n("default",a("SJZ_SingleInventory")(o=class extends s{constructor(...n){super(...n),this.inBox=!1}onLoad(){this.ItemContent=this.node,this.ItemContentTrans=this.ItemContent.getComponent(e)}InitSingle(n,t){super.Init(n,t)}OnDragStart(n){super.OnDragStart(n)}OnDragging(n,t){super.OnDragging(n,t)}OnDragEnd(n,t){super.OnDragEnd(n,t)}})||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SkinItem.ts",["cc","./NodeUtil.ts","./BundleManager.ts","./SJZ_GameManager.ts","./GameManager.ts","./SJZ_DataManager.ts","./SJZ_AudioManager.ts"],(function(e){var t,n,a,i,c,s,o,l,u,r,h,S;return{setters:[function(e){t=e.cclegacy,n=e.Component,a=e.Label,i=e.Sprite,c=e._decorator},function(e){s=e.default},function(e){o=e.BundleManager},function(e){l=e.SJZ_GameManager},function(e){u=e.GameManager},function(e){r=e.SJZ_DataManager},function(e){h=e.SJZ_AudioManager,S=e.SJZ_Audio}],execute:function(){var d;t._RF.push({},"3715bevF+tNgLgXyfZHjB+8","SJZ_SkinItem",void 0);const{ccclass:m,property:k}=c;e("default",m("SJZ_SkinItem")(d=class extends n{constructor(...e){super(...e),this.Icon=null,this.NameLabel=null,this.LockIcon=null,this.Selected=null,this.skinName=null,this.callback=null}onLoad(){this.NameLabel=s.GetComponent("NameLabel",this.node,a),this.Icon=s.GetComponent("Icon",this.node,i),this.LockIcon=s.GetNode("LockIcon",this.node),this.Selected=s.GetNode("Selected",this.node)}Init(e,t){this.skinName=e,this.callback=t,this.Selected.active=!1,this.NameLabel.string=`${e}`,o.LoadSpriteFrame(u.GameData.DefaultBundle,`Res/Items/${e}`).then((e=>{this.Icon.spriteFrame=e,l.SetImagePreferScale(this.Icon,370,150)})),this.LockIcon.active=!r.GetGunSkinUnlock(e)}SetSelect(e){this.Selected.active=e==this.skinName}OnButtonClick(){h.Instance.PlaySFX(S.ButtonClick),r.GetGunSkinUnlock(this.skinName)&&this.callback&&this.callback(this.skinName)}})||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SkinShopPanel.ts",["cc","./NodeUtil.ts","./GameManager.ts","./ProjectEventManager.ts","./SJZ_Data.ts","./SJZ_DataManager.ts","./SJZ_Constant.ts","./SJZ_UIManager.ts","./EventManager.ts","./PanelBase.ts","./UIManager.ts","./SJZ_LootManager.ts","./SJZ_SkinItem.ts","./SJZ_PoolManager.ts","./Tools.ts","./Banner.ts","./SJZ_AudioManager.ts"],(function(e){var n,t,a,i,s,o,l,S,h,u,r,c,k,d,P,f,M,E,p,m,g,I,_;return{setters:[function(e){n=e.cclegacy,t=e.Label,a=e._decorator},function(e){i=e.default},function(e){s=e.GameManager},function(e){o=e.ProjectEventManager,l=e.ProjectEvent},function(e){S=e.SJZ_ItemData,h=e.SJZ_ItemType},function(e){u=e.SJZ_DataManager},function(e){r=e.SJZ_Constant,c=e.SJZ_Quality},function(e){k=e.SJZ_UIManager},function(e){d=e.EventManager},function(e){P=e.PanelBase},function(e){f=e.UIManager},function(e){M=e.SJZ_LootManager},function(e){E=e.default},function(e){p=e.SJZ_PoolManager},function(e){m=e.Tools},function(e){g=e.default},function(e){I=e.SJZ_AudioManager,_=e.SJZ_Audio}],execute:function(){var y;n._RF.push({},"aa0b8WFNgtNpK7kgnyA/hoN","SJZ_SkinShopPanel",void 0);const{ccclass:B,property:D}=a;e("default",B("SJZ_SkinShopPanel")(y=class extends P{constructor(...e){super(...e),this.Buttons=null,this.MoneyLabel=null,this.ManDeErPanel=null,this.SkinPanel=null,this.SkinContent=null,this.EquipSkinButton=null,this.EquipSkinButtonLabel=null,this.skinItems=[],this.selectedSkin=""}onLoad(){this.MoneyLabel=i.GetComponent("MoneyLabel",this.node,t),this.Buttons=i.GetNode("Buttons",this.node),this.ManDeErPanel=i.GetNode("ManDeErPanel",this.node),this.SkinPanel=i.GetNode("SkinPanel",this.node),this.SkinContent=i.GetNode("SkinContent",this.node),this.EquipSkinButton=i.GetNode("EquipSkinButton",this.node),this.EquipSkinButtonLabel=i.GetComponent("EquipSkinButtonLabel",this.node,t)}Show(){o.emit(l.弹出窗口,s.GameData.gameName),this.RefreshMoney(),this.RefreshPanels("ManDeEr")}RefreshMoney(){this.MoneyLabel.string=`${u.PlayerData.Money}`}RefreshPanels(e){this.ManDeErPanel.active="ManDeEr"==e,this.ShowSkinPanel("Skin"==e),this.Buttons.children.forEach((n=>{n.getChildByName("Selected").active=n.name==e}))}ShowSkinPanel(e){if(this.SkinPanel.active=e,this.skinItems.forEach((e=>p.Instance.Put(e.node))),this.skinItems=[],this.selectedSkin="",e){this.EquipSkinButton.active=!1;for(let e=0;e<u.SkinData.length;e++){let n=p.Instance.Get(r.Prefab.SkinItem,this.SkinContent).getComponent(E);n.Init(u.SkinData[e].Name,this.SkinItemCallback.bind(this)),this.skinItems.push(n)}}}SkinItemCallback(e){this.selectedSkin=e,this.skinItems.forEach((n=>n.SetSelect(e))),this.EquipSkinButton.active=!0,this.RefreshEquipSkinButtonLabel()}RefreshEquipSkinButtonLabel(){let e=u.GetGunUseSkin(this.selectedSkin.split("_")[0]);this.EquipSkinButtonLabel.string=e?"卸下":"装备"}OnButtonClick(e){switch(I.Instance.PlaySFX(_.ButtonClick),e.target.name){case"ManDeEr":case"Skin":case"AnQuanXiang":this.RefreshPanels(e.target.name);break;case"LotteryButton":g.Instance.ShowVideoAd((()=>{let e,n=M.GetRandomItemInPrizePool();n&&(1==n.AwardType&&(e=m.Clone(u.GetItemDataByID(n.ID)),e&&(u.PlayerData.AddItemToInventory(e)||(u.PlayerData.Money+=e.Price,f.ShowTip(`仓库已满，自动出售 +${e.Price}`),k.Instance.ShowPanel(r.Panel.RewardPanel,[[e]])))),2==n.AwardType&&(e=new S(n.ID,h.None,n.Name,1e5,c.Mythic,"1_1",0,n.Name,"",!0),u.GetGunSkinUnlock(n.Name)?(u.PlayerData.Money+=1e5,f.ShowTip("已拥有该皮肤，+100000")):u.SetGunSkinUnlock(n.Name)),e&&k.Instance.ShowPanel(r.Panel.RewardPanel,[[e]]))}));break;case"EquipSkinButton":let n=this.selectedSkin.split("_")[0];u.GetGunUseSkin(n)?u.SetGunUseSkin(n,""):(console.error("SetGunUseSkin",n),u.SetGunUseSkin(n,this.selectedSkin)),this.RefreshEquipSkinButtonLabel();break;case"ReturnButton":k.Instance.HidePanel(r.Panel.SkinShopPanel)}}onEnable(){d.on(r.Event.REFRESH_MONEY,this.RefreshMoney,this)}onDisable(){d.off(r.Event.REFRESH_MONEY,this.RefreshMoney,this)}})||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_SortingChildren.ts",["cc"],(function(t){var n,r,e;return{setters:[function(t){n=t.cclegacy,r=t.Component,e=t._decorator}],execute:function(){var o;n._RF.push({},"3df23AFgSRB1Lc17uhIIIra","SJZ_SortingChildren",void 0);const{ccclass:i,property:c}=e;t("SJZ_SortingChildren",i("SJZ_SortingChildren")(o=class extends r{update(t){this.node.children.sort(((t,n)=>n.position.y-t.position.y))}})||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_Supplies.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodeUtil.ts","./SJZ_Data.ts","./SJZ_Constant.ts","./EventManager.ts","./SJZ_DataManager.ts","./Tools.ts","./SJZ_LootManager.ts","./BundleManager.ts","./GameManager.ts","./SJZ_ContainerInventory.ts","./SJZ_UIManager.ts","./SJZ_LvManager.ts"],(function(t){var e,n,a,i,o,s,r,l,c,h,p,u,d,f,C,S,m,I,g,B,y,D,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){a=t.cclegacy,i=t.Enum,o=t._decorator,s=t.Component,r=t.Sprite,l=t.BoxCollider2D,c=t.Contact2DType,h=t.instantiate,p=t.Vec3},function(t){u=t.default},function(t){d=t.SJZ_ContainerType},function(t){f=t.SJZ_Constant},function(t){C=t.EventManager},function(t){S=t.SJZ_DataManager},function(t){m=t.Tools},function(t){I=t.SJZ_LootManager},function(t){g=t.BundleManager},function(t){B=t.GameManager},function(t){y=t.default},function(t){D=t.SJZ_UIManager},function(t){_=t.SJZ_LvManager}],execute:function(){var N,T,x,M,O,Z;a._RF.push({},"d09ce4xo2xKiaolxHoDKmGt","SJZ_Supplies",void 0);const{ccclass:E,property:G}=o;t("default",(N=E("SJZ_Supplies"),T=G({type:i(d)}),N((O=e((M=class extends s{constructor(...t){super(...t),n(this,"type",O,this),n(this,"generateBox",Z,this),this.Icon=null,this.collider=null,this.data=null,this.isOpened=!1}onLoad(){this.Icon=u.GetComponent("Icon",this.node,r),this.collider=this.node.getComponent(l)}start(){this.generateBox&&this.Init(this.type)}Init(t){if(this.Icon.spriteFrame=null,this.type=t,this.data=m.Clone(S.ContainerData.find((e=>e.Type==t))),t==d.SafeBox&&"训练场"==_.Instance.matchData.MapName){let t=[];for(let e=0;e<f.FirstOpenSafeBox.length;e++){let n=S.GetItemDataByName(f.FirstOpenSafeBox[e]);n.Searched=!1,n&&t.push(n)}this.data.ItemData=t}else if(t==d.WeaponCase&&"训练场"==_.Instance.matchData.MapName){let t=[];for(let e=0;e<f.FirstOpenWeaponBox.length;e++){let n=S.GetItemDataByName(f.FirstOpenWeaponBox[e]);n.Searched=!1,n&&t.push(n)}this.data.ItemData=t}else this.data.ItemData=I.GetContainerResult(t);this.Refresh()}InitCharacterCase(t){this.Icon.spriteFrame=null,this.type=d.CharactorCase,t?(this.data=m.Clone(S.ContainerData.find((t=>t.Type==d.SafeBox))),this.data.Name="赛喵德",this.data.ItemData=I.GetContainerResult(d.SafeBox)):(this.data=m.Clone(S.ContainerData.find((t=>t.Type==d.BirdNest))),this.data.Name="小兵",this.data.ItemData=I.GetContainerResult(d.BirdNest)),this.Refresh()}Refresh(){g.LoadSpriteFrame(B.GameData.DefaultBundle,`Res/Supplies/${this.type}_${this.isOpened?1:0}`).then((t=>{this.Icon.spriteFrame=t}))}onBeginContact(t,e,n){e.group==f.Group.Player&&C.Scene.emit(f.Event.SHOW_INTERACT_BUTTON,!0,(()=>{const t=()=>{this.type!=d.SafeBox&&this.type!=d.WeaponCase||"训练场"!=_.Instance.matchData.MapName||_.Instance.AddGuideIndex(),g.LoadPrefab(B.GameData.DefaultBundle,"UI/ContainerInventory").then((t=>{this.isOpened=!0,this.Refresh();D.Instance.ShowPanel(f.Panel.InventoryPanel,[e=>{let n=h(t);n.setParent(e),n.setPosition(p.ZERO);let a=n.getComponent(y);return a.InitContainer(this.data),a}])}))};this.type!=d.SafeBox||this.isOpened?t():D.Instance.ShowPanel(f.Panel.SafeBoxPanel,[()=>{t()}])}))}onEndContact(t,e,n){e.group==f.Group.Player&&C.Scene.emit(f.Event.SHOW_INTERACT_BUTTON,!1)}onEnable(){this.collider.on(c.BEGIN_CONTACT,this.onBeginContact,this),this.collider.on(c.END_CONTACT,this.onEndContact,this)}onDisable(){this.collider.off(c.BEGIN_CONTACT,this.onBeginContact,this),this.collider.off(c.END_CONTACT,this.onEndContact,this)}}).prototype,"type",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d.BirdNest}}),Z=e(M.prototype,"generateBox",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=M))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_TutorialPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./GameManager.ts","./SJZ_AudioManager.ts","./ProjectEventManager.ts","./BundleManager.ts","./SJZ_PlayerInventory.ts"],(function(t){var e,n,s,a,i,o,l,h,u,c,r,P,d,g,B,f,x;return{setters:[function(t){e=t.cclegacy,n=t.Label,s=t.misc,a=t._decorator,i=t.instantiate,o=t.Vec3},function(t){l=t.default},function(t){h=t.PanelBase},function(t){u=t.SJZ_UIManager},function(t){c=t.SJZ_Constant},function(t){r=t.GameManager},function(t){P=t.SJZ_AudioManager,d=t.SJZ_Audio},function(t){g=t.ProjectEventManager,B=t.ProjectEvent},function(t){f=t.BundleManager},function(t){x=t.default}],execute:function(){var v;e._RF.push({},"7a964ruRkhG7bYLzMg+rgW7","SJZ_TutorialPanel",void 0);const{ccclass:C,property:S}=a;t("default",C("SJZ_TutorialPanel")(v=class extends h{constructor(...t){super(...t),this.Panel=null,this.Pages=null,this.NextPageButton=null,this.LastPageButton=null,this.ClosePageButton=null,this.DescLabel=null,this.descs=["把战局内带出的物品放入到仓库里。","搜索出的大红可以放到展览室。","点击装备的枪械，装备芯片。","点击改装。","把芯片拖放到芯片配件栏里。"],this.index=0,this.showCloseButton=!1}onLoad(){this.Panel=l.GetNode("Panel",this.node),this.Pages=l.GetNode("Pages",this.node),this.NextPageButton=l.GetNode("NextPageButton",this.node),this.LastPageButton=l.GetNode("LastPageButton",this.node),this.ClosePageButton=l.GetNode("ClosePageButton",this.node),this.DescLabel=l.GetComponent("DescLabel",this.node,n)}Show(){super.Show(this.Panel),this.ClosePageButton.active=!1,this.index=0,this.showCloseButton=!1,this.RefreshPanel(),g.emit(B.页面转换,r.GameData.gameName)}RefreshPanel(){this.LastPageButton.active=this.index>0,this.NextPageButton.active=this.index<this.descs.length-1;for(let t=0;t<this.Pages.children.length;t++)this.Pages.children[t].active=this.index==t;this.DescLabel.string=this.descs[this.index]}OnButtonClick(t){switch(P.Instance.PlaySFX(d.ButtonClick),t.target.name){case"ClosePageButton":u.Instance.HidePanel(c.Panel.TutorialPanel),f.LoadPrefab(r.GameData.DefaultBundle,"UI/PlayerInventory").then((t=>{u.Instance.ShowPanel(c.Panel.InventoryPanel,[e=>{let n=i(t);n.setParent(e),n.setPosition(o.ZERO);let s=n.getComponent(x);return s.InitPlayerInventory(),s}])}));break;case"LastPageButton":this.index=s.clampf(this.index-1,0,this.descs.length-1),this.RefreshPanel();break;case"NextPageButton":this.index=s.clampf(this.index+1,0,this.descs.length-1),this.showCloseButton||this.index!=this.descs.length-1||(this.showCloseButton=!0,this.ClosePageButton.active=!0),this.RefreshPanel()}}})||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BundleManager.ts","./GameManager.ts"],(function(e){var t,a,i,n,o,l,s,p,r,h,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.JsonAsset,o=e._decorator,l=e.Component,s=e.isValid,p=e.find,r=e.instantiate},function(e){h=e.BundleManager},function(e){c=e.GameManager}],execute:function(){var u,f,_,P,g,S;i._RF.push({},"f2fbfduHZJGhYkdxG/o5nOB","SJZ_UIManager",void 0);const{ccclass:w,property:D}=o;e("SJZ_UIManager",(u=w("SJZ_UIManager"),f=D(n),u(((S=class e extends l{constructor(...e){super(...e),a(this,"SceneDate",g,this),this._panelDict={},this._loadingPanelDict={},this._arrPopupDialog=[]}static get Instance(){return this._instance||(this._instance=new e),this._instance}isPanelShowing(e){if(!this._panelDict.hasOwnProperty(e))return!1;let t=this._panelDict[e];return s(t)&&t.active&&t.parent}ShowPanel(e,t,a){if(this._loadingPanelDict[e])return;let i=e.lastIndexOf("/"),n="SJZ_"+e.slice(i+1);if(t||(t=[]),this._panelDict.hasOwnProperty(e)){let i=this._panelDict[e];if(s(i)){i.parent=p("Canvas"),i.active=!0;let e=i.getComponent(n),o=i.getComponent(n.charAt(0).toUpperCase()+n.slice(1));if(e&&e.Show)e.Show.apply(e,t),a&&a(e);else{if(!o||!o.Show)throw`查找不到脚本文件${n}`;o.Show.apply(o,t),a&&a(o)}return}}this._loadingPanelDict[e]=!0,h.LoadUI(c.GameData.DefaultBundle,e,((i,o)=>{let l=!1;this._loadingPanelDict[e]||(l=!0),this._loadingPanelDict[e]=!1,this._panelDict[e]=o;let s=o.getComponent(n),p=o.getComponent(n.charAt(0).toUpperCase()+n.slice(1));if(s&&s.Show)s.Show.apply(s,t),a&&a(s);else{if(!p||!p.Show)throw`查找不到脚本文件${n} 或者脚本中没有 Show() 方法...`;p.Show.apply(p,t),a&&a(p)}l&&this.HidePanel(e)}))}ShowBundlePanel(e,t,a,i){if(this._loadingPanelDict[`${e}/${t}`])return;let n=t.lastIndexOf("/"),o=t.slice(n+1);if(a||(a=[]),this._panelDict.hasOwnProperty(`${e}/${t}`)){let n=this._panelDict[`${e}/${t}`];if(s(n)){n.parent=p("Canvas"),n.active=!0;let e=n.getComponent(o),t=n.getComponent(o.charAt(0).toUpperCase()+o.slice(1));if(e&&e.Show)e.Show.apply(e,a),i&&i(e);else{if(!t||!t.Show)throw`查找不到脚本文件${o}`;t.Show.apply(t,a),i&&i(t)}return}}this._loadingPanelDict[`${e}/${t}`]=!0,h.LoadPrefab(e,t).then((n=>{let l=r(n);l.setPosition(0,0,0),p("Canvas").addChild(l);let s=!1;this._loadingPanelDict[`${e}/${t}`]||(s=!0),this._loadingPanelDict[`${e}/${t}`]=!1,this._panelDict[`${e}/${t}`]=l;let h=l.getComponent(o),c=l.getComponent(o.charAt(0).toUpperCase()+o.slice(1));if(h&&h.Show)h.Show.apply(h,a),i&&i(h);else{if(!c||!c.Show)throw`查找不到脚本文件${o} 或者脚本中没有 Show() 方法...`;c.Show.apply(c,a),i&&i(c)}s&&this.HidePanel(`${e}/${t}`)}))}HidePanel(e,t){if(this._panelDict.hasOwnProperty(e)){let a=this._panelDict[e];if(a&&s(a)){let e=a.getComponent("animationUI");e?e.close((()=>{a.parent=null,t&&"function"==typeof t&&t()})):(a.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._loadingPanelDict[e]=!1}RefreshPanel(e,t){let a=e.lastIndexOf("/"),i=e.slice(a+1);if(t||(t=[]),this._panelDict.hasOwnProperty(e)){let a=this._panelDict[e];if(s(a)){a.parent=p("Canvas"),a.active=!0;let e=a.getComponent(i),n=a.getComponent(i.charAt(0).toUpperCase()+i.slice(1));if(e&&e.Refresh)e.Refresh.apply(e,t);else{if(!n||!n.Refresh)throw`查找不到脚本文件${i}`;n.Refresh.apply(n,t)}return}}}pushToPopupSeq(e,t,a){let i={panelPath:e,scriptName:t,param:a,isShow:!1};this._arrPopupDialog.push(i),this._checkPopupSeq()}insertToPopupSeq(e,t,a){let i={panelPath:t,param:a,isShow:!1};this._arrPopupDialog.splice(e,0,i)}shiftFromPopupSeq(e){this.HidePanel(e,(()=>{this._arrPopupDialog[0]&&this._arrPopupDialog[0].panelPath===e&&(this._arrPopupDialog.shift(),this._checkPopupSeq())}))}_checkPopupSeq(){if(this._arrPopupDialog.length>0){let e=this._arrPopupDialog[0];e.isShow||(this.ShowPanel(e.panelPath,e.param),this._arrPopupDialog[0].isShow=!0)}}static ShowBroadcast(e,t,a,i=.75,n=2){}})._instance=void 0,g=t((P=S).prototype,"SceneDate",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=P))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_UpgradePanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_UIManager.ts","./SJZ_Constant.ts","./SJZ_DataManager.ts","./SJZ_PoolManager.ts","./SJZ_CommonItem.ts","./EventManager.ts","./Tools.ts","./UIManager.ts","./SJZ_AudioManager.ts","./ProjectEventManager.ts","./GameManager.ts"],(function(t){var e,a,n,s,o,i,l,h,r,d,c,u,L,M,b,g,f,m,p;return{setters:[function(t){e=t.cclegacy,a=t.Label,n=t.misc,s=t._decorator},function(t){o=t.default},function(t){i=t.PanelBase},function(t){l=t.SJZ_UIManager},function(t){h=t.SJZ_Constant},function(t){r=t.SJZ_DataManager},function(t){d=t.SJZ_PoolManager},function(t){c=t.default},function(t){u=t.EventManager},function(t){L=t.Tools},function(t){M=t.UIManager},function(t){b=t.SJZ_AudioManager,g=t.SJZ_Audio},function(t){f=t.ProjectEventManager,m=t.ProjectEvent},function(t){p=t.GameManager}],execute:function(){var y;e._RF.push({},"b3f93AFJ5RHKabG/x3YtMLM","SJZ_UpgradePanel",void 0);const{ccclass:v,property:C}=s;t("default",v("SJZ_UpgradePanel")(y=class extends i{constructor(...t){super(...t),this.Panel=null,this.TitleLabel=null,this.MoneyLabel=null,this.WorkbenchTitleLabel=null,this.UpgradeUnlockContent=null,this.LvLabel=null,this.LvAfterLabel=null,this.MaxLvLabel=null,this.UpgradeUnlockLabel=null,this.ScrollView=null,this.NeedMatContent=null,this.CostMoneyLabel=null,this.CostTimeLabel=null,this.Arrow=null,this.needMatItems=[],this.unlockItems=[],this.type=null,this.data=null}onLoad(){this.Panel=o.GetNode("Panel",this.node),this.TitleLabel=o.GetComponent("TitleLabel",this.node,a),this.MoneyLabel=o.GetComponent("MoneyLabel",this.node,a),this.WorkbenchTitleLabel=o.GetComponent("WorkbenchTitleLabel",this.node,a),this.UpgradeUnlockContent=o.GetNode("UpgradeUnlockContent",this.node),this.LvLabel=o.GetComponent("LvLabel",this.node,a),this.LvAfterLabel=o.GetComponent("LvAfterLabel",this.node,a),this.MaxLvLabel=o.GetNode("MaxLvLabel",this.node),this.UpgradeUnlockLabel=o.GetNode("UpgradeUnlockLabel",this.node),this.ScrollView=o.GetNode("ScrollView",this.node),this.Arrow=o.GetNode("Arrow",this.node),this.NeedMatContent=o.GetNode("NeedMatContent",this.node),this.CostMoneyLabel=o.GetComponent("CostMoneyLabel",this.node,a),this.CostTimeLabel=o.GetComponent("CostTimeLabel",this.node,a)}Show(t){super.Show(this.Panel),this.type=t,r.WorkbenchData.get(t)||console.error(`SJZ_DataManager.WorkbenchData.get(${t}) is null`),this.Refresh(),f.emit(m.页面转换,p.GameData.gameName)}Refresh(){let t=r.PlayerData.GetWorkbenchLv(this.type),e=n.clampf(t+1,1,3);if(this.data=r.WorkbenchData.get(this.type).find((t=>t.Lv==e)),this.MaxLvLabel.active=3==t,this.Panel.active=t<3,this.Panel.active){this.CostMoneyLabel.string=`${this.data.Cost.toLocaleString()}`,this.CostTimeLabel.string=`${L.FormatTime(this.data.CostTime)}`,this.GetAndInitResults(this.data.Requirements,this.data.QuantityDemanded,this.needMatItems,this.NeedMatContent);for(let t=0;t<this.needMatItems.length;t++){let e=r.PlayerData.GetInventoryItemCount(this.needMatItems[t].data.ID),a=`<b><color=${e>=this.needMatItems[t].data.Count?"#00ff00":"#ff0000"}>${e}/${this.needMatItems[t].data.Count}</color></b>`;this.needMatItems[t].SetDescStr(a)}}this.Arrow.active=t<3,this.LvAfterLabel.node.active=t<3,this.UpgradeUnlockLabel.active=t<3,this.ScrollView.active=t<3,this.LvLabel.string=`Lv.${t}`,t<3&&(this.TitleLabel.string=`${h.WorkbenchName[this.type]}`,this.WorkbenchTitleLabel.string=`${h.WorkbenchName[this.type]}`,this.LvAfterLabel.string=`Lv.${e}`,this.GetAndInitResults(this.data.Making,null,this.unlockItems,this.UpgradeUnlockContent)),this.RefreshMoney()}Upgrade(){let t=r.PlayerData.GetWorkbenchLv(this.type);t++,r.PlayerData.SetWorkbenchLv(this.type,t),this.Refresh()}GetAndInitResults(t,e,a,n){let s=[];for(let a=0;a<t.length;a++){let n=null;for(const[o,i]of r.ItemDataMap)if(n=i.find((e=>e.ID==t[a])),n){let t=L.Clone(n);e&&(t.Count=e[a]),s.push(t);break}n||console.error(`Item表中没有该材料 ID：${t[a]}`)}a.forEach((t=>d.Instance.Put(t.node))),a.length=0;for(let t=0;t<s.length;t++){let e=d.Instance.Get(h.Prefab.CommonItem,n).getComponent(c);e.InitDisplay(s[t]),a.push(e)}}RefreshMoney(){this.MoneyLabel.string=r.PlayerData.Money.toLocaleString()}OnButtonClick(t){switch(b.Instance.PlaySFX(g.ButtonClick),t.target.name){case"Mask":case"ReturnButton":l.Instance.HidePanel(h.Panel.UpgradePanel);break;case"UpgradeAnywayButton":let t=0;for(let e=0;e<this.needMatItems.length;e++)t+=this.needMatItems[e].data.Price*this.needMatItems[e].data.Count;t+=this.data.Cost,r.PlayerData.Money<t?M.ShowTip(`金钱不足，需要${t}`):(r.PlayerData.Money-=t,this.Upgrade());break;case"UpgradeButton":let e=[];for(let t=0;t<this.needMatItems.length;t++){let a=r.PlayerData.InventoryItemData.filter((e=>e.ID==this.needMatItems[t].data.ID));if(!(a&&a.length>0))return void M.ShowTip("材料不足");e.push(a[0])}if(r.PlayerData.Money<this.data.Cost)M.ShowTip(`金钱不足，需要${this.data.Cost}`);else{r.PlayerData.Money-=this.data.Cost;for(let t=0;t<e.length;t++)r.PlayerData.RemoveItemFromInventory(e[t]);this.Upgrade()}}}onEnable(){u.on(h.Event.REFRESH_MONEY,this.RefreshMoney,this)}onDisable(){u.off(h.Event.REFRESH_MONEY,this.RefreshMoney,this)}})||y);e._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_WeaponContent.ts",["cc","./NodeUtil.ts","./Tools.ts","./SJZ_GridCell.ts","./SJZ_Data.ts","./SJZ_DataManager.ts","./BundleManager.ts","./GameManager.ts","./SJZ_GameManager.ts","./EventManager.ts","./SJZ_Constant.ts","./SJZ_AudioManager.ts"],(function(e){var a,t,n,o,r,i,s,l,p,m,y,c,u,h,D,_,P,d,S,W;return{setters:[function(e){a=e.cclegacy,t=e.Component,n=e.UITransform,o=e.Sprite,r=e.Label,i=e.size,s=e._decorator},function(e){l=e.default},function(e){p=e.Tools},function(e){m=e.GridCellState},function(e){y=e.SJZ_ItemType,c=e.SJZ_WeaponData},function(e){u=e.SJZ_DataManager},function(e){h=e.BundleManager},function(e){D=e.GameManager},function(e){_=e.SJZ_GameManager},function(e){P=e.EventManager},function(e){d=e.SJZ_Constant},function(e){S=e.SJZ_AudioManager,W=e.SJZ_Audio}],execute:function(){var b;a._RF.push({},"59995ojpjVGzKIUsefOeCAp","SJZ_WeaponContent",void 0);const{ccclass:C,property:f}=s;let g=e("SJZ_WeaponContentType",function(e){return e[e.Primary=0]="Primary",e[e.Secondary=1]="Secondary",e[e.Pistol=2]="Pistol",e[e.Melee=3]="Melee",e[e.Helmet=4]="Helmet",e[e.BodyArmor=5]="BodyArmor",e}({}));e("SJZ_WeaponContent",C("SJZ_WeaponContent")(b=class extends t{constructor(...e){super(...e),this.ndTrans=null,this.PutTip=null,this.Icon=null,this.Name_Lb=null,this.Desc_Lb=null,this.inBox=!1,this.type=null}onLoad(){this.ndTrans=this.node.getComponent(n),this.PutTip=l.GetComponent("PutTip",this.node,o),this.Icon=l.GetComponent("Icon",this.node,o),this.Name_Lb=l.GetComponent("Name_Lb",this.node,r),this.Desc_Lb=l.GetComponent("Desc_Lb",this.node,r)}Init(e){this.type=e,this.RefreshWeaponContent()}CanEquip(e,a){if(this.ndTrans.getBoundingBoxToWorld().contains(a)){this.inBox=!0;let a=!1;if(e.Type==y.Weapon||e.Type==y.Helmet||e.Type==y.BodyArmor)switch(this.type){case g.Primary:e.WeaponData&&(a=c.IsMain(e.WeaponData.Type)&&null==u.PlayerData.Weapon_Primary);break;case g.Secondary:e.WeaponData&&(a=c.IsMain(e.WeaponData.Type)&&null==u.PlayerData.Weapon_Secondary);break;case g.Pistol:e.WeaponData&&(a=c.IsPistol(e.WeaponData.Type)&&null==u.PlayerData.Weapon_Pistol);break;case g.Helmet:a=e.Type==y.Helmet&&null==u.PlayerData.Weapon_Helmet;break;case g.BodyArmor:a=e.Type==y.BodyArmor&&null==u.PlayerData.Weapon_BodyArmor}return this.SetPutTipState(a?m.CanPut:m.CanntPut),a}return this.inBox&&(this.ClearPutTipState(),this.inBox=!1),!1}OnDragStart(e){}OnDragging(e,a){this.CanEquip(e.data,a)}OnDragEnd(e,a){if(this.CanEquip(e.data,a)){this.ClearPutTipState();let a=e.data;switch(S.Instance.PlaySFX(W.Equip),this.type){case g.Primary:u.PlayerData.Weapon_Primary=a;break;case g.Secondary:u.PlayerData.Weapon_Secondary=a;break;case g.Pistol:u.PlayerData.Weapon_Pistol=a;break;case g.Helmet:u.PlayerData.Weapon_Helmet=a;break;case g.BodyArmor:u.PlayerData.Weapon_BodyArmor=a}this.RefreshWeaponContent(),this.RefreshContentLabel(),e.RemoveItemFromAndResetLastInventory()}}RefreshWeaponContent(){let e=null,a=i();switch(this.Icon.spriteFrame=null,this.type){case g.Primary:e=u.PlayerData.Weapon_Primary,a=i(450,150),this.Name_Lb.string=e?e.Name:"主武器";break;case g.Secondary:e=u.PlayerData.Weapon_Secondary,a=i(450,150),this.Name_Lb.string=e?e.Name:"副武器";break;case g.Pistol:e=u.PlayerData.Weapon_Pistol,a=i(150,150),this.Name_Lb.string=e?e.Name:"手枪";break;case g.Helmet:e=u.PlayerData.Weapon_Helmet,a=i(300,150),this.Name_Lb.string=e?e.Name:"头盔";break;case g.BodyArmor:e=u.PlayerData.Weapon_BodyArmor,a=i(300,150),this.Name_Lb.string=e?e.Name:"防弹衣"}if(e){let t=e.ImageId;p.IsEmptyStr(u.GetGunUseSkin(e.Name))||(t=`${u.GetGunUseSkin(e.Name)}`),h.LoadSpriteFrame(D.GameData.DefaultBundle,`Res/Items/${t}`).then((e=>{this.Icon.spriteFrame=e,_.SetImagePreferScale(this.Icon,a.width,a.height,15)}))}this.RefreshContentLabel()}RefreshContentLabel(){let e=null;switch(this.type){case g.Primary:if(e=u.PlayerData.Weapon_Primary,e){let a=0;e.WeaponData.Ammo&&(a=e.WeaponData.Ammo.Count),this.Desc_Lb.string=`${a}/${u.PlayerData.GetAmmoCountByType(e.WeaponData.AmmoType)}`}break;case g.Secondary:if(e=u.PlayerData.Weapon_Secondary,e){let a=0;e.WeaponData.Ammo&&(a=e.WeaponData.Ammo.Count),this.Desc_Lb.string=`${a}/${u.PlayerData.GetAmmoCountByType(e.WeaponData.AmmoType)}`}break;case g.Pistol:if(e=u.PlayerData.Weapon_Pistol,e){let a=0;e.WeaponData.Ammo&&(a=e.WeaponData.Ammo.Count),this.Desc_Lb.string=`${a}/${u.PlayerData.GetAmmoCountByType(e.WeaponData.AmmoType)}`}break;case g.Helmet:e=u.PlayerData.Weapon_Helmet,e&&(this.Desc_Lb.string=`${e.EquipData.Durability}/${e.EquipData.MaxDurability}`);break;case g.BodyArmor:e=u.PlayerData.Weapon_BodyArmor,e&&(this.Desc_Lb.string=`${e.EquipData.Durability}/${e.EquipData.MaxDurability}`)}}SetPutTipState(e){this.PutTip.color=p.GetColorFromHex(e)}ClearPutTipState(){this.PutTip.color=p.GetColorFromHex(m.None)}onEnable(){}onDisable(){P.Scene.off(d.Event.REFRESH_WEAON_CONTENT,this.RefreshContentLabel,this)}})||b);a._RF.pop()}}}));

System.register("chunks:///_virtual/SJZ_WorkbenchPanel.ts",["cc","./NodeUtil.ts","./PanelBase.ts","./SJZ_AudioManager.ts","./ProjectEventManager.ts","./GameManager.ts"],(function(t){var n,e,s,i,l,o,a,u,h,c;return{setters:[function(t){n=t.cclegacy,e=t.Label,s=t._decorator},function(t){i=t.default},function(t){l=t.PanelBase},function(t){o=t.SJZ_AudioManager,a=t.SJZ_Audio},function(t){u=t.ProjectEventManager,h=t.ProjectEvent},function(t){c=t.GameManager}],execute:function(){var _;n._RF.push({},"9062a/TG+RMfriMaokBE/0f","SJZ_WorkbenchPanel",void 0);const{ccclass:b,property:r}=s;t("default",b("SJZ_WorkbenchPanel")(_=class extends l{constructor(...t){super(...t),this.DescLabel=null,this.Button_0=null,this.Button_1=null,this.Button_2=null,this.Button_0_Label=null,this.Button_1_Label=null,this.Button_2_Label=null,this.cb_0=null,this.cb_1=null,this.cb_2=null,this.nowText="",this.timer=0,this.index=0}onLoad(){this.Button_0=i.GetNode("Button_0",this.node),this.Button_0_Label=i.GetComponent("Button_0_Label",this.node,e),this.Button_1=i.GetNode("Button_1",this.node),this.Button_1_Label=i.GetComponent("Button_1_Label",this.node,e),this.Button_2=i.GetNode("Button_2",this.node),this.Button_2_Label=i.GetComponent("Button_2_Label",this.node,e),this.DescLabel=i.GetComponent("DescLabel",this.node,e)}Show(t,n=null,e=null,s=null){this.cb_0=null,this.cb_1=null,this.cb_2=null,this.Button_0.active=null!=n,this.Button_1.active=null!=e,this.Button_2.active=null!=s,this.nowText=t,this.DescLabel.string="",null!=n&&(this.cb_0=n.cb,this.Button_0_Label.string=n.text),null!=e&&(this.cb_1=e.cb,this.Button_1_Label.string=e.text),null!=s&&(this.cb_2=s.cb,this.Button_2_Label.string=s.text),u.emit(h.页面转换,c.GameData.gameName)}update(t){this.nowText&&this.nowText.length>0&&(this.timer+=t,this.timer>=.08&&(this.DescLabel.string.length<this.nowText.length?this.DescLabel.string=this.nowText.slice(0,this.DescLabel.string.length+1):this.nowText=null,this.timer=0))}OnButtonClick(t){switch(o.Instance.PlaySFX(a.ButtonClick),t.target.name){case"Button_0":this.cb_0&&this.cb_0();break;case"Button_1":this.cb_1&&this.cb_1();break;case"Button_2":this.cb_2&&this.cb_2()}}onEnable(){}onDisable(){}})||_);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/30_SJZ', 'chunks:///_virtual/30_SJZ'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});