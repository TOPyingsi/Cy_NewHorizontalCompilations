System.register("chunks:///_virtual/22_WLSYS",["./WLSYS_Grid.ts","./WLSYS_pair.ts","./WLSYS_InputManager.ts","./WLSYS_ObjectManager.ts","./WLSYS_BatteryController.ts","./WLSYS_BuldController.ts","./WLSYS_ElectricResistanceController.ts","./WLSYS_ObjectController.ts","./WLSYS_ObjectData.ts","./WLSYS_SwitchController.ts","./WLSYS_WireController.ts","./WLSYS_circuitSystem.ts","./WLSYS_eventSystem.ts","./WLSYS_placementSystem.ts","./WLSYS_TipController.ts","./WLSYS_UI_ObjectListController.ts","./WLSYS_eraseButtonController.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/WLSYS_BatteryController.ts",["cc","./WLSYS_ObjectController.ts","./WLSYS_circuitSystem.ts"],(function(t){var r,e,i,o;return{setters:[function(t){r=t.cclegacy,e=t._decorator},function(t){i=t.ObjectController},function(t){o=t.circuitSystem}],execute:function(){var s;r._RF.push({},"db306RIK2RLGIGZmlBb03HC","WLSYS_BatteryController",void 0);const{ccclass:l,property:n}=e;t("BatteryController",l("BatteryController")(s=class extends i{constructor(...t){super(...t),this.circuit=new o,this.negativePole=void 0,this.positivePole=void 0,this.BatteryState=[[0,0],[0,1],[0,1],[0,1],[0,0],[-1,-1],[-1,-1],[-1,-1],[0,0],[-1,-1],[-1,-1],[-1,-1],[0,0],[-1,0],[-1,-1],[-1,-1]],this.CanbuildGraph=!1}onLoad(){super.onLoad(),this.beNode=!0,this.Onele=1}initEle(){this.Onele=1}checkType(){if(this.isDestroy)return;let t=0;this.leftController&&!this.leftController.isDestroy&&(t+=8),this.rightController&&!this.rightController.isDestroy&&(t+=4),this.upController&&!this.upController.isDestroy&&(t+=2),this.downController&&!this.downController.isDestroy&&(t+=1),-1==this.BatteryState[t][0]?console.error("警告！警告！错误的电池摆放"):this.buildCircuit(t)}buildCircuit(t){this.isDestroy||(this.rotationType=this.BatteryState[t][1],this.leftController&&this.rightController&&(this.CanbuildGraph=!0),this.CanbuildGraph&&(this.circuit.setBattery(this),this.circuit.buildGraph()))}freshState(){this.sp.node.angle=90*this.rotationType}})||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_BuldController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WLSYS_ObjectController.ts"],(function(e){var t,r,s,o,l,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){s=e.cclegacy,o=e.SpriteFrame,l=e._decorator},function(e){n=e.ObjectController}],execute:function(){var i,c,u,p,a;s._RF.push({},"ec2944SXyFDO49q6dFCjfOe","WLSYS_BuldController",void 0);const{ccclass:d,property:f}=l;e("BuldController",(i=d("BuldController"),c=f([o]),i((a=t((p=class extends n{constructor(...e){super(...e),r(this,"sps",a,this)}onLoad(){super.onLoad(),this.beNode=!0}setEle(e){super.setEle(e)}initEle(){super.setEle(0)}freshState(){super.freshState(),this.sp.spriteFrame=this.sps[this.Onele]}}).prototype,"sps",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=p))||u));s._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_circuitSystem.ts",["cc"],(function(i){var t,r;return{setters:[function(i){t=i.cclegacy,r=i._decorator}],execute:function(){var s;t._RF.push({},"6857cDKbhRKL6ekCDw6pIe8","WLSYS_circuitSystem",void 0);const{ccclass:e,property:h}=r;i("circuitSystem",e("circuitSystem")(s=class{constructor(){this.circuitNode=[],this.batteryController=null,this.grid=void 0,this.dx=[0,0,1,-1],this.dy=[1,-1,0,0],this.circuit=[],this.circuitUndir=[],this.circuitdir=[],this.dfsNodeVis=[],this.dfsTypeVis=[],this.circuitController=[]}setBattery(i){this.batteryController=i,this.grid=i.grid}buildGraph(){if(this.batteryController.isDestroy)return;console.log("Circuit begin");let i=Array(this.grid.width*this.grid.height);i.fill(0);let t=this.batteryController.gridPos.x,r=this.batteryController.gridPos.y;this.circuit=[],this.circuitUndir=[],this.circuitdir=[],this.circuitNode=[],this.circuitController=[],this.dfsTypeVis=[];let s=[];this.circuitNode.push(this.grid.getGridMapIndex(t,r)),this.circuitController.push(this.grid.getGridController(t,r)),i[this.getMapindex(t,r)]=1;let e=t,h=r,c=new Array;for(0==this.batteryController.rotationType?e++:h--,c.push(this.getMapindex(e,h));c.length>0;){let t=this.grid.getGridpos(c[0]).x,r=this.grid.getGridpos(c[0]).y;i[this.getMapindex(t,r)]=1,this.grid.getGridController(t,r).beNode&&(this.circuitNode.push(this.getMapindex(t,r)),this.circuitController.push(this.grid.getGridController(t,r)),this.grid.getGridController(t,r).initEle()),this.grid.getGridController(t,r).isDestroy||3!=this.grid.getGridController(t,r).data.id||this.grid.getGridController(t,r).setBattery(this.circuitController[0]),c.shift();for(let s=0;s<4;s++){let e=t+this.dx[s],h=r+this.dy[s];0==i[this.getMapindex(e,h)]&&1==this.grid.isGridOccupy(e,h)&&(i[this.getMapindex(e,h)]=1,c.push(this.getMapindex(e,h)))}}let d=new Map;for(let i=0;i<this.circuitNode.length;i++)this.circuitUndir.push([]),this.circuitdir.push([]),this.dfsNodeVis.push(0),s.push(this.circuitController[i].data.resistance),d.set(this.circuitNode[i],i),console.log(this.circuitController[i]),this.circuitController[i].initEle();for(let t=0;t<this.circuitNode.length;t++)for(c.push(this.circuitNode[t]),i.fill(0);c.length>0;){let r=this.grid.getGridpos(c[0]).x,s=this.grid.getGridpos(c[0]).y;i[this.getMapindex(r,s)]=1,c.shift();for(let e=0;e<4;e++){let h=r+this.dx[e],l=s+this.dy[e];1==this.grid.isGridOccupy(h,l)&&this.grid.getGridController(h,l).canCross&&(0==i[this.getMapindex(h,l)]&&1==this.grid.isGridOccupy(h,l)&&0==d.has(this.getMapindex(h,l))?c.push(this.getMapindex(h,l)):0==i[this.getMapindex(h,l)]&&1==d.has(this.getMapindex(h,l))&&this.getMapindex(h,l)!=this.circuitNode[t]&&this.circuitUndir[d.get(this.circuitNode[t])].push(d.get(this.getMapindex(h,l))))}}let l=this.circuitUndir.length;for(let i=0;i<1<<l;i++){let i=Array(l);this.dfsTypeVis.push(i)}let o=[];for(let i=0;i<l;i++)this.circuitUndir[i].length<=1&&"wire"!=this.circuitController[i].data.name&&(o.push(i),this.circuitUndir[i]=[]);for(let i=0;i<l;i++)for(let t=0;t<o.length;t++)-1!=this.circuitUndir[i].indexOf(o[t])&&this.circuitUndir[i].splice(this.circuitUndir[i].indexOf(o[t]),1);this.dfsNodeVis[0]=1,this.dfsTypeVis[1][0]=1,this.dfs(0,1);let n=[],u=(1<<l)-1;for(let i=0;i<this.circuit.length;i++)u&=this.circuit[i];console.log(u);for(let i=0;i<l;i++)u&1<<i&&n.push(i);let g=!0;for(let i=0;i<this.circuit.length;i++){let t=this.circuit[i]^u,r=!0;for(let i=0;i<l;i++)t>>i&1&&(console.log(i),0==this.circuitController[i].equleWire&&(r=!1));r&&(g=!1)}if(g)for(let i=0;i<this.circuitUndir.length;i++)0!=this.circuitUndir[i].length&&this.circuitController[i].setEle(1);else for(let i=0;i<n.length;i++)this.circuitController[n[i]].setEle(1)}dfs(i,t){if(i!=this.circuitUndir[0][1])if(0==i){let r=this.circuitUndir[i][0],s=t|1<<r;this.dfsTypeVis[s][r]||(this.dfsNodeVis[r]++,this.dfsTypeVis[s][r]=1,this.dfs(r,s),this.dfsNodeVis[r]--)}else for(let r=0;r<this.circuitUndir[i].length;r++){let s=this.circuitUndir[i][r],e=t|1<<s;this.dfsTypeVis[e][s]||(t&1<<s||(this.dfsNodeVis[s]++,this.dfsTypeVis[e][s]=1,this.dfs(s,e),this.dfsNodeVis[s]--))}else this.circuit.push(t)}getMapindex(i,t){return this.grid.getGridMapIndex(i,t)}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_ElectricResistanceController.ts",["cc"],(function(e){var c,t,r;return{setters:[function(e){c=e.cclegacy,t=e.Component,r=e._decorator}],execute:function(){var s;c._RF.push({},"24adbIrjfBCH5KASy7xcGYL","WLSYS_ElectricResistanceController",void 0);const{ccclass:n,property:o}=r;e("ElectricResistanceController",n("ElectricResistanceController")(s=class extends t{})||s);c._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_eraseButtonController.ts",["cc"],(function(t){var e,r,n,s,o,c;return{setters:[function(t){e=t.cclegacy,r=t.Component,n=t.Color,s=t.Sprite,o=t.director,c=t._decorator}],execute:function(){var i;e._RF.push({},"2bfd6KmBKdEnaK5dsPbWB/+","WLSYS_eraseButtonController",void 0);const{ccclass:u,property:h}=c;t("eraseButtonController",u("eraseButtonController")(i=class extends r{constructor(...t){super(...t),this.sp=null,this.type=[new n(255,255,255,255),new n(100,100,100,255)],this.current=0}onLoad(){this.sp=this.getComponentInChildren(s)}onEnable(){o.getScene().on("eraseButtonType",this.beType,this)}changeType(){this.current=this.current?0:1,this.sp.color=this.type[this.current]}beType(t){this.current=t,this.sp.color=this.type[this.current]}onDisable(){o.getScene().off("eraseButtonType",this.beType,this)}})||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_eventSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,c,r,i;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,c=t.Node,r=t._decorator,i=t.Component}],execute:function(){var s,a,u,l,h,p,S,d;o._RF.push({},"c0239zLRKJDKresjsyVD6Sc","WLSYS_eventSystem",void 0);const{ccclass:m,property:f}=r;var y=function(t){return t.TouchStart="TouchStart",t.TouchEnd="TouchEnd",t}(y||{});t("eventSystem",(s=m("eventSystem"),a=f(c),u=f(c),s(((d=class t extends i{constructor(...t){super(...t),n(this,"placementSystem",p,this),n(this,"InputManager",S,this)}onLoad(){t.instance=this}onEnable(){this.node.on(y.TouchStart,this.PlacementTouchStart,this),this.node.on(y.TouchEnd,this.PlacementTouchEnd,this)}PlacementTouchStart(){}PlacementTouchEnd(){}onDisable(){this.node.off(y.TouchStart,this.PlacementTouchStart,this),this.node.off(y.TouchEnd,this.PlacementTouchEnd,this)}}).instance=null,p=e((h=d).prototype,"placementSystem",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(h.prototype,"InputManager",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=h))||l));o._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_Grid.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,r,o,s,n,l,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t.Vec2,s=t._decorator,n=t.Component,l=t.Vec3,h=t.UITransform}],execute:function(){var d,c,a,p,u;r._RF.push({},"ec434f9z+hNN6iKW1Ldz3e8","WLSYS_Grid",void 0);const{ccclass:g,property:f}=s;t("Grid",(d=g("Grid"),c=f(o),d((u=i((p=class extends n{constructor(...t){super(...t),e(this,"cellSize",u,this),this.originPoint=l.ONE,this.width=void 0,this.height=void 0,this.gridMap=null,this.ControllerMap=null}onLoad(){this.originPoint=this.node.parent.getWorldPosition(),this.width=this.node.parent.getComponent(h).width/this.cellSize.x,this.height=this.node.parent.getComponent(h).height/this.cellSize.y,this.gridMap=new Array(this.width*this.height),this.ControllerMap=new Array(this.width*this.height),this.gridMap.fill(!1),this.ControllerMap.fill(null)}getWorldtoCellPosition(t){return new l(Math.floor(t.subtract(this.originPoint).x/this.cellSize.x),Math.floor(t.subtract(this.originPoint).y/this.cellSize.y),0)}getCelltoWorldPosition(t){return new l(t.x*this.cellSize.x,t.y*this.cellSize.y).add(this.originPoint)}isGridOccupy(t,i){return this.gridMap[this.getGridMapIndex(t,i)]}getGridMapIndex(t,i){return i*this.width+t}getGridpos(t){return new o(t%this.width,Math.floor(t/this.width))}setGridtype(t,i,e){this.gridMap[this.getGridMapIndex(t,i)]=e}setGridController(t,i,e){this.ControllerMap[this.getGridMapIndex(t,i)]=e}getGridController(t,i){return this.ControllerMap[this.getGridMapIndex(t,i)]}isThisAreaOccupy(t,i,e,r){for(let o=t;o<t+e;o++)for(let t=i;t<i+r;t++)if(this.isGridOccupy(o,t))return!1;return!0}OccupyArea(t,i,e,r,o){if(0==this.isThisAreaOccupy(t,i,e,r))return console.log("Fail Occupy"),!1;for(let s=t;s<t+e;s++)for(let t=i;t<i+r;t++)this.setGridtype(s,t,!0),this.setGridController(s,t,o);return!0}RefreeArea(t,i,e,r){for(let o=t;o<t+e;o++)for(let t=i;t<i+r;t++)this.setGridtype(o,t,!1),this.setGridtype(o,t,null)}}).prototype,"cellSize",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=p))||a));r._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_InputManager.ts",["cc"],(function(t){var o,n,i,s,e;return{setters:[function(t){o=t.cclegacy,n=t.Component,i=t.Vec2,s=t.Input,e=t._decorator}],execute:function(){var h;o._RF.push({},"3efe4rvyONNdp/zM2jGV8d7","WLSYS_InputManager",void 0);const{ccclass:c,property:r}=e;t("InputManager",c("InputManager")(h=class extends n{constructor(...t){super(...t),this.currentPosition=new i,this.lastPosition=new i,this.isTouching=!1}onEnable(){this.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this)}onTouchStart(t){this.lastPosition=this.currentPosition,this.currentPosition=t.getUILocation(),this.isTouching=!0}onTouchMove(t){this.lastPosition=this.currentPosition,this.currentPosition=t.getUILocation()}onTouchEnd(t){this.lastPosition=this.currentPosition,this.currentPosition=t.getUILocation(),this.isTouching=!1}onDisable(){this.node.off(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(s.EventType.TOUCH_END,this.onTouchEnd,this)}getTouchPosition(){return this.currentPosition}})||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_ObjectController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WLSYS_ObjectData.ts","./WLSYS_placementSystem.ts"],(function(t){var e,i,r,o,n,s,l,h,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,o=t._decorator,n=t.Component,s=t.Button,l=t.Sprite,h=t.Vec2},function(t){a=t.ObjectData},function(t){c=t.placementSystem}],execute:function(){var u,d,b,p,C,g,y,f,S;r._RF.push({},"00c9crQwUREwq8LBMb/wSkT","WLSYS_ObjectController",void 0);const{ccclass:m,property:w}=o;t("ObjectController",(u=m("ObjectController"),d=w({type:a}),b=w(Number),p=w(Boolean),u((y=e((g=class extends n{constructor(...t){super(...t),i(this,"data",y,this),this.button=null,this.onMap=!1,this.canCross=!0,this.canBeFinalNode=!1,this.sp=null,this.gridPos=void 0,i(this,"Type",f,this),this.grid=null,this.Onele=0,i(this,"beNode",S,this),this.rotationType=0,this.equleWire=!1,this.isDestroy=!1,this.upController=null,this.downController=null,this.leftController=null,this.rightController=null}setUpController(t){this.upController=t}setdownController(t){this.downController=t}setleftController(t){this.leftController=t}setrigthController(t){this.rightController=t}buildNeighbour(){this.upController=this.grid.getGridController(this.gridPos.x,this.gridPos.y+1),this.downController=this.grid.getGridController(this.gridPos.x,this.gridPos.y-1),this.leftController=this.grid.getGridController(this.gridPos.x-1,this.gridPos.y),this.rightController=this.grid.getGridController(this.gridPos.x+1,this.gridPos.y)}checkType(){}freshState(){}onLoad(){this.button=this.getComponent(s),this.sp=this.getComponentInChildren(l),this.isDestroy=!1}initEle(){}onEnable(){this.node.on(s.EventType.CLICK,this.callback,this)}offselect(){this.button.node.off(s.EventType.CLICK,this.callback,this)}onSomething(){this.button.enabled=!1}callback(){c.instance.setPlaceObject(this.data)}init(t){this.data=t}setEle(t){this.Onele=t,this.freshState()}onDisable(){this.offselect()}V2EqualJue(t,e){return t.x==e.x&&t.y==e.y}V2absEqualJue(t,e){return Math.abs(t.x)==Math.abs(e.x)&&Math.abs(t.y)==Math.abs(e.y)}Vec2(t,e){return new h(t,e)}onDestroy(){this.isDestroy=!0}}).prototype,"data",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),f=e(g.prototype,"Type",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=e(g.prototype,"beNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=g))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_ObjectData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,a,o,l,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Vec2,a=e.CCString,o=e.CCInteger,l=e.Prefab,c=e._decorator}],execute:function(){var s,p,u,b,f,y,g,h,z,m,v,S,d,D,w;r._RF.push({},"2a030SNHiBIOY8z+DRzyTxL","WLSYS_ObjectData",void 0);const{ccclass:_,property:j}=c;e("ObjectData",(s=_("ObjectData"),p=j({type:n,visible:!0,tooltip:"gridSize"}),u=j({type:a,visible:!0,tooltip:"name"}),b=j({type:o,visible:!0,tooltip:"name"}),f=j({type:o,visible:!0,tooltip:"canMask"}),y=j({type:o,visible:!0,tooltip:"Resistance"}),g=j({type:l,visible:!0,tooltip:"prefab"}),s((m=i((z=class{constructor(){t(this,"gridSize",m,this),t(this,"name",v,this),t(this,"id",S,this),t(this,"canMask",d,this),t(this,"resistance",D,this),t(this,"prefab",w,this)}}).prototype,"gridSize",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),v=i(z.prototype,"name",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),S=i(z.prototype,"id",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=i(z.prototype,"canMask",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=i(z.prototype,"resistance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=i(z.prototype,"prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=z))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_ObjectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Banner.ts","./AudioManager.ts","./ProjectEventManager.ts","./UIManager.ts","./GameManager.ts"],(function(e){var t,a,n,i,r,s,o,l,c,u,b,h,P,f,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Prefab,r=e.Node,s=e._decorator,o=e.Component,l=e.instantiate},function(e){c=e.default},function(e){u=e.AudioManager,b=e.Audios},function(e){h=e.ProjectEventManager,P=e.ProjectEvent},function(e){f=e.UIManager,g=e.Panel},function(e){p=e.GameManager}],execute:function(){var d,S,j,m,y,M,w,B,L,O,v,W,z;n._RF.push({},"96c39WoYfNOnLJs+WjCVnwh","WLSYS_ObjectManager",void 0);const{ccclass:_,property:C}=s;e("ObjectManager",(d=_("ObjectManager"),S=C(i),j=C(i),m=C(i),y=C(i),M=C(r),d((L=t((B=class extends o{constructor(...e){super(...e),this.instance=null,a(this,"straightWirePrefab",L,this),a(this,"BatteryPrefab",O,this),a(this,"BuldPrefab",v,this),a(this,"SwitchPrefab",W,this),a(this,"ObjectListParent",z,this)}onLoad(){this.instance=this;let e=l(this.straightWirePrefab),t=l(this.BatteryPrefab),a=l(this.BuldPrefab),n=l(this.SwitchPrefab);e.setParent(this.ObjectListParent.children[0]),e.setScale(1.2,1.2,1.2),e.setPosition(-55,-40,0),t.setParent(this.ObjectListParent.children[1]),t.setScale(1.2,1.2,1.2),t.setPosition(-55,-40,0),a.setParent(this.ObjectListParent.children[2]),a.setScale(1.2,1.2,1.2),a.setPosition(-55,-40,0),n.setParent(this.ObjectListParent.children[3]),n.setScale(1.2,1.2,1.2),n.setPosition(-55,-40,0),h.emit(P.游戏开始)}OnButtonClick(e){switch(u.Instance.PlayCommonSFX(b.ButtonClick),e.target.name){case"ReturnButton":c.IsShowServerBundle?f.ShowPanel(g.MoreGamePanel,[!0]):f.ShowPanel(g.LoadingPanel,[p.StartScene])}}}).prototype,"straightWirePrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(B.prototype,"BatteryPrefab",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(B.prototype,"BuldPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(B.prototype,"SwitchPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(B.prototype,"ObjectListParent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=B))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_pair.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"0a918UsG2VOF7o7YcDgkLG9","WLSYS_pair",void 0);s("pair",class{constructor(s,t){this.first=void 0,this.second=void 0,this.first=s,this.second=t}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_placementSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WLSYS_InputManager.ts","./WLSYS_Grid.ts","./WLSYS_ObjectController.ts","./ProjectEventManager.ts"],(function(t){var e,i,r,l,s,o,n,a,c,h,d,g,p,u,b,y,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,l=t.Node,s=t._decorator,o=t.Component,n=t.Vec3,a=t.director,c=t.UITransform,h=t.size,d=t.instantiate,g=t.Vec2},function(t){p=t.InputManager},function(t){u=t.Grid},function(t){b=t.ObjectController},function(t){y=t.ProjectEventManager,C=t.ProjectEvent}],execute:function(){var O,f,j,P,S,m,x,G,z,D,L,T,v,w,M,W,I,_;r._RF.push({},"b254c71uaZGyb+qg1CD0T3G","WLSYS_placementSystem",void 0);const{ccclass:k,property:N}=s;t("placementSystem",(O=k("placementSystem"),f=N(l),j=N(p),P=N(l),S=N(u),m=N(l),x=N(l),G=N(l),O(((_=class t extends o{constructor(...t){super(...t),i(this,"inputDirctor",L,this),i(this,"inputManager",T,this),this.placeObject=null,this.placeObjectController=null,this.placeObjectData=null,i(this,"selectIndecate",v,this),i(this,"grid",w,this),i(this,"placeObjectParent",M,this),i(this,"TempTip",W,this),this.battery=!1,this.placeObjectControllerList=[],this.dx=[0,0,0,1,-1],this.dy=[0,1,-1,0,0],this.opType=0,this.currentPlacenum=0,this.inf=99999999,this.LastgridPos=new n(this.inf,this.inf,this.inf),i(this,"moreGame",I,this)}start(){y.emit(C.游戏开始,"物理实验室"),y.emit(C.初始化更多模式按钮,this.moreGame),y.emit(C.游戏开始,"物理实验室"),y.emit(C.弹出窗口,"物理实验室")}onLoad(){t.instance=this}setPlaceObject(t){this.placeObjectData=t,this.opType=0,a.getScene().emit("eraseButtonType",0),this.selectIndecate.getComponent(c).setContentSize(h(this.grid.cellSize.x*t.gridSize.x,this.grid.cellSize.y*t.gridSize.y))}createPlaceObject(t,e){this.placeObject=d(this.placeObjectData.prefab),this.placeObject.setParent(this.placeObjectParent),this.placeObjectController=this.placeObject.getComponent(b),this.placeObjectController.offselect(),this.placeObjectController.onSomething(),this.placeObjectController.grid=this.grid,this.placeObject.getComponent(c).setContentSize(h(this.grid.cellSize.x*this.placeObjectController.data.gridSize.x,this.grid.cellSize.y*this.placeObjectController.data.gridSize.y)),this.placeObject.setWorldPosition(t),this.placeObjectController.onMap=!0,this.placeObjectController.gridPos=e,this.placeObjectControllerList.push(this.placeObjectController)}undoCreatePlaceObject(){if(this.placeObjectControllerList.length<=0)return void console.log("没了");let t=this.placeObjectControllerList[this.placeObjectControllerList.length-1];"battery"==t.data.name&&(this.battery=!1),this.grid.RefreeArea(t.gridPos.x,t.gridPos.y,t.data.gridSize.x,t.data.gridSize.y),this.placeObjectControllerList.pop(),t.isDestroy=!0;let e=t.gridPos.x,i=t.gridPos.y;for(let t=1;t<5;t++){var r,l,s;let o=e+this.dx[t],n=i+this.dy[t];null==this.grid.getGridController(o,n)||this.grid.getGridController(o,n).isDestroy||(null==(r=this.grid.getGridController(o,n))||r.buildNeighbour(),null==(l=this.grid.getGridController(o,n))||l.checkType(),null==(s=this.grid.getGridController(o,n))||s.freshState())}t.grid=null,t.node.destroy()}update(t){this.inputDirctor.setWorldPosition(this.inputManager.getTouchPosition().x,this.inputManager.getTouchPosition().y,0);let e=this.grid.getWorldtoCellPosition(this.inputDirctor.worldPosition);if(this.inputManager.isTouching)if(this.LastgridPos.x>this.inf/2)this.LastgridPos=e.clone();else{let t=this.LastgridPos.x-e.x,i=this.LastgridPos.y-e.y;0!=t&&0!=i&&(t=0),e.x=this.LastgridPos.x-t,e.y=this.LastgridPos.y-i,this.LastgridPos=e.clone()}else this.LastgridPos=new n(this.inf,this.inf,this.inf);if(this.selectIndecate.setWorldPosition(this.grid.getCelltoWorldPosition(e)),this.inputManager.isTouching&&null!=this.placeObjectData&&0==this.opType){if(this.grid.isThisAreaOccupy(e.x,e.y,this.placeObjectData.gridSize.x,this.placeObjectData.gridSize.y))if("battery"==this.placeObjectData.name){if(this.battery)return this.TempTip.setScale(1,1,1),void this.scheduleOnce((()=>{this.TempTip.setScale(0,0,0)}),2);this.battery=!0,this.createPlaceObject(this.selectIndecate.worldPosition,new g(e.x,e.y)),this.grid.OccupyArea(e.x,e.y,this.placeObjectData.gridSize.x,this.placeObjectData.gridSize.y,this.placeObjectController),this.currentPlacenum++;let t=-1;for(let e=0;e<5;e++){let s=this.placeObjectController.gridPos.x+this.dx[e],o=this.placeObjectController.gridPos.y+this.dy[e];var i,r,l;if(null!=this.grid.getGridController(s,o)&&!this.grid.getGridController(s,o).isDestroy)if(1==this.grid.getGridController(s,o).data.id)t=e;else null==(i=this.grid.getGridController(s,o))||i.buildNeighbour(),null==(r=this.grid.getGridController(s,o))||r.checkType(),null==(l=this.grid.getGridController(s,o))||l.freshState()}if(t>=0){let e=this.placeObjectController.gridPos.x+this.dx[t],i=this.placeObjectController.gridPos.y+this.dy[t];var s,o,a;if(null==this.grid.getGridController(e,i)||this.grid.getGridController(e,i).isDestroy);else null==(s=this.grid.getGridController(e,i))||s.buildNeighbour(),null==(o=this.grid.getGridController(e,i))||o.checkType(),null==(a=this.grid.getGridController(e,i))||a.freshState()}}else{this.createPlaceObject(this.selectIndecate.worldPosition,new g(e.x,e.y)),this.grid.OccupyArea(e.x,e.y,this.placeObjectData.gridSize.x,this.placeObjectData.gridSize.y,this.placeObjectController),this.currentPlacenum++;let t=-1;for(let e=0;e<5;e++){let i=this.placeObjectController.gridPos.x+this.dx[e],r=this.placeObjectController.gridPos.y+this.dy[e];var c,h,d;if(null!=this.grid.getGridController(i,r)&&!this.grid.getGridController(i,r).isDestroy)if(1==this.grid.getGridController(i,r).data.id)t=e;else null==(c=this.grid.getGridController(i,r))||c.buildNeighbour(),null==(h=this.grid.getGridController(i,r))||h.checkType(),null==(d=this.grid.getGridController(i,r))||d.freshState()}if(t>=0){let e=this.placeObjectController.gridPos.x+this.dx[t],i=this.placeObjectController.gridPos.y+this.dy[t];var p,u,b;if(null==this.grid.getGridController(e,i)||this.grid.getGridController(e,i).isDestroy);else null==(p=this.grid.getGridController(e,i))||p.buildNeighbour(),null==(u=this.grid.getGridController(e,i))||u.checkType(),null==(b=this.grid.getGridController(e,i))||b.freshState()}}}else if(1==this.opType&&this.inputManager.isTouching){if(this.grid.isGridOccupy(e.x,e.y))for(let t=0;t<this.placeObjectControllerList.length;t++)if(this.placeObjectControllerList[t].gridPos.x==e.x&&this.placeObjectControllerList[t].gridPos.y==e.y){let e=this.placeObjectControllerList[t];this.placeObjectControllerList.splice(t,1),this.grid.RefreeArea(e.gridPos.x,e.gridPos.y,e.data.gridSize.x,e.data.gridSize.y),e.isDestroy=!0;let i=e.gridPos.x,r=e.gridPos.y;for(let t=1;t<5;t++){var y,C,O;let e=i+this.dx[t],l=r+this.dy[t];null==this.grid.getGridController(e,l)||this.grid.getGridController(e,l).isDestroy||(null==(y=this.grid.getGridController(e,l))||y.buildNeighbour(),null==(C=this.grid.getGridController(e,l))||C.checkType(),null==(O=this.grid.getGridController(e,l))||O.freshState())}e.grid=null,e.node.destroy();break}}else this.currentPlacenum>0&&(this.currentPlacenum=0)}ridEverything(){let t=this.placeObjectControllerList.length;for(let e=0;e<t;e++)this.undoCreatePlaceObject()}eraseButton(){this.opType=1}onDestroy(){}}).instance=null,L=e((D=_).prototype,"inputDirctor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(D.prototype,"inputManager",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(D.prototype,"selectIndecate",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(D.prototype,"grid",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(D.prototype,"placeObjectParent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(D.prototype,"TempTip",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(D.prototype,"moreGame",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=D))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_SwitchController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WLSYS_ObjectController.ts"],(function(e){var t,s,r,i,o,n,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.SpriteFrame,o=e._decorator,n=e.Button},function(e){c=e.ObjectController}],execute:function(){var h,l,u,a,p,b;r._RF.push({},"91e96/KcfhG66afIRIucfRh","WLSYS_SwitchController",void 0);const{ccclass:y,property:f}=o;e("SwitchController",(h=y("SwitchController"),l=f([i]),h(((b=class extends c{constructor(...e){super(...e),s(this,"sps",p,this),this.curType=!1,this.batteryBelong=null}setBattery(e){this.batteryBelong=e}onLoad(){super.onLoad(),this.beNode=!1,this.canCross=!1,this.equleWire=!1}setEle(e){super.setEle(e)}initEle(){this.Onele=0}freshState(){}freshCircuit(){this.curType=!this.curType,this.equleWire=!this.equleWire,this.beNode=!this.beNode,this.sp.spriteFrame=this.sps[Number(this.curType)],this.canCross=this.curType,this.batteryBelong&&!this.batteryBelong.isDestroy&&this.batteryBelong.checkType()}onSomething(){super.onSomething(),this.button.enabled=!0,this.button.node.on(n.EventType.CLICK,this.freshCircuit,this)}onDisable(){super.onDisable(),this.button.node.off(n.EventType.CLICK,this.freshCircuit,this)}}).cnt=0,p=t((a=b).prototype,"sps",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=a))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_TipController.ts",["cc"],(function(e){var t,o,r;return{setters:[function(e){t=e.cclegacy,o=e.Component,r=e._decorator}],execute:function(){var c;t._RF.push({},"c4e4c9HvjlF/phb82HKvea4","WLSYS_TipController",void 0);const{ccclass:n,property:s}=r;e("TipController",n("TipController")(c=class extends o{windowsDisapear(){this.node.setScale(0,0,0)}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_UI_ObjectListController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,i,s,n,r,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.Vec3,n=e._decorator,r=e.Component,a=e.tween}],execute:function(){var c,l,h,m,p,u,_;i._RF.push({},"6601cpXNhZJdrtEUwJZbm1c","WLSYS_UI_ObjectListController",void 0);const{ccclass:L,property:I}=n;e("UI_ObjectListController",(c=L("UI_ObjectListController"),l=I(s),h=I(s),c((u=t((p=class extends r{constructor(...e){super(...e),o(this,"GamePos",u,this),o(this,"LeavePos",_,this),this.InGame=!1}onLoad(){this.node.setPosition(this.LeavePos)}UI_ChangeType(){this.InGame?this.UI_LeaveFormGame():this.UI_comeToGame()}UI_comeToGame(){a(this.node).to(.3,{position:this.GamePos},{easing:"smooth"}).call((()=>{this.InGame=!0})).start()}UI_LeaveFormGame(){a(this.node).to(.3,{position:this.LeavePos},{easing:"smooth"}).call((()=>{this.InGame=!1})).start()}}).prototype,"GamePos",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),_=t(p.prototype,"LeavePos",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),m=p))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/WLSYS_WireController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WLSYS_ObjectController.ts"],(function(e){var t,i,r,s,o,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,s=e.SpriteFrame,o=e._decorator},function(e){l=e.ObjectController}],execute:function(){var n,a,h,p,c,u,d,y,f,m,g,_,b,S,W;r._RF.push({},"171f5Rso/dLwo+IJZYV/p3M","WLSYS_WireController",void 0);const{ccclass:T,property:C}=o;var w=function(e){return e[e.left=0]="left",e[e.right=1]="right",e[e.up=2]="up",e[e.down=3]="down",e}(w||{});const v={head:0,mid:1,tail:2},D={mid:4},z={mid:5},L={mid:6};e("WireController",(n=T("WireController"),a=C(s),h=C(s),p=C(s),c=C(s),u=C(s),d=C(s),n((m=t((f=class extends l{constructor(...e){super(...e),i(this,"straight_head",m,this),i(this,"straight_mid",g,this),i(this,"straight_tail",_,this),i(this,"corner_mid",b,this),i(this,"Ttype_mid",S,this),i(this,"cross_mid",W,this),this.spfs=new Map,this.WireState=[[0,0],[0,1],[0,1],[0,1],[0,0],[4,0],[4,1],[5,1],[0,0],[4,3],[4,2],[5,3],[0,0],[5,0],[5,2],[6,0]]}onLoad(){super.onLoad(),this.equleWire=!0,this.saveWireTypeSpf(v.head,this.straight_head.clone()),this.saveWireTypeSpf(v.mid,this.straight_mid.clone()),this.saveWireTypeSpf(v.tail,this.straight_tail.clone()),this.saveWireTypeSpf(D.mid,this.corner_mid.clone()),this.saveWireTypeSpf(z.mid,this.Ttype_mid.clone()),this.saveWireTypeSpf(L.mid,this.cross_mid.clone())}saveWireTypeSpf(e,t){this.spfs.set(e,t)}getDirection(e){return 0==e.x&&1==e.y?w.down:0==e.x&&-1==e.y?w.up:1==e.x&&0==e.y?w.left:w.right}checkType(){let e=0;this.leftController&&!this.leftController.isDestroy&&(e+=8),this.rightController&&!this.rightController.isDestroy&&(e+=4),this.upController&&!this.upController.isDestroy&&(e+=2),this.downController&&!this.downController.isDestroy&&(e+=1),this.Type=this.WireState[e][0],this.rotationType=this.WireState[e][1],this.Type>=5?this.beNode=!0:this.beNode=!1}initEle(){this.Onele=0}freshState(){this.sp.spriteFrame=this.spfs.get(this.Type),this.sp.node.angle=90*this.rotationType}checkDirEqual(e,t,i,r){return e==i&&t==r}checkDirEqualNoOrder(e,t,i,r){return!(!this.checkDirEqual(t,e,i,r)&&!this.checkDirEqual(e,t,i,r))}}).prototype,"straight_head",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(f.prototype,"straight_mid",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(f.prototype,"straight_tail",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(f.prototype,"corner_mid",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(f.prototype,"Ttype_mid",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(f.prototype,"cross_mid",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/22_WLSYS', 'chunks:///_virtual/22_WLSYS'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});