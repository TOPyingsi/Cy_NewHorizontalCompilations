System.register("chunks:///_virtual/47_TKJWL_Bundle",["./Label3D2.ts","./TKJWL_GameEvents.ts","./TKJWL_ItemBase.ts","./TKJWL_ItemType.ts","./TKJWL_PHY_GROUP.ts","./TKJWL_RoomBase.ts","./TKJWL_TaskType.ts","./TKJWL_UIType.ts","./TKJWL_Area.ts","./TKJWL_Door.ts","./TKJWL_HoldOnItem.ts","./TKJWL_Knob.ts","./TKJWL_LightSwitch.ts","./TKJWL_Table.ts","./TKJWL_Telescope.ts","./TKJWL_AStar.ts","./TKJWL_AStarNode.ts","./TKJWL_BinaryHeap.ts","./TKJWL_Door2.ts","./TKJWL_MonsterController1.ts","./TKJWL_PathManager.ts","./TKJWL_Waypoint.ts","./TKJWL_DanceRoom.ts","./TKJWL_KillRoom.ts","./TKJWL_PoliceRoom.ts","./TKJWL_CameraController.ts","./TKJWL_Player.ts","./TKJWL_PlayerController.ts","./TKJWL_RandomSnow.ts","./TKJWL_AudioManager.ts","./TKJWL_DataManager.ts","./TKJWL_GameManager.ts","./TKJWL_TaskManager.ts","./TKJWL_UIManager.ts","./TKJWL_EndPanel.ts","./TKJWL_GameUI.ts","./TKJWL_SuccessTipPanel.ts","./TKJWL_TipPanel.ts","./TKJWL_Slider.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Label3D2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,n,h,a,r,o,l,u,p,_,c,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Color,h=t.Material,a=t._decorator,r=t.Component,o=t.Size,l=t.Vec2,u=t.MeshRenderer,p=t.utils,_=t.ImageAsset,c=t.Texture2D,d=t.RenderTexture}],execute:function(){var g,m,v,x,R,b,D,w,y,f,M,S,z,C,F;s._RF.push({},"86c694Fw4VAZ7BvCwc05dW5","Label3D2",void 0);const{ccclass:L,property:T,executeInEditMode:P}=a,W=t("BASELINE_RATIO",.26);class E{static get(){if(this.pool.length>0){const t=this.pool.pop(),e=t.getContext("2d");return{canvas:t,context:e}}{const t=document.createElement("canvas"),e=t.getContext("2d");return{canvas:t,context:e}}}static put(t){t.context.clearRect(0,0,t.canvas.width,t.canvas.height),this.pool.push(t.canvas)}}E.pool=[];t("Label3D",(g=L("Label3D"),m=T({tooltip:"字体颜色",type:n,visible:function(){return this.updateRenderData(),!0}}),v=T({tooltip:"描边厚度",visible:function(){return this.updateRenderData(),!0}}),x=T({tooltip:"描边颜色",type:n,visible:function(){return this.updateRenderData(),!0}}),R=T({tooltip:"行高",visible:function(){return this.updateRenderData(),!0}}),b=T({displayOrder:2,multiline:!0}),D=T({type:h,displayOrder:2}),g(w=P((f=e((y=class extends r{constructor(...t){super(...t),i(this,"color",f,this),i(this,"lineWidth",M,this),i(this,"linecolor",S,this),i(this,"lineHeight",z,this),i(this,"_string",C,this),i(this,"_material",F,this),this._splitStrings=[],this._assemblerData=null,this._context=null,this._canvas=null,this._texture=null,this._meshRender=null,this._canvasSize=new o,this._worldBounds=null,this._uvs=[],this._positions=[],this._startPosition=new l}get Color(){return this.color}set Color(t){this.color=t,this.updateRenderData()}get string(){return this._string}set string(t){t=null==t?"":t.toString(),this._string!==t&&(this._string=t,this.updateRenderData())}get material(){return this._material}set material(t){this._material=t,this.updateMeshRenderMaterial()}onLoad(){this.initMeshRender()}onEnable(){this._assemblerData=E.get(),this._context=this._assemblerData.context,this._canvas=this._assemblerData.canvas,this.updateRenderData()}start(){this.updateRenderData()}updateRenderData(){this._assemblerData&&(this.initTexture2D(),this.updateFontFormatting(),this.updateFontCanvasSize(),this.updateRenderMesh(),this.updateFontRenderingStyle(),this.updateTexture(),this.updateMaterial(),this.resetRenderData())}initMeshRender(){this._meshRender=this.node.getComponent(u),this._meshRender||(this._meshRender=this.node.addComponent(u)),this.initRenderMesh()}initRenderMesh(){var t;this._positions.push(-.5,-.5,0),this._uvs.push(0,1),this._positions.push(.5,-.5,0),this._uvs.push(1,1),this._positions.push(-.5,.5,0),this._uvs.push(0,0),this._positions.push(-.5,.5,0),this._uvs.push(0,0),this._positions.push(.5,-.5,0),this._uvs.push(1,1),this._positions.push(.5,.5,0),this._uvs.push(1,0),this._meshRender.mesh=p.MeshUtils.createMesh({positions:this._positions,uvs:this._uvs,minPos:{x:-.5,y:-.5,z:0},maxPos:{x:.5,y:.5,z:0}}),null==(t=this._meshRender.model)||t.updateWorldBound(),this.updateMeshRenderMaterial()}updateMeshRenderMaterial(){this._meshRender&&this._material&&(this._meshRender.material=this._material)}initTexture2D(){if(!this._texture){let t=new _(this._canvas);this._texture=new c,this._texture.image=t}}updateTexture(){if(!this._context||!this._canvas)return;this._context.clearRect(0,0,this._canvas.width,this._canvas.height);let t=0,e=0;this._context.lineWidth=this.lineWidth,this._context.strokeStyle=`rgba(${this.linecolor.r}, ${this.linecolor.g}, ${this.linecolor.b}, ${this.linecolor.a})`;for(let i=0;i<this._splitStrings.length;i++){e=this._startPosition.y+(i+1)*this.getLineHeight();let s=this._context.measureText(this._splitStrings[i]).width;t=(this._canvas.width-s)/2,this._context.strokeText(this._splitStrings[i],t,e),this._context.fillText(this._splitStrings[i],t,e)}0!==this._canvas.width&&0!==this._canvas.height&&(this._texture.reset({width:this._canvas.width,height:this._canvas.height,mipmapLevel:1}),this._texture.uploadData(this._canvas),this._texture.setWrapMode(d.WrapMode.CLAMP_TO_EDGE,d.WrapMode.CLAMP_TO_EDGE))}updateMaterial(){if(!this._texture||!this._meshRender||!this._material)return;this._meshRender.getMaterialInstance(0).setProperty("mainTexture",this._texture)}updateFontFormatting(){if(!this._context)return;let t=this._string.split("\\n");this._splitStrings=t;for(let e=0;e<t.length;e++){let i=this._context.measureText(t[e]).width;i>this._canvasSize.width&&(this._canvasSize.width=i)}this._canvasSize.height=t.length*this.getLineHeight()+W*this.getLineHeight()}updateFontCanvasSize(){this._canvasSize.width=Math.min(this._canvasSize.width,2048),this._canvasSize.height=Math.min(this._canvasSize.height,2048),this._canvas.width!=this._canvasSize.width&&(this._canvas.width=this._canvasSize.width),this._canvas.height!=this._canvasSize.height&&(this._canvas.height=this._canvasSize.height),this._context.font=this.getFontDesc()}updateFontRenderingStyle(){this._context.font=this.getFontDesc(),this._context.lineJoin="round",this._context.textAlign="left",this._context.textBaseline="alphabetic";const t=this.Color;this._context.fillStyle=`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a})`}updateRenderMesh(){var t;let e=this._canvas.width/this._canvas.height;this._positions=[],this._positions.push(-.5*e,-.5,0),this._positions.push(.5*e,-.5,0),this._positions.push(-.5*e,.5,0),this._positions.push(-.5*e,.5,0),this._positions.push(.5*e,-.5,0),this._positions.push(.5*e,.5,0),this._meshRender||this.initMeshRender(),this._meshRender.mesh=p.MeshUtils.createMesh({positions:this._positions,uvs:this._uvs,minPos:{x:-.5,y:-.5,z:0},maxPos:{x:.5,y:.5,z:0}}),null==(t=this._meshRender.model)||t.updateWorldBound(),this.updateMeshRenderMaterial()}getLineHeight(){return this.lineHeight}getFontDesc(){return"bold 50px Arial"}resetRenderData(){this._canvasSize.width=0,this._canvasSize.height=0}update(t){}onDisable(){this._assemblerData&&E.put(this._assemblerData),this._meshRender=null}}).prototype,"color",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n(255,255,255,255)}}),M=e(y.prototype,"lineWidth",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),S=e(y.prototype,"linecolor",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n(255,255,255,255)}}),z=e(y.prototype,"lineHeight",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),C=e(y.prototype,"_string",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(y.prototype,"string",[b],Object.getOwnPropertyDescriptor(y.prototype,"string"),y.prototype),F=e(y.prototype,"_material",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(y.prototype,"material",[D],Object.getOwnPropertyDescriptor(y.prototype,"material"),y.prototype),w=y))||w)||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Area.ts",["cc","./TKJWL_DataManager.ts","./EventManager.ts","./TKJWL_GameEvents.ts"],(function(e){var t,n,r,s,o,i,a;return{setters:[function(e){t=e.cclegacy,n=e.Component,r=e.Collider,s=e._decorator},function(e){o=e.TKJWL_DataManager},function(e){i=e.EventManager},function(e){a=e.TKJWL_GameEvents}],execute:function(){var c;t._RF.push({},"08c20/jXxlMHIK+s5Fzkglr","TKJWL_Area",void 0);const{ccclass:g,property:l}=s;e("TKJWL_Area",g("TKJWL_Area")(c=class extends n{constructor(...e){super(...e),this.collider=null}start(){this.addListener(),o.Instance.isStartPlot||(this.node.active=!1)}openTrgger(e){e===this.node.name.split("_")[1]&&(this.node.active=!0)}CloseTrgger(e){e===this.node.name.split("_")[1]&&(this.node.active=!1)}onTriggerEnter(e){"Player"==e.otherCollider.node.name&&o.Instance.setPoltArea(this.node.name,!0)}onTriggerExit(e){"Player"==e.otherCollider.node.name&&o.Instance.setPoltArea(this.node.name,!1)}addListener(){i.on(a.OPEN_AREA,this.openTrgger,this),i.on(a.CLOSE_AREA,this.CloseTrgger,this),this.collider=this.node.getComponent(r),this.collider.on("onTriggerEnter",this.onTriggerEnter,this),this.collider.on("onTriggerExit",this.onTriggerExit,this)}removeListener(){i.off(a.OPEN_AREA,this.openTrgger,this),i.off(a.CLOSE_AREA,this.CloseTrgger,this)}onDestroy(){this.removeListener()}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_AStar.ts",["cc","./TKJWL_BinaryHeap.ts"],(function(t){var n,o,e;return{setters:[function(t){n=t.cclegacy,o=t.Vec3},function(t){e=t.TKJWL_BinaryHeap}],execute:function(){n._RF.push({},"8ca03Z/ST5CyaqzL3bglQ0/","TKJWL_AStar",void 0);class s{constructor(t){this.waypoint=void 0,this.parent=null,this.gCost=0,this.hCost=0,this.waypoint=t}get fCost(){return this.gCost+this.hCost}}t("TKJWL_AStarNode",s);t("TKJWL_AStar",class{static createNode(t){return new s(t)}findPath(t,n){const a=new e,i=new Set,r=new Map,c=new s(t),p=new s(n);for(r.set(t,c),a.push(c);a.count>0;){const t=a.pop();if(!t)break;if(i.add(t.waypoint),t.waypoint===p.waypoint)return this.retracePath(c,t);t.waypoint.connectedWaypoints.forEach((n=>{if(!n||i.has(n))return;const e=t.gCost+o.distance(t.waypoint.node.worldPosition,n.node.worldPosition);let c=r.get(n);c||(c=new s(n),r.set(n,c)),(e<c.gCost||!a.contains(c))&&(c.gCost=e,c.hCost=this.calculateHCost(n,p.waypoint),c.parent=t,a.contains(c)?a.updateNode(c):a.push(c))}))}return null}calculateHCost(t,n){return o.distance(t.node.worldPosition,n.node.worldPosition)}retracePath(t,n){const o=[];let e=n;for(;e!==t&&e;)o.push(e.waypoint),e=e.parent;return o.push(t.waypoint),o.reverse(),o}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_AStarNode.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"0e88d2kZc5L5JQcYUe0bw85","TKJWL_AStarNode",void 0);t("TKJWL_AStarNode",class{constructor(t){this.waypoint=void 0,this.parent=null,this.gCost=0,this.hCost=0,this.waypoint=t}get fCost(){return this.gCost+this.hCost}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var o,u,e,t,s,c,n,d,r;return{setters:[function(i){o=i.applyDecoratedDescriptor,u=i.initializerDefineProperty},function(i){e=i.cclegacy,t=i.AudioClip,s=i._decorator,c=i.Component,n=i.director,d=i.Node,r=i.AudioSource}],execute:function(){var a,p,S,l,h,A;e._RF.push({},"fee6eRxIONKBKRx6qsy2Ut3","TKJWL_AudioManager",void 0);const{ccclass:M,property:g}=s;i("TKJWL_AudioManager",(a=M("TKJWL_AudioManager"),p=g(t),a(((A=class i extends c{constructor(...i){super(...i),u(this,"audioClips",h,this),this.MusicAudioSource=null,this.SoundAudioSource=null,this.clips=void 0}static getInstance(){if(!i.instance){const o=n.getScene().getChildByName("GameManager");if(o)i.instance=o.getComponent(i);else{const o=new d("GameManager");n.getScene().addChild(o),i.instance=o.addComponent(i)}}return i.instance}onLoad(){i.instance=this,this.init(this.audioClips,this.getComponents(r)[0],this.getComponents(r)[1])}init(i,o,u){this.clips=new Map,i.forEach((i=>{this.clips.set(i.name,i)})),this.MusicAudioSource=o,this.SoundAudioSource=u,this.MusicAudioSource&&(this.MusicAudioSource.volume=.4),this.SoundAudioSource&&(this.SoundAudioSource.volume=1)}playSound(i){const o=this.clips.get(i);o&&this.SoundAudioSource.playOneShot(o)}stopSound(){this.SoundAudioSource&&this.SoundAudioSource.stop()}playLongSound(i){const o=this.clips.get(i);o&&(this.SoundAudioSource.loop=!0,this.SoundAudioSource.clip&&this.SoundAudioSource.clip.name==i||(this.SoundAudioSource.stop(),this.SoundAudioSource.clip=o),this.SoundAudioSource.play())}stopLongSound(){this.SoundAudioSource&&(this.SoundAudioSource.stop(),this.SoundAudioSource.loop=!1)}playMusic(i){const o=this.clips.get(i);if(o){if(this.MusicAudioSource.clip&&this.MusicAudioSource.clip.name==i&&this.MusicAudioSource.playing)return;this.MusicAudioSource.clip&&this.MusicAudioSource.clip.name==i||(this.MusicAudioSource.stop(),this.MusicAudioSource.clip=o),this.MusicAudioSource.play()}}stopMusic(){this.MusicAudioSource&&this.MusicAudioSource.stop()}}).instance=void 0,h=o((l=A).prototype,"audioClips",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=l))||S));e._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_BinaryHeap.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"d4d2dvPLwJE+5Y3nxVm5wk1","TKJWL_BinaryHeap",void 0);e("TKJWL_BinaryHeap",class{constructor(){this.elements=[]}get count(){return this.elements.length}push(e){this.elements.push(e);let t=this.elements.length-1;for(;t>0;){const e=Math.floor((t-1)/2);if(this.elements[t].fCost>=this.elements[e].fCost)break;this.swap(t,e),t=e}}pop(){if(0===this.elements.length)return;const e=this.elements[0],t=this.elements.length-1;this.elements[0]=this.elements[t],this.elements.pop();let s=0;for(;;){const e=2*s+1,t=2*s+2;let n=s;if(e<this.elements.length&&this.elements[e].fCost<this.elements[n].fCost&&(n=e),t<this.elements.length&&this.elements[t].fCost<this.elements[n].fCost&&(n=t),n===s)break;this.swap(s,n),s=n}return e}swap(e,t){const s=this.elements[e];this.elements[e]=this.elements[t],this.elements[t]=s}contains(e){return this.elements.includes(e)}updateNode(e){const t=this.elements.indexOf(e);if(-1===t)return;let s=t;for(;s>0;){const e=Math.floor((s-1)/2);if(this.elements[s].fCost>=this.elements[e].fCost)break;this.swap(s,e),s=e}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_CameraController.ts",["cc"],(function(t){var i,e,s,o,n,r;return{setters:[function(t){i=t.cclegacy,e=t.v3,s=t.Quat,o=t.Component,n=t.Vec3,r=t._decorator}],execute:function(){var a;i._RF.push({},"b9bc0I1xARAFrvuLFI103tw","TKJWL_CameraController",void 0);const{ccclass:h,property:l}=r,g=e(),c=e(),u=new s;t("TKJWL_CameraController",h("TKJWL_CameraController")(a=class extends o{constructor(...t){super(...t),this._targetAngles=e(),this._target=null,this._rotationToEnemy=!1,this.shakeDuration=.12,this.shakeIntensity=.3,this.originalPosition=new n,this.shakeTime=0,this.isShaking=!1,this.isUnlock=!1,this.Isthirdperson=!1}start(){this.originalPosition.set(this.node.position)}onDestroy(){}LookAtTarget(t){this._rotationToEnemy=!0,this._target=t}Reset(){this._target=null,this._rotationToEnemy=!1}SetTargetAngle(t,i,e){this._targetAngles.set(t,i,e)}update(t){if(!this.isShaking)return;if(this.shakeTime+=t,this.shakeTime>=this.shakeDuration)return this.isShaking=!1,void(this.node.position=this.originalPosition);const i=2*(Math.random()-.5)*this.shakeIntensity,e=2*Math.random()*this.shakeIntensity;this.node.position=new n(this.originalPosition.x+i,this.originalPosition.y+e,this.originalPosition.z)}lateUpdate(t){this.isUnlock||(this._rotationToEnemy&&this._target&&(n.subtract(c,this._target.worldPosition,this.node.worldPosition),s.fromViewUp(u,c.normalize()),s.rotateY(u,u,Math.PI),s.lerp(u,this.node.rotation,u,.1),this.node.setRotation(u)),this.Isthirdperson?(g.set(this.node.parent.eulerAngles),n.lerp(g,g,this._targetAngles,.5),this.SetCameraPos()):(g.set(this.node.eulerAngles),n.lerp(g,g,this._targetAngles,.5),this.SetCameraPos1()))}SetCameraPos(){this.node.parent.setRotationFromEuler(g)}SetCameraPos1(){this.node.setRotationFromEuler(g)}KeepTime(t){this.isUnlock=!0,this.scheduleOnce((()=>{this.isUnlock=!1}),t)}})||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_DanceRoom.ts",["cc","./TKJWL_RoomBase.ts"],(function(e){var o,t,n,s;return{setters:[function(e){o=e.cclegacy,t=e.SkeletalAnimation,n=e._decorator},function(e){s=e.TKJWL_RoomBase}],execute:function(){var c;o._RF.push({},"e08ddFKYF5Mt6pRJp3sZ93u","TKJWL_DanceRoom",void 0);const{ccclass:r,property:a}=n;e("TKJWL_DanceRoom",r("TKJWL_DanceRoom")(c=class extends s{constructor(...e){super(...e),this.spine=null}onLoad(){this.spine=this.node.getComponent(t)}start(){}addListener(){}removeListener(){}onDestroy(){this.removeListener()}})||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_UIType.ts","./TKJWL_ItemType.ts","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_Waypoint.ts","./TKJWL_TaskType.ts"],(function(e){var t,s,i,a,n,r,o,c,l,h,p,T,_,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,n=e._decorator,r=e.Component,o=e.Color,c=e.MeshRenderer},function(e){l=e.TKJWL_UIItemType},function(e){h=e.TKJWL_ItemType},function(e){p=e.EventManager},function(e){T=e.TKJWL_GameEvents},function(e){_=e.TKJWL_Waypoint},function(e){u=e.TKJWL_TaskType}],execute:function(){var S,m,k,E,d,O,I,A,P,L,b,y;i._RF.push({},"3fe40X6d0tAtJBeitu2wzBQ","TKJWL_DataManager",void 0);const{ccclass:M,property:K}=n;e("TKJWL_DataManager",(S=M("TKJWL_DataManager"),m=K(a),k=K(a),E=K(a),d=K(a),S(((y=class e extends r{constructor(...e){super(...e),s(this,"waypointsParent_plot999",A,this),s(this,"waypointsParent_plot1",P,this),s(this,"pathNodes_plot3",L,this),s(this,"waypointsParent_plot4",b,this),this.taskMap={[u.往锅里装水]:{content:u.往锅里装水,nextTaskId:u.等待水装好},[u.等待水装好]:{content:u.等待水装好,nextTaskId:u.将锅放到煤气灶上},[u.将锅放到煤气灶上]:{content:u.将锅放到煤气灶上,nextTaskId:u.打开煤气灶烧水},[u.打开煤气灶烧水]:{content:u.打开煤气灶烧水,nextTaskId:u.把垃圾扔进垃圾桶},[u.把垃圾扔进垃圾桶]:{content:u.把垃圾扔进垃圾桶,nextTaskId:u.去楼道的垃圾管道扔掉垃圾袋},[u.去楼道的垃圾管道扔掉垃圾袋]:{content:u.去楼道的垃圾管道扔掉垃圾袋,nextTaskId:u.将水饺放到锅里},[u.将水饺放到锅里]:{content:u.将水饺放到锅里,nextTaskId:u.等待水饺煮好},[u.等待水饺煮好]:{content:u.等待水饺煮好,nextTaskId:u.将煮好的的水饺放到餐桌上},[u.将煮好的的水饺放到餐桌上]:{content:u.将煮好的的水饺放到餐桌上,nextTaskId:u.坐到餐桌前吃掉水饺},[u.坐到餐桌前吃掉水饺]:{content:u.坐到餐桌前吃掉水饺,nextTaskId:u.在阳台用望远镜查看情况},[u.在阳台用望远镜查看情况]:{content:u.在阳台用望远镜查看情况,nextTaskId:u.他正在向你奔来},[u.他正在向你奔来]:{content:u.他正在向你奔来,nextTaskId:u.躲起来},[u.躲起来]:{content:u.躲起来,nextTaskId:u.找准时机逃跑},[u.找准时机逃跑]:{content:u.找准时机逃跑,nextTaskId:u.快跑},[u.快跑]:{content:u.快跑,nextTaskId:u.警察来了},[u.警察来了]:{content:u.警察来了,nextTaskId:null}},this.itemTipMap={[h.GarbageCan]:"垃圾桶：收集的垃圾可以放在这里",[h.GarbageContainer]:"垃圾回收点：垃圾袋请丢到此处",[h.Sink]:"水槽：将锅放置在这里装水",[h.Kettle2]:"装水中，当水装满后才可拿起",[h.FullKettle]:"水已装满，可以放到灶台上烧水了",[h.GasStove]:"煤气灶：放置锅，打开旋钮后可烧水",[h.FullKettle2]:"水还未烧开",[h.CookingKettle]:"正在煮水饺",[h.Table0]:"做好的饭菜可以放在这里",[h.Table1]:"做好的饭菜可以放在这里",[h.Table2]:"做好的饭菜可以放在这里"},this.itemShowUIMap={[h.Door]:[l.摇杆,l.交互],[h.LightSwitch]:[l.摇杆,l.交互],[h.Garbage]:[l.摇杆,l.拿起来],[h.GarbageCan]:[l.摇杆,l.提示,l.放下],[h.GarbageContainer]:[l.摇杆,l.提示,l.放下],[h.CokeCan]:[l.摇杆,l.拿起来],[h.Telescope]:[l.摇杆,l.拿起来],[h.Kettle]:[l.摇杆,l.拿起来],[h.Sink]:[l.摇杆,l.提示,l.放下],[h.Kettle2]:[l.摇杆,l.提示],[h.FullKettle]:[l.摇杆,l.提示,l.拿起来],[h.GasStove]:[l.摇杆,l.提示,l.放下],[h.FullKettle2]:[l.摇杆,l.提示,l.放下],[h.OpenKnob]:[l.摇杆,l.开火],[h.Refrigerator]:[l.摇杆,l.交互],[h.FrozenDumplings]:[l.摇杆,l.拿起来],[h.CookingKettle]:[l.摇杆,l.提示],[h.CloseKnob]:[l.摇杆,l.关火],[h.CookEndDumplings]:[l.摇杆,l.拿起来],[h.Table0]:[l.摇杆,l.提示,l.坐下],[h.Table1]:[l.摇杆,l.站起来],[h.Table2]:[l.摇杆,l.提示,l.放下],[h.BeforeEatDumplings]:[l.摇杆,l.吃,l.站起来],[h.AfterEatDumplings]:[l.摇杆,l.站起来]},this.itemHoldOnShowUIMap={[h.Telescope]:[l.放下,l.滑块,l.望远镜遮罩]},this.itemReleaseShowUIMap={[h.GarbageContainer]:[l.放下]},this.Tip="",this.tipColor=o.WHITE,this.isGameStart=!1,this.isFail=!1,this.playerNode=null,this.completedTaskMap=[],this.currentTask=null,this.subTaskIndex={},this.isTelescopeWatching=!1,this.isHoldOning=!1,this.isSitting=!1,this.isPutBeforeDumplings=!1,this.isPutAfterDumplings=!1,this.isStartKill=!1,this.isCanKill=!1,this.isWatchingKill=!1,this.plotNum=0,this.isStartPlot=!1,this.currentArea=null,this.plotArray=[],this.doorMap={},this.path_plot999=[],this.waypoints_plot1=[],this.paths_plot3={},this.waypoints_plot4=[],this.isMove=!1,this.delta=null,this.lookAtItem=null,this.HoldItem=null,this.targetItemType=null,this.isLookTargetContainer=!1,this.isTelescopeTutorialShowed=!1}onLoad(){e.Instance=this,this.path_plot999=[],this.collectWaypointsRecursively(this.waypointsParent_plot999,this.path_plot999),this.waypoints_plot1=[],this.collectWaypointsRecursively(this.waypointsParent_plot1,this.waypoints_plot1),this.paths_plot3={},this.pathNodes_plot3.forEach((e=>{let t=e.name.split("_")[1];this.paths_plot3[t]=[],this.collectWaypointsRecursively(e,this.paths_plot3[t])})),this.waypoints_plot4=[],this.collectWaypointsRecursively(this.waypointsParent_plot4,this.waypoints_plot4)}start(){this.addEventListener()}initData(){this.currentTask=u.往锅里装水,p.Scene.emit(T.SHOW_TASK_TIP,u.往锅里装水)}updateTask(e){switch(e){case u.往锅里装水:case u.等待水装好:case u.将锅放到煤气灶上:case u.将水饺放到锅里:case u.等待水饺煮好:case u.将煮好的的水饺放到餐桌上:case u.他正在向你奔来:case u.躲起来:case u.找准时机逃跑:this.completedTaskMap.push(e),this.currentTask=this.taskMap[e].nextTaskId,p.Scene.emit(T.SHOW_TASK_TIP,this.currentTask);break;case u.把垃圾扔进垃圾桶:this.subTaskIndex[e]++,this.currentTask==e?(p.Scene.emit(T.UPDATE_TASK_Tip,this.currentTask),this.subTaskIndex[e]>=2&&(this.completedTaskMap.push(e),this.currentTask=this.taskMap[this.currentTask].nextTaskId,p.Scene.emit(T.SHOW_TASK_TIP,this.currentTask),p.Scene.emit(T.SHOW_item_Garbage_2),p.Scene.emit(T.Hide__Garbage_Can),p.Scene.emit(T.SHOW_item_Garbage_1))):this.subTaskIndex[e]>=2&&this.completedTaskMap.push(e);break;case u.去楼道的垃圾管道扔掉垃圾袋:this.subTaskIndex[e]++,this.currentTask==e?(p.Scene.emit(T.UPDATE_TASK_Tip,this.currentTask),this.subTaskIndex[e]>=2&&(this.completedTaskMap.push(e),p.Scene.emit(T.SHOW_BOIL_SMOKE),this.itemTipMap[h.FullKettle2]="水已烧开，请放入水饺",this.currentTask=this.taskMap[this.currentTask].nextTaskId,p.Scene.emit(T.SHOW_TASK_TIP,this.currentTask),p.Scene.emit(T.SHOW_DUMPLINGS))):this.subTaskIndex[e]>=2&&this.completedTaskMap.push(e);break;case u.打开煤气灶烧水:this.completedTaskMap.includes(u.把垃圾扔进垃圾桶)?this.completedTaskMap.includes(u.去楼道的垃圾管道扔掉垃圾袋)?(p.Scene.emit(T.HIDE_TASK_TIP),this.scheduleOnce((()=>{p.Scene.emit(T.SHOW_BOIL_SMOKE),this.currentTask=u.将水饺放到锅里,p.Scene.emit(T.SHOW_TASK_TIP,this.currentTask)}),10)):(this.currentTask=u.去楼道的垃圾管道扔掉垃圾袋,p.Scene.emit(T.SHOW_TASK_TIP,this.currentTask)):(p.Scene.emit(T.SHOW_item_All_Garbage),this.currentTask=u.把垃圾扔进垃圾桶,p.Scene.emit(T.SHOW_TASK_TIP,this.currentTask));break;case u.坐到餐桌前吃掉水饺:p.Scene.emit(T.CLOSE_ROOM,"idleMonster"),p.Scene.emit(T.OPEN_ROOM,"danceRoom"),p.Scene.emit(T.OPEN_ROOM,"killRoom"),this.isCanKill=!0,this.currentTask=this.taskMap[this.currentTask].nextTaskId,p.Scene.emit(T.SHOW_TASK_TIP,this.currentTask);break;case u.在阳台用望远镜查看情况:this.currentTask==e&&(this.currentTask=this.taskMap[this.currentTask].nextTaskId,p.Scene.emit(T.HIDE_TASK_TIP));break;case u.快跑:p.Scene.emit(T.HIDE_TASK_TIP)}}startPolt(){this.isStartPlot=!0,p.Scene.emit(T.OPEN_AREA,"1")}setDoor(e,t){this.doorMap[e]=t,this.isStartPlot&&"3"==e&&!t&&"area_2"==this.currentArea&&0==this.plotNum&&(this.plotNum=1,p.Scene.emit(T.SET_MONSTER_POLT),p.Scene.emit(T.CLOSE_AREA,"2"))}setPoltArea(t,s){switch(this.plotArray.push(t),t){case"area_1":s&&(this.plotNum=0,p.Scene.emit(T.HIDE_MONSTER_POLT,"999"),p.Scene.emit(T.CLOSE_LIGHT,1),p.Scene.emit(T.CLOSE_LIGHT,2),p.Scene.emit(T.CLOSE_LIGHT,3),p.Scene.emit(T.CLOSE_LIGHT,4),p.Scene.emit(T.CLOSE_LIGHT,5),p.Scene.emit(T.CLOSE_AREA,"1"),p.Scene.emit(T.OPEN_AREA,"2"),p.Scene.emit(T.OPEN_AREA,"3"),p.Scene.emit(T.OPEN_AREA,"4"),p.Scene.emit(T.OPEN_AREA,"42"),p.Scene.emit(T.OPEN_AREA,"43"),e.Instance.updateTask(u.他正在向你奔来));break;case"area_2":this.currentArea=s?t:null;break;case"area_3":s?0==this.plotNum&&(this.plotNum=2,p.Scene.emit(T.SET_MONSTER_POLT),p.Scene.emit(T.CLOSE_AREA,"3")):this.currentArea=null;break;case"area_42":case"area_4":s?0==this.plotNum&&(this.plotNum=3,p.Scene.emit(T.SET_MONSTER_POLT),p.Scene.emit(T.OPEN_AREA,"5"),p.Scene.emit(T.OPEN_AREA,"6"),p.Scene.emit(T.OPEN_AREA,"7"),p.Scene.emit(T.CLOSE_AREA,"2"),p.Scene.emit(T.CLOSE_AREA,"3"),e.Instance.updateTask(u.躲起来)):this.currentArea=null;break;case"area_5":case"area_6":this.currentArea=s?t:null;break;case"area_7":s?(this.currentArea=t,3==this.plotNum&&(this.plotNum=4,p.Scene.emit(T.HIDE_MONSTER_POLT,"3"),p.Scene.emit(T.SET_MONSTER_POLT),p.Scene.emit(T.OPEN_AREA,"8"),p.Scene.emit(T.CLOSE_AREA,"6"),p.Scene.emit(T.CLOSE_AREA,"7"),e.Instance.updateTask(u.找准时机逃跑))):this.currentArea=null;break;case"area_8":s?(this.currentArea=t,p.Scene.emit(T.HIDE_MONSTER_POLT,"4"),p.Scene.emit(T.SET_MONSTER_POLT),p.Scene.emit(T.CLOSE_AREA,"8"),p.Scene.emit(T.OPEN_DOOR,"7"),p.Scene.emit(T.OPEN_ROOM,"policeRoom"),e.Instance.updateTask(u.快跑),e.Instance.isFail=!1,e.Instance.isGameStart=!1,this.scheduleOnce((()=>{p.Scene.emit(T.UI_SHOW_END_PANEL)}),2)):this.currentArea=null}}hideAllPath(){this.path_plot999.forEach((e=>{e.node.active=!1})),this.waypoints_plot1.forEach((e=>{e.node.active=!1}));for(let e in this.paths_plot3)this.paths_plot3[e].forEach((e=>{e.node.active=!1}));this.waypoints_plot4.forEach((e=>{e.node.active=!1}))}showPath(e){for(let t of e)t.node.active=!0}collectWaypointsRecursively(e,t){const s=e.getComponent(_);let i=e.getComponent(c);i&&(i.enabled=!1),s&&t.push(s);for(const s of e.children)this.collectWaypointsRecursively(s,t)}addEventListener(){}removeEventListener(){}onDestroy(){this.removeEventListener()}}).Instance=void 0,A=t((I=y).prototype,"waypointsParent_plot999",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(I.prototype,"waypointsParent_plot1",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(I.prototype,"pathNodes_plot3",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(I.prototype,"waypointsParent_plot4",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=I))||O));i._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Door.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_ItemBase.ts","./TKJWL_DataManager.ts","./TKJWL_AudioManager.ts"],(function(e){var o,t,n,s,i,r,a,l,c,p,u,h;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e._decorator,i=e.tween,r=e.v3,a=e.Color},function(e){l=e.EventManager},function(e){c=e.TKJWL_GameEvents},function(e){p=e.TKJWL_ItemBase},function(e){u=e.TKJWL_DataManager},function(e){h=e.TKJWL_AudioManager}],execute:function(){var d,D,_,g,L,O,m;n._RF.push({},"7d5a7+CytVDf4Tc3k8TzpQF","TKJWL_Door",void 0);const{ccclass:f,property:I}=s;e("TKJWL_Door",(d=f("TKJWL_Door"),D=I(Boolean),_=I(Boolean),d((O=o((L=class extends p{constructor(...e){super(...e),t(this,"IsOutDoor",O,this),t(this,"isOpening",m,this)}onLoad(){super.onLoad()}start(){}onLookAt(){super.onLookAt(),this.node.getChildByName("normal").active=!1}onCanelLookAt(){super.onCanelLookAt(),this.node.getChildByName("normal").active=!0}closeDoor(){i(this.node).to(.3,{eulerAngles:r(0,0,0)}).start(),this.isOpening=!1,i(this.node).delay(.1).call((()=>{"item_Refrigerator"!==this.node.name&&h.getInstance().playSound("关门")})).start()}openDoor(){let e=null;e=this.IsOutDoor?r(0,90,0):r(0,-90,0),"item_Refrigerator"!==this.node.name&&h.getInstance().playSound("开门"),i(this.node).to(.3,{eulerAngles:e}).start(),this.isOpening=!0}Interact(){if(u.Instance.lookAtItem===this.node)return"7"==this.node.parent.name.split("_")[1]?(u.Instance.Tip="夜深危险，不建议出门",u.Instance.tipColor=a.WHITE,void l.Scene.emit(c.UI_SHOW_TIP_PANEL)):void(this.isOpening?(this.closeDoor(),u.Instance.setDoor(this.node.parent.name.split("_")[1],!1)):(this.openDoor(),u.Instance.setDoor(this.node.parent.name.split("_")[1],!0)))}onOpenDoor(e){e===this.node.parent.name.split("_")[1]&&this.openDoor()}onCloseDoor(e){e===this.node.parent.name.split("_")[1]&&this.closeDoor()}addListener(){l.Scene.on(c.CLOSE_DOOR,this.onCloseDoor,this),l.Scene.on(c.OPEN_DOOR,this.onOpenDoor,this)}removeListener(){l.Scene.off(c.CLOSE_DOOR,this.onCloseDoor,this),l.Scene.off(c.OPEN_DOOR,this.onOpenDoor,this)}onDestroy(){}}).prototype,"IsOutDoor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=o(L.prototype,"isOpening",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=L))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Door2.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,o,n,s,r,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t._decorator,s=t.Component,r=t.Quat,p=t.tween}],execute:function(){var l,a,h,c,u;o._RF.push({},"d2fa3Cp2gdKapD/nMWeX/Xb","TKJWL_Door",void 0);const{ccclass:g,property:d}=n;t("TKJWL_Door",g("TKJWL_Door")((h=i((a=class extends s{constructor(...t){super(...t),e(this,"openAngle",h,this),e(this,"openSpeed",c,this),e(this,"isOpen",u,this),this.closedRotation=r.IDENTITY.clone(),this.openRotation=r.IDENTITY.clone(),this.isOpening=!1,this.isClosing=!1}get IsOpen(){return this.isOpen}start(){this.closedRotation=this.node.rotation.clone();const t=this.node.eulerAngles.clone();t.y+=this.openAngle,r.fromEuler(this.openRotation,t.x,t.y,t.z),this.isOpen&&(this.node.rotation=this.openRotation.clone())}openDoor(){this.isOpen||this.isOpening||(this.isOpening=!0,this.isClosing=!1,p(this.node).to(1/this.openSpeed,{rotation:this.openRotation}).call((()=>{this.isOpen=!0,this.isOpening=!1})).start())}closeDoor(){this.isOpen&&!this.isClosing&&(this.isClosing=!0,this.isOpening=!1,p(this.node).to(1/this.openSpeed,{rotation:this.closedRotation}).call((()=>{this.isOpen=!1,this.isClosing=!1})).start())}toggleDoor(){this.isOpen?this.closeDoor():this.openDoor()}}).prototype,"openAngle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 90}}),c=i(a.prototype,"openSpeed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),u=i(a.prototype,"isOpen",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=a))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_EndPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./UIManager.ts","./ProjectEventManager.ts","./GameManager.ts","./TKJWL_GameEvents.ts","./TKJWL_DataManager.ts","./Banner.ts"],(function(t){var e,n,i,a,s,r,o,c,l,u,h,b,p,g,d,E,T,v,f,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Node,s=t._decorator,r=t.Component,o=t.UIOpacity,c=t.tween,l=t.PhysicsSystem,u=t.Vec3,h=t.director},function(t){b=t.EventManager},function(t){p=t.UIManager,g=t.Panel},function(t){d=t.ProjectEventManager,E=t.ProjectEvent},function(t){T=t.GameManager},function(t){v=t.TKJWL_GameEvents},function(t){f=t.TKJWL_DataManager},function(t){S=t.default}],execute:function(){var y,B,_,k,M,m,C,w,P,L,D,R,U,I,W,F,J;i._RF.push({},"645e2yu0jlNuq0Be7hINk/O","TKJWL_EndPanel",void 0);const{ccclass:K,property:N}=s;t("TKJWL_EndPanel",(y=K("TKJWL_EndPanel"),B=N(a),_=N(a),k=N(a),M=N(a),m=N(a),C=N(a),w=N(a),y((D=e((L=class extends r{constructor(...t){super(...t),n(this,"bgFail",D,this),n(this,"bgSuccess",R,this),n(this,"btnBackToMain",U,this),n(this,"btnBackToMai2",I,this),n(this,"btnRestart",W,this),n(this,"btnRestart2",F,this),n(this,"btnShowSuccessTip",J,this),this.isAddedEvent=!1}start(){this.isAddedEvent||(this.registerEvents(),this.isAddedEvent=!0)}initUI(){if(this.isAddedEvent||(this.registerEvents(),this.isAddedEvent=!0),f.Instance.isFail){let t=this.bgFail.getComponent(o);t.opacity=0,c(t).to(1,{opacity:255}).start(),this.bgFail.active=!0,this.bgSuccess.active=!1}else{let t=this.bgSuccess.getComponent(o);t.opacity=0,c(t).to(1,{opacity:255}).start(),this.bgFail.active=!1,this.bgSuccess.active=!0}}onBtnBackToMainClick(){f.Instance.isFail=!1,l.instance.gravity=new u(0,-80,0),d.emit(E.返回主页按钮事件,(()=>{p.ShowPanel(g.LoadingPanel,T.StartScene,(()=>{d.emit(E.返回主页,"他看见我了")}))}))}onBtnRestartClick(){h.loadScene("TKJWL_Start")}onBtnBackClick(){this.node.active=!1}onBtnShowSuccessTipClick(){S.Instance.ShowVideoAd((()=>{b.Scene.emit(v.UI_SHOW_SUCCESS_TIP_PANEL)}))}registerEvents(){this.btnBackToMain.on(a.EventType.TOUCH_END,this.onBtnBackToMainClick,this),this.btnRestart.on(a.EventType.TOUCH_END,this.onBtnRestartClick,this),this.btnBackToMai2.on(a.EventType.TOUCH_END,this.onBtnBackToMainClick,this),this.btnRestart2.on(a.EventType.TOUCH_END,this.onBtnRestartClick,this),this.btnShowSuccessTip.on(a.EventType.TOUCH_END,this.onBtnShowSuccessTipClick,this)}unregisterEvents(){}onDestroy(){this.unregisterEvents(),this.isAddedEvent=!1}}).prototype,"bgFail",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(L.prototype,"bgSuccess",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(L.prototype,"btnBackToMain",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(L.prototype,"btnBackToMai2",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(L.prototype,"btnRestart",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(L.prototype,"btnRestart2",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(L.prototype,"btnShowSuccessTip",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=L))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_GameEvents.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"55029dzhJlFIIOA9gGUjqrG","TKJWL_GameEvents",void 0);_("TKJWL_GameEvents",{GAME_OVER:"GAME_OVER",MOVEMENT:"MOVEMENT",MOVEMENT_STOP:"MOVEMENT_STOP",INTERACT:"INTERACT",CAMERA_ROTATION:"CAMERA_ROTATION",HIDE_PLAYER_CAMERA:"HIDE_PLAYER_CAMERA",SHOW_PLAYER_CAMERA:"SHOW_PLAYER_CAMERA",UPDATE_TASK_Tip:"UPDATE_TASK_Tip",SHOW_TASK_TIP:"SHOW_TASK_TIP",HIDE_TASK_TIP:"HIDE_TASK_TIP",UPDATE_LOOKAT_ITEM:"UPDATE_LOOKAT_ITEM",ITEM_INTERACT:"ITEM_INTERACT",ITEM_HOLE_ON:"ITEM_HOLE_ON",ITEM_RELEASE:"ITEM_RELEASE",CreateItem:"CreateItem",ITEM_OPEN_FIRE:"ITEM_OPEN_FIRE",ITEM_CLOSE_FIRE:"ITEM_CLOSE_FIRE",ITEM_EAT:"ITEM_EAT",ITEM_STAND_UP:"ITEM_STAND_UP",ITEM_SIT_DOWN:"ITEM_SIT_DOWN",SHOW_HOLD_ON_ITEM:"SHOW_HOLD_ON_ITEM",HIDE_HOLD_ON_ITEM:"HIDE_HOLD_ON_ITEM",SET_TELESCOPE_PROGRESS:"SET_TELESCOPE_PROGRESS",SHOW_TELESCOPE_TUTORIAL:"SHOW_TELESCOPE_TUTORIAL",TELESCOPE_PROGRESS_CHANGED:"TELESCOPE_PROGRESS_CHANGED",SHOW_BOIL_SMOKE:"SHOW_BOIL_SMOKE",HIDE_BOIL_SMOKE:"HIDE_BOIL_SMOKE",HIDE_DUMPLINGS:"HIDE_DUMPLINGS",SHOW_DUMPLINGS:"SHOW_DUMPLINGS",SHOW_item_Garbage_1:"SHOW_item_Garbage_1",SHOW_item_Garbage_2:"SHOW_item_Garbage_2",SHOW_item_All_Garbage:"SHOW_item_All_Garbage",Hide__Garbage_Can:"HIDE__Garbage_Can",SHOW_UI_ITEM:"SHOW_UI_ITEM",SHOW_UI_ITEM_HOLD_ON:"SHOW_UI_ITEM_HOLD_ON",SHOW_UI_ITEM_RELEASE:"SHOW_UI_ITEM_RELEASE",OPEN_AREA:"OPEN_AREA",CLOSE_AREA:"CLOSE_AREA",OPEN_LIGHT:"OPEN_LIGHT",CLOSE_LIGHT:"CLOSE_LIGHT",OPEN_ROOM:"OPEN_ROOM",CLOSE_ROOM:"CLOSE_ROOM",CLOSE_DOOR:"CLOSE_DOOR",OPEN_DOOR:"OPEN_DOOR",HIDE_MONSTER_POLT:"HIDE_MONSTER_POLT",SET_MONSTER_POLT:"SET_MONSTER_POLT",START_NEW_ROUND:"START_NEW_ROUND",PASS_GAME:"PASS_GAME",END_GAME:"END_GAME",SHOW_NEW_ROUND:"SHOW_NEW_ROUND",UPDATE_COIN_ADD:"UPDATE_COIN_ADD",UPDATE_COIN:"UPDATE_COIN",UPDATE_MONEY:"UPDATE_MONEY",UPDATE_MONEY_ADD:"UPDATE_MONEY_ADD",UPDATE_REMAINING:"UPDATE_REMAINING",UPDATE_ITEMS:"UPDATE_ITEMS",UPDATE_ROUND:"UPDATE_ROUND",UPDATE_SCORE:"UPDATE_SCORE",UPDATE_SPECIAL_COINS:"UPDATE_SPECIAL_COINS",UPDATE_CURRENT_ITEM_CONTAINER_COUNT:"UPDATE_CURRENT_ITEM_CONTAINER_COUNT",UPDATE_TARGET_SCORE:"UPDATE_TARGET_SCORE",UPDATE_COIN_REMAIN:"UPDATE_COIN_REMAIN",UPDATE_SCORE_MIX:"UPDATE_SCORE_MIX",UPDATE_ROUND_REMAIN:"UPDATE_ROUND_REMAIN",UPDATE_MONEY_MIX:"UPDATE_MONEY_MIX",UPDATE_COIN_MIX:"UPDATE_COIN_MIX",NEW_HIGH_SCORE:"NEW_HIGH_SCORE",UPDATE_ATTACK:"UPDATE_ATTACK",UPDATE_ADD_MIX:"UPDATE_ADD_MIX",UPDATE_SAVE:"UPDATE_SAVE",UPDATE_CONTAINER_PRICE:"UPDATE_CONTAINER_PRICE",UPDATE_ITEM_PRICE:"UPDATE_ITEM_PRICE",UI_HIDE_ALL_SCREENS:"UI_HIDE_ALL_SCREENS",START_RAIN:"START_RAIN",UI_SHOW_END_PANEL:"UI_SHOW_END_PANEL",UI_HIDE_END_PANEL:"UI_HIDE_END_PANEL",UI_SHOW_TIP_PANEL:"UI_SHOW_TIP_PANEL",UI_HIDE_TIP_PANEL:"UI_HIDE_TIP_PANEL",UI_SHOW_GAMEUI:"UI_SHOW_GAMEUI",UI_HIDE_GAMEUI:"UI_HIDE_GAMEUI",UI_SHOW_SUCCESS_TIP_PANEL:"UI_SHOW_SUCCESS_TIP_PANEL",UI_HIDE_SUCCESS_TIP_PANEL:"UI_HIDE_SUCCESS_TIP_PANEL"});E._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_GameManager.ts",["cc","./TKJWL_DataManager.ts","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_AudioManager.ts","./ProjectEventManager.ts"],(function(e){var n,t,a,c,r,s,i,o,_,g,u;return{setters:[function(e){n=e.cclegacy,t=e.Component,a=e.PhysicsSystem,c=e.Vec3,r=e._decorator},function(e){s=e.TKJWL_DataManager},function(e){i=e.EventManager},function(e){o=e.TKJWL_GameEvents},function(e){_=e.TKJWL_AudioManager},function(e){g=e.ProjectEventManager,u=e.ProjectEvent}],execute:function(){var M;n._RF.push({},"547cbXVNzZGkJM4S7UyOkT4","TKJWL_GameManager",void 0);const{ccclass:m,property:L}=r;e("TKJWL_GameManager",m("TKJWL_GameManager")(M=class extends t{onLoad(){}start(){a.instance.gravity=new c(0,-60,0),s.Instance.initData(),s.Instance.isGameStart=!0,i.Scene.emit(o.UI_HIDE_ALL_SCREENS),i.Scene.emit(o.UI_SHOW_GAMEUI),_.getInstance().playMusic("雨"),g.emit(u.游戏开始,"他看见我了")}})||M);n._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_GameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_DataManager.ts","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_UIType.ts","./ProjectEventManager.ts","./UIManager.ts","./GameManager.ts"],(function(t){var e,n,i,a,s,o,r,c,l,h,T,p,u,I,m,E,b,y,_,g,S,C,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Node,s=t._decorator,o=t.Component,r=t.v3,c=t.UITransform,l=t.Vec3,h=t.Label,T=t.ProgressBar,p=t.PhysicsSystem,u=t.UIOpacity,I=t.tween},function(t){m=t.TKJWL_DataManager},function(t){E=t.EventManager},function(t){b=t.TKJWL_GameEvents},function(t){y=t.TKJWL_UIItemType},function(t){_=t.ProjectEventManager,g=t.ProjectEvent},function(t){S=t.UIManager,C=t.Panel},function(t){k=t.GameManager}],execute:function(){var d,U,f,O,v,M,P,H,w,L,D,N,B,A,W,R,F,K,z,j,x,G,J,$,V,Q,Z,q,X,Y,tt;i._RF.push({},"b3c40HiAWhOFpCA16+22KvQ","TKJWL_GameUI",void 0);const{ccclass:et,property:nt}=s;t("TKJWL_GameUI",(d=et("TKJWL_GameUI"),U=nt(a),f=nt(a),O=nt(a),v=nt(a),M=nt(a),P=nt(a),H=nt(a),w=nt(a),L=nt(a),D=nt(a),N=nt(a),B=nt(a),A=nt(a),W=nt(a),d((K=e((F=class extends o{constructor(...t){super(...t),n(this,"touchPanel",K,this),n(this,"joyBase",z,this),n(this,"itemUIs",j,this),n(this,"btnInteract",x,this),n(this,"btnHoldOn",G,this),n(this,"btnRelease",J,this),n(this,"btnSitDown",$,this),n(this,"btnStandUp",V,this),n(this,"btnEat",Q,this),n(this,"btnOpenFire",Z,this),n(this,"btnCloseFire",q,this),n(this,"taskTip",X,this),n(this,"progress",Y,this),n(this,"btnBack",tt,this),this.pastPos=null}onLoad(){this.addListener()}start(){}update(t){m.Instance.isFail}CameraTouchStart(t){this.pastPos=t.getUILocation()}CameraTouchMove(t){if(m.Instance.isFail)return;var e=t.getUILocation().subtract(this.pastPos).multiplyScalar(.1);let n=r(-e.y,-e.x,0);E.Scene.emit(b.CAMERA_ROTATION,n),this.pastPos=t.getUILocation()}PlayerTouchStart(){m.Instance.isGameStart&&(m.Instance.isMove=!0)}PlayerTouchMove(t){if(m.Instance.isGameStart){var e=this.joyBase.children[0],n=t.getUILocation(),i=this.joyBase.getWorldPosition(),a=r(n.x-i.x,n.y-i.y,0),s=this.joyBase.getComponent(c).width/2;a.length()>s?(a=a.normalize().multiplyScalar(s),e.setPosition(a)):e.setWorldPosition(r(n.x,n.y)),m.Instance.delta=a}}PlayerTouchEnd(){m.Instance.isGameStart&&(this.joyBase.children[0].setPosition(l.ZERO),m.Instance.isMove=!1)}onDestroy(){this.removeListener()}showUIItem(t){if(!t)return void this.itemUIs.forEach((t=>{t.active=!1,t.name==y.摇杆&&(t.active=!0)}));let e=m.Instance.itemShowUIMap[t];this.itemUIs.forEach((n=>{n.active=!1,e.includes(n.name)&&(n.active=!0,this.initUIItem(n,t))}))}showUIItemHoldOn(t){if(!t)return void this.itemUIs.forEach((t=>{t.active=!1}));let e=m.Instance.itemHoldOnShowUIMap[t];this.itemUIs.forEach((n=>{n.active=!1,e.includes(n.name)&&(n.active=!0,this.initUIItem(n,t))}))}initUIItem(t,e){switch(t.name){case y.交互:case y.坐下:case y.站起来:break;case y.拿起来:m.Instance.HoldItem&&(t.active=!1);break;case y.放下:if(m.Instance.isTelescopeWatching)return;m.Instance.targetItemType!==e?(m.Instance.isLookTargetContainer=!1,t.active=!1):m.Instance.isLookTargetContainer=!0;break;case y.吃:break;case y.进度条:t.getComponent(T).progress=.02;break;case y.滑块:E.Scene.emit(b.SET_TELESCOPE_PROGRESS,.3),m.Instance.isTelescopeTutorialShowed||E.Scene.emit(b.SHOW_TELESCOPE_TUTORIAL);break;case y.提示:t.getComponentInChildren(h).string=m.Instance.itemTipMap[e]}}onBtnBackToMainClick(){m.Instance.isFail=!1,p.instance.gravity=new l(0,-80,0),_.emit(g.返回主页按钮事件,(()=>{S.ShowPanel(C.LoadingPanel,k.StartScene,(()=>{_.emit(g.返回主页,"他看见我了")}))}))}onClickInteract(){E.Scene.emit(b.ITEM_INTERACT)}onClickHoldOn(){E.Scene.emit(b.ITEM_HOLE_ON)}onClickRelease(){E.Scene.emit(b.ITEM_RELEASE)}onClickSitDown(){E.Scene.emit(b.ITEM_SIT_DOWN)}onClickStandUp(){E.Scene.emit(b.ITEM_STAND_UP)}onClickEat(){E.Scene.emit(b.ITEM_EAT)}onOpenFire(){E.Scene.emit(b.ITEM_OPEN_FIRE)}onCloseFire(){E.Scene.emit(b.ITEM_CLOSE_FIRE)}EatTouchStart(){}EatTouchMove(){this.progress.getComponent(T).progress+=.05}EatTouchEnd(){1==this.progress.getComponent(T).progress&&E.Scene.emit(b.ITEM_EAT)}updateTaskTip(){let t=m.Instance.currentTask;m.Instance.subTaskIndex[t]||(m.Instance.subTaskIndex[t]=0);let e=m.Instance.subTaskIndex[t],n=this.taskTip.getChildByName("taskTip").getComponentInChildren(h),i=this.taskTip.getChildByName("lblTask_1").getComponent(h);n.string=m.Instance.taskMap[t].content.replace("${}",e.toString()),i.string=m.Instance.taskMap[t].content.replace("${}",e.toString()),this.taskTip.active=!0}showTaskTip(t,e=!0){let n=this.taskTip.getComponent(u);e?I(n).to(.2,{opacity:0}).call((()=>{m.Instance.subTaskIndex[t]||(m.Instance.subTaskIndex[t]=0);let e=m.Instance.subTaskIndex[t],n=this.taskTip.getChildByName("taskTip").getComponentInChildren(h),i=this.taskTip.getChildByName("lblTask_1").getComponent(h);n.string=m.Instance.taskMap[t].content.replace("${}",e.toString()),i.string=m.Instance.taskMap[t].content.replace("${}",e.toString()),this.taskTip.active=!0})).to(.2,{opacity:255}).start():(n.opacity=0,this.taskTip.active=!0,I(n).to(.2,{opacity:255}).start())}hideTaskTip(){let t=this.taskTip.getComponent(u);I(t).to(.2,{opacity:0}).call((()=>{this.taskTip.active=!1})).start()}addListener(){E.on(b.SHOW_UI_ITEM,this.showUIItem,this),E.on(b.SHOW_UI_ITEM_HOLD_ON,this.showUIItemHoldOn,this),E.on(b.UPDATE_TASK_Tip,this.updateTaskTip,this),E.on(b.SHOW_TASK_TIP,this.showTaskTip,this),E.on(b.HIDE_TASK_TIP,this.hideTaskTip,this),this.touchPanel.on(a.EventType.TOUCH_START,this.CameraTouchStart,this),this.touchPanel.on(a.EventType.TOUCH_MOVE,this.CameraTouchMove,this),this.joyBase.on(a.EventType.TOUCH_START,this.PlayerTouchStart,this),this.joyBase.on(a.EventType.TOUCH_MOVE,this.PlayerTouchMove,this),this.joyBase.on(a.EventType.TOUCH_END,this.PlayerTouchEnd,this),this.joyBase.on(a.EventType.TOUCH_CANCEL,this.PlayerTouchEnd,this),this.btnInteract.on(a.EventType.TOUCH_END,this.onClickInteract,this),this.btnHoldOn.on(a.EventType.TOUCH_END,this.onClickHoldOn,this),this.btnRelease.on(a.EventType.TOUCH_END,this.onClickRelease,this),this.btnSitDown.on(a.EventType.TOUCH_END,this.onClickSitDown,this),this.btnStandUp.on(a.EventType.TOUCH_END,this.onClickStandUp,this),this.btnOpenFire.on(a.EventType.TOUCH_END,this.onOpenFire,this),this.btnCloseFire.on(a.EventType.TOUCH_END,this.onCloseFire,this),this.btnBack.on(a.EventType.TOUCH_END,this.onBtnBackToMainClick,this),this.btnEat.on(a.EventType.TOUCH_END,this.onClickEat,this)}removeListener(){E.off(b.SHOW_UI_ITEM,this.showUIItem,this),E.off(b.SHOW_UI_ITEM_HOLD_ON,this.showUIItemHoldOn,this),E.off(b.UPDATE_TASK_Tip,this.updateTaskTip,this),E.off(b.SHOW_TASK_TIP,this.showTaskTip,this),E.off(b.HIDE_TASK_TIP,this.hideTaskTip,this)}}).prototype,"touchPanel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(F.prototype,"joyBase",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(F.prototype,"itemUIs",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=e(F.prototype,"btnInteract",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(F.prototype,"btnHoldOn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(F.prototype,"btnRelease",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(F.prototype,"btnSitDown",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(F.prototype,"btnStandUp",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(F.prototype,"btnEat",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(F.prototype,"btnOpenFire",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(F.prototype,"btnCloseFire",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(F.prototype,"taskTip",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(F.prototype,"progress",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(F.prototype,"btnBack",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=F))||R));i._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_HoldOnItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_ItemBase.ts","./TKJWL_DataManager.ts","./TKJWL_ItemType.ts","./TKJWL_TaskType.ts","./TKJWL_PHY_GROUP.ts"],(function(e){var t,i,a,s,n,o,m,l,h,c,r,I,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,s=e.Node,n=e._decorator,o=e.RigidBody},function(e){m=e.EventManager},function(e){l=e.TKJWL_GameEvents},function(e){h=e.TKJWL_ItemBase},function(e){c=e.TKJWL_DataManager},function(e){r=e.TKJWL_ItemType},function(e){I=e.TKJWL_TaskType},function(e){d=e.TKJWL_Physics_Group}],execute:function(){var _,p,u,g,b,T,f,k,C,v,y,S,G;a._RF.push({},"a1792MdnltE/5XcKFQ3nXvE","TKJWL_HoldOnItem",void 0);const{ccclass:H,property:O}=n;e("TKJWL_HoldOnItem",(_=H("TKJWL_HoldOnItem"),p=O(String),u=O(s),g=O(s),b=O(s),T=O(s),_((C=t((k=class extends h{constructor(...e){super(...e),i(this,"targetItemType",C,this),i(this,"nextItem",v,this),i(this,"destoryItem",y,this),i(this,"specialItem1",S,this),i(this,"specialItem2",G,this)}onLoad(){return super.onLoad(),"item_Garbage_1"===this.node.name||"item_CokeCan_1"===this.node.name||"item_CokeCan_2"===this.node.name||"item_CokeCan_3"===this.node.name?(this.node.getChildByName("selected").active=!1,this.getComponent(o).group=d.DEFAULT,void this.noramlNodes.forEach((e=>{e.layer=1<<30}))):void 0}start(){}HoldItem(){if(c.Instance.lookAtItem!==this.node)return;switch(c.Instance.isHoldOning=!0,c.Instance.HoldItem=this.node,c.Instance.targetItemType=this.targetItemType,m.Scene.emit(l.SHOW_UI_ITEM,null),this.node.active=!1,m.Scene.emit(l.SHOW_HOLD_ON_ITEM,this.node.name),this.node.name.split("_")[1]){case r.FullKettle:this.destoryItem&&(this.destoryItem.active=!0),this.specialItem1&&(this.specialItem1.active=!0);break;case r.CookEndDumplings:this.specialItem1&&(this.specialItem1.active=!0),this.specialItem2&&(this.specialItem2.active=!1)}}ReleaseItem(){if(c.Instance.HoldItem!==this.node)return;c.Instance.HoldItem=null,c.Instance.isHoldOning=!1,c.Instance.targetItemType=null,m.Scene.emit(l.HIDE_HOLD_ON_ITEM,this.node.name);let e=this.node.name.split("_")[1];m.Scene.emit(l.SHOW_UI_ITEM,null);let t=()=>{this.nextItem&&(this.nextItem.active=!0),this.destoryItem&&(this.destoryItem.active=!1)};switch(e){case r.Kettle:t(),c.Instance.updateTask(I.往锅里装水),this.scheduleOnce((()=>{this.specialItem1&&(this.specialItem1.active=!0),this.specialItem2&&(this.specialItem2.active=!0),this.nextItem.active=!1,c.Instance.updateTask(I.等待水装好)}),5);break;case r.FullKettle:t(),this.specialItem1&&(this.specialItem1.active=!0),this.specialItem2&&(this.specialItem2.active=!0),c.Instance.updateTask(I.将锅放到煤气灶上);break;case r.CokeCan:c.Instance.updateTask(I.把垃圾扔进垃圾桶),2===c.Instance.subTaskIndex[I.把垃圾扔进垃圾桶]&&t();break;case r.Garbage:c.Instance.updateTask(I.去楼道的垃圾管道扔掉垃圾袋),2===c.Instance.subTaskIndex[I.去楼道的垃圾管道扔掉垃圾袋]&&t();break;case r.FrozenDumplings:t(),this.specialItem1&&(this.specialItem1.active=!0),c.Instance.updateTask(I.将水饺放到锅里),this.scheduleOnce((()=>{this.specialItem1&&(this.specialItem1.getChildByName("BoilSmoke").active=!0),this.scheduleOnce((()=>{this.specialItem1&&(this.specialItem1.active=!1),this.specialItem2&&(this.specialItem2.active=!0),c.Instance.updateTask(I.等待水饺煮好)}),2)}),5);break;case r.CookEndDumplings:t(),this.specialItem1&&(this.specialItem1.active=!1),this.specialItem2&&(this.specialItem2.active=!0),c.Instance.updateTask(I.将煮好的的水饺放到餐桌上),c.Instance.isPutBeforeDumplings=!0,c.Instance.isPutAfterDumplings=!1}}EatItem(){if(c.Instance.lookAtItem!==this.node)return;this.node.active=!1,this.nextItem&&(this.nextItem.active=!0),c.Instance.updateTask(I.坐到餐桌前吃掉水饺),c.Instance.isPutBeforeDumplings=!1,c.Instance.isPutAfterDumplings=!1,c.Instance.lookAtItem=this.specialItem2;let e=this.specialItem2.name.split("_")[1];m.Scene.emit(l.SHOW_UI_ITEM,e)}StandUp(){if(c.Instance.lookAtItem!==this.node)return;this.destoryItem&&(this.destoryItem.active=!1),c.Instance.isSitting=!1,c.Instance.lookAtItem=this.specialItem1;let e=this.specialItem1.name.split("_")[1];m.Scene.emit(l.SHOW_UI_ITEM,e),m.Scene.emit(l.SHOW_PLAYER_CAMERA),this.specialItem1.active=!0}showBoilSmoke(){this.node.getChildByName("BoilSmoke").active=!0}hideBoilSmoke(){this.node.getChildByName("BoilSmoke").active=!1}showDumplings(){this.node.active=!0}showGarbage2(){this.node.active=!0}hideGarbageCan(){this.node.getChildByName("selected").active=!1,this.getComponent(o).group=d.DEFAULT,this.noramlNodes.forEach((e=>{e.layer=1<<30}))}showGarbage_1(){if("item_Garbage_1"===this.node.name)return this.node.getChildByName("selected").active=!1,this.getComponent(o).group=d.ITEM,void this.noramlNodes.forEach((e=>{e.layer=1<<30}))}showAllGarbage(){return"item_CokeCan_1"===this.node.name||"item_CokeCan_2"===this.node.name||"item_CokeCan_3"===this.node.name?(this.node.getChildByName("selected").active=!1,this.getComponent(o).group=d.ITEM,void this.noramlNodes.forEach((e=>{e.layer=1<<30}))):void 0}addListener(){let e=this.node.name.split("_")[1];e!==r.FullKettle2?e!==r.FrozenDumplings?"item_Garbage_2"!==this.node.name?"item_GarbageCan"!==this.node.name?"item_Garbage_1"!==this.node.name?"item_CokeCan_1"!==this.node.name&&"item_CokeCan_2"!==this.node.name&&"item_CokeCan_3"!==this.node.name||m.on(l.SHOW_item_All_Garbage,this.showAllGarbage,this):m.on(l.SHOW_item_Garbage_1,this.showGarbage_1,this):m.on(l.Hide__Garbage_Can,this.hideGarbageCan,this):m.on(l.SHOW_item_Garbage_2,this.showGarbage2,this):m.on(l.SHOW_DUMPLINGS,this.showDumplings,this):m.on(l.SHOW_BOIL_SMOKE,this.showBoilSmoke,this)}removeListener(){let e=this.node.name.split("_")[1];e!==r.FullKettle2?e!==r.FrozenDumplings?"item_Garbage_2"!=this.node.name?"item_GarbageCan"!==this.node.name?"item_Garbage_1"!==this.node.name?"item_CokeCan_1"!==this.node.name&&"item_CokeCan_2"!==this.node.name&&"item_CokeCan_3"!==this.node.name||m.off(l.SHOW_item_All_Garbage,this.showAllGarbage,this):m.off(l.SHOW_item_Garbage_1,this.showGarbage_1,this):m.off(l.Hide__Garbage_Can,this.hideGarbageCan,this):m.off(l.SHOW_item_Garbage_2,this.showGarbage2,this):m.off(l.SHOW_DUMPLINGS,this.showDumplings,this):m.off(l.HIDE_BOIL_SMOKE,this.hideBoilSmoke,this)}onDestroy(){}}).prototype,"targetItemType",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=t(k.prototype,"nextItem",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(k.prototype,"destoryItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(k.prototype,"specialItem1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(k.prototype,"specialItem2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=k))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_ItemBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_DataManager.ts","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_PHY_GROUP.ts"],(function(e){var t,i,s,o,n,a,r,h,l,_,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){s=e.cclegacy,o=e.Node,n=e._decorator,a=e.Component,r=e.RigidBody},function(e){h=e.TKJWL_DataManager},function(e){l=e.EventManager},function(e){_=e.TKJWL_GameEvents},function(e){E=e.TKJWL_Physics_Group}],execute:function(){var m,c,d,I,T;s._RF.push({},"25f53er3gZEJoZS9Sfuh15O","TKJWL_ItemBase",void 0);const{ccclass:f,property:u}=n;e("TKJWL_ItemBase",(m=f("TKJWL_ItemBase"),c=u(o),m((T=t((I=class extends a{constructor(...e){super(...e),i(this,"noramlNodes",T,this)}onLoad(){this.addListenerBase(),this.node.getChildByName("selected").active=!1,this.getComponent(r).group=E.ITEM,this.noramlNodes.forEach((e=>{e.layer=1<<30,e.children.forEach((e=>{e.layer=1<<30}))}));["item_Kettle2","item_FullKettle","item_GasStove","item_FullKettle2","item_OpenKnob","item_Garbage_2","item_CookingKettle","item_FrozenDumplings","item_CookEndDumplings","item_Table1","item_Table2","item_BeforeEatDumplings_6","item_AfterEatDumplings_7"].includes(this.node.name)&&(this.node.active=!1)}onLookAt(){this.node.getChildByName("selected").active=!0;let e=this.node.name.split("_")[1];l.Scene.emit(_.SHOW_UI_ITEM,e),this.noramlNodes.forEach((e=>{e.layer=1<<23,e.children.forEach((e=>{e.layer=1<<23}))}))}onCanelLookAt(){this.node.getChildByName("selected").active=!1,this.noramlNodes.forEach((e=>{e.layer=1<<30,e.children.forEach((e=>{e.layer=1<<30}))}))}updateMaterial(){h.Instance.lookAtItem==this.node?this.onLookAt():this.onCanelLookAt()}Interact(){}HoldItem(){}ReleaseItem(){}OpenFire(){}CloseFire(){}EatItem(){}StandUp(){}SitDown(){}addListenerBase(){this.addListener(),l.on(_.UPDATE_LOOKAT_ITEM,this.updateMaterial,this),l.on(_.ITEM_HOLE_ON,this.HoldItem,this),l.on(_.ITEM_RELEASE,this.ReleaseItem,this),l.on(_.ITEM_INTERACT,this.Interact,this),l.on(_.ITEM_OPEN_FIRE,this.OpenFire,this),l.on(_.ITEM_CLOSE_FIRE,this.CloseFire,this),l.on(_.ITEM_EAT,this.EatItem,this),l.on(_.ITEM_STAND_UP,this.StandUp,this),l.on(_.ITEM_SIT_DOWN,this.SitDown,this)}removeListenerBase(){this.removeListener(),l.off(_.UPDATE_LOOKAT_ITEM,this.updateMaterial,this),l.off(_.ITEM_HOLE_ON,this.HoldItem,this),l.off(_.ITEM_RELEASE,this.ReleaseItem,this),l.off(_.ITEM_INTERACT,this.Interact,this),l.off(_.ITEM_OPEN_FIRE,this.OpenFire,this),l.off(_.ITEM_CLOSE_FIRE,this.CloseFire,this),l.off(_.ITEM_EAT,this.EatItem,this),l.off(_.ITEM_STAND_UP,this.StandUp,this),l.off(_.ITEM_SIT_DOWN,this.SitDown,this)}removeListener(){}addListener(){}onDestroy(){this.removeListenerBase()}}).prototype,"noramlNodes",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=I))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_ItemType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"dceac7FDvxJtoDHTjE2zQzW","TKJWL_ItemType",void 0);e("TKJWL_ItemType",function(e){return e.Telescope="Telescope",e.LightSwitch="LightSwitch",e.Door="Door",e.Refrigerator="Refrigerator",e.Garbage="Garbage",e.GarbageCan="GarbageCan",e.GarbageContainer="GarbageContainer",e.CokeCan="CokeCan",e.Kettle="Kettle",e.Sink="Sink",e.Kettle2="Kettle2",e.FullKettle="FullKettle",e.FullKettle2="FullKettle2",e.GasStove="GasStove",e.OpenKnob="OpenKnob",e.CloseKnob="CloseKnob",e.CookingKettle="CookingKettle",e.FrozenDumplings="FrozenDumplings",e.CookEndDumplings="CookEndDumplings",e.Table0="Table0",e.Table1="Table1",e.Table2="Table2",e.BeforeEatDumplings="BeforeEatDumplings",e.AfterEatDumplings="AfterEatDumplings",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_KillRoom.ts",["cc","./TKJWL_DataManager.ts","./TKJWL_RoomBase.ts","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_AudioManager.ts"],(function(t){var e,n,s,i,o,a,c,l,r,h;return{setters:[function(t){e=t.cclegacy,n=t.SkeletalAnimation,s=t.Color,i=t.tween,o=t._decorator},function(t){a=t.TKJWL_DataManager},function(t){c=t.TKJWL_RoomBase},function(t){l=t.EventManager},function(t){r=t.TKJWL_GameEvents},function(t){h=t.TKJWL_AudioManager}],execute:function(){var u;e._RF.push({},"60791ow5vlDGpyLu40lMVuc","TKJWL_KillRoom",void 0);const{ccclass:m,property:_}=o;t("TKJWL_KillRoom",m("TKJWL_KillRoom")(u=class extends c{constructor(...t){super(...t),this.spine=null}onLoad(){this.spine=this.node.getChildByName("monster").getComponent(n)}start(){super.start();const t=this.spine.getState("attack");null!=t&&t.isPlaying||(this.spine.crossFade("attack",.2),this.scheduleOnce((()=>{this.animEndCb()}),5))}animEndCb(){if(a.Instance.isWatchingKill){const t=this.spine.getState("watch");null!=t&&t.isPlaying||(h.getInstance().playSound("发现"),a.Instance.Tip="糟了！他看见我了！",a.Instance.tipColor=s.YELLOW,l.Scene.emit(r.UI_SHOW_TIP_PANEL),this.spine.crossFade("watch",.2),a.Instance.isStartKill=!0,this.scheduleOnce((()=>{const t=this.spine.getState("run");null!=t&&t.isPlaying||(this.spine.crossFade("run",.2),i(this.node.getChildByName("monster")).to(2,{worldPosition:this.node.getChildByName("targetPos").worldPosition}).start(),a.Instance.Tip="他在朝我过来！",a.Instance.tipColor=s.YELLOW,l.Scene.emit(r.UI_SHOW_TIP_PANEL),this.scheduleOnce((()=>{l.Scene.emit(r.OPEN_ROOM,"lightRoom1"),this.scheduleOnce((()=>{l.Scene.emit(r.OPEN_ROOM,"lightRoom2"),this.scheduleOnce((()=>{0==a.Instance.plotNum&&(a.Instance.plotNum=999,l.Scene.emit(r.SET_MONSTER_POLT)),l.Scene.emit(r.SET_MONSTER_POLT)}),1)}),1)}),1))}),2))}else this.scheduleOnce((()=>{this.animEndCb()}),5)}onDestroy(){}})||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Knob.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_ItemBase.ts","./TKJWL_DataManager.ts","./TKJWL_TaskType.ts","./TKJWL_PHY_GROUP.ts"],(function(e){var t,n,o,s,r,a,i,l,c,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,s=e._decorator,r=e.v3,a=e.tween,i=e.RigidBody},function(e){l=e.TKJWL_ItemBase},function(e){c=e.TKJWL_DataManager},function(e){u=e.TKJWL_TaskType},function(e){p=e.TKJWL_Physics_Group}],execute:function(){var d,h,L,T,_;o._RF.push({},"19547bG52tMYavN3pshN9Js","TKJWL_Knob",void 0);const{ccclass:y,property:K}=s;e("TKJWL_Knob",(d=y("TKJWL_Knob"),h=K(Boolean),d((_=t((T=class extends l{constructor(...e){super(...e),n(this,"IsOpen",_,this)}onLoad(){super.onLoad()}start(){}open(){let e=this.node.eulerAngles,t=r(e.x,e.y,90);a(this.node).to(.3,{eulerAngles:t}).call((()=>{c.Instance.updateTask(u.打开煤气灶烧水)})).delay(1).call((()=>{this.node.getChildByName("selected").active=!1,this.getComponent(i).group=p.DEFAULT,this.noramlNodes.forEach((e=>{e.layer=1<<30}))})).start()}close(){let e=this.node.eulerAngles,t=r(e.x,e.y,90);a(this.node).to(.3,{eulerAngles:t}).start()}Interact(){c.Instance.lookAtItem===this.node&&this.close()}OpenFire(){c.Instance.lookAtItem===this.node&&this.open()}CloseFire(){c.Instance.lookAtItem===this.node&&this.close()}addListener(){}removeListener(){}onDestroy(){}}).prototype,"IsOpen",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=T))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_LightSwitch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_ItemBase.ts","./TKJWL_DataManager.ts"],(function(t){var e,i,n,s,o,h,a,r,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Node,o=t._decorator},function(t){h=t.EventManager},function(t){a=t.TKJWL_GameEvents},function(t){r=t.TKJWL_ItemBase},function(t){L=t.TKJWL_DataManager}],execute:function(){var c,l,g,p,u;n._RF.push({},"8ff5bRyKQtFwpQAYAXywgC6","TKJWL_LightSwitch",void 0);const{ccclass:d,property:_}=o;t("TKJWL_LightSwitch",(c=d("TKJWL_LightSwitch"),l=_(s),c((u=e((p=class extends r{constructor(...t){super(...t),i(this,"lightNode",u,this),this.isLightOpen=!1}onLoad(){super.onLoad()}start(){}onLookAt(){super.onLookAt(),this.node.getChildByName("normal").active=!1}onCanelLookAt(){super.onCanelLookAt(),this.node.getChildByName("normal").active=!0}closeLight(t){if(t){this.node.name.split("_")[2]==t.toString()&&(this.lightNode.active=!1,this.isLightOpen=!1)}else this.lightNode.active=!1,this.isLightOpen=!1}openLight(t){if(t){this.node.name.split("_")[2]==t.toString()&&(this.lightNode.active=!0,this.isLightOpen=!0)}else this.lightNode.active=!0,this.isLightOpen=!0}Interact(){L.Instance.lookAtItem===this.node&&(this.isLightOpen?this.closeLight():this.openLight())}addListener(){h.on(a.OPEN_LIGHT,this.openLight,this),h.on(a.CLOSE_LIGHT,this.closeLight,this)}removeListener(){h.off(a.OPEN_LIGHT,this.openLight,this),h.off(a.CLOSE_LIGHT,this.closeLight,this)}onDestroy(){this.removeListener()}}).prototype,"lightNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=p))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_MonsterController1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_Waypoint.ts","./TKJWL_PathManager.ts","./TKJWL_DataManager.ts","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_Door.ts","./TKJWL_PHY_GROUP.ts"],(function(t){var i,e,s,n,o,h,a,r,l,c,d,P,p,u,g,y,I,C,f,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Node,o=t._decorator,h=t.Component,a=t.RigidBody,r=t.SkeletalAnimation,l=t.Collider,c=t.geometry,d=t.PhysicsSystem,P=t.Vec3,p=t.v3},function(t){u=t.TKJWL_Waypoint},function(t){g=t.TKJWL_PathManager},function(t){y=t.TKJWL_DataManager},function(t){I=t.EventManager},function(t){C=t.TKJWL_GameEvents},function(t){f=t.TKJWL_Door},function(t){_=t.TKJWL_Physics_Group}],execute:function(){var W,m,L,E,w;s._RF.push({},"812d0jOTzJOz5TcDhaKexhj","TKJWL_MonsterController1",void 0);const{ccclass:T,property:R}=o;t("TKJWL_MonsterController1",(W=T("TKJWL_MonsterController1"),m=R(n),W((w=i((E=class extends h{constructor(...t){super(...t),e(this,"core",w,this),this.detectionRange=1e3,this.speed=0,this.chaseSpeed=3,this.normalSpeed=3,this.waypointReachDistance=.5,this.floorHeight=3,this.currentWaypoint=null,this.targetWaypoint=null,this.allWaypoints=[],this.currentPath=[],this.currentPosPath=[],this.currentPathIndex=0,this.isChasing=!1,this.isProcessingPath=!1,this.currentDoor=null,this.rigidBody=null,this.pathUpdateInterval=1,this.lastPathUpdateTime=0,this.lastPoint=void 0,this.spine=null,this.collider=null,this.doorChecker=null,this.initWorldPos=null,this.initRotationFromEuler=null,this.isContactPlayer=!1,this.startPlotLogic=!1,this.isOpeningDoor=!1,this.isIdle=!1,this.needCheckPlayer=!1,this.isFinding=!1,this.isRun=!0,this.pathEndCb=null}onLoad(){this.addListener(),this.rigidBody=this.getComponent(a),this.rigidBody||(this.rigidBody=this.addComponent(a),this.rigidBody.type=a.Type.DYNAMIC,this.rigidBody.useGravity=!0),this.spine||(this.spine=this.getComponent(r)),this.collider||(this.collider=this.getComponent(l)),this.doorChecker||(this.doorChecker=this.node.getChildByName("doorChecker").getComponent(l)),this.initWorldPos||(this.initWorldPos=this.node.worldPosition.clone()),this.initRotationFromEuler||(this.initRotationFromEuler=this.node.eulerAngles.clone()),this.node.active=!1}start(){}resetMonster(){g.instance.reset(),this.startPlotLogic=!1,this.isOpeningDoor=!1,this.currentPath=[],this.currentPosPath=[],this.currentPathIndex=0,this.targetWaypoint=null,this.currentWaypoint=this.node.getComponent(u),this.isChasing=!1,this.isContactPlayer=!1,this.currentDoor=null,this.lastPathUpdateTime=0,this.openCollider(),this.spine&&this.spine.crossFade("walk",.2)}clearMonster(){this.closeCollider(),this.isContactPlayer=!1}hideMonsterPlot(t){t==this.node.name.split("_")[1]&&(this.node.active=!1)}setMonsterPlot(){if(y.Instance.plotNum.toString()===this.node.name.split("_")[1]){switch(this.resetMonster(),y.Instance.plotNum){case 999:y.Instance.hideAllPath(),y.Instance.showPath(y.Instance.path_plot999),this.setPath(y.Instance.path_plot999);let t=()=>{this.rigidBody.setLinearVelocity(p(0,0,0));const t=this.spine.getState("idle");null!=t&&t.isPlaying||this.spine.crossFade("idle",.2)};this.pathEndCb=()=>{t(),this.node.active=!1,y.Instance.plotNum=0};break;case 1:case 2:y.Instance.hideAllPath(),y.Instance.showPath(y.Instance.waypoints_plot1),this.allWaypoints=y.Instance.waypoints_plot1;break;case 3:y.Instance.hideAllPath(),this.isRun=!1,y.Instance.showPath(y.Instance.paths_plot3[0]),this.needCheckPlayer=!0,this.setPath(y.Instance.paths_plot3[0]);let i=()=>{this.rigidBody.setLinearVelocity(p(0,0,0));const t=this.spine.getState("idle");null!=t&&t.isPlaying||this.spine.crossFade("idle",.2)};this.pathEndCb=()=>{this.needCheckPlayer=!0,i(),y.Instance.hideAllPath(),this.isRun=!1,y.Instance.showPath(y.Instance.paths_plot3[1]),this.setPath(y.Instance.paths_plot3[1]),this.isIdle=!0,this.scheduleOnce((()=>{this.isIdle=!1}),1),this.pathEndCb=()=>{this.needCheckPlayer=!0,i(),y.Instance.hideAllPath(),this.isRun=!1,y.Instance.showPath(y.Instance.paths_plot3[2]),this.setPath(y.Instance.paths_plot3[2]),this.isIdle=!0,this.scheduleOnce((()=>{this.isIdle=!1}),2),this.pathEndCb=()=>{this.needCheckPlayer=!1,i(),y.Instance.hideAllPath(),this.isRun=!1,y.Instance.showPath(y.Instance.paths_plot3[3]),this.setPath(y.Instance.paths_plot3[3]),this.isIdle=!0,this.scheduleOnce((()=>{this.isIdle=!1}),.2),this.pathEndCb=()=>{this.needCheckPlayer=!1,i(),y.Instance.hideAllPath(),this.isRun=!1,y.Instance.showPath(y.Instance.paths_plot3[4]),this.setPath(y.Instance.paths_plot3[4]),this.isIdle=!0,this.scheduleOnce((()=>{this.isIdle=!1}),2),this.pathEndCb=()=>{this.needCheckPlayer=!0,i(),y.Instance.hideAllPath(),this.isRun=!1,y.Instance.showPath(y.Instance.paths_plot3[5]),this.setPath(y.Instance.paths_plot3[5]),this.isIdle=!0,this.scheduleOnce((()=>{this.isIdle=!1}),1),this.pathEndCb=()=>{i(),this.isIdle=!0}}}}}};break;case 4:this.allWaypoints=y.Instance.waypoints_plot4,this.setPath(y.Instance.waypoints_plot4);let e=()=>{this.rigidBody.setLinearVelocity(p(0,0,0));const t=this.spine.getState("idle");null!=t&&t.isPlaying||this.spine.crossFade("idle",.2)};this.pathEndCb=()=>{this.needCheckPlayer=!0,e(),this.isIdle=!0}}this.startPlotLogic=!0,this.node.active=!0}}openCollider(){this.collider.on("onCollisionEnter",this.onColliderContact,this),this.doorChecker.on("onTriggerEnter",this.onTriggerEnter,this)}closeCollider(){this.collider.off("onCollisionEnter",this.onColliderContact,this),this.doorChecker.off("onTriggerEnter",this.onTriggerEnter,this)}onTriggerEnter(t){const i=t.otherCollider.node.getComponent(f);i&&!i.isOpening&&(i.openDoor(),this.isOpeningDoor=!0,this.isOpeningDoor=!1)}onColliderContact(t){if(!y.Instance.isGameStart)return;if("Player"==t.otherCollider.node.name){const i=t.otherCollider.node.worldPosition.clone().subtract(this.node.worldPosition).normalize(),e=180*Math.atan2(i.x,i.z)/Math.PI;this.node.setRotationFromEuler(0,e,0),this.isContactPlayer=!0;const s=this.spine.getState("attack");null!=s&&s.isPlaying||this.spine.crossFade("attack",.2),y.Instance.isFail=!0,y.Instance.isGameStart=!1,I.Scene.emit(C.UI_SHOW_END_PANEL)}}update(t){if(y.Instance.isGameStart&&y.Instance.playerNode&&this.startPlotLogic&&!this.isOpeningDoor)switch(y.Instance.plotNum){case 999:this.plot_Logic(t);break;case 1:this.plot_1Logic(t);break;case 2:this.plot_2Logic(t);break;case 3:this.plot_3Logic(t);break;case 4:this.plot_4Logic(t)}}plot_Logic(t){if(this.isContactPlayer)return;if(this.isIdle)return;const i=this.spine.getState("run");null!=i&&i.isPlaying||this.spine.crossFade("run",.2),this.currentPath.length>0&&(this.speed=19,this.moveAlongPath(t))}plot_1Logic(t){this.isContactPlayer||(this.checkPlayerInRange(t),this.isChasing&&this.currentPath.length>0&&(this.speed=12,this.moveAlongPath(t)))}plot_2Logic(t){this.isContactPlayer||(this.checkPlayerInRange(t),this.isChasing&&this.currentPath.length>0&&(this.speed=10,this.moveAlongPath(t)))}plot_3Logic(t){if(!this.isContactPlayer&&(this.needCheckPlayer&&("area_5"!=y.Instance.currentArea&&"area_6"!=y.Instance.currentArea||(this.allWaypoints=y.Instance.paths_plot3.find,this.checkPlayerInRange(t),this.pathEndCb=null,this.isIdle=!1,this.isFinding=!0)),!this.isIdle)){if(this.isRun){const t=this.spine.getState("run");null!=t&&t.isPlaying||this.spine.crossFade("run",.2)}else{const t=this.spine.getState("walk");null!=t&&t.isPlaying||this.spine.crossFade("walk",.2)}if(this.isFinding){const i=this.spine.getState("run");null!=i&&i.isPlaying||this.spine.crossFade("run",.2),this.isChasing&&this.currentPath.length>0&&(this.speed=12,this.moveAlongPath(t))}else this.currentPath.length>0&&(this.speed=6,this.moveAlongPath(t))}}plot_4Logic(t){if(this.isContactPlayer)return;if(this.needCheckPlayer&&(this.checkPlayerInRange(t),this.isIdle=!1,this.isFinding=!0),this.isIdle)return;const i=this.spine.getState("walk");null!=i&&i.isPlaying||this.spine.crossFade("walk",.2),this.isFinding?this.isChasing&&this.currentPath.length>0&&(this.speed=3,this.moveAlongPath(t)):this.currentPath.length>0&&(this.speed=3,this.moveAlongPath(t))}checkPlayerInRange(t){if(!y.Instance.playerNode)return;const i=this.spine.getState("run");null!=i&&i.isPlaying||this.spine.crossFade("run",.2),this.isChasing?(this.lastPathUpdateTime+=t,this.lastPathUpdateTime>=this.pathUpdateInterval&&!this.isProcessingPath&&(this.updateChasePath(),this.lastPathUpdateTime=0)):(this.isChasing=!0,this.updateChasePath(),this.lastPathUpdateTime=0)}updateChasePath(){if(!y.Instance.playerNode||!this.currentWaypoint||this.isProcessingPath)return;this.isProcessingPath=!0,this.currentWaypoint.connectedWaypoints=[];const t=this.findNearestWaypointToPosition(y.Instance.playerNode.worldPosition),i=y.Instance.playerNode.getComponent(u);let e=new c.Ray;c.Ray.fromPoints(e,this.core.getWorldPosition(),y.Instance.playerNode.getChildByName("Node").getWorldPosition());const s=_.DEFAULT;if(d.instance.raycastClosest(e,s)){if(d.instance.raycastClosestResult.collider.node==y.Instance.playerNode&&t)return void(i?this.onPathFound([i],!0):this.onPathFound([t],!0))}this.allWaypoints.sort(((t,i)=>P.distance(t.node.getWorldPosition(),this.core.getWorldPosition())-P.distance(i.node.getWorldPosition(),this.core.getWorldPosition())));let n=0;for(let t=0;t<this.allWaypoints.length;t++){const i=this.allWaypoints[t];if(this.lastPoint==i)continue;if(P.distance(i.node.getWorldPosition(),this.core.getWorldPosition())<this.waypointReachDistance)continue;let e=Math.abs(i.node.getWorldPosition().y-this.core.getWorldPosition().y);if("Cube-006"==i.node.name&&console.log(`Cube${e}`),e>1.5)continue;let s=new c.Ray;c.Ray.fromPoints(s,this.core.getWorldPosition(),i.node.getWorldPosition());const o=_.DEFAULT;if(d.instance.raycastClosest(s,o)){if(d.instance.raycastClosestResult.collider.node==i.node&&(this.currentWaypoint.connectedWaypoints.push(i.getComponent(u)),n++,n>=2))break}}t?g.instance.requestPath(this.currentWaypoint,t,((t,i)=>this.onPathFound(t,i))):this.onPathFound(null,!1)}setPath(t){const i=this.core.worldPosition.clone();let e=0,s=Number.MAX_VALUE;if(t.forEach(((t,n)=>{const o=P.distance(i,t.node.worldPosition);o<s&&n>=this.currentPathIndex&&(s=o,e=n)})),this.currentPath.length>0&&this.currentPathIndex>0){const i=this.currentPath[this.currentPathIndex],s=t.findIndex((t=>t===i));-1!==s&&s>=e&&(e=s)}if(this.currentPath=[...t],this.currentPosPath=this.currentPath.map((t=>t.node.worldPosition.clone())),this.currentPathIndex=0,this.currentPath.length>0?this.targetWaypoint=this.currentPath[0]:this.targetWaypoint=null,e>0&&this.currentPath.length>0){P.distance(i,this.currentPosPath[0])<this.waypointReachDistance&&(this.currentPathIndex=1,this.targetWaypoint=this.currentPath.length>1?this.currentPath[1]:null)}}onPathFound(t,i){if(this.isProcessingPath=!1,i&&t&&t.length>0){const i=y.Instance.playerNode.getComponent(u);i&&!t.includes(i)&&(t=[...t,i]);const e=this.core.worldPosition.clone();let s=0,n=Number.MAX_VALUE;if(t.forEach(((t,i)=>{const o=P.distance(e,t.node.worldPosition);o<n&&i>=this.currentPathIndex&&(n=o,s=i)})),this.currentPath.length>0&&this.currentPathIndex>0){const i=this.currentPath[this.currentPathIndex],e=t.findIndex((t=>t===i));-1!==e&&e>=s&&(s=e)}if(this.currentPath=[...t],this.currentPosPath=this.currentPath.map((t=>t.node.worldPosition.clone())),this.currentPathIndex=0,this.currentPath.length>0?this.targetWaypoint=this.currentPath[0]:this.targetWaypoint=null,s>0&&this.currentPath.length>0){P.distance(e,this.currentPosPath[0])<this.waypointReachDistance&&(this.currentPathIndex=1,this.targetWaypoint=this.currentPath.length>1?this.currentPath[1]:null)}}}moveAlongPath(t){if(!this.rigidBody)return;let i=p();this.rigidBody.getLinearVelocity(i);let e=i.y;if(this.currentPathIndex>=this.currentPath.length)return this.currentPath=[],this.currentPosPath=[],this.targetWaypoint=null,this.rigidBody.setLinearVelocity(p(0,e)),void(this.pathEndCb&&this.pathEndCb());const s=this.currentPath[this.currentPathIndex],n=this.currentPosPath[this.currentPathIndex],o=n.clone().subtract(this.core.worldPosition).normalize(),h=this.speed;let a=o.multiplyScalar(h);a.y=e,this.rigidBody.setLinearVelocity(a);const r=180*Math.atan2(o.x,o.z)/Math.PI;this.node.setRotationFromEuler(0,r,0);P.distance(this.core.worldPosition,n)<=this.waypointReachDistance&&(this.currentPathIndex++,this.lastPoint=s,this.targetWaypoint=this.currentPathIndex<this.currentPath.length?this.currentPath[this.currentPathIndex]:null)}handleDoorInteraction(){if(this.currentDoor)return void(this.currentDoor.isOpening&&(this.currentDoor=null));let t=this.core.worldPosition.clone();t.y+=.5;let i=this.node.forward.clone();const e=c.Ray.create(t.x,t.y,t.z,i.x,i.y,-i.z);if(d.instance.raycastClosest(e,null,2,!0)){const t=d.instance.raycastClosestResult.collider.getComponent(f);if(t&&!t.isOpening){this.currentDoor=t,this.rigidBody&&this.rigidBody.setLinearVelocity(P.ZERO);const i=this.spine.getState("run");null!=i&&i.isPlaying||this.spine.crossFade("pu",.2),t.openDoor(),this.isOpeningDoor=!0,this.isOpeningDoor=!1}}}findNearestWaypoint(){if(0===this.allWaypoints.length)return;let t=null,i=Number.MAX_VALUE;this.allWaypoints.forEach((e=>{const s=P.distance(this.core.worldPosition,e.node.worldPosition);s<i&&(t=e,i=s)})),this.currentWaypoint=t}findNearestWaypointToPosition(t){if(0===this.allWaypoints.length)return null;let i=null,e=Number.MAX_VALUE;return this.allWaypoints.forEach((s=>{const n=P.distance(t,s.node.worldPosition);n<e&&(i=s,e=n)})),i}findNearestStairway(t){const i=this.allWaypoints.filter((i=>i.isStair&&i.floor===t));if(0===i.length)return null;let e=null,s=Number.MAX_VALUE;return i.forEach((t=>{const i=P.distance(this.core.worldPosition,t.node.worldPosition);i<s&&(e=t,s=i)})),e}addListener(){I.on(C.HIDE_MONSTER_POLT,this.hideMonsterPlot,this),I.on(C.SET_MONSTER_POLT,this.setMonsterPlot,this)}removeListener(){I.off(C.HIDE_MONSTER_POLT,this.hideMonsterPlot,this),I.off(C.SET_MONSTER_POLT,this.setMonsterPlot,this)}onDestroy(){this.removeListener()}}).prototype,"core",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=E))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_PathManager.ts",["cc","./TKJWL_AStar.ts","./TKJWL_BinaryHeap.ts"],(function(t){var e,s,n,a,r,i,h;return{setters:[function(t){e=t.cclegacy,s=t._decorator,n=t.Component,a=t.Vec3},function(t){r=t.TKJWL_AStar,i=t.TKJWL_AStarNode},function(t){h=t.TKJWL_BinaryHeap}],execute:function(){var o,c;e._RF.push({},"9eedfD1wYpKcocZ3lRoQhxe","TKJWL_PathManager",void 0);const{ccclass:u,property:p}=s;t("TKJWL_PathManager",u("TKJWL_PathManager")(((c=class t extends n{constructor(...t){super(...t),this.aStar=new r,this.pathRequests=[],this.currentPathRequest=null,this.isProcessingPath=!1,this.maxStepsPerFrame=5,this.currentStep=0,this.currentAStarState=null}onLoad(){t.instance=this}reset(){this.pathRequests=[],this.currentPathRequest=null,this.currentAStarState=null,this.isProcessingPath=!1,this.unschedule(this.processPathStep),this.unschedule(this.aa)}requestPath(t,e,s){this.pathRequests=this.pathRequests.filter((s=>!(s.start===t&&s.end===e)));const n=this.pathRequests.length-1;if(n>=0){const s=this.pathRequests[n];if(s.start===t&&s.end===e)return}const a={start:t,end:e,callback:s};this.pathRequests.push(a),this.tryProcessNext()}tryProcessNext(){!this.isProcessingPath&&this.pathRequests.length>0&&(this.currentPathRequest=this.pathRequests.shift(),this.isProcessingPath=!0,this.currentStep=0,this.scheduleOnce(this.processPathStep,0))}processPathStep(){if(this.unschedule(this.aa),!this.currentPathRequest)return this.isProcessingPath=!1,void(this.currentAStarState=null);if(!this.currentAStarState){const t=new h,e=new Set,s=new Map,n=new i(this.currentPathRequest.start),a=new i(this.currentPathRequest.end);s.set(this.currentPathRequest.start,n),t.push(n),this.currentAStarState={openSet:t,closedSet:e,nodeMap:s,startNode:n,endNode:a}}const{openSet:t,closedSet:e,nodeMap:s,startNode:n,endNode:r}=this.currentAStarState;let o=0,c=null,u=!1;for(;t.count>0&&o<this.maxStepsPerFrame;){const h=t.pop();if(!h)break;if(e.add(h.waypoint),h.waypoint===r.waypoint){c=this.retracePath(n,h),u=!0;break}h.waypoint.connectedWaypoints.forEach((n=>{if(!n||e.has(n))return;const o=h.gCost+a.distance(h.waypoint.node.worldPosition,n.node.worldPosition);let c=s.get(n);c||(c=new i(n),s.set(n,c)),(o<c.gCost||!t.contains(c))&&(c.gCost=o,c.hCost=a.distance(n.node.worldPosition,r.waypoint.node.worldPosition),c.parent=h,t.contains(c)?t.updateNode(c):t.push(c))})),o++}u||0===t.count&&!u?(u&&c.shift(),this.currentPathRequest.callback(c,u),this.currentPathRequest=null,this.currentAStarState=null,this.isProcessingPath=!1,this.tryProcessNext()):(console.log("未完成：下一帧继续处理"),this.scheduleOnce(this.aa,0))}aa(){this.processPathStep()}retracePath(t,e){const s=[];let n=e;for(;n!==t&&n;)s.push(n.waypoint),n=n.parent;return s.push(t.waypoint),s.reverse(),s}}).instance=void 0,o=c))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_PHY_GROUP.ts",["cc"],(function(t){var _;return{setters:[function(t){_=t.cclegacy}],execute:function(){_._RF.push({},"3f89b7kEihEWqK+l8mw3iuv","TKJWL_PHY_GROUP",void 0);t("TKJWL_Physics_Group",function(t){return t[t.DEFAULT=1]="DEFAULT",t[t.ITEM=2]="ITEM",t[t.IGNORE_RAY=4]="IGNORE_RAY",t[t.KILL_AREA=8]="KILL_AREA",t[t.AREA=1024]="AREA",t}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_CameraController.ts","./TKJWL_GameEvents.ts","./EventManager.ts"],(function(e){var t,i,o,n,r,l,s,a,h,c,d,u,g,y,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e.v3,r=e.Node,l=e._decorator,s=e.Component,a=e.RigidBody,h=e.Camera,c=e.geometry,d=e.CapsuleCollider,u=e.math,g=e.Vec3},function(e){y=e.TKJWL_CameraController},function(e){p=e.TKJWL_GameEvents},function(e){m=e.EventManager}],execute:function(){var C,E,M,_,T,f,b,v,O,A,L;o._RF.push({},"1323enXAuxCNorXJHBP2IvY","TKJWL_Player",void 0);const{ccclass:N,property:x}=l,V=n(),R=n();e("TKJWL_Player",(C=N("TKJWL_Player"),E=x(),M=x(r),_=x(r),T=x(r),C((v=t((b=class extends s{constructor(...e){super(...e),i(this,"jumpVelocity",v,this),i(this,"WeaponNode",O,this),i(this,"DetectorNode",A,this),i(this,"modelMonster",L,this),this.velocityScale=1,this.speed=6,this.rigidbody=null,this.camera=null,this.cameraController=null,this.EquipmentAnimation=null,this._birdNd=null,this._remoteNd=null,this._isInTheAir=!1,this.Carrier=null,this._isMoving=!1,this._isReload=!1,this._ray=null,this._isArplaneMode=!1,this.ArplaneModeForce=0,this.AtkScale=1,this.EquipmentId=-1,this.defaultEquipmentId=0,this.gun=null}onLoad(){this.cameraController=this.node.getChildByName("Camera").getComponent(y),this.rigidbody=this.node.getComponent(a),this.camera=this.node.getChildByName("Camera").getComponent(h),this._ray=new c.Ray}start(){let e=this.node.getComponent(d);e.on("onCollisionEnter",this.onCollisionEnter,this),e.on("onCollisionExit",this.onCollisionExit,this),e.on("onTriggerEnter",this.onTriggerEnter,this),e.on("onTriggerExit",this.onTriggerExit,this),this.BeginMonitor()}BeginMonitor(){m.on(p.INTERACT,this.OnInteract,this),m.on(p.MOVEMENT,this.OnMove,this),m.on(p.MOVEMENT_STOP,this.OnStopMove,this)}ExitReMonitor(){m.off(p.INTERACT,this.OnInteract,this),m.off(p.MOVEMENT,this.OnMove,this),m.off(p.MOVEMENT_STOP,this.OnStopMove,this)}onCollisionEnter(e){e.otherCollider.node.name}onCollisionExit(e){}onTriggerEnter(e){}onTriggerExit(e){}OnInteract(e){}OnRotate(e,t){let i=this.cameraController.node.eulerAngles;this.cameraController.SetTargetAngle(u.clamp(i.x+20*e,-80,80),i.y+20*t,i.z)}OnMove(e,t,i){this.velocityScale=1;let o=n(e,0,-t).normalize(),r=g.angle(g.FORWARD,n(this.cameraController.node.forward.x,0,this.cameraController.node.forward.z).normalize());this.cameraController.node.eulerAngles.y<0&&(r=this.cameraController.node.eulerAngles.y%360>=-180?-r:r),this.cameraController.node.eulerAngles.y>0&&(r=this.cameraController.node.eulerAngles.y%360>=180?-r:r),g.rotateY(R,o,g.ZERO,r),R.multiplyScalar(this.speed),this._isMoving=!0,this._isArplaneMode}OnStopMove(){this._isMoving=!1,R.set(g.ZERO)}OnJump(){this._isInTheAir||(this.rigidbody.getLinearVelocity(V),V.y=this.jumpVelocity,this.rigidbody.setLinearVelocity(V))}update(e){this._isMoving?(R.multiplyScalar(this.velocityScale),this.rigidbody.getLinearVelocity(V),R.y=V.y,this.rigidbody.setLinearVelocity(R)):(this.rigidbody.getLinearVelocity(R),R.set(u.lerp(R.x,0,.1),R.y,u.lerp(R.z,0,.1)),this.rigidbody.setLinearVelocity(R)),this._isArplaneMode&&this.rigidbody.setLinearVelocity(n(R.x,this.ArplaneModeForce,R.z))}onDestroy(){this.ExitReMonitor()}}).prototype,"jumpVelocity",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),O=t(b.prototype,"WeaponNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(b.prototype,"DetectorNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(b.prototype,"modelMonster",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TKJWL_PHY_GROUP.ts","./TKJWL_GameEvents.ts","./TKJWL_DataManager.ts","./TKJWL_AudioManager.ts"],(function(e){var t,i,n,o,s,a,r,l,c,h,d,m,I,y,u,C,g,p,E,_,f,P,T,v,L,W;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Node,s=e.Camera,a=e._decorator,r=e.Component,l=e.geometry,c=e.Vec3,h=e.v3,d=e.Collider,m=e.RigidBody,I=e.CapsuleCollider,y=e.input,u=e.Input,C=e.tween,g=e.KeyCode,p=e.clamp,E=e.PhysicsSystem,_=e.BoxCollider,f=e.physics},function(e){P=e.EventManager},function(e){T=e.TKJWL_Physics_Group},function(e){v=e.TKJWL_GameEvents},function(e){L=e.TKJWL_DataManager},function(e){W=e.TKJWL_AudioManager}],execute:function(){var A,M,R,O,D,H,w,K,S,b,x,z,k;n._RF.push({},"f3f0aflALZBS6EfLSOGYXby","TKJWL_PlayerController",void 0);const{ccclass:Y,property:U}=a;e("TKJWL_PlayerController",(A=Y("TKJWL_PlayerController"),M=U(o),R=U(o),O=U(o),D=U(s),H=U(o),A((S=t((K=class extends r{constructor(...e){super(...e),i(this,"point",S,this),i(this,"core",b,this),i(this,"outLineCameras",x,this),i(this,"UICamera",z,this),i(this,"holdOnItemContainer",k,this),this.normalSpeed=5,this.speed=0,this.rig=void 0,this.camera=void 0,this.cameraRay=null,this.isDead=!1,this.isWin=!1,this.lastHouse=null,this.lastCameraPos=null,this.lastCameraWorldPos=null,this.collider=null,this.initWorldPos=null,this.initCameraRoation=null,this.ray=new l.Ray,this.v=new c}onLoad(){this.addListener(),this.initCameraRoation||(this.initCameraRoation=h(this.node.children[0].eulerAngles.clone())),this.collider||(this.collider=this.getComponent(d)),this.initWorldPos||(this.initWorldPos=this.node.worldPosition.clone()),this.camera=this.node.getChildByName("camera").getComponent(s),this.rig=this.node.getComponent(m),this.cameraRay=new l.Ray,L.Instance.playerNode=this.node}start(){this.outLineCameras.active=!1,this.rig.useCCD=!0,this.lastCameraPos=this.camera.node.position,this.lastCameraWorldPos=this.camera.node.getWorldPosition();let e=this.node.getComponent(I);e.on("onTriggerEnter",this.onTriggerEnter,this),e.on("onTriggerExit",this.onTriggerExit,this),y.on(u.EventType.KEY_DOWN,this.onKeyDown,this),y.on(u.EventType.KEY_UP,this.onKeyUp,this),this.onHideHoldonItem()}openCollider(){this.collider.on("onCollisionEnter",this.onColliderContact,this)}closeCollider(){this.collider.off("onCollisionEnter",this.onColliderContact,this)}resetPlayer(){L.Instance.isFail=!1,this.isDead=!1,this.isWin=!1,this.node.setWorldPosition(this.initWorldPos),this.node.children[0].setRotationFromEuler(this.initCameraRoation),this.rig&&(this.rig.setLinearVelocity(c.ZERO),this.rig.setAngularVelocity(c.ZERO),this.rig.enabled=!0),this.openCollider(),L.Instance.isMove=!1}clearPlayer(){this.setPlayerDead()}onColliderContact(e){"monster"==e.otherCollider.node.name.split("_")[0]&&W.getInstance().playSound("惨叫")}setPlayerDead(){L.Instance.isMove=!1,L.Instance.isFail=!0,this.isDead=!0,this.rig.enabled=!1,this.collider.off("onTriggerEnter",this.onTriggerEnter,this),this.collider.off("onTriggerExit",this.onTriggerExit,this),y.off(u.EventType.KEY_DOWN,this.onKeyDown,this),y.off(u.EventType.KEY_UP,this.onKeyUp,this),C(this.node).delay(.2).call((()=>{this.closeCollider(),P.Scene.emit(v.GAME_OVER)})).start()}onKeyDown(e){switch(L.Instance.delta=h(0,0,0),e.keyCode){case g.KEY_A:L.Instance.isMove=!0,L.Instance.delta=h(-10,L.Instance.delta.y,L.Instance.delta.z);break;case g.KEY_W:L.Instance.isMove=!0,L.Instance.delta=h(L.Instance.delta.x,10,L.Instance.delta.z);break;case g.KEY_S:L.Instance.isMove=!0,L.Instance.delta=h(L.Instance.delta.x,-10,L.Instance.delta.z);break;case g.KEY_D:L.Instance.isMove=!0,L.Instance.delta=h(10,L.Instance.delta.y,L.Instance.delta.z)}}onKeyUp(e){switch(e.keyCode){case g.KEY_A:L.Instance.isMove=!1,L.Instance.delta=h(0,L.Instance.delta.y,L.Instance.delta.z);break;case g.KEY_W:case g.KEY_S:L.Instance.isMove=!1,L.Instance.delta=h(L.Instance.delta.x,0,L.Instance.delta.z);break;case g.KEY_D:L.Instance.isMove=!1,L.Instance.delta=h(0,L.Instance.delta.y,L.Instance.delta.z)}}onPlayerRotation(e){if(!L.Instance.isTelescopeWatching){var t=h(this.node.eulerAngles);t.add3f(e.x,e.y,0),t.x=p(t.x,-50,50),this.node.setRotationFromEuler(t)}}update(e){var t;if(L.Instance.isGameStart&&!L.Instance.isTelescopeWatching&&!this.isDead&&!this.isWin){if(this.speed=this.normalSpeed,L.Instance.isMove&&(null==(t=L.Instance.delta)?void 0:t.length())>1){let e=h();e=c.normalize(e,L.Instance.delta).multiplyScalar(this.speed);let t=h();this.rig.getLinearVelocity(t),e.x=e.x,e.z=-e.y,e.y=t.y;const i=this.node.children[0].getWorldRotation();c.transformQuat(e,e,i),e.y=0,this.rig.setLinearVelocity(e)}L.Instance.isMove&&(this.rig.useGravity=!0),L.Instance.isTelescopeWatching||L.Instance.isSitting||this.checkInteractItem()}}checkInteractItem(){const e=this.camera;if(!e)return;let t=this.ray,i=this.v;this.UICamera.worldToScreen(this.point.getWorldPosition(),i),e.screenPointToRay(i.x,i.y,t);const n=T.ITEM|T.DEFAULT;if(E.instance.raycastClosest(t,n,4,!0)){const e=E.instance.raycastClosestResult;let t=e.collider.node.getComponent(m);if(t&&t.group==T.ITEM)return this.checkLookAtItem(e.collider.node),this.outLineCameras.active=!0,void(this.camera.visibility=1<<30)}this.camera.visibility=1082130432,L.Instance.isHoldOning?this.outLineCameras.active=!0:this.outLineCameras.active=!1,this.checkLookAtItem(null),P.Scene.emit(v.SHOW_UI_ITEM,null)}checkLookAtItem(e){if(e){if(e==L.Instance.lookAtItem)return;L.Instance.lookAtItem=e}else L.Instance.lookAtItem=null;P.Scene.emit(v.UPDATE_LOOKAT_ITEM)}onShowHoldonItem(e){this.holdOnItemContainer.children.forEach((t=>{t.name==e?t.active=!0:t.active=!1}))}onHideHoldonItem(){this.holdOnItemContainer.children.forEach((e=>{e.active=!1}))}onTriggerEnter(e){}onTriggerExit(e){}hidePlayerCamera(){this.camera.node.active=!1}showPlayerCamera(){this.camera.node.active=!0}CreateItem(){let e=this.camera.node.getChildByName("createPoint"),t=L.Instance.HoldItem;const i=this.camera;if(!i)return;let n=this.ray,o=this.v;this.UICamera.worldToScreen(this.point.getWorldPosition(),o),i.screenPointToRay(o.x,o.y,n);const s=T.ITEM|T.DEFAULT,a=c.distance(this.camera.node.worldPosition,e.worldPosition);let r=e.worldPosition.clone();if(E.instance.raycastClosest(n,s,a,!0)){const e=E.instance.raycastClosestResult;let i=e.hitPoint,n=t.getComponent(_),o=Math.max(n.size.x,n.size.y,n.size.z),s=c.subtract(new c,i,this.camera.node.worldPosition);s.normalize(),c.add(r,this.camera.node.worldPosition,c.multiplyScalar(new c,s,c.distance(this.camera.node.worldPosition,i)-o-.5)),r=e.hitPoint}t.setWorldPosition(r);let l=h(t.eulerAngles);l.z=0,l.x=0,t.setRotationFromEuler(l),t.getComponent(m).type=f.ERigidBodyType.DYNAMIC,t.getComponent(m).group=T.ITEM,t.getComponent(m).useGravity=!0,t.getComponent(m).allowSleep=!1,t.getComponent(m).linearFactor=new c(1,.1,1);t.getComponent(d).on("onCollisionEnter",(e=>{console.log(e.otherCollider.node.name)}),this),t.active=!0,L.Instance.HoldItem=null,L.Instance.isHoldOning=!1,L.Instance.targetItemType=null,P.Scene.emit(v.HIDE_HOLD_ON_ITEM,t.name),P.Scene.emit(v.SHOW_UI_ITEM,null)}addListener(){P.on(v.HIDE_PLAYER_CAMERA,this.hidePlayerCamera,this),P.on(v.SHOW_PLAYER_CAMERA,this.showPlayerCamera,this),P.on(v.CAMERA_ROTATION,this.onPlayerRotation,this),P.on(v.SHOW_HOLD_ON_ITEM,this.onShowHoldonItem,this),P.on(v.HIDE_HOLD_ON_ITEM,this.onHideHoldonItem,this),P.on(v.CreateItem,this.CreateItem,this)}removeListener(){P.off(v.HIDE_PLAYER_CAMERA,this.hidePlayerCamera,this),P.off(v.SHOW_PLAYER_CAMERA,this.showPlayerCamera,this),P.off(v.CAMERA_ROTATION,this.onPlayerRotation,this),P.off(v.SHOW_HOLD_ON_ITEM,this.onShowHoldonItem,this),P.off(v.HIDE_HOLD_ON_ITEM,this.onHideHoldonItem,this),P.off(v.CreateItem,this.CreateItem,this)}onDestroy(){this.removeListener()}}).prototype,"point",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(K.prototype,"core",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(K.prototype,"outLineCameras",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(K.prototype,"UICamera",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(K.prototype,"holdOnItemContainer",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=K))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_PoliceRoom.ts",["cc","./TKJWL_RoomBase.ts"],(function(e){var t,s,i,o,n;return{setters:[function(e){t=e.cclegacy,s=e.SkeletalAnimation,i=e.tween,o=e._decorator},function(e){n=e.TKJWL_RoomBase}],execute:function(){var c;t._RF.push({},"7eee8JXDylEc6k6HHoakR0T","TKJWL_PoliceRoom",void 0);const{ccclass:l,property:a}=o;e("TKJWL_PoliceRoom",l("TKJWL_PoliceRoom")(c=class extends n{constructor(...e){super(...e),this.spine=null}onLoad(){this.spine=this.node.getChildByName("police").getComponent(s)}start(){super.start(),this.animEndCb()}animEndCb(){const e=this.spine.getState("idle");null!=e&&e.isPlaying||this.spine.crossFade("idle",.2),this.scheduleOnce((()=>{const e=this.spine.getState("run");null!=e&&e.isPlaying||(this.spine.crossFade("run",.2),i(this.node.getChildByName("police")).to(2,{worldPosition:this.node.getChildByName("targetPos").worldPosition}).start(),this.scheduleOnce((()=>{const e=this.spine.getState("idle");null!=e&&e.isPlaying||this.spine.crossFade("idle",.2)}),2))}),1)}onDestroy(){}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_RandomSnow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n,i,s,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.SpriteFrame,i=t._decorator,s=t.Component,a=t.UIOpacity,c=t.Sprite}],execute:function(){var p,l,u,h,d;r._RF.push({},"73431xG9KtOLrbRbqRvSKUC","TKJWL_RandomSnow",void 0);const{ccclass:m,property:f}=i;t("TKJWL_RandomSnow",(p=m("TKJWL_RandomSnow"),l=f(n),p((d=e((h=class extends s{constructor(...t){super(...t),o(this,"sprites",d,this)}start(){let t=this.node.getComponent(a),e=this.node.getComponent(c);this.schedule((()=>{let o=this.sprites[Math.floor(Math.random()*this.sprites.length)];e.spriteFrame=o,t.opacity=Math.floor(255*Math.random())}),.05)}}).prototype,"sprites",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=h))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_RoomBase.ts",["cc","./EventManager.ts","./TKJWL_GameEvents.ts"],(function(e){var o,t,s,n,i;return{setters:[function(e){o=e.cclegacy,t=e.Component,s=e._decorator},function(e){n=e.EventManager},function(e){i=e.TKJWL_GameEvents}],execute:function(){var a;o._RF.push({},"a5e1ft1q0hOJ45tcwswgS3M","TKJWL_RoomBase",void 0);const{ccclass:r,property:c}=s;e("TKJWL_RoomBase",r("TKJWL_RoomBase")(a=class extends t{constructor(...e){super(...e),this.collider=null}start(){this.addListener(),"room_idleMonster"==this.node.name?this.node.active=!0:this.node.active=!1}openRoom(e){e===this.node.name.split("_")[1]&&(this.node.active=!0)}CloseRoom(e){e===this.node.name.split("_")[1]&&(this.node.active=!1)}addListener(){n.on(i.OPEN_ROOM,this.openRoom,this),n.on(i.CLOSE_ROOM,this.CloseRoom,this)}removeListener(){n.off(i.OPEN_ROOM,this.openRoom,this),n.off(i.CLOSE_ROOM,this.CloseRoom,this)}onDestroy(){this.removeListener()}})||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Slider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_DataManager.ts"],(function(t){var i,n,e,o,s,r,a,h,c,l,T,_,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){e=t.cclegacy,o=t.Node,s=t._decorator,r=t.Component,a=t.UITransform,h=t.Animation,c=t.Vec3,l=t.Input},function(t){T=t.EventManager},function(t){_=t.TKJWL_GameEvents},function(t){u=t.TKJWL_DataManager}],execute:function(){var p,g,E,m,d,S,L;e._RF.push({},"e79d4IojKxBRKII6WfYbTQi","TKJWL_Slider",void 0);const{ccclass:P,property:y}=s;t("TKJWL_Slider",(p=P("TKJWL_Slider"),g=y({type:o,tooltip:"滑块容器节点"}),E=y({type:o,tooltip:"滑块按钮节点"}),p((S=i((d=class extends r{constructor(...t){super(...t),n(this,"container",S,this),n(this,"point",L,this),this._containerTrans=null,this._pointTrans=null,this._minY=0,this._maxY=0,this._isDragging=!1}onLoad(){this.addListener(),this._containerTrans=this.container.getComponent(a),this._pointTrans=this.point.getComponent(a),this.calculateMoveRange()}showTutorial(){this.node.getChildByName("tutorial").active=!0,this.node.getChildByName("tutorial").getComponent(h).play()}calculateMoveRange(){const t=this.container.worldPosition,i=this._containerTrans.height/2,n=this._pointTrans.height;this._minY=t.y-i+n/2,this._maxY=t.y+i-n/2}onTouchStart(t){this._isDragging=!0,u.Instance.isTelescopeTutorialShowed=!0,this.node.getChildByName("tutorial").active=!1}onTouchMove(t){if(!this._isDragging)return;const i=t.getUILocation(),n=this.container.worldPosition;let e=i.y;e=Math.max(this._minY,Math.min(e,this._maxY)),this.point.worldPosition=new c(n.x,e,0);const o=this.getProgress();T.Scene.emit(_.TELESCOPE_PROGRESS_CHANGED,o)}onTouchEnd(){this._isDragging=!1}setProgress(t){const i=Math.max(0,Math.min(1,t)),n=this._minY+i*(this._maxY-this._minY);this.point.worldPosition=new c(this.container.worldPosition.x,n,0),T.Scene.emit(_.TELESCOPE_PROGRESS_CHANGED,t)}getProgress(){return(this.point.worldPosition.y-this._minY)/(this._maxY-this._minY)}onProgressChanged(t){}addListener(){T.on(_.SET_TELESCOPE_PROGRESS,this.setProgress,this),T.on(_.SHOW_TELESCOPE_TUTORIAL,this.showTutorial,this),this.point.on(o.EventType.TOUCH_START,this.onTouchStart,this),this.point.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.point.on(l.EventType.TOUCH_END,this.onTouchEnd,this),this.point.on(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}removeListener(){T.off(_.SET_TELESCOPE_PROGRESS,this.setProgress,this),T.off(_.SHOW_TELESCOPE_TUTORIAL,this.showTutorial,this)}onDestroy(){this.removeListener()}}).prototype,"container",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(d.prototype,"point",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));e._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_SuccessTipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,s,i,c,r;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.Node,c=e._decorator,r=e.Component}],execute:function(){var o,a,u,l,p;s._RF.push({},"fd3e9baHH1Fmrp5YSDsyd/g","TKJWL_SuccessTipPanel",void 0);const{ccclass:T,property:d}=c;e("TKJWL_SuccessTipPanel",(o=T("TKJWL_SuccessTipPanel"),a=d(i),o((p=t((l=class extends r{constructor(...e){super(...e),n(this,"btnBack",p,this)}start(){this.btnBack.on(i.EventType.TOUCH_END,this.onBtnBackClick,this)}onBtnBackClick(){this.node.active=!1}initUI(){}registerEvents(){}unregisterEvents(){}onDestroy(){this.unregisterEvents()}}).prototype,"btnBack",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=l))||u));s._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Table.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_ItemBase.ts","./TKJWL_DataManager.ts"],(function(e){var t,i,n,s,a,r,c,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Node,a=e._decorator},function(e){r=e.EventManager},function(e){c=e.TKJWL_GameEvents},function(e){l=e.TKJWL_ItemBase},function(e){o=e.TKJWL_DataManager}],execute:function(){var u,p,I,m,h,_,f,T,b;n._RF.push({},"d73fberw5pGuLTd11bz8hJx","TKJWL_Table",void 0);const{ccclass:d,property:L}=a;e("TKJWL_Table",(u=d("TKJWL_Table"),p=L(Boolean),I=L(s),m=L(s),u((f=t((_=class extends l{constructor(...e){super(...e),i(this,"isSitTabel",f,this),i(this,"specialItem1",T,this),i(this,"specialItem2",b,this)}onLoad(){super.onLoad()}start(){}StandUp(){if(o.Instance.lookAtItem!==this.node)return;if(this.isSitTabel)return;o.Instance.isSitting=!1,o.Instance.lookAtItem=this.specialItem1;let e=this.specialItem1.name.split("_")[1];r.Scene.emit(c.SHOW_UI_ITEM,e),r.Scene.emit(c.SHOW_PLAYER_CAMERA),this.node.active=!1,this.specialItem1.active=!0}SitDown(){if(!this.isSitTabel)return;if(o.Instance.lookAtItem!==this.node)return;let e=null;e=this.specialItem1,o.Instance.isPutBeforeDumplings&&(e=this.specialItem2),o.Instance.isPutAfterDumplings&&(e=this.specialItem1),o.Instance.isSitting=!0,o.Instance.lookAtItem=e;let t=e.name.split("_")[1];r.Scene.emit(c.SHOW_UI_ITEM,t),r.Scene.emit(c.HIDE_PLAYER_CAMERA),this.specialItem1.active=!0,this.node.active=!1}update(){o.Instance.isSitting&&this.checkInteractItem()}checkInteractItem(){}addListener(){}removeListener(){}onDestroy(){}}).prototype,"isSitTabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),T=t(_.prototype,"specialItem1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(_.prototype,"specialItem2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_TaskManager.ts",["cc"],(function(a){var e,r,c;return{setters:[function(a){e=a.cclegacy,r=a.Component,c=a._decorator}],execute:function(){var s;e._RF.push({},"a1a5aGrX8dGxZxTcKr+6yOx","TKJWL_TaskManager",void 0);const{ccclass:n,property:t}=c;a("TKJWL_TaskManager",n("TKJWL_TaskManager")(s=class extends r{})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_TaskType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"69979R31p9GTaDc4TyA4JFP","TKJWL_TaskType",void 0);e("TKJWL_TaskType",function(e){return e["往锅里装水"]="去厨房往锅里装水",e["等待水装好"]="等待水装好",e["将锅放到煤气灶上"]="将锅放到煤气灶上",e["打开煤气灶烧水"]="转动旋钮，开始烧水",e["把垃圾扔进垃圾桶"]="收拾沙发旁的垃圾，把垃圾扔进垃圾桶(${}/2)",e["去楼道的垃圾管道扔掉垃圾袋"]="将蓝色垃圾袋，拿去楼道拐角的垃圾回收处扔掉(${}/2)",e["将水饺放到锅里"]="将冰箱里的水饺放到锅里",e["等待水饺煮好"]="等待水饺煮好",e["将煮好的的水饺放到餐桌上"]="将煮好的的水饺放到餐桌上",e["坐到餐桌前"]="坐到餐桌前",e["坐到餐桌前吃掉水饺"]="坐到餐桌前吃掉水饺",e["在阳台用望远镜查看情况"]="在阳台用望远镜查看情况",e["他正在向你奔来"]="他正在向你奔来，你需要存活下来",e["躲起来"]="躲起来",e["找准时机逃跑"]="找准时机逃跑",e["快跑"]="快跑",e["警察来了"]="警察来了，你安全了",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Telescope.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_ItemBase.ts","./TKJWL_DataManager.ts","./TKJWL_PHY_GROUP.ts","./TKJWL_TaskType.ts","./TKJWL_AudioManager.ts"],(function(e){var t,n,s,i,a,o,r,c,l,h,u,I,m,T,p,_,g,L,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.Node,a=e.Camera,o=e._decorator,r=e.geometry,c=e.Vec3,l=e.v3,h=e.clamp,u=e.PhysicsSystem,I=e.Color},function(e){m=e.EventManager},function(e){T=e.TKJWL_GameEvents},function(e){p=e.TKJWL_ItemBase},function(e){_=e.TKJWL_DataManager},function(e){g=e.TKJWL_Physics_Group},function(e){L=e.TKJWL_TaskType},function(e){d=e.TKJWL_AudioManager}],execute:function(){var E,W,f,y,K,R,S,A,C,P,v;s._RF.push({},"527aaHwVoVEeLXBBKjCuupi","TKJWL_Telescope",void 0);const{ccclass:O,property:H}=o;e("TKJWL_Telescope",(E=O("TKJWL_Telescope"),W=H(i),f=H(i),y=H(a),K=H(i),E((A=t((S=class extends p{constructor(...e){super(...e),this.maxDistance=-2300,n(this,"camera",A,this),n(this,"root",C,this),n(this,"UICamera",P,this),n(this,"point",v,this),this.ray=new r.Ray,this.v=new c,this.timer=0,this.checkInterval=.3}onLoad(){super.onLoad()}start(){this.camera.active=!1}onProgressChanged(e){this.camera.setPosition(0,0,this.maxDistance*e)}OnRotate(e){if(_.Instance.isTelescopeWatching){var t=l(this.root.eulerAngles);t.add3f(-e.x,e.y,0),t.x=h(t.x,-30,30),t.y=h(t.y,-50,50),this.root.setRotationFromEuler(t)}}update(){_.Instance.isTelescopeWatching&&(this.timer+=this.checkInterval,this.timer<this.checkInterval||(this.timer=0,this.checkInteractItem()))}checkInteractItem(){const e=this.camera.getComponent(a);if(!e)return;let t=this.ray,n=this.v;this.UICamera.worldToScreen(this.point.getWorldPosition(),n),e.screenPointToRay(n.x,n.y,t);const s=g.KILL_AREA;u.instance.raycastClosest(t,s,30,!1)?_.Instance.isWatchingKill=!0:_.Instance.isWatchingKill=!1}HoldItem(){if(_.Instance.lookAtItem!==this.node)return;_.Instance.isTelescopeWatching=!0,_.Instance.HoldItem=this.node;let e=this.node.name.split("_")[1];m.Scene.emit(T.SHOW_UI_ITEM_HOLD_ON,e),this.root.setRotationFromEuler(l(0,0,0)),this.camera.active=!0,m.Scene.emit(T.HIDE_PLAYER_CAMERA),_.Instance.updateTask(L.在阳台用望远镜查看情况),_.Instance.isCanKill&&d.getInstance().playLongSound("杀人"),_.Instance.Tip="拖动左边的滑块，控制远近",_.Instance.tipColor=I.WHITE,m.Scene.emit(T.UI_SHOW_TIP_PANEL)}ReleaseItem(){_.Instance.HoldItem===this.node&&(_.Instance.HoldItem=null,_.Instance.isStartKill&&_.Instance.currentTask==L.他正在向你奔来&&(m.Scene.emit(T.SHOW_TASK_TIP,_.Instance.currentTask),_.Instance.startPolt()),_.Instance.isTelescopeWatching=!1,m.Scene.emit(T.SHOW_UI_ITEM,null),this.camera.active=!1,m.Scene.emit(T.SHOW_PLAYER_CAMERA),_.Instance.isCanKill&&d.getInstance().stopLongSound())}addListener(){m.on(T.TELESCOPE_PROGRESS_CHANGED,this.onProgressChanged,this),m.on(T.CAMERA_ROTATION,this.OnRotate,this)}removeListener(){m.off(T.TELESCOPE_PROGRESS_CHANGED,this.onProgressChanged,this),m.off(T.CAMERA_ROTATION,this.OnRotate,this)}onDestroy(){}}).prototype,"camera",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(S.prototype,"root",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(S.prototype,"UICamera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(S.prototype,"point",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=S))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_TipPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_DataManager.ts"],(function(t){var i,e,n,r,l,a,s,o,p,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Label,l=t.Node,a=t._decorator,s=t.Component,o=t.UIOpacity,p=t.tween},function(t){c=t.TKJWL_DataManager}],execute:function(){var u,T,b,g,h,y,f,_,v;n._RF.push({},"ba7a3DgsFlOBLGwbBe4FjZv","TKJWL_TipPanel",void 0);const{ccclass:L,property:d}=a;t("TKJWL_TipPanel",(u=L("TKJWL_TipPanel"),T=d(r),b=d(r),g=d(l),u((f=i((y=class extends s{constructor(...t){super(...t),e(this,"lblTip",f,this),e(this,"lblTip2",_,this),e(this,"taskTip",v,this)}start(){}initUI(){this.lblTip.string=c.Instance.Tip,this.lblTip2.string=c.Instance.Tip,this.lblTip.color=c.Instance.tipColor,this.lblTip2.color=c.Instance.tipColor;let t=this.taskTip.getComponent(o);t.opacity=0,this.taskTip.active=!0,p(t).to(.2,{opacity:255}).call((()=>{})).delay(2).to(.2,{opacity:0}).start()}registerEvents(){}unregisterEvents(){}onDestroy(){this.unregisterEvents()}}).prototype,"lblTip",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(y.prototype,"lblTip2",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(y.prototype,"taskTip",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TKJWL_EndPanel.ts","./TKJWL_GameUI.ts","./EventManager.ts","./TKJWL_GameEvents.ts","./TKJWL_TipPanel.ts","./TKJWL_SuccessTipPanel.ts"],(function(e){var i,n,t,s,a,h,l,o,c,_,P;return{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){t=e.cclegacy,s=e._decorator,a=e.Component},function(e){h=e.TKJWL_EndPanel},function(e){l=e.TKJWL_GameUI},function(e){o=e.EventManager},function(e){c=e.TKJWL_GameEvents},function(e){_=e.TKJWL_TipPanel},function(e){P=e.TKJWL_SuccessTipPanel}],execute:function(){var r,I,u,E,p,d,T,U,f,S,L;t._RF.push({},"1fb1b8IZthFoJAfvekMY9ba","TKJWL_UIManager",void 0);const{ccclass:m,property:A}=s;e("TKJWL_UIManager",(r=m("TKJWL_UIManager"),I=A(l),u=A(h),E=A(_),p=A(P),r((U=i((T=class extends a{constructor(...e){super(...e),n(this,"GameUI",U,this),n(this,"endPanel",f,this),n(this,"tipPanel",S,this),n(this,"successTipPanel",L,this)}onLoad(){this.init()}init(){this.registerEvents()}showGameUI(){this.GameUI&&(this.GameUI.node.active=!0)}hideGameUI(){this.GameUI&&(this.GameUI.node.active=!1)}showEndPanel(){this.endPanel&&(this.endPanel.node.active=!0,this.endPanel.initUI())}hideEndPanel(){this.endPanel&&(this.endPanel.node.active=!1)}showTipPanel(){this.tipPanel&&(this.tipPanel.node.active=!0,this.tipPanel.initUI())}hideTipPanel(){this.tipPanel&&(this.tipPanel.node.active=!1)}showSuccessTipPanel(){this.successTipPanel&&(this.successTipPanel.node.active=!0,this.successTipPanel.initUI())}hideSuccessTipPanel(){this.successTipPanel&&(this.successTipPanel.node.active=!1)}hideAllScreens(){this.hideEndPanel(),this.hideTipPanel(),this.hideSuccessTipPanel()}registerEvents(){o.on(c.UI_HIDE_ALL_SCREENS,this.hideAllScreens,this),o.on(c.UI_SHOW_GAMEUI,this.showGameUI,this),o.on(c.UI_HIDE_GAMEUI,this.hideGameUI,this),o.on(c.UI_SHOW_END_PANEL,this.showEndPanel,this),o.on(c.UI_HIDE_END_PANEL,this.hideEndPanel,this),o.on(c.UI_SHOW_TIP_PANEL,this.showTipPanel,this),o.on(c.UI_HIDE_TIP_PANEL,this.hideTipPanel,this),o.on(c.UI_SHOW_SUCCESS_TIP_PANEL,this.showSuccessTipPanel,this),o.on(c.UI_HIDE_SUCCESS_TIP_PANEL,this.hideSuccessTipPanel,this)}unregisterEvents(){o.off(c.UI_HIDE_ALL_SCREENS,this.hideAllScreens,this),o.off(c.UI_SHOW_GAMEUI,this.showGameUI,this),o.off(c.UI_HIDE_GAMEUI,this.hideGameUI,this),o.off(c.UI_SHOW_END_PANEL,this.showEndPanel,this),o.off(c.UI_HIDE_END_PANEL,this.hideEndPanel,this),o.off(c.UI_SHOW_TIP_PANEL,this.showTipPanel,this),o.off(c.UI_HIDE_TIP_PANEL,this.hideTipPanel,this),o.off(c.UI_SHOW_SUCCESS_TIP_PANEL,this.showSuccessTipPanel,this),o.off(c.UI_HIDE_SUCCESS_TIP_PANEL,this.hideSuccessTipPanel,this)}onDestroy(){this.unregisterEvents()}}).prototype,"GameUI",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=i(T.prototype,"endPanel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(T.prototype,"tipPanel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(T.prototype,"successTipPanel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=T))||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_UIType.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"a0ac49eJSVATLoGEjnLMHlW","TKJWL_UIType",void 0);e("TKJWL_UIItemType",function(e){return e["摇杆"]="摇杆",e["交互"]="交互",e["开火"]="开火",e["关火"]="关火",e["拿起来"]="拿起来",e["放下"]="放下",e["坐下"]="坐下",e["站起来"]="站起来",e["吃"]="吃",e["进度条"]="进度条",e["滑块"]="滑块",e["望远镜遮罩"]="望远镜遮罩",e["提示"]="提示",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TKJWL_Waypoint.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,r=t._decorator,s=t.Component,c=t.Color}],execute:function(){var a,p,l,u,h,d,y,f,b,g,m,W;i._RF.push({},"fda4enOjd9CTIgxlFFeFgf1","TKJWL_Waypoint",void 0);const{ccclass:C,property:z}=r;t("TKJWL_Waypoint",(a=C("TKJWL_Waypoint"),p=z(Number),l=z(o),a((d=e((h=class t extends s{constructor(...t){super(...t),n(this,"doorId",d,this),n(this,"floor",y,this),n(this,"isStair",f,this),n(this,"connectedWaypointsNode",b,this),n(this,"stairConnectionNodes",g,this),n(this,"gizmoColor",m,this),n(this,"gizmoSize",W,this),this.connectedWaypoints=[],this.stairConnections=[]}start(){this.connectedWaypointsNode.forEach((e=>{const n=e.getComponent(t);this.connectedWaypoints.push(n)})),this.stairConnectionNodes.forEach((e=>{const n=e.getComponent(t);this.stairConnections.push(n)})),this.connectedWaypoints.forEach((e=>{e&&!e.getComponent(t).connectedWaypoints.includes(this)&&e.getComponent(t).connectedWaypoints.push(this)}))}addConnection(t){t&&!this.connectedWaypoints.includes(t)&&(this.connectedWaypoints.push(t),t.addConnection(this))}removeConnection(t){const e=this.connectedWaypoints.indexOf(t);e>-1&&(this.connectedWaypoints.splice(e,1),t.removeConnection(this))}}).prototype,"doorId",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=e(h.prototype,"floor",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=e(h.prototype,"isStair",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=e(h.prototype,"connectedWaypointsNode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=e(h.prototype,"stairConnectionNodes",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=e(h.prototype,"gizmoColor",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(1,1,0,1)}}),W=e(h.prototype,"gizmoSize",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),u=h))||u));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/47_TKJWL_Bundle', 'chunks:///_virtual/47_TKJWL_Bundle'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});